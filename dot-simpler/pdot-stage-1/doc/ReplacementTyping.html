<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="assets/resources/coqdoc.css" rel="stylesheet" type="text/css" />
<link href="assets/resources/coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="assets/resources/config.js"></script>
<script type="text/javascript" src="assets/resources/coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="https://github.com/themaplelab/dot-public/tree/master/dot-simpler">README</a>
      <a href="./indexpage.html"> Index </a>
      <a href="./toc.html"> Table of Contents </a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<h1 class="libtitle">ReplacementTyping</h1>

<div class="code">

<br/>
</div>

<div class="doc">
<a name="lab61"></a><h1 class="section">Replacement (Introduction-qp) Typing</h1>

<div class="paragraph"> </div>

 This module contains lemmas related to replacement typing
    (<span class="inlinecode">|-//</span> and <span class="inlinecode">|-//<span class="id" title="var">v</span></span>). 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Set Implicit Arguments</span>.<br/>

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">Coq.Program.Equality</span> <span class="id" title="library">List</span> <span class="id" title="library">String</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="Sequences.html#"><span class="id" title="library">Sequences</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="Definitions.html#"><span class="id" title="library">Definitions</span></a> <a class="idref" href="Binding.html#"><span class="id" title="library">Binding</span></a> <a class="idref" href="InvertibleTyping.html#"><span class="id" title="library">InvertibleTyping</span></a> <a class="idref" href="Narrowing.html#"><span class="id" title="library">Narrowing</span></a> <a class="idref" href="PreciseTyping.html#"><span class="id" title="library">PreciseTyping</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="RecordAndInertTypes.html#"><span class="id" title="library">RecordAndInertTypes</span></a> <a class="idref" href="Replacement.html#"><span class="id" title="library">Replacement</span></a> <a class="idref" href="Subenvironments.html#"><span class="id" title="library">Subenvironments</span></a> <a class="idref" href="TightTyping.html#"><span class="id" title="library">TightTyping</span></a> <a class="idref" href="Weakening.html#"><span class="id" title="library">Weakening</span></a>.<br/>

<br/>
</div>

<div class="doc">
Whereas invertible typing does replacement for singleton types in one direction,
    replacement typing does the replacment in the other direction.

<div class="paragraph"> </div>

    Note that we can't simply define this using three rules:
    1) identity from invertible typing
    2) two repl subtyping rules
    The reason is that if we did that, repl typing would necessarily apply the replacement
    in all subterms of a term, whereas we want to be able to say, for example:
    <span class="inlinecode">Г</span> <span class="inlinecode">⊢##</span> <span class="inlinecode"><span class="id" title="var">p</span>:</span> <span class="inlinecode"><span class="id" title="var">T</span></span> <br>
    <span class="inlinecode">Г</span> <span class="inlinecode">⊢//</span> <span class="inlinecode"><span class="id" title="var">p</span>:</span> <span class="inlinecode"><span class="id" title="var">U</span></span> <br>
    <span class="inlinecode"><span class="id" title="var">__________</span></span> <br>
    <span class="inlinecode">Г</span> <span class="inlinecode">⊢//</span> <span class="inlinecode"><span class="id" title="var">p</span>:</span> <span class="inlinecode"><span class="id" title="var">T</span></span> <span class="inlinecode">∧</span> <span class="inlinecode"><span class="id" title="var">U</span></span> <br>
 
<div class="paragraph"> </div>

<a name="lab62"></a><h2 class="section">Replacement Typing for Paths</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Reserved Notation</span> &quot;G '⊢//' p ':' T" (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 40, <span class="id" title="var">p</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 59).<br/>

<br/>
<span class="id" title="keyword">Inductive</span> <a name="ty_repl"><span class="id" title="inductive">ty_repl</span></a> : <a class="idref" href="Definitions.html#ctx"><span class="id" title="definition">ctx</span></a> <span class="id" title="notation">→</span> <a class="idref" href="Definitions.html#path"><span class="id" title="inductive">path</span></a> <span class="id" title="notation">→</span> <a class="idref" href="Definitions.html#typ"><span class="id" title="inductive">typ</span></a> <span class="id" title="notation">→</span> <span class="id" title="keyword">Prop</span> :=<br/>
<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢##</span> <span class="inlinecode"><span class="id" title="var">p</span>:</span> <span class="inlinecode"><span class="id" title="var">T</span></span>     <br>
    <span class="inlinecode">―――――――――――――――</span> <br>
    <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢//</span> <span class="inlinecode"><span class="id" title="var">p</span>:</span> <span class="inlinecode"><span class="id" title="var">T</span></span>     
</div>
<div class="code">
| <a name="ty_inv_r"><span class="id" title="constructor">ty_inv_r</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">G</span> <span class="id" title="var">p</span> <span class="id" title="var">T</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="InvertibleTyping.html#73b11c120860bd23cb2b9718d29e8cd0"><span class="id" title="notation">⊢##</span></a> <a class="idref" href="ReplacementTyping.html#p"><span class="id" title="variable">p</span></a><a class="idref" href="InvertibleTyping.html#73b11c120860bd23cb2b9718d29e8cd0"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#p"><span class="id" title="variable">p</span></a><a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T"><span class="id" title="variable">T</span></a><br/>
<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢//</span> <span class="inlinecode"><span class="id" title="var">p</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">T</span></span>     <br>
    <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢//</span> <span class="inlinecode"><span class="id" title="var">p</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">U</span></span>     <br>
    <span class="inlinecode">――――――――――――――――</span> <br>
    <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢//</span> <span class="inlinecode"><span class="id" title="var">p</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">T</span></span> <span class="inlinecode">∧</span> <span class="inlinecode"><span class="id" title="var">U</span></span>      
</div>
<div class="code">
| <a name="ty_and_r"><span class="id" title="constructor">ty_and_r</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">G</span> <span class="id" title="var">p</span> <span class="id" title="var">T</span> <span class="id" title="var">U</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#p"><span class="id" title="variable">p</span></a><a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#p"><span class="id" title="variable">p</span></a><a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#p"><span class="id" title="variable">p</span></a><a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="Definitions.html#7a630e21245026e1b75685a10a5ca45a"><span class="id" title="notation">∧</span></a> <a class="idref" href="ReplacementTyping.html#U"><span class="id" title="variable">U</span></a><br/>
<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢##</span> <span class="inlinecode"><span class="id" title="var">p</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">T</span>^<span class="id" title="var">p</span></span>  <br>
    <span class="inlinecode">――――――――――――――</span> <br>
    <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢##</span> <span class="inlinecode"><span class="id" title="var">p</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">μ</span>(<span class="id" title="var">T</span>)</span>      
</div>
<div class="code">
| <a name="ty_bnd_r"><span class="id" title="constructor">ty_bnd_r</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">G</span> <span class="id" title="var">p</span> <span class="id" title="var">T</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#p"><span class="id" title="variable">p</span></a><a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#open_typ_p"><span class="id" title="definition">open_typ_p</span></a> <a class="idref" href="ReplacementTyping.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="ReplacementTyping.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#p"><span class="id" title="variable">p</span></a><a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#57e8a3f1aebb1c6069654ec2f0cd7a19"><span class="id" title="notation">μ</span></a> <a class="idref" href="ReplacementTyping.html#T"><span class="id" title="variable">T</span></a><br/>
<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢//</span> <span class="inlinecode"><span class="id" title="var">p</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">T</span></span>             <br>
    <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢!</span> <span class="inlinecode"><span class="id" title="var">q</span>:</span> <span class="inlinecode"><span class="id" title="var">_</span></span> <span class="inlinecode">⪼</span> <span class="inlinecode">{<span class="id" title="var">A</span>:</span> <span class="inlinecode"><span class="id" title="var">T</span>..<span class="id" title="var">T</span>}</span>  <br>
    <span class="inlinecode">―――――――――――――――――――――――</span> <br>
    <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢//<span class="id" title="var">p</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">q.A</span></span>      
</div>
<div class="code">
| <a name="ty_sel_r"><span class="id" title="constructor">ty_sel_r</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">G</span> <span class="id" title="var">p</span> <span class="id" title="var">T</span> <span class="id" title="var">q</span> <span class="id" title="var">S</span> <span class="id" title="var">A</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#p"><span class="id" title="variable">p</span></a><a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">⊢!</span></a> <a class="idref" href="ReplacementTyping.html#q"><span class="id" title="variable">q</span></a><a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#S"><span class="id" title="variable">S</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">⪼</span></a> <a class="idref" href="Definitions.html#typ_rcd"><span class="id" title="constructor">typ_rcd</span></a> <a class="idref" href="Definitions.html#b194d02349b51cad3901d2caba34fa00"><span class="id" title="notation">{</span></a><a class="idref" href="ReplacementTyping.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="Definitions.html#b194d02349b51cad3901d2caba34fa00"><span class="id" title="notation">&gt;:</span></a> <a class="idref" href="ReplacementTyping.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="Definitions.html#b194d02349b51cad3901d2caba34fa00"><span class="id" title="notation">&lt;:</span></a> <a class="idref" href="ReplacementTyping.html#T"><span class="id" title="variable">T</span></a><a class="idref" href="Definitions.html#b194d02349b51cad3901d2caba34fa00"><span class="id" title="notation">}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#p"><span class="id" title="variable">p</span></a><a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#q"><span class="id" title="variable">q</span></a><a class="idref" href="Definitions.html#56a240108deb0dfbaeb49e48db859cf7"><span class="id" title="notation">↓</span></a><a class="idref" href="ReplacementTyping.html#A"><span class="id" title="variable">A</span></a><br/>
<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢//</span> <span class="inlinecode"><span class="id" title="var">p.a</span>:</span> <span class="inlinecode"><span class="id" title="var">T</span></span>    <br>
    <span class="inlinecode">―――――――――――――――</span> <br>
    <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢//</span> <span class="inlinecode"><span class="id" title="var">p</span>:</span> <span class="inlinecode">{<span class="id" title="var">a</span>:</span> <span class="inlinecode"><span class="id" title="var">T</span>}</span>     
</div>
<div class="code">
| <a name="ty_rcd_intro_r"><span class="id" title="constructor">ty_rcd_intro_r</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">G</span> <span class="id" title="var">p</span> <span class="id" title="var">a</span> <span class="id" title="var">T</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#p"><span class="id" title="variable">p</span></a><a class="idref" href="Definitions.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a><a class="idref" href="ReplacementTyping.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#typ_rcd"><span class="id" title="constructor">typ_rcd</span></a> <a class="idref" href="Definitions.html#18cbe8108c7275adbcbe2d488cc0d64e"><span class="id" title="notation">{</span></a> <a class="idref" href="ReplacementTyping.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="Definitions.html#18cbe8108c7275adbcbe2d488cc0d64e"><span class="id" title="notation">⦂</span></a> <a class="idref" href="ReplacementTyping.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="Definitions.html#18cbe8108c7275adbcbe2d488cc0d64e"><span class="id" title="notation">}</span></a><br/>
<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢!</span> <span class="inlinecode"><span class="id" title="var">p</span>:</span> <span class="inlinecode"><span class="id" title="var">q.type</span></span> <span class="inlinecode">⪼</span> <span class="inlinecode"><span class="id" title="var">q.type</span></span>   <br>
    <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢!!</span> <span class="inlinecode"><span class="id" title="var">q</span></span>                   <br>
    <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢//</span> <span class="inlinecode"><span class="id" title="var">r</span>:</span> <span class="inlinecode"><span class="id" title="var">μ</span>(<span class="id" title="var">T</span>)</span>             <br>
    <span class="inlinecode">――――――――――――――――――――</span>      <br>
    <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢//</span> <span class="inlinecode"><span class="id" title="var">p</span>:</span> <span class="inlinecode"><span class="id" title="var">μ</span>(<span class="id" title="var">T</span>[<span class="id" title="var">q</span>/<span class="id" title="var">p</span>])</span>      
</div>
<div class="code">
| <a name="ty_rec_qp_r"><span class="id" title="constructor">ty_rec_qp_r</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">G</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span> <span class="id" title="var">r</span> <span class="id" title="var">T</span> <span class="id" title="var">T'</span> <span class="id" title="var">U</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">⊢!</span></a> <a class="idref" href="ReplacementTyping.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">⪼</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">⊢!!</span></a> <a class="idref" href="ReplacementTyping.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#57e8a3f1aebb1c6069654ec2f0cd7a19"><span class="id" title="notation">μ</span></a> <a class="idref" href="ReplacementTyping.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#repl_typ"><span class="id" title="inductive">repl_typ</span></a> <a class="idref" href="ReplacementTyping.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="ReplacementTyping.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="ReplacementTyping.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="ReplacementTyping.html#T'"><span class="id" title="variable">T'</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#57e8a3f1aebb1c6069654ec2f0cd7a19"><span class="id" title="notation">μ</span></a> <a class="idref" href="ReplacementTyping.html#T'"><span class="id" title="variable">T'</span></a><br/>
<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢!</span> <span class="inlinecode"><span class="id" title="var">p</span>:</span> <span class="inlinecode"><span class="id" title="var">q.type</span></span> <span class="inlinecode">⪼</span> <span class="inlinecode"><span class="id" title="var">q.type</span></span>   <br>
    <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢!!</span> <span class="inlinecode"><span class="id" title="var">q</span></span>                   <br>
    <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢//</span> <span class="inlinecode"><span class="id" title="var">r</span>:</span> <span class="inlinecode"><span class="id" title="var">r'.A</span></span>             <br>
    <span class="inlinecode">――――――――――――――――――――</span>      <br>
    <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢//</span> <span class="inlinecode"><span class="id" title="var">p</span>:</span> <span class="inlinecode">(<span class="id" title="var">r'.A</span>)[<span class="id" title="var">q</span>/<span class="id" title="var">p</span>]</span>      
</div>
<div class="code">
| <a name="ty_sel_qp_r"><span class="id" title="constructor">ty_sel_qp_r</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">G</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span> <span class="id" title="var">r</span> <span class="id" title="var">r'</span> <span class="id" title="var">r''</span> <span class="id" title="var">A</span> <span class="id" title="var">U</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">⊢!</span></a> <a class="idref" href="ReplacementTyping.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">⪼</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">⊢!!</span></a> <a class="idref" href="ReplacementTyping.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#r'"><span class="id" title="variable">r'</span></a><a class="idref" href="Definitions.html#56a240108deb0dfbaeb49e48db859cf7"><span class="id" title="notation">↓</span></a><a class="idref" href="ReplacementTyping.html#A"><span class="id" title="variable">A</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#repl_typ"><span class="id" title="inductive">repl_typ</span></a> <a class="idref" href="ReplacementTyping.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="ReplacementTyping.html#p"><span class="id" title="variable">p</span></a> (<a class="idref" href="ReplacementTyping.html#r'"><span class="id" title="variable">r'</span></a><a class="idref" href="Definitions.html#56a240108deb0dfbaeb49e48db859cf7"><span class="id" title="notation">↓</span></a><a class="idref" href="ReplacementTyping.html#A"><span class="id" title="variable">A</span></a>) (<a class="idref" href="ReplacementTyping.html#r''"><span class="id" title="variable">r''</span></a><a class="idref" href="Definitions.html#56a240108deb0dfbaeb49e48db859cf7"><span class="id" title="notation">↓</span></a><a class="idref" href="ReplacementTyping.html#A"><span class="id" title="variable">A</span></a>) <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#r''"><span class="id" title="variable">r''</span></a><a class="idref" href="Definitions.html#56a240108deb0dfbaeb49e48db859cf7"><span class="id" title="notation">↓</span></a><a class="idref" href="ReplacementTyping.html#A"><span class="id" title="variable">A</span></a><br/>
<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢!</span> <span class="inlinecode"><span class="id" title="var">p</span>:</span> <span class="inlinecode"><span class="id" title="var">q.type</span></span> <span class="inlinecode">⪼</span> <span class="inlinecode"><span class="id" title="var">q.type</span></span>   <br>
    <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢!!</span> <span class="inlinecode"><span class="id" title="var">q</span></span>                   <br>
    <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢//</span> <span class="inlinecode"><span class="id" title="var">r</span>:</span> <span class="inlinecode"><span class="id" title="var">r'.type</span></span>          <br>
    <span class="inlinecode">――――――――――――――――――――</span>      <br>
    <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢//</span> <span class="inlinecode"><span class="id" title="var">p</span>:</span> <span class="inlinecode">(<span class="id" title="var">r'.type</span>)[<span class="id" title="var">q</span>/<span class="id" title="var">p</span>]</span>      
</div>
<div class="code">
| <a name="ty_sngl_qp_r"><span class="id" title="constructor">ty_sngl_qp_r</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">G</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span> <span class="id" title="var">r</span> <span class="id" title="var">r'</span> <span class="id" title="var">r''</span> <span class="id" title="var">U</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">⊢!</span></a> <a class="idref" href="ReplacementTyping.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">⪼</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">⊢!!</span></a> <a class="idref" href="ReplacementTyping.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#r'"><span class="id" title="variable">r'</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#repl_typ"><span class="id" title="inductive">repl_typ</span></a> <a class="idref" href="ReplacementTyping.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="ReplacementTyping.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#r'"><span class="id" title="variable">r'</span></a><a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#r''"><span class="id" title="variable">r''</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#r''"><span class="id" title="variable">r''</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a><br/>
<br/>
<span class="id" title="keyword">where</span> <a name="f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">&quot;</span></a>G '⊢//' p ':' T" := (<a class="idref" href="ReplacementTyping.html#ty_repl"><span class="id" title="inductive">ty_repl</span></a> <span class="id" title="var">G</span> <span class="id" title="var">p</span> <span class="id" title="var">T</span>).<br/>

<br/>
<span class="id" title="keyword">Hint Constructors</span> <a class="idref" href="ReplacementTyping.html#ty_repl"><span class="id" title="inductive">ty_repl</span></a> : <span class="id" title="var">core</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab63"></a><h3 class="section">From Replacement To Precise Typing</h3>

<div class="paragraph"> </div>

 Replacement-to-precise typing for function types:
    if <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢//</span> <span class="inlinecode"><span class="id" title="var">p</span>:</span> <span class="inlinecode"><span class="id" title="keyword">∀</span>(<span class="id" title="var">S</span>)<span class="id" title="var">T</span></span> then
<ul class="doclist">
<li> <span class="inlinecode"><span class="id" title="tactic">∃</span></span> <span class="inlinecode"><span class="id" title="var">S'</span>,</span> <span class="inlinecode"><span class="id" title="var">T'</span>.</span> <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢!!!</span> <span class="inlinecode"><span class="id" title="var">p</span>:</span> <span class="inlinecode"><span class="id" title="keyword">∀</span>(<span class="id" title="var">S'</span>)<span class="id" title="var">T'</span></span>,

</li>
<li> <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢#</span> <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode">&lt;:</span> <span class="inlinecode"><span class="id" title="var">S'</span></span>, and

</li>
<li> <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢#</span> <span class="inlinecode"><span class="id" title="var">T'</span>^<span class="id" title="var">y</span></span> <span class="inlinecode">&lt;:</span> <span class="inlinecode"><span class="id" title="var">T</span>^<span class="id" title="var">y</span></span>,

</li>
</ul>
    where <span class="inlinecode"><span class="id" title="var">y</span></span> is fresh. 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="repl_to_precise_typ_all"><span class="id" title="lemma">repl_to_precise_typ_all</span></a>: <span class="id" title="keyword">∀</span> <span class="id" title="var">G</span> <span class="id" title="var">p</span> <span class="id" title="var">S</span> <span class="id" title="var">T</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#5602fefe5ae9ac7607d0a75368b09df0"><span class="id" title="notation">∀(</span></a><a class="idref" href="ReplacementTyping.html#S"><span class="id" title="variable">S</span></a><a class="idref" href="Definitions.html#5602fefe5ae9ac7607d0a75368b09df0"><span class="id" title="notation">)</span></a> <a class="idref" href="ReplacementTyping.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<span class="id" title="notation">∃</span> <span class="id" title="var">S'</span> <span class="id" title="var">T'</span> <span class="id" title="var">L</span><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">⊢!!!</span></a> <a class="idref" href="ReplacementTyping.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#5602fefe5ae9ac7607d0a75368b09df0"><span class="id" title="notation">∀(</span></a><a class="idref" href="ReplacementTyping.html#S'"><span class="id" title="variable">S'</span></a><a class="idref" href="Definitions.html#5602fefe5ae9ac7607d0a75368b09df0"><span class="id" title="notation">)</span></a> <a class="idref" href="ReplacementTyping.html#T'"><span class="id" title="variable">T'</span></a> <span class="id" title="notation">∧</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="TightTyping.html#3350a03272d49af9ea81ab2b6cc8bf1f"><span class="id" title="notation">⊢#</span></a> <a class="idref" href="ReplacementTyping.html#S"><span class="id" title="variable">S</span></a> <a class="idref" href="TightTyping.html#3350a03272d49af9ea81ab2b6cc8bf1f"><span class="id" title="notation">&lt;:</span></a> <a class="idref" href="ReplacementTyping.html#S'"><span class="id" title="variable">S'</span></a> <span class="id" title="notation">∧</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="keyword">∀</span> <span class="id" title="var">y</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#y"><span class="id" title="variable">y</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">notin</span> <a class="idref" href="ReplacementTyping.html#L"><span class="id" title="variable">L</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">&amp;</span> <a class="idref" href="ReplacementTyping.html#y"><span class="id" title="variable">y</span></a> <span class="id" title="notation">~</span> <a class="idref" href="ReplacementTyping.html#S"><span class="id" title="variable">S</span></a> <a class="idref" href="Definitions.html#d77433d9a5f06bee50380b6ca9a3f271"><span class="id" title="notation">⊢</span></a> <a class="idref" href="Definitions.html#open_typ"><span class="id" title="definition">open_typ</span></a> <a class="idref" href="ReplacementTyping.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="ReplacementTyping.html#T'"><span class="id" title="variable">T'</span></a> <a class="idref" href="Definitions.html#d77433d9a5f06bee50380b6ca9a3f271"><span class="id" title="notation">&lt;:</span></a> <a class="idref" href="Definitions.html#open_typ"><span class="id" title="definition">open_typ</span></a> <a class="idref" href="ReplacementTyping.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="ReplacementTyping.html#T"><span class="id" title="variable">T</span></a><span class="id" title="notation">)</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hp</span>. <span class="id" title="var">inversions</span> <span class="id" title="var">Hp</span>. <span class="id" title="tactic">apply</span>× <a class="idref" href="InvertibleTyping.html#invertible_to_precise_typ_all"><span class="id" title="lemma">invertible_to_precise_typ_all</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Replacement-to-precise typing for records:
    if <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">|-//</span> <span class="inlinecode"><span class="id" title="var">p</span>:</span> <span class="inlinecode">{<span class="id" title="var">A</span>:</span> <span class="inlinecode"><span class="id" title="var">S</span>..<span class="id" title="var">U</span>}</span> then
<ul class="doclist">
<li> <span class="inlinecode"><span class="id" title="tactic">∃</span></span> <span class="inlinecode"><span class="id" title="var">T</span>.</span> <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">|-//</span> <span class="inlinecode"><span class="id" title="var">p</span>:</span> <span class="inlinecode">{<span class="id" title="var">A</span>:</span> <span class="inlinecode"><span class="id" title="var">T</span>..<span class="id" title="var">T</span>}</span>,

</li>
<li> <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">&vdash;<sub>&#35;</sub></span> <span class="inlinecode"><span class="id" title="var">T</span></span> <span class="inlinecode">&lt;:</span> <span class="inlinecode"><span class="id" title="var">U</span></span>, and

</li>
<li> <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">&vdash;<sub>&#35;</sub></span> <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode">&lt;:</span> <span class="inlinecode"><span class="id" title="var">T</span></span> 
</li>
</ul>

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="repl_to_precise_rcd"><span class="id" title="lemma">repl_to_precise_rcd</span></a>: <span class="id" title="keyword">∀</span> <span class="id" title="var">G</span> <span class="id" title="var">p</span> <span class="id" title="var">A</span> <span class="id" title="var">S</span> <span class="id" title="var">U</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#typ_rcd"><span class="id" title="constructor">typ_rcd</span></a> <a class="idref" href="Definitions.html#b194d02349b51cad3901d2caba34fa00"><span class="id" title="notation">{</span></a><a class="idref" href="ReplacementTyping.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="Definitions.html#b194d02349b51cad3901d2caba34fa00"><span class="id" title="notation">&gt;:</span></a> <a class="idref" href="ReplacementTyping.html#S"><span class="id" title="variable">S</span></a> <a class="idref" href="Definitions.html#b194d02349b51cad3901d2caba34fa00"><span class="id" title="notation">&lt;:</span></a> <a class="idref" href="ReplacementTyping.html#U"><span class="id" title="variable">U</span></a><a class="idref" href="Definitions.html#b194d02349b51cad3901d2caba34fa00"><span class="id" title="notation">}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<span class="id" title="notation">∃</span> <span class="id" title="var">T</span><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">⊢!!!</span></a> <a class="idref" href="ReplacementTyping.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#typ_rcd"><span class="id" title="constructor">typ_rcd</span></a> <a class="idref" href="Definitions.html#b194d02349b51cad3901d2caba34fa00"><span class="id" title="notation">{</span></a><a class="idref" href="ReplacementTyping.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="Definitions.html#b194d02349b51cad3901d2caba34fa00"><span class="id" title="notation">&gt;:</span></a> <a class="idref" href="ReplacementTyping.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="Definitions.html#b194d02349b51cad3901d2caba34fa00"><span class="id" title="notation">&lt;:</span></a> <a class="idref" href="ReplacementTyping.html#T"><span class="id" title="variable">T</span></a><a class="idref" href="Definitions.html#b194d02349b51cad3901d2caba34fa00"><span class="id" title="notation">}</span></a> <span class="id" title="notation">∧</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="TightTyping.html#3350a03272d49af9ea81ab2b6cc8bf1f"><span class="id" title="notation">⊢#</span></a> <a class="idref" href="ReplacementTyping.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="TightTyping.html#3350a03272d49af9ea81ab2b6cc8bf1f"><span class="id" title="notation">&lt;:</span></a> <a class="idref" href="ReplacementTyping.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">∧</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="TightTyping.html#3350a03272d49af9ea81ab2b6cc8bf1f"><span class="id" title="notation">⊢#</span></a> <a class="idref" href="ReplacementTyping.html#S"><span class="id" title="variable">S</span></a> <a class="idref" href="TightTyping.html#3350a03272d49af9ea81ab2b6cc8bf1f"><span class="id" title="notation">&lt;:</span></a> <a class="idref" href="ReplacementTyping.html#T"><span class="id" title="variable">T</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">HG</span> <span class="id" title="var">Hr</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">Hr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span>× <a class="idref" href="InvertibleTyping.html#invertible_to_precise_rcd"><span class="id" title="lemma">invertible_to_precise_rcd</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab64"></a><h3 class="section">Properties of replacement typing</h3>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a name="repl_and"><span class="id" title="lemma">repl_and</span></a>: <span class="id" title="keyword">∀</span> <span class="id" title="var">G</span> <span class="id" title="var">p</span> <span class="id" title="var">T</span> <span class="id" title="var">U</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#p"><span class="id" title="variable">p</span></a><a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="Definitions.html#7a630e21245026e1b75685a10a5ca45a"><span class="id" title="notation">∧</span></a> <a class="idref" href="ReplacementTyping.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#p"><span class="id" title="variable">p</span></a><a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">∧</span> <a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#p"><span class="id" title="variable">p</span></a><a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#U"><span class="id" title="variable">U</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hp</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">Hp</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="InvertibleTyping.html#invertible_and"><span class="id" title="lemma">invertible_and</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">H</span>). <span class="id" title="tactic">split</span>×.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Replacement typing is closed under <span class="inlinecode"><span class="id" title="var">qp</span></span> replacement
    when we know <span class="inlinecode"><span class="id" title="var">q</span></span>'s precise type 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="replacement_repl_closure_qp"><span class="id" title="lemma">replacement_repl_closure_qp</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">G</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span> <span class="id" title="var">r</span> <span class="id" title="var">T</span> <span class="id" title="var">T'</span> <span class="id" title="var">U</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">⊢!</span></a> <a class="idref" href="ReplacementTyping.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">⪼</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">⊢!!</span></a> <a class="idref" href="ReplacementTyping.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#repl_typ"><span class="id" title="inductive">repl_typ</span></a> <a class="idref" href="ReplacementTyping.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="ReplacementTyping.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="ReplacementTyping.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="ReplacementTyping.html#T'"><span class="id" title="variable">T'</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T'"><span class="id" title="variable">T'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hq</span> <span class="id" title="var">Hr</span> <span class="id" title="var">Hp</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">gen</span> <span class="id" title="var">q</span> <span class="id" title="var">r</span> <span class="id" title="var">T'</span> <span class="id" title="var">U</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">Hp</span>; <span class="id" title="var">introv</span> <span class="id" title="var">Hq</span>; <span class="id" title="var">introv</span> <span class="id" title="var">Hr'</span> <span class="id" title="var">Hr</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">solve</span> [<span class="id" title="var">invert_repl</span>; <span class="id" title="tactic">eauto</span> 5].<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span> "ty_inv_r"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">gen</span> <span class="id" title="var">q</span> <span class="id" title="var">r</span> <span class="id" title="var">T'</span> <span class="id" title="var">U</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">H</span>; <span class="id" title="var">introv</span> <span class="id" title="var">Hq</span>; <span class="id" title="var">introv</span> <span class="id" title="var">Hr</span>; <span class="id" title="var">introv</span> <span class="id" title="var">Hr'</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">solve</span> [<span class="id" title="var">invert_repl</span>; <span class="id" title="tactic">eauto</span> 5].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="var">SCase</span> "ty_precise_inv"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="PreciseTyping.html#pt3_inertsngl"><span class="id" title="lemma">pt3_inertsngl</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">H</span>) <span class="id" title="keyword">as</span> [[<span class="id" title="var">Hit</span> | <span class="id" title="var">Hs</span>] | <span class="id" title="var">Hst</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">SSCase</span> "ty_precise_inv_1"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inversions</span> <span class="id" title="var">Hit</span>; <span class="id" title="var">invert_repl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">apply</span> <a class="idref" href="ReplacementTyping.html#ty_inv_r"><span class="id" title="constructor">ty_inv_r</span></a>. <span class="id" title="tactic">eapply</span> <a class="idref" href="InvertibleTyping.html#ty_all_inv"><span class="id" title="constructor">ty_all_inv</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">L</span> := <span class="id" title="notation">\{}</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>× <a class="idref" href="InvertibleTyping.html#ty_precise_inv"><span class="id" title="constructor">ty_precise_inv</span></a>. <span class="id" title="tactic">apply</span> <a class="idref" href="Replacement.html#repl_swap"><span class="id" title="lemma">repl_swap</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span>. <span class="id" title="var">introv</span> <span class="id" title="var">Hy</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">apply</span> <a class="idref" href="ReplacementTyping.html#ty_inv_r"><span class="id" title="constructor">ty_inv_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="InvertibleTyping.html#ty_all_inv"><span class="id" title="constructor">ty_all_inv</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">L</span> := <span class="id" title="axiom">dom</span> <span class="id" title="var">G</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>× <a class="idref" href="InvertibleTyping.html#ty_precise_inv"><span class="id" title="constructor">ty_precise_inv</span></a>. <span class="id" title="tactic">auto</span>. <span class="id" title="var">introv</span> <span class="id" title="var">Hy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="Replacement.html#repl_open_var"><span class="id" title="lemma">repl_open_var</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H5</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">solve_names</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="Definitions.html#subtyp_sngl_qp"><span class="id" title="constructor">subtyp_sngl_qp</span></a>. <span class="id" title="tactic">apply</span>× <a class="idref" href="Weakening.html#weaken_ty_trm"><span class="id" title="lemma">weaken_ty_trm</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="PreciseFlow.html#precise_to_general"><span class="id" title="lemma">precise_to_general</span></a>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Hq</span>. <span class="id" title="tactic">apply</span>× <a class="idref" href="Weakening.html#weaken_ty_trm"><span class="id" title="lemma">weaken_ty_trm</span></a>. <span class="id" title="tactic">apply</span>× <a class="idref" href="PreciseTyping.html#precise_to_general2"><span class="id" title="lemma">precise_to_general2</span></a>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">apply</span>× <a class="idref" href="ReplacementTyping.html#ty_rec_qp_r"><span class="id" title="constructor">ty_rec_qp_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">SSCase</span> "ty_precise_inv_2"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inversions</span> <span class="id" title="var">Hs</span>. <span class="id" title="var">invert_repl</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">SSCase</span> "ty_precise_inv_3"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hst</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">x</span> <span class="id" title="var">Hx</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">T'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">Hx</span>; <span class="id" title="var">introv</span> <span class="id" title="var">Hr</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="var">invert_repl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">apply</span> <a class="idref" href="ReplacementTyping.html#ty_inv_r"><span class="id" title="constructor">ty_inv_r</span></a>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">D2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">invert_repl</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="InvertibleTyping.html#ty_precise_inv"><span class="id" title="constructor">ty_precise_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="InvertibleTyping.html#ty_dec_typ_inv"><span class="id" title="constructor">ty_dec_typ_inv</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hts</span> : <span class="id" title="var">G</span> <a class="idref" href="TightTyping.html#3350a03272d49af9ea81ab2b6cc8bf1f"><span class="id" title="notation">⊢#</span></a> <span class="id" title="var">t0</span> <a class="idref" href="TightTyping.html#3350a03272d49af9ea81ab2b6cc8bf1f"><span class="id" title="notation">&lt;:</span></a> <span class="id" title="var">T1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <a class="idref" href="Replacement.html#repl_swap"><span class="id" title="lemma">repl_swap</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H6</span>. <span class="id" title="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">invert_repl</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="InvertibleTyping.html#ty_precise_inv"><span class="id" title="constructor">ty_precise_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="InvertibleTyping.html#ty_dec_trm_inv"><span class="id" title="constructor">ty_dec_trm_inv</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">assert</span> (<span class="id" title="var">Hpt0</span> : <span class="id" title="var">G</span> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">⊢!!!</span></a> <span class="id" title="var">p</span> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">:</span></a> <span class="id" title="var">T</span>) <span class="id" title="tactic">by</span> (<span class="id" title="tactic">eapply</span> <a class="idref" href="PreciseTyping.html#pt3_and_destruct1"><span class="id" title="lemma">pt3_and_destruct1</span></a>; <span class="id" title="tactic">eauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hpd</span> : <span class="id" title="var">G</span> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">⊢!!!</span></a> <span class="id" title="var">p</span> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">:</span></a> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">(</span></a><a class="idref" href="Definitions.html#typ_rcd"><span class="id" title="constructor">typ_rcd</span></a> <span class="id" title="var">D</span><a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">)</span></a>) <span class="id" title="tactic">by</span> (<span class="id" title="tactic">eapply</span> <a class="idref" href="PreciseTyping.html#pt3_and_destruct2"><span class="id" title="lemma">pt3_and_destruct2</span></a>; <span class="id" title="tactic">eauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>× <a class="idref" href="ReplacementTyping.html#ty_and_r"><span class="id" title="constructor">ty_and_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">assert</span> (<span class="id" title="var">Hpt0</span> : <span class="id" title="var">G</span> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">⊢!!!</span></a> <span class="id" title="var">p</span> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">:</span></a> <span class="id" title="var">T</span>) <span class="id" title="tactic">by</span> (<span class="id" title="tactic">eapply</span> <a class="idref" href="PreciseTyping.html#pt3_and_destruct1"><span class="id" title="lemma">pt3_and_destruct1</span></a>; <span class="id" title="tactic">eauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hpd</span> : <span class="id" title="var">G</span> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">⊢!!!</span></a> <span class="id" title="var">p</span> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">:</span></a> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">(</span></a><a class="idref" href="Definitions.html#typ_rcd"><span class="id" title="constructor">typ_rcd</span></a> <span class="id" title="var">D</span><a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">)</span></a>) <span class="id" title="tactic">by</span> (<span class="id" title="tactic">eapply</span> <a class="idref" href="PreciseTyping.html#pt3_and_destruct2"><span class="id" title="lemma">pt3_and_destruct2</span></a>; <span class="id" title="tactic">eauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ReplacementTyping.html#ty_and_r"><span class="id" title="constructor">ty_and_r</span></a>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ReplacementTyping.html#ty_inv_r"><span class="id" title="constructor">ty_inv_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">D2</span>; <span class="id" title="var">invert_repl</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="InvertibleTyping.html#ty_precise_inv"><span class="id" title="constructor">ty_precise_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hpd</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">eapply</span> <a class="idref" href="InvertibleTyping.html#ty_dec_typ_inv"><span class="id" title="constructor">ty_dec_typ_inv</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Replacement.html#repl_swap"><span class="id" title="lemma">repl_swap</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H7</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">eapply</span> <a class="idref" href="InvertibleTyping.html#ty_dec_typ_inv"><span class="id" title="constructor">ty_dec_typ_inv</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">eapply</span> <a class="idref" href="InvertibleTyping.html#ty_dec_trm_inv"><span class="id" title="constructor">ty_dec_trm_inv</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="var">SCase</span> "ty_dec_trm_inv"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">invert_repl</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="ReplacementTyping.html#ty_inv_r"><span class="id" title="constructor">ty_inv_r</span></a>. <span class="id" title="tactic">eapply</span> <a class="idref" href="InvertibleTyping.html#ty_dec_trm_inv"><span class="id" title="constructor">ty_dec_trm_inv</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="TightTyping.html#subtyp_trans_t"><span class="id" title="constructor">subtyp_trans_t</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">T</span>:=<span class="id" title="var">U</span>); <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="var">SCase</span> "ty_dec_typ_inv"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">invert_repl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">eapply</span> <a class="idref" href="ReplacementTyping.html#ty_inv_r"><span class="id" title="constructor">ty_inv_r</span></a>. <span class="id" title="tactic">eapply</span> <a class="idref" href="InvertibleTyping.html#ty_dec_typ_inv"><span class="id" title="constructor">ty_dec_typ_inv</span></a>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="TightTyping.html#subtyp_trans_t"><span class="id" title="constructor">subtyp_trans_t</span></a>. <span class="id" title="tactic">apply</span> <a class="idref" href="Replacement.html#repl_swap"><span class="id" title="lemma">repl_swap</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H9</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="TightTyping.html#subtyp_sngl_pq_t"><span class="id" title="constructor">subtyp_sngl_pq_t</span></a>. <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H9</span>. <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">eapply</span> <a class="idref" href="ReplacementTyping.html#ty_inv_r"><span class="id" title="constructor">ty_inv_r</span></a>. <span class="id" title="tactic">eapply</span> <a class="idref" href="InvertibleTyping.html#ty_dec_typ_inv"><span class="id" title="constructor">ty_dec_typ_inv</span></a>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="TightTyping.html#subtyp_trans_t"><span class="id" title="constructor">subtyp_trans_t</span></a>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="var">SCase</span> "ty_all_inv"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">invert_repl</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="ReplacementTyping.html#ty_inv_r"><span class="id" title="constructor">ty_inv_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">eapply</span> <a class="idref" href="InvertibleTyping.html#ty_all_inv"><span class="id" title="constructor">ty_all_inv</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">L</span> := <span class="id" title="var">L</span> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> <span class="id" title="notation">(</span><span class="id" title="axiom">dom</span> <span class="id" title="var">G</span><span class="id" title="notation">)</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">assert</span> (<span class="id" title="var">Hts</span> : <span class="id" title="var">G</span> <a class="idref" href="TightTyping.html#3350a03272d49af9ea81ab2b6cc8bf1f"><span class="id" title="notation">⊢#</span></a> <span class="id" title="var">T3</span> <a class="idref" href="TightTyping.html#3350a03272d49af9ea81ab2b6cc8bf1f"><span class="id" title="notation">&lt;:</span></a> <span class="id" title="var">S2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <a class="idref" href="Replacement.html#repl_swap"><span class="id" title="lemma">repl_swap</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H7</span>. <span class="id" title="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">introv</span> <span class="id" title="var">Hy</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="Narrowing.html#narrow_subtyping"><span class="id" title="lemma">narrow_subtyping</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hts</span> : <span class="id" title="var">G</span> <a class="idref" href="Definitions.html#d77433d9a5f06bee50380b6ca9a3f271"><span class="id" title="notation">⊢</span></a> <span class="id" title="var">T3</span> <a class="idref" href="Definitions.html#d77433d9a5f06bee50380b6ca9a3f271"><span class="id" title="notation">&lt;:</span></a> <span class="id" title="var">S2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <a class="idref" href="TightTyping.html#tight_to_general"><span class="id" title="lemma">tight_to_general</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Replacement.html#repl_swap"><span class="id" title="lemma">repl_swap</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H7</span>. <span class="id" title="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">eapply</span> <a class="idref" href="InvertibleTyping.html#ty_all_inv"><span class="id" title="constructor">ty_all_inv</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">L</span> := <span class="id" title="var">L</span> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> <span class="id" title="notation">(</span><span class="id" title="axiom">dom</span> <span class="id" title="var">G</span><span class="id" title="notation">)</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">introv</span> <span class="id" title="var">Hy</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="Definitions.html#subtyp_trans"><span class="id" title="constructor">subtyp_trans</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>× <span class="id" title="var">H1</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="Replacement.html#repl_open_var"><span class="id" title="lemma">repl_open_var</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H7</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id" title="tactic">eapply</span> <a class="idref" href="Definitions.html#subtyp_sngl_qp"><span class="id" title="constructor">subtyp_sngl_qp</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="PreciseFlow.html#precise_to_general"><span class="id" title="lemma">precise_to_general</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Weakening.html#weaken_ty_trm"><span class="id" title="lemma">weaken_ty_trm</span></a>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Hq</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Weakening.html#weaken_ty_trm"><span class="id" title="lemma">weaken_ty_trm</span></a>. <span class="id" title="tactic">apply</span>× <a class="idref" href="PreciseTyping.html#precise_to_general2"><span class="id" title="lemma">precise_to_general2</span></a>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id" title="var">solve_names</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id" title="tactic">apply</span> <a class="idref" href="PreciseFlow.html#precise_to_general_h"><span class="id" title="lemma">precise_to_general_h</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hq</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hq</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="Binding.html#typed_paths_named"><span class="id" title="lemma">typed_paths_named</span></a>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Hq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="var">SCase</span> "ty_sel_qp_inv"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inversions</span> <span class="id" title="var">Hr</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="var">SCase</span> "ty_sngl_qp_inv"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inversions</span> <span class="id" title="var">Hr</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span> "ty_sel_qp_r"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lets</span> ?: (<a class="idref" href="ReplacementTyping.html#ty_sel_qp_r"><span class="id" title="constructor">ty_sel_qp_r</span></a> <span class="id" title="var">H</span> <span class="id" title="var">H0</span> <span class="id" title="var">Hp</span> <span class="id" title="var">H1</span>). <span class="id" title="var">invert_repl</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span> "ty_sngl_qp_r"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lets</span> ?: (<a class="idref" href="ReplacementTyping.html#ty_sngl_qp_r"><span class="id" title="constructor">ty_sngl_qp_r</span></a> <span class="id" title="var">H</span> <span class="id" title="var">H0</span> <span class="id" title="var">Hp</span> <span class="id" title="var">H1</span>). <span class="id" title="var">invert_repl</span>. <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Replacement typing is closed under <span class="inlinecode"><span class="id" title="var">qp</span></span> replacement
    when we know <span class="inlinecode"><span class="id" title="var">q</span></span>'s II-level precise type 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="replacement_repl_closure_qp2"><span class="id" title="lemma">replacement_repl_closure_qp2</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">G</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span> <span class="id" title="var">r</span> <span class="id" title="var">T</span> <span class="id" title="var">T'</span> <span class="id" title="var">U</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">⊢!!</span></a> <a class="idref" href="ReplacementTyping.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">⊢!!</span></a> <a class="idref" href="ReplacementTyping.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#repl_typ"><span class="id" title="inductive">repl_typ</span></a> <a class="idref" href="ReplacementTyping.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="ReplacementTyping.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="ReplacementTyping.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="ReplacementTyping.html#T'"><span class="id" title="variable">T'</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T'"><span class="id" title="variable">T'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hq</span> <span class="id" title="var">Hr'</span> <span class="id" title="var">Hp</span> <span class="id" title="var">Hr</span>. <span class="id" title="var">gen</span> <span class="id" title="var">U</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">Hq</span>; <span class="id" title="var">introv</span> <span class="id" title="var">Hr'</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">lets</span> <span class="id" title="var">Heq</span>: (<a class="idref" href="PreciseFlow.html#pf_sngl_T"><span class="id" title="lemma">pf_sngl_T</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">H</span>). <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>× <a class="idref" href="ReplacementTyping.html#replacement_repl_closure_qp"><span class="id" title="lemma">replacement_repl_closure_qp</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="Replacement.html#repl_field_elim"><span class="id" title="lemma">repl_field_elim</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hr</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hr''</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="PreciseTyping.html#pt2_backtrack"><span class="id" title="lemma">pt2_backtrack</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hr'</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">U'</span> <span class="id" title="var">Hq</span>]. <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Replacement typing is closed under <span class="inlinecode"><span class="id" title="var">qp</span></span> replacement
    when we know <span class="inlinecode"><span class="id" title="var">q</span></span>'s III-level precise type 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="replacement_repl_closure_qp3"><span class="id" title="lemma">replacement_repl_closure_qp3</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">G</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span> <span class="id" title="var">r</span> <span class="id" title="var">T</span> <span class="id" title="var">T'</span> <span class="id" title="var">U</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">⊢!!!</span></a> <a class="idref" href="ReplacementTyping.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">⊢!!</span></a> <a class="idref" href="ReplacementTyping.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#repl_typ"><span class="id" title="inductive">repl_typ</span></a> <a class="idref" href="ReplacementTyping.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="ReplacementTyping.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="ReplacementTyping.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="ReplacementTyping.html#T'"><span class="id" title="variable">T'</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T'"><span class="id" title="variable">T'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hq</span> <span class="id" title="var">Hr'</span> <span class="id" title="var">Hp</span> <span class="id" title="var">Hr</span>. <span class="id" title="var">gen</span> <span class="id" title="var">p</span> <span class="id" title="var">T</span> <span class="id" title="var">T'</span> <span class="id" title="var">U</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">Hq</span>; <span class="id" title="var">introv</span> <span class="id" title="var">Hp</span>; <span class="id" title="var">introv</span> <span class="id" title="var">Hr</span>; <span class="id" title="var">introv</span> <span class="id" title="var">Hr'</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span>× <a class="idref" href="ReplacementTyping.html#replacement_repl_closure_qp2"><span class="id" title="lemma">replacement_repl_closure_qp2</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHHq</span> <span class="id" title="var">_</span> <span class="id" title="var">Hi</span> <span class="id" title="constructor">eq_refl</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hp</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="Replacement.html#repl_insert"><span class="id" title="lemma">repl_insert</span></a> <span class="id" title="var">q</span> <span class="id" title="var">Hr</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">V</span> [<span class="id" title="var">Hr1</span> <span class="id" title="var">Hr2</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="PreciseTyping.html#pt2_exists"><span class="id" title="lemma">pt2_exists</span></a> <span class="id" title="var">Hq</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">S</span> <span class="id" title="var">Hs</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHHq</span> <span class="id" title="var">_</span> <span class="id" title="var">Hr1</span> <span class="id" title="var">_</span> <span class="id" title="var">Hr'</span>). <span class="id" title="tactic">eapply</span> <a class="idref" href="ReplacementTyping.html#replacement_repl_closure_qp2"><span class="id" title="lemma">replacement_repl_closure_qp2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Hs</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHHq</span>. <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Replacement typing is closed under repeated <span class="inlinecode"><span class="id" title="var">qp</span></span> replacements 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="replacement_repl_closure_qp_comp"><span class="id" title="lemma">replacement_repl_closure_qp_comp</span></a>: <span class="id" title="keyword">∀</span> <span class="id" title="var">G</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span> <span class="id" title="var">r</span> <span class="id" title="var">T</span> <span class="id" title="var">T'</span> <span class="id" title="var">U</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#p"><span class="id" title="variable">p</span></a><a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">⊢!!!</span></a> <a class="idref" href="ReplacementTyping.html#q"><span class="id" title="variable">q</span></a><a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">⊢!!</span></a> <a class="idref" href="ReplacementTyping.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Replacement.html#repl_repeat_typ"><span class="id" title="abbreviation">repl_repeat_typ</span></a> <a class="idref" href="ReplacementTyping.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="ReplacementTyping.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="ReplacementTyping.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="ReplacementTyping.html#T'"><span class="id" title="variable">T'</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#p"><span class="id" title="variable">p</span></a><a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T'"><span class="id" title="variable">T'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hp</span> <span class="id" title="var">Hq</span> <span class="id" title="var">Hr</span> <span class="id" title="var">Hc</span>. <span class="id" title="var">gen</span> <span class="id" title="var">p</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">Hc</span>; <span class="id" title="var">introv</span> <span class="id" title="var">Hp</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span>× <span class="id" title="var">IHHc</span>. <span class="id" title="tactic">apply</span>× <a class="idref" href="ReplacementTyping.html#replacement_repl_closure_qp3"><span class="id" title="lemma">replacement_repl_closure_qp3</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Replacement typing is closed under opening of recursive types 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="repl_rec_intro"><span class="id" title="lemma">repl_rec_intro</span></a>: <span class="id" title="keyword">∀</span> <span class="id" title="var">G</span> <span class="id" title="var">p</span> <span class="id" title="var">T</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#p"><span class="id" title="variable">p</span></a><a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#57e8a3f1aebb1c6069654ec2f0cd7a19"><span class="id" title="notation">μ</span></a> <a class="idref" href="ReplacementTyping.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#p"><span class="id" title="variable">p</span></a><a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#open_typ_p"><span class="id" title="definition">open_typ_p</span></a> <a class="idref" href="ReplacementTyping.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="ReplacementTyping.html#T"><span class="id" title="variable">T</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hp</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">Hp</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span> "ty_inv_r"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span>× (<a class="idref" href="InvertibleTyping.html#invertible_bnd"><span class="id" title="lemma">invertible_bnd</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">H</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">Hr</span> | [<span class="id" title="var">q</span> [<span class="id" title="var">U</span> [<span class="id" title="var">Hr</span> [[<span class="id" title="var">S</span> <span class="id" title="var">Hs</span>]%<a class="idref" href="PreciseTyping.html#pt2_exists"><span class="id" title="lemma">pt2_exists</span></a> <span class="id" title="var">Hr'</span>]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="ReplacementTyping.html#replacement_repl_closure_qp_comp"><span class="id" title="lemma">replacement_repl_closure_qp_comp</span></a>. <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">apply</span>× <a class="idref" href="ReplacementTyping.html#ty_inv_r"><span class="id" title="constructor">ty_inv_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hr</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>× <a class="idref" href="Replacement.html#repl_comp_open"><span class="id" title="lemma">repl_comp_open</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span> "ty_rec_pq_r"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHHp</span> <span class="id" title="var">_</span> <span class="id" title="var">Hi</span> <span class="id" title="constructor">eq_refl</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Replacement.html#repl_open"><span class="id" title="lemma">repl_open</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">r</span>:= <span class="id" title="var">r</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">solve_names</span>. <span class="id" title="tactic">apply</span>× <a class="idref" href="ReplacementTyping.html#replacement_repl_closure_qp"><span class="id" title="lemma">replacement_repl_closure_qp</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="replacement_repl_closure_pq_helper_mutind"><span class="id" title="lemma">replacement_repl_closure_pq_helper_mutind</span></a>: <span class="id" title="notation">(</span><span class="id" title="keyword">∀</span> <span class="id" title="var">q</span> <span class="id" title="var">p</span> <span class="id" title="var">T</span> <span class="id" title="var">T'</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#repl_typ"><span class="id" title="inductive">repl_typ</span></a> <a class="idref" href="ReplacementTyping.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="ReplacementTyping.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="ReplacementTyping.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="ReplacementTyping.html#T'"><span class="id" title="variable">T'</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">q0</span> <span class="id" title="var">r0</span> <span class="id" title="var">T2</span> <span class="id" title="var">G</span>, <a class="idref" href="Definitions.html#repl_typ"><span class="id" title="inductive">repl_typ</span></a> <a class="idref" href="ReplacementTyping.html#q0"><span class="id" title="variable">q0</span></a> <a class="idref" href="ReplacementTyping.html#r0"><span class="id" title="variable">r0</span></a> <a class="idref" href="ReplacementTyping.html#T'"><span class="id" title="variable">T'</span></a> <a class="idref" href="ReplacementTyping.html#T2"><span class="id" title="variable">T2</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">⊢!</span></a> <a class="idref" href="ReplacementTyping.html#p"><span class="id" title="variable">p</span></a><a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">⪼</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">⊢!</span></a> <a class="idref" href="ReplacementTyping.html#q0"><span class="id" title="variable">q0</span></a><a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#r0"><span class="id" title="variable">r0</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">⪼</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#r0"><span class="id" title="variable">r0</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">=</span> <a class="idref" href="ReplacementTyping.html#T2"><span class="id" title="variable">T2</span></a> <span class="id" title="notation">∨</span> <span class="id" title="notation">∃</span> <span class="id" title="var">T3</span><span class="id" title="notation">,</span> <a class="idref" href="Definitions.html#repl_typ"><span class="id" title="inductive">repl_typ</span></a> <a class="idref" href="ReplacementTyping.html#q0"><span class="id" title="variable">q0</span></a> <a class="idref" href="ReplacementTyping.html#r0"><span class="id" title="variable">r0</span></a> <a class="idref" href="ReplacementTyping.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="ReplacementTyping.html#T3"><span class="id" title="variable">T3</span></a> <span class="id" title="notation">∧</span> <a class="idref" href="Definitions.html#repl_typ"><span class="id" title="inductive">repl_typ</span></a> <a class="idref" href="ReplacementTyping.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="ReplacementTyping.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="ReplacementTyping.html#T3"><span class="id" title="variable">T3</span></a> <a class="idref" href="ReplacementTyping.html#T2"><span class="id" title="variable">T2</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">∧</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="keyword">∀</span> <span class="id" title="var">q</span> <span class="id" title="var">p</span> <span class="id" title="var">D</span> <span class="id" title="var">D'</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#repl_dec"><span class="id" title="inductive">repl_dec</span></a> <a class="idref" href="ReplacementTyping.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="ReplacementTyping.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="ReplacementTyping.html#D"><span class="id" title="variable">D</span></a> <a class="idref" href="ReplacementTyping.html#D'"><span class="id" title="variable">D'</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">q0</span> <span class="id" title="var">r0</span> <span class="id" title="var">D2</span> <span class="id" title="var">G</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#repl_dec"><span class="id" title="inductive">repl_dec</span></a> <a class="idref" href="ReplacementTyping.html#q0"><span class="id" title="variable">q0</span></a> <a class="idref" href="ReplacementTyping.html#r0"><span class="id" title="variable">r0</span></a> <a class="idref" href="ReplacementTyping.html#D'"><span class="id" title="variable">D'</span></a> <a class="idref" href="ReplacementTyping.html#D2"><span class="id" title="variable">D2</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">⊢!</span></a> <a class="idref" href="ReplacementTyping.html#p"><span class="id" title="variable">p</span></a><a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">⪼</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">⊢!</span></a> <a class="idref" href="ReplacementTyping.html#q0"><span class="id" title="variable">q0</span></a><a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#r0"><span class="id" title="variable">r0</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">⪼</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#r0"><span class="id" title="variable">r0</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#D"><span class="id" title="variable">D</span></a> <span class="id" title="notation">=</span> <a class="idref" href="ReplacementTyping.html#D2"><span class="id" title="variable">D2</span></a> <span class="id" title="notation">∨</span> <span class="id" title="notation">∃</span> <span class="id" title="var">D3</span><span class="id" title="notation">,</span> <a class="idref" href="Definitions.html#repl_dec"><span class="id" title="inductive">repl_dec</span></a> <a class="idref" href="ReplacementTyping.html#q0"><span class="id" title="variable">q0</span></a> <a class="idref" href="ReplacementTyping.html#r0"><span class="id" title="variable">r0</span></a> <a class="idref" href="ReplacementTyping.html#D"><span class="id" title="variable">D</span></a> <a class="idref" href="ReplacementTyping.html#D3"><span class="id" title="variable">D3</span></a> <span class="id" title="notation">∧</span> <a class="idref" href="Definitions.html#repl_dec"><span class="id" title="inductive">repl_dec</span></a> <a class="idref" href="ReplacementTyping.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="ReplacementTyping.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="ReplacementTyping.html#D3"><span class="id" title="variable">D3</span></a> <a class="idref" href="ReplacementTyping.html#D2"><span class="id" title="variable">D2</span></a><span class="id" title="notation">)</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Definitions.html#repl_mutind"><span class="id" title="definition">repl_mutind</span></a>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">invert_repl</span>. <span class="id" title="tactic">destruct</span> (<span class="id" title="var">H</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H7</span> <span class="id" title="var">H1</span> <span class="id" title="var">H2</span> <span class="id" title="var">H3</span>); <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">right</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">D4</span> [<span class="id" title="var">Hl</span> <span class="id" title="var">Hr</span>]]. <span class="id" title="tactic">∃</span> (<a class="idref" href="Definitions.html#typ_rcd"><span class="id" title="constructor">typ_rcd</span></a> <span class="id" title="var">D4</span>). <span class="id" title="tactic">split</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">invert_repl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">destruct</span> (<span class="id" title="var">H</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H9</span> <span class="id" title="var">H1</span> <span class="id" title="var">H2</span> <span class="id" title="var">H3</span>); <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">right</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">T5</span> [<span class="id" title="var">Hl</span> <span class="id" title="var">Hr</span>]]. <span class="id" title="tactic">∃</span> (<span class="id" title="var">T5</span> <a class="idref" href="Definitions.html#7a630e21245026e1b75685a10a5ca45a"><span class="id" title="notation">∧</span></a> <span class="id" title="var">U</span>). <span class="id" title="tactic">split</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">right</span>. <span class="id" title="tactic">∃</span> (<span class="id" title="var">T1</span> <a class="idref" href="Definitions.html#7a630e21245026e1b75685a10a5ca45a"><span class="id" title="notation">∧</span></a> <span class="id" title="var">T4</span>). <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">inversions</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">right</span>. <span class="id" title="tactic">∃</span> (<span class="id" title="var">T4</span> <a class="idref" href="Definitions.html#7a630e21245026e1b75685a10a5ca45a"><span class="id" title="notation">∧</span></a> <span class="id" title="var">T1</span>). <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">destruct</span> (<span class="id" title="var">H</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H9</span> <span class="id" title="var">H1</span> <span class="id" title="var">H2</span> <span class="id" title="var">H3</span>). <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">T5</span> [<span class="id" title="var">Hl</span> <span class="id" title="var">Hr</span>]]. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">∃</span> (<span class="id" title="var">U</span> <a class="idref" href="Definitions.html#7a630e21245026e1b75685a10a5ca45a"><span class="id" title="notation">∧</span></a> <span class="id" title="var">T5</span>). <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">inversions</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">left</span>. <span class="id" title="tactic">assert</span> (<span class="id" title="var">p</span> <a class="idref" href="Definitions.html#086f2d7e593ce2ec7b60009929463693"><span class="id" title="notation">••</span></a> <span class="id" title="var">bs</span> <span class="id" title="notation">=</span> <span class="id" title="var">r0</span> <a class="idref" href="Definitions.html#086f2d7e593ce2ec7b60009929463693"><span class="id" title="notation">••</span></a> <span class="id" title="var">bs0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="PreciseFlow.html#pf_sngl_sel_unique"><span class="id" title="lemma">pf_sngl_sel_unique</span></a>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">inversions</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">destruct</span> (<span class="id" title="var">H</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H7</span> <span class="id" title="var">H1</span> <span class="id" title="var">H2</span> <span class="id" title="var">H3</span>); <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">right</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">T5</span> [<span class="id" title="var">Hl</span> <span class="id" title="var">Hr</span>]]. <span class="id" title="tactic">∃</span> (<a class="idref" href="Definitions.html#57e8a3f1aebb1c6069654ec2f0cd7a19"><span class="id" title="notation">μ</span></a> <span class="id" title="var">T5</span>). <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">invert_repl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">destruct</span> (<span class="id" title="var">H</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H9</span> <span class="id" title="var">H1</span> <span class="id" title="var">H2</span> <span class="id" title="var">H3</span>); <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">right</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">T5</span> [<span class="id" title="var">Hl</span> <span class="id" title="var">Hr</span>]]. <span class="id" title="tactic">∃</span> (<a class="idref" href="Definitions.html#5602fefe5ae9ac7607d0a75368b09df0"><span class="id" title="notation">∀</span></a> <a class="idref" href="Definitions.html#5602fefe5ae9ac7607d0a75368b09df0"><span class="id" title="notation">(</span></a><span class="id" title="var">T5</span><a class="idref" href="Definitions.html#5602fefe5ae9ac7607d0a75368b09df0"><span class="id" title="notation">)</span></a> <span class="id" title="var">U</span>). <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">right</span>. <span class="id" title="tactic">∃</span> (<a class="idref" href="Definitions.html#5602fefe5ae9ac7607d0a75368b09df0"><span class="id" title="notation">∀</span></a> <a class="idref" href="Definitions.html#5602fefe5ae9ac7607d0a75368b09df0"><span class="id" title="notation">(</span></a><span class="id" title="var">T1</span><a class="idref" href="Definitions.html#5602fefe5ae9ac7607d0a75368b09df0"><span class="id" title="notation">)</span></a> <span class="id" title="var">T4</span>). <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">invert_repl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">right</span>. <span class="id" title="tactic">∃</span> (<a class="idref" href="Definitions.html#5602fefe5ae9ac7607d0a75368b09df0"><span class="id" title="notation">∀</span></a> <a class="idref" href="Definitions.html#5602fefe5ae9ac7607d0a75368b09df0"><span class="id" title="notation">(</span></a><span class="id" title="var">T4</span><a class="idref" href="Definitions.html#5602fefe5ae9ac7607d0a75368b09df0"><span class="id" title="notation">)</span></a> <span class="id" title="var">T1</span>). <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">destruct</span> (<span class="id" title="var">H</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H9</span> <span class="id" title="var">H1</span> <span class="id" title="var">H2</span> <span class="id" title="var">H3</span>); <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">right</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">T5</span> [<span class="id" title="var">Hl</span> <span class="id" title="var">Hr</span>]]. <span class="id" title="tactic">∃</span> (<a class="idref" href="Definitions.html#5602fefe5ae9ac7607d0a75368b09df0"><span class="id" title="notation">∀</span></a> <a class="idref" href="Definitions.html#5602fefe5ae9ac7607d0a75368b09df0"><span class="id" title="notation">(</span></a><span class="id" title="var">U</span><a class="idref" href="Definitions.html#5602fefe5ae9ac7607d0a75368b09df0"><span class="id" title="notation">)</span></a> <span class="id" title="var">T5</span>). <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">invert_repl</span>. <span class="id" title="tactic">left</span>. <span class="id" title="tactic">assert</span> (<span class="id" title="var">p</span> <a class="idref" href="Definitions.html#086f2d7e593ce2ec7b60009929463693"><span class="id" title="notation">••</span></a> <span class="id" title="var">bs</span> <span class="id" title="notation">=</span> <span class="id" title="var">r0</span> <a class="idref" href="Definitions.html#086f2d7e593ce2ec7b60009929463693"><span class="id" title="notation">••</span></a> <span class="id" title="var">bs0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="PreciseFlow.html#pf_sngl_sel_unique"><span class="id" title="lemma">pf_sngl_sel_unique</span></a>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">invert_repl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">destruct</span> (<span class="id" title="var">H</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H10</span> <span class="id" title="var">H1</span> <span class="id" title="var">H2</span> <span class="id" title="var">H3</span>); <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">right</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">T4</span> [<span class="id" title="var">Hl</span> <span class="id" title="var">Hr</span>]]. <span class="id" title="tactic">∃</span> (<a class="idref" href="Definitions.html#dec_typ"><span class="id" title="constructor">dec_typ</span></a> <span class="id" title="var">A</span> <span class="id" title="var">T4</span> <span class="id" title="var">U</span>). <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">right</span>. <span class="id" title="tactic">∃</span> (<a class="idref" href="Definitions.html#dec_typ"><span class="id" title="constructor">dec_typ</span></a> <span class="id" title="var">A</span> <span class="id" title="var">T1</span> <span class="id" title="var">T3</span>). <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">invert_repl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">right</span>. <span class="id" title="tactic">∃</span> (<a class="idref" href="Definitions.html#dec_typ"><span class="id" title="constructor">dec_typ</span></a> <span class="id" title="var">A</span> <span class="id" title="var">T3</span> <span class="id" title="var">T1</span>). <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">destruct</span> (<span class="id" title="var">H</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H10</span> <span class="id" title="var">H1</span> <span class="id" title="var">H2</span> <span class="id" title="var">H3</span>); <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">right</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">T4</span> [<span class="id" title="var">Hl</span> <span class="id" title="var">Hr</span>]]. <span class="id" title="tactic">∃</span> (<a class="idref" href="Definitions.html#dec_typ"><span class="id" title="constructor">dec_typ</span></a> <span class="id" title="var">A</span> <span class="id" title="var">U</span> <span class="id" title="var">T4</span>). <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">invert_repl</span>. <span class="id" title="tactic">destruct</span> (<span class="id" title="var">H</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H9</span> <span class="id" title="var">H1</span> <span class="id" title="var">H2</span> <span class="id" title="var">H3</span>); <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">right</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">T4</span> [<span class="id" title="var">Hl</span> <span class="id" title="var">Hr</span>]]. <span class="id" title="tactic">∃</span> (<a class="idref" href="Definitions.html#18cbe8108c7275adbcbe2d488cc0d64e"><span class="id" title="notation">{</span></a><span class="id" title="var">a</span> <a class="idref" href="Definitions.html#18cbe8108c7275adbcbe2d488cc0d64e"><span class="id" title="notation">⦂</span></a> <span class="id" title="var">T4</span><a class="idref" href="Definitions.html#18cbe8108c7275adbcbe2d488cc0d64e"><span class="id" title="notation">}</span></a>). <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="replacement_repl_closure_pq_helper"><span class="id" title="lemma">replacement_repl_closure_pq_helper</span></a>: <span class="id" title="keyword">∀</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span> <span class="id" title="var">T</span> <span class="id" title="var">T'</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#repl_typ"><span class="id" title="inductive">repl_typ</span></a> <a class="idref" href="ReplacementTyping.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="ReplacementTyping.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="ReplacementTyping.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="ReplacementTyping.html#T'"><span class="id" title="variable">T'</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">q0</span> <span class="id" title="var">r0</span> <span class="id" title="var">T2</span> <span class="id" title="var">G</span>, <a class="idref" href="Definitions.html#repl_typ"><span class="id" title="inductive">repl_typ</span></a> <a class="idref" href="ReplacementTyping.html#q0"><span class="id" title="variable">q0</span></a> <a class="idref" href="ReplacementTyping.html#r0"><span class="id" title="variable">r0</span></a> <a class="idref" href="ReplacementTyping.html#T'"><span class="id" title="variable">T'</span></a> <a class="idref" href="ReplacementTyping.html#T2"><span class="id" title="variable">T2</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">⊢!</span></a> <a class="idref" href="ReplacementTyping.html#p"><span class="id" title="variable">p</span></a><a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">⪼</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">⊢!</span></a> <a class="idref" href="ReplacementTyping.html#q0"><span class="id" title="variable">q0</span></a><a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#r0"><span class="id" title="variable">r0</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">⪼</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#r0"><span class="id" title="variable">r0</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">=</span> <a class="idref" href="ReplacementTyping.html#T2"><span class="id" title="variable">T2</span></a> <span class="id" title="notation">∨</span> <span class="id" title="notation">∃</span> <span class="id" title="var">T3</span><span class="id" title="notation">,</span> <a class="idref" href="Definitions.html#repl_typ"><span class="id" title="inductive">repl_typ</span></a> <a class="idref" href="ReplacementTyping.html#q0"><span class="id" title="variable">q0</span></a> <a class="idref" href="ReplacementTyping.html#r0"><span class="id" title="variable">r0</span></a> <a class="idref" href="ReplacementTyping.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="ReplacementTyping.html#T3"><span class="id" title="variable">T3</span></a> <span class="id" title="notation">∧</span> <a class="idref" href="Definitions.html#repl_typ"><span class="id" title="inductive">repl_typ</span></a> <a class="idref" href="ReplacementTyping.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="ReplacementTyping.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="ReplacementTyping.html#T3"><span class="id" title="variable">T3</span></a> <a class="idref" href="ReplacementTyping.html#T2"><span class="id" title="variable">T2</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="ReplacementTyping.html#replacement_repl_closure_pq_helper_mutind"><span class="id" title="lemma">replacement_repl_closure_pq_helper_mutind</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Replacement typing is closed under <span class="inlinecode"><span class="id" title="var">pq</span></span> replacement
    when we know <span class="inlinecode"><span class="id" title="var">q</span></span>'s precise type 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="replacement_repl_closure_pq"><span class="id" title="lemma">replacement_repl_closure_pq</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">G</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span> <span class="id" title="var">r</span> <span class="id" title="var">T</span> <span class="id" title="var">T'</span> <span class="id" title="var">U</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">⊢!</span></a> <a class="idref" href="ReplacementTyping.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">⪼</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">⊢!!</span></a> <a class="idref" href="ReplacementTyping.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#repl_typ"><span class="id" title="inductive">repl_typ</span></a> <a class="idref" href="ReplacementTyping.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="ReplacementTyping.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="ReplacementTyping.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="ReplacementTyping.html#T'"><span class="id" title="variable">T'</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T'"><span class="id" title="variable">T'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hp</span> <span class="id" title="var">Hq</span> <span class="id" title="var">Hqr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">gen</span> <span class="id" title="var">q</span> <span class="id" title="var">r</span> <span class="id" title="var">T'</span> <span class="id" title="var">U</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">Hp</span>; <span class="id" title="var">introv</span> <span class="id" title="var">Hq</span>; <span class="id" title="var">introv</span> <span class="id" title="var">Hr'</span> <span class="id" title="var">Hr</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;- <span class="id" title="var">Case</span> "ty_inv_r"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">apply</span>× <a class="idref" href="InvertibleTyping.html#invertible_repl_closure"><span class="id" title="lemma">invertible_repl_closure</span></a>.<br/>
&nbsp;&nbsp;&nbsp;- <span class="id" title="var">Case</span> "ty_and_r"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">invert_repl</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;- <span class="id" title="var">Case</span> "ty_bnd_r"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">invert_repl</span>. <span class="id" title="tactic">apply</span> (<a class="idref" href="Replacement.html#repl_open"><span class="id" title="lemma">repl_open</span></a> <span class="id" title="var">p</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">solve_names</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;- <span class="id" title="var">Case</span> "ty_sel_r"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">IHHp</span>. <span class="id" title="var">invert_repl</span>. <span class="id" title="var">lets</span> <span class="id" title="var">Heq</span>: (<a class="idref" href="PreciseFlow.html#pf_sngl_flds_elim"><span class="id" title="lemma">pf_sngl_flds_elim</span></a> <span class="id" title="var">_</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hq</span> <span class="id" title="var">H</span>). <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Binding.html#field_sel_nil"><span class="id" title="lemma">field_sel_nil</span></a> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lets</span> <span class="id" title="var">Heq</span>: (<a class="idref" href="PreciseFlow.html#pf_T_unique"><span class="id" title="lemma">pf_T_unique</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">H</span> <span class="id" title="var">Hq</span>). <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="PreciseFlow.html#pf_sngl_U"><span class="id" title="lemma">pf_sngl_U</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;- <span class="id" title="var">Case</span> "ty_rcd_intro_r"%<span class="id" title="var">string</span>. <span class="id" title="var">invert_repl</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;- <span class="id" title="var">Case</span> "ty_rec_qp_r"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">invert_repl</span>. <span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHHp</span> <span class="id" title="var">Hi</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hq</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="ReplacementTyping.html#replacement_repl_closure_pq_helper"><span class="id" title="lemma">replacement_repl_closure_pq_helper</span></a> <span class="id" title="var">H1</span> <span class="id" title="var">H5</span> <span class="id" title="var">Hi</span> <span class="id" title="var">H</span> <span class="id" title="var">Hq</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H2</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">destruct</span> <span class="id" title="var">H2</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">T3</span> [<span class="id" title="var">Hl</span> <span class="id" title="var">Hr</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">G</span> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <span class="id" title="var">r</span> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#57e8a3f1aebb1c6069654ec2f0cd7a19"><span class="id" title="notation">μ</span></a> <span class="id" title="var">T3</span>) <span class="id" title="tactic">by</span> (<span class="id" title="tactic">eapply</span> <span class="id" title="var">IHHp</span>; <span class="id" title="tactic">eauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="ReplacementTyping.html#ty_rec_qp_r"><span class="id" title="constructor">ty_rec_qp_r</span></a> <span class="id" title="var">H</span> <span class="id" title="var">H0</span> <span class="id" title="var">H2</span> <span class="id" title="var">Hr</span>).<br/>
&nbsp;&nbsp;&nbsp;- <span class="id" title="var">Case</span> "ty_sel_pq_r"%<span class="id" title="var">string</span>. <span class="id" title="var">invert_repl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">q</span> <a class="idref" href="Definitions.html#086f2d7e593ce2ec7b60009929463693"><span class="id" title="notation">••</span></a> <span class="id" title="var">bs0</span> <span class="id" title="notation">=</span> <span class="id" title="var">r0</span> <a class="idref" href="Definitions.html#086f2d7e593ce2ec7b60009929463693"><span class="id" title="notation">••</span></a> <span class="id" title="var">bs</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="PreciseFlow.html#pf_sngl_sel_unique"><span class="id" title="lemma">pf_sngl_sel_unique</span></a>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H1</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;- <span class="id" title="var">Case</span> "ty_sngl_pq_r"%<span class="id" title="var">string</span>. <span class="id" title="var">invert_repl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">q</span> <a class="idref" href="Definitions.html#086f2d7e593ce2ec7b60009929463693"><span class="id" title="notation">••</span></a> <span class="id" title="var">bs0</span> <span class="id" title="notation">=</span> <span class="id" title="var">r0</span> <a class="idref" href="Definitions.html#086f2d7e593ce2ec7b60009929463693"><span class="id" title="notation">••</span></a> <span class="id" title="var">bs</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="PreciseFlow.html#pf_sngl_sel_unique"><span class="id" title="lemma">pf_sngl_sel_unique</span></a>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H1</span>. <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Replacement typing is closed under <span class="inlinecode"><span class="id" title="var">pq</span></span> replacement
    when we know <span class="inlinecode"><span class="id" title="var">q</span></span>'s II-level precise type 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="replacement_repl_closure_pq2"><span class="id" title="lemma">replacement_repl_closure_pq2</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">G</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span> <span class="id" title="var">r</span> <span class="id" title="var">T</span> <span class="id" title="var">T'</span> <span class="id" title="var">U</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">⊢!!</span></a> <a class="idref" href="ReplacementTyping.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">⊢!!</span></a> <a class="idref" href="ReplacementTyping.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#repl_typ"><span class="id" title="inductive">repl_typ</span></a> <a class="idref" href="ReplacementTyping.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="ReplacementTyping.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="ReplacementTyping.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="ReplacementTyping.html#T'"><span class="id" title="variable">T'</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T'"><span class="id" title="variable">T'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hp</span> <span class="id" title="var">Hq</span> <span class="id" title="var">Hr'</span> <span class="id" title="var">Hr</span>. <span class="id" title="var">gen</span> <span class="id" title="var">U</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">Hq</span>; <span class="id" title="var">introv</span> <span class="id" title="var">Hr'</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span>× <a class="idref" href="ReplacementTyping.html#replacement_repl_closure_pq"><span class="id" title="lemma">replacement_repl_closure_pq</span></a>. <span class="id" title="var">lets</span> <span class="id" title="var">Heq</span>: (<a class="idref" href="PreciseFlow.html#pf_sngl_T"><span class="id" title="lemma">pf_sngl_T</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">H</span>). <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="Replacement.html#repl_field_elim"><span class="id" title="lemma">repl_field_elim</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hr</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="PreciseTyping.html#pt2_backtrack"><span class="id" title="lemma">pt2_backtrack</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hr'</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">U'</span> <span class="id" title="var">Hq'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHHq1</span> <span class="id" title="var">_</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hp</span> <span class="id" title="constructor">eq_refl</span> <span class="id" title="var">H</span> <span class="id" title="var">_</span> <span class="id" title="var">Hq'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Replacement typing is closed under <span class="inlinecode"><span class="id" title="var">pq</span></span> replacement
    when we know <span class="inlinecode"><span class="id" title="var">q</span></span>'s III-level precise type 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="replacement_repl_closure_pq3"><span class="id" title="lemma">replacement_repl_closure_pq3</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">G</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span> <span class="id" title="var">r</span> <span class="id" title="var">T</span> <span class="id" title="var">T'</span> <span class="id" title="var">U</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">⊢!!!</span></a> <a class="idref" href="ReplacementTyping.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">⊢!!</span></a> <a class="idref" href="ReplacementTyping.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#repl_typ"><span class="id" title="inductive">repl_typ</span></a> <a class="idref" href="ReplacementTyping.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="ReplacementTyping.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="ReplacementTyping.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="ReplacementTyping.html#T'"><span class="id" title="variable">T'</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T'"><span class="id" title="variable">T'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hp</span> <span class="id" title="var">Hq</span> <span class="id" title="var">Hr</span>. <span class="id" title="var">gen</span> <span class="id" title="var">p</span> <span class="id" title="var">T</span> <span class="id" title="var">U</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">Hq</span>; <span class="id" title="var">introv</span> <span class="id" title="var">Hp</span>; <span class="id" title="var">introv</span> <span class="id" title="var">Hr'</span> <span class="id" title="var">Hr</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span>× <a class="idref" href="ReplacementTyping.html#replacement_repl_closure_pq2"><span class="id" title="lemma">replacement_repl_closure_pq2</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> (<a class="idref" href="Replacement.html#repl_insert"><span class="id" title="lemma">repl_insert</span></a> <span class="id" title="var">q</span> <span class="id" title="var">Hr</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">U'</span> [<span class="id" title="var">Hr1</span> <span class="id" title="var">Hr2</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="PreciseTyping.html#pt2_exists"><span class="id" title="lemma">pt2_exists</span></a> <span class="id" title="var">Hq</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">S</span> <span class="id" title="var">Hq'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lets</span> <span class="id" title="var">Hc</span>: (<a class="idref" href="ReplacementTyping.html#replacement_repl_closure_pq2"><span class="id" title="lemma">replacement_repl_closure_pq2</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">Hp</span> <span class="id" title="var">H</span> <span class="id" title="var">Hq'</span> <span class="id" title="var">Hr1</span>). <span class="id" title="tactic">apply</span>× <span class="id" title="var">IHHq</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Replacement typing is closed under repeated <span class="inlinecode"><span class="id" title="var">pq</span></span> replacement 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="replacement_repl_closure_pq_comp"><span class="id" title="lemma">replacement_repl_closure_pq_comp</span></a>: <span class="id" title="keyword">∀</span> <span class="id" title="var">G</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span> <span class="id" title="var">r</span> <span class="id" title="var">T</span> <span class="id" title="var">T'</span> <span class="id" title="var">U</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#p"><span class="id" title="variable">p</span></a><a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">⊢!!!</span></a> <a class="idref" href="ReplacementTyping.html#q"><span class="id" title="variable">q</span></a><a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">⊢!!</span></a> <a class="idref" href="ReplacementTyping.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Replacement.html#repl_repeat_typ"><span class="id" title="abbreviation">repl_repeat_typ</span></a> <a class="idref" href="ReplacementTyping.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="ReplacementTyping.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="ReplacementTyping.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="ReplacementTyping.html#T'"><span class="id" title="variable">T'</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#p"><span class="id" title="variable">p</span></a><a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T'"><span class="id" title="variable">T'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hp</span> <span class="id" title="var">Hq</span> <span class="id" title="var">Hr</span> <span class="id" title="var">Hc</span>. <span class="id" title="var">gen</span> <span class="id" title="var">p</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">Hc</span>; <span class="id" title="var">introv</span> <span class="id" title="var">Hp</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span>× <span class="id" title="var">IHHc</span>. <span class="id" title="tactic">apply</span>× <a class="idref" href="ReplacementTyping.html#replacement_repl_closure_pq3"><span class="id" title="lemma">replacement_repl_closure_pq3</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Replacement typing is closed under <span class="inlinecode">&lt;:-<span class="id" title="var">Sel</span></span> subtyping when
    we know that a path's II-level precise type has a type member 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="path_sel_repl2"><span class="id" title="lemma">path_sel_repl2</span></a>: <span class="id" title="keyword">∀</span> <span class="id" title="var">G</span> <span class="id" title="var">p</span> <span class="id" title="var">A</span> <span class="id" title="var">T</span> <span class="id" title="var">q</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">⊢!!</span></a> <a class="idref" href="ReplacementTyping.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#typ_rcd"><span class="id" title="constructor">typ_rcd</span></a> <a class="idref" href="Definitions.html#b194d02349b51cad3901d2caba34fa00"><span class="id" title="notation">{</span></a><a class="idref" href="ReplacementTyping.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="Definitions.html#b194d02349b51cad3901d2caba34fa00"><span class="id" title="notation">&gt;:</span></a> <a class="idref" href="ReplacementTyping.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="Definitions.html#b194d02349b51cad3901d2caba34fa00"><span class="id" title="notation">&lt;:</span></a> <a class="idref" href="ReplacementTyping.html#T"><span class="id" title="variable">T</span></a><a class="idref" href="Definitions.html#b194d02349b51cad3901d2caba34fa00"><span class="id" title="notation">}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="Definitions.html#56a240108deb0dfbaeb49e48db859cf7"><span class="id" title="notation">↓</span></a> <a class="idref" href="ReplacementTyping.html#A"><span class="id" title="variable">A</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hp</span> <span class="id" title="var">Hq</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">Hp</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Replacement typing is closed under <span class="inlinecode">&lt;:-<span class="id" title="var">Sel</span></span> subtyping when
    we know that a path's III-level precise type has a type member 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="path_sel_repl"><span class="id" title="lemma">path_sel_repl</span></a>: <span class="id" title="keyword">∀</span> <span class="id" title="var">G</span> <span class="id" title="var">p</span> <span class="id" title="var">A</span> <span class="id" title="var">T</span> <span class="id" title="var">q</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">⊢!!!</span></a> <a class="idref" href="ReplacementTyping.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#typ_rcd"><span class="id" title="constructor">typ_rcd</span></a> <a class="idref" href="Definitions.html#b194d02349b51cad3901d2caba34fa00"><span class="id" title="notation">{</span></a><a class="idref" href="ReplacementTyping.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="Definitions.html#b194d02349b51cad3901d2caba34fa00"><span class="id" title="notation">&gt;:</span></a> <a class="idref" href="ReplacementTyping.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="Definitions.html#b194d02349b51cad3901d2caba34fa00"><span class="id" title="notation">&lt;:</span></a> <a class="idref" href="ReplacementTyping.html#T"><span class="id" title="variable">T</span></a><a class="idref" href="Definitions.html#b194d02349b51cad3901d2caba34fa00"><span class="id" title="notation">}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="Definitions.html#56a240108deb0dfbaeb49e48db859cf7"><span class="id" title="notation">↓</span></a> <a class="idref" href="ReplacementTyping.html#A"><span class="id" title="variable">A</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hp</span> <span class="id" title="var">Hq</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">Hp</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span>× <a class="idref" href="ReplacementTyping.html#path_sel_repl2"><span class="id" title="lemma">path_sel_repl2</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHHp</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hi</span> <span class="id" title="constructor">eq_refl</span> <span class="id" title="var">Hq</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="keyword">∀</span> <span class="id" title="var">q</span>, <a class="idref" href="ReplacementTyping.html#q"><span class="id" title="variable">q</span></a> <span class="id" title="notation">=</span> <a class="idref" href="ReplacementTyping.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="Definitions.html#086f2d7e593ce2ec7b60009929463693"><span class="id" title="notation">••</span></a> <span class="id" title="constructor">nil</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hnil</span>. {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span>. <span class="id" title="tactic">rewrite</span>× <a class="idref" href="Binding.html#field_sel_nil"><span class="id" title="lemma">field_sel_nil</span></a>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="id" title="var">lets</span> <span class="id" title="var">He1</span>: (<span class="id" title="var">Hnil</span> <span class="id" title="var">q0</span>). <span class="id" title="var">lets</span> <span class="id" title="var">He2</span>: (<span class="id" title="var">Hnil</span> <span class="id" title="var">p</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="PreciseTyping.html#pt2_exists"><span class="id" title="lemma">pt2_exists</span></a> <span class="id" title="var">Hp</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">U</span> <span class="id" title="var">Hp0</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="ReplacementTyping.html#replacement_repl_closure_qp2"><span class="id" title="lemma">replacement_repl_closure_qp2</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">H</span> <span class="id" title="var">Hp0</span> <span class="id" title="var">IHHp</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">He1</span> <span class="id" title="tactic">at</span> 2. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">He2</span> <span class="id" title="tactic">at</span> 2. <span class="id" title="tactic">apply</span> <a class="idref" href="Definitions.html#rpath"><span class="id" title="constructor">rpath</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Replacement typing is closed under <span class="inlinecode"><span class="id" title="var">Sel</span>-&lt;:</span> subtyping 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="path_sel_repl_inv"><span class="id" title="lemma">path_sel_repl_inv</span></a>: <span class="id" title="keyword">∀</span> <span class="id" title="var">G</span> <span class="id" title="var">p</span> <span class="id" title="var">A</span> <span class="id" title="var">T</span> <span class="id" title="var">q</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">⊢!!!</span></a> <a class="idref" href="ReplacementTyping.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#typ_rcd"><span class="id" title="constructor">typ_rcd</span></a> <a class="idref" href="Definitions.html#b194d02349b51cad3901d2caba34fa00"><span class="id" title="notation">{</span></a><a class="idref" href="ReplacementTyping.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="Definitions.html#b194d02349b51cad3901d2caba34fa00"><span class="id" title="notation">&gt;:</span></a> <a class="idref" href="ReplacementTyping.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="Definitions.html#b194d02349b51cad3901d2caba34fa00"><span class="id" title="notation">&lt;:</span></a> <a class="idref" href="ReplacementTyping.html#T"><span class="id" title="variable">T</span></a><a class="idref" href="Definitions.html#b194d02349b51cad3901d2caba34fa00"><span class="id" title="notation">}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="Definitions.html#56a240108deb0dfbaeb49e48db859cf7"><span class="id" title="notation">↓</span></a> <a class="idref" href="ReplacementTyping.html#A"><span class="id" title="variable">A</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T"><span class="id" title="variable">T</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hp</span> <span class="id" title="var">Hq</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">Hq</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span> "ty_inv_r"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">apply</span>× <a class="idref" href="InvertibleTyping.html#path_sel_inv"><span class="id" title="lemma">path_sel_inv</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span> "ty_sel_r"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">IHHq</span>. <span class="id" title="var">lets</span> <span class="id" title="var">Heq</span>: (<a class="idref" href="PreciseTyping.html#pf_pt3_unique"><span class="id" title="lemma">pf_pt3_unique</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">H</span> <span class="id" title="var">Hp</span>). <span class="id" title="tactic">subst</span>×.<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span> "ty_sel_qp_r"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="Replacement.html#repl_prefixes_sel"><span class="id" title="lemma">repl_prefixes_sel</span></a> <span class="id" title="var">H1</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">bs</span> [<span class="id" title="var">He1</span> <span class="id" title="var">He2</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>. <span class="id" title="tactic">assert</span> (<a class="idref" href="Definitions.html#record_type"><span class="id" title="definition">record_type</span></a> (<a class="idref" href="Definitions.html#typ_rcd"><span class="id" title="constructor">typ_rcd</span></a> <a class="idref" href="Definitions.html#b194d02349b51cad3901d2caba34fa00"><span class="id" title="notation">{</span></a><span class="id" title="var">A</span> <a class="idref" href="Definitions.html#b194d02349b51cad3901d2caba34fa00"><span class="id" title="notation">&gt;:</span></a> <span class="id" title="var">T</span> <a class="idref" href="Definitions.html#b194d02349b51cad3901d2caba34fa00"><span class="id" title="notation">&lt;:</span></a> <span class="id" title="var">T</span><a class="idref" href="Definitions.html#b194d02349b51cad3901d2caba34fa00"><span class="id" title="notation">}</span></a>)) <span class="id" title="keyword">as</span> <span class="id" title="var">Hrt</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lets</span> <span class="id" title="var">Hqbs</span>: (<a class="idref" href="PreciseTyping.html#pf_pt3_trans_inv_mult'"><span class="id" title="lemma">pf_pt3_trans_inv_mult'</span></a> <span class="id" title="var">_</span> <span class="id" title="var">Hi</span> <span class="id" title="var">H</span> <span class="id" title="var">Hp</span> (<span class="id" title="constructor">or_intror</span> <span class="id" title="var">Hrt</span>)). <span class="id" title="tactic">apply</span>× <span class="id" title="var">IHHq</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
If a path has a replacement type it has also an invertible type 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="repl_to_inv"><span class="id" title="lemma">repl_to_inv</span></a> <span class="id" title="var">G</span> <span class="id" title="var">p</span> <span class="id" title="var">T</span> :<br/>
&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<span class="id" title="notation">∃</span> <span class="id" title="var">U</span><span class="id" title="notation">,</span> <a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="InvertibleTyping.html#73b11c120860bd23cb2b9718d29e8cd0"><span class="id" title="notation">⊢##</span></a> <a class="idref" href="ReplacementTyping.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="InvertibleTyping.html#73b11c120860bd23cb2b9718d29e8cd0"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#U"><span class="id" title="variable">U</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> 1; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">IHty_repl</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">U</span> <span class="id" title="var">Hp</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="InvertibleTyping.html#inv_backtrack"><span class="id" title="lemma">inv_backtrack</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hp</span>. <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Replacement typing is closed under ⊤-subtyping 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="repl_top"><span class="id" title="lemma">repl_top</span></a>: <span class="id" title="keyword">∀</span> <span class="id" title="var">G</span> <span class="id" title="var">r</span> <span class="id" title="var">T</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#r"><span class="id" title="variable">r</span></a><a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#r"><span class="id" title="variable">r</span></a><a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#276a4a3018138118cad52558d0b71a10"><span class="id" title="notation">⊤</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hr</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ReplacementTyping.html#repl_to_inv"><span class="id" title="lemma">repl_to_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hr</span> <span class="id" title="keyword">as</span> [? ?]. <span class="id" title="tactic">constructor</span>×.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Replacement typing is closed under tight subtyping 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="replacement_subtyping_closure"><span class="id" title="lemma">replacement_subtyping_closure</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">G</span> <span class="id" title="var">T</span> <span class="id" title="var">U</span> <span class="id" title="var">p</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="TightTyping.html#3350a03272d49af9ea81ab2b6cc8bf1f"><span class="id" title="notation">⊢#</span></a> <a class="idref" href="ReplacementTyping.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="TightTyping.html#3350a03272d49af9ea81ab2b6cc8bf1f"><span class="id" title="notation">&lt;:</span></a> <a class="idref" href="ReplacementTyping.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#p"><span class="id" title="variable">p</span></a><a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#p"><span class="id" title="variable">p</span></a><a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#U"><span class="id" title="variable">U</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hs</span>. <span class="id" title="var">gen</span> <span class="id" title="var">p</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">Hs</span>; <span class="id" title="var">introv</span> <span class="id" title="var">Hp</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span> "subtyp_top"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>× <a class="idref" href="ReplacementTyping.html#repl_top"><span class="id" title="lemma">repl_top</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span>  "subtyp_bot"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inversions</span> <span class="id" title="var">Hp</span>. <span class="id" title="var">false</span>× <a class="idref" href="InvertibleTyping.html#invertible_bot"><span class="id" title="lemma">invertible_bot</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span> "subtyp_and1"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="ReplacementTyping.html#repl_and"><span class="id" title="lemma">repl_and</span></a> <span class="id" title="var">Hi</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hp</span>. <span class="id" title="var">destruct_all</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span> "subtyp_and2"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="ReplacementTyping.html#repl_and"><span class="id" title="lemma">repl_and</span></a> <span class="id" title="var">Hi</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hp</span>. <span class="id" title="var">destruct_all</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span> "subtyp_fld"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">Hp</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span> "subtyp_typ"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">Hp</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span> "subtyp_sngl_pq"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="PreciseTyping.html#pt2_exists"><span class="id" title="lemma">pt2_exists</span></a> <span class="id" title="var">H0</span>) <span class="id" title="keyword">as</span> [? ?].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>× <a class="idref" href="ReplacementTyping.html#replacement_repl_closure_pq3"><span class="id" title="lemma">replacement_repl_closure_pq3</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span> "subtyp_sngl_qp"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="PreciseTyping.html#pt2_exists"><span class="id" title="lemma">pt2_exists</span></a> <span class="id" title="var">H0</span>) <span class="id" title="keyword">as</span> [? ?].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>× <a class="idref" href="ReplacementTyping.html#replacement_repl_closure_qp3"><span class="id" title="lemma">replacement_repl_closure_qp3</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span> "subtyp_sel2"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>× <a class="idref" href="ReplacementTyping.html#path_sel_repl"><span class="id" title="lemma">path_sel_repl</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span> "subtyp_sel1"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>× <a class="idref" href="ReplacementTyping.html#path_sel_repl_inv"><span class="id" title="lemma">path_sel_repl_inv</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span> "subtyp_all"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">Hp</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
If a path has a replacement type it also has a III-level precise type 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="repl_prec_exists"><span class="id" title="lemma">repl_prec_exists</span></a>: <span class="id" title="keyword">∀</span> <span class="id" title="var">G</span> <span class="id" title="var">p</span> <span class="id" title="var">T</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#p"><span class="id" title="variable">p</span></a><a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">∃</span> <span class="id" title="var">U</span><span class="id" title="notation">,</span> <a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">⊢!!!</span></a> <a class="idref" href="ReplacementTyping.html#p"><span class="id" title="variable">p</span></a><a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#U"><span class="id" title="variable">U</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hp</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ReplacementTyping.html#repl_to_inv"><span class="id" title="lemma">repl_to_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hp</span> <span class="id" title="keyword">as</span> [? <span class="id" title="var">Hp</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Hp</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Replacement is closed under field selection on paths 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="repl_fld"><span class="id" title="lemma">repl_fld</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">G</span> <span class="id" title="var">p</span> <span class="id" title="var">a</span> <span class="id" title="var">T</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#p"><span class="id" title="variable">p</span></a><a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#typ_rcd"><span class="id" title="constructor">typ_rcd</span></a> <a class="idref" href="Definitions.html#18cbe8108c7275adbcbe2d488cc0d64e"><span class="id" title="notation">{</span></a><a class="idref" href="ReplacementTyping.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="Definitions.html#18cbe8108c7275adbcbe2d488cc0d64e"><span class="id" title="notation">⦂</span></a> <a class="idref" href="ReplacementTyping.html#T"><span class="id" title="variable">T</span></a><a class="idref" href="Definitions.html#18cbe8108c7275adbcbe2d488cc0d64e"><span class="id" title="notation">}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#p"><span class="id" title="variable">p</span></a><a class="idref" href="Definitions.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a><a class="idref" href="ReplacementTyping.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T"><span class="id" title="variable">T</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hp</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">Hp</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="PreciseFlow.html#pf_fld"><span class="id" title="constructor">pf_fld</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="ReplacementTyping.html#ty_inv_r"><span class="id" title="constructor">ty_inv_r</span></a>; <span class="id" title="tactic">apply</span>× <a class="idref" href="InvertibleTyping.html#ty_precise_inv"><span class="id" title="constructor">ty_precise_inv</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">lets</span> <span class="id" title="var">Hq</span>: (<a class="idref" href="PreciseTyping.html#pt3_field_elim"><span class="id" title="lemma">pt3_field_elim</span></a> <span class="id" title="var">H0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lets</span> <span class="id" title="var">Hp</span>: (<a class="idref" href="PreciseTyping.html#pt3_trans"><span class="id" title="lemma">pt3_trans</span></a> <span class="id" title="var">_</span> <span class="id" title="var">H</span> <span class="id" title="var">Hq</span>). <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHty_path_inv</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="constructor">eq_refl</span> <span class="id" title="var">Hi</span>). <span class="id" title="tactic">apply</span> <a class="idref" href="ReplacementTyping.html#ty_inv_r"><span class="id" title="constructor">ty_inv_r</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="ReplacementTyping.html#replacement_subtyping_closure"><span class="id" title="lemma">replacement_subtyping_closure</span></a>. <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
If <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢//</span> <span class="inlinecode"><span class="id" title="var">p</span>:</span> <span class="inlinecode"><span class="id" title="var">T</span></span> and <span class="inlinecode"><span class="id" title="var">T</span></span> and <span class="inlinecode"><span class="id" title="var">T'</span></span> are equivalent then <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢//</span> <span class="inlinecode"><span class="id" title="var">p</span>:</span> <span class="inlinecode"><span class="id" title="var">T'</span></span> 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="replacement_repl_closure_comp_typed"><span class="id" title="lemma">replacement_repl_closure_comp_typed</span></a>: <span class="id" title="keyword">∀</span> <span class="id" title="var">G</span> <span class="id" title="var">p</span> <span class="id" title="var">T</span> <span class="id" title="var">T'</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#p"><span class="id" title="variable">p</span></a><a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#c7ef41c91aa73ea0925fafe08ac00851"><span class="id" title="notation">⊢</span></a> <a class="idref" href="ReplacementTyping.html#T'"><span class="id" title="variable">T'</span></a> <a class="idref" href="PreciseTyping.html#c7ef41c91aa73ea0925fafe08ac00851"><span class="id" title="notation">⟿</span></a> <a class="idref" href="ReplacementTyping.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#p"><span class="id" title="variable">p</span></a><a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T'"><span class="id" title="variable">T'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hp</span> <span class="id" title="var">Hr</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">Hr</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">p'</span> [<span class="id" title="var">q'</span> [<span class="id" title="var">S</span> [<span class="id" title="var">Hpq</span> [<span class="id" title="var">Hq</span> <span class="id" title="var">Hr'</span>]]]]].<br/>
&nbsp;&nbsp;<span class="id" title="var">lets</span> <span class="id" title="var">Hrc</span>: (<a class="idref" href="ReplacementTyping.html#replacement_repl_closure_qp"><span class="id" title="lemma">replacement_repl_closure_qp</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">Hpq</span> <span class="id" title="var">Hq</span> <span class="id" title="var">Hp</span> <span class="id" title="var">Hr'</span>). <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
From replacement typing of singleton types to invertible typing of singleton types 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="repl_to_invertible_sngl_repl_comp"><span class="id" title="lemma">repl_to_invertible_sngl_repl_comp</span></a>: <span class="id" title="keyword">∀</span> <span class="id" title="var">G</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#p"><span class="id" title="variable">p</span></a><a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">∃</span> <span class="id" title="var">q'</span><span class="id" title="notation">,</span> <a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#c7af1974ce343fd5c18b2fc018fc3f99"><span class="id" title="notation">⊢</span></a> <a class="idref" href="ReplacementTyping.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="PreciseTyping.html#c7af1974ce343fd5c18b2fc018fc3f99"><span class="id" title="notation">⟿'</span></a> <a class="idref" href="ReplacementTyping.html#q'"><span class="id" title="variable">q'</span></a> <span class="id" title="notation">∧</span> <a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="InvertibleTyping.html#73b11c120860bd23cb2b9718d29e8cd0"><span class="id" title="notation">⊢##</span></a> <a class="idref" href="ReplacementTyping.html#p"><span class="id" title="variable">p</span></a><a class="idref" href="InvertibleTyping.html#73b11c120860bd23cb2b9718d29e8cd0"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#q'"><span class="id" title="variable">q'</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hp</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">Hp</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span> "ty_inv_r"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">q</span>. <span class="id" title="tactic">split</span>×. <span class="id" title="tactic">apply</span> <a class="idref" href="Sequences.html#star_refl"><span class="id" title="constructor">star_refl</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span> "ty_sngl_qp_r"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHHp</span> <span class="id" title="var">_</span> <span class="id" title="var">Hi</span> <span class="id" title="constructor">eq_refl</span>). <span class="id" title="tactic">destruct</span> <span class="id" title="var">IHHp</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">p'</span> [<span class="id" title="var">Hr</span> <span class="id" title="var">Hr'</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eexists</span>. <span class="id" title="tactic">split</span>×. <span class="id" title="tactic">eapply</span> <a class="idref" href="Sequences.html#star_trans"><span class="id" title="lemma">star_trans</span></a>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Hr</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="Sequences.html#star_one"><span class="id" title="lemma">star_one</span></a>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
If a path <span class="inlinecode"><span class="id" title="var">p</span></span> has type <span class="inlinecode"><span class="id" title="var">q.type</span></span> under replacement typing and <span class="inlinecode"><span class="id" title="var">q</span></span> is well-typed,
    then the invertible type of <span class="inlinecode"><span class="id" title="var">p</span></span> has a singleton type <span class="inlinecode"><span class="id" title="var">q'.type</span></span>, and <span class="inlinecode"><span class="id" title="var">q</span></span> and <span class="inlinecode"><span class="id" title="var">q'</span></span>
    are aliases. 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="repl_to_invertible_sngl"><span class="id" title="lemma">repl_to_invertible_sngl</span></a>: <span class="id" title="keyword">∀</span> <span class="id" title="var">G</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span> <span class="id" title="var">U</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#p"><span class="id" title="variable">p</span></a><a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">⊢!!</span></a> <a class="idref" href="ReplacementTyping.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">∃</span> <span class="id" title="var">q'</span> <span class="id" title="var">S</span><span class="id" title="notation">,</span> <a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="InvertibleTyping.html#73b11c120860bd23cb2b9718d29e8cd0"><span class="id" title="notation">⊢##</span></a> <a class="idref" href="ReplacementTyping.html#p"><span class="id" title="variable">p</span></a><a class="idref" href="InvertibleTyping.html#73b11c120860bd23cb2b9718d29e8cd0"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#q'"><span class="id" title="variable">q'</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">∧</span> <a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">⊢!!</span></a> <a class="idref" href="ReplacementTyping.html#q'"><span class="id" title="variable">q'</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#S"><span class="id" title="variable">S</span></a> <span class="id" title="notation">∧</span> <span class="id" title="notation">(</span><a class="idref" href="ReplacementTyping.html#q"><span class="id" title="variable">q</span></a> <span class="id" title="notation">=</span> <a class="idref" href="ReplacementTyping.html#q'"><span class="id" title="variable">q'</span></a> <span class="id" title="notation">∨</span> <a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">⊢!!!</span></a> <a class="idref" href="ReplacementTyping.html#q"><span class="id" title="variable">q</span></a><a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#q'"><span class="id" title="variable">q'</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a><span class="id" title="notation">)</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hp</span> <span class="id" title="var">Hq</span>. <span class="id" title="var">gen</span> <span class="id" title="var">U</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">Hp</span>; <span class="id" title="var">introv</span> <span class="id" title="var">Hq</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">invert_repl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="PreciseTyping.html#pf_pt2_trans_inv_mult"><span class="id" title="lemma">pf_pt2_trans_inv_mult</span></a> <span class="id" title="var">_</span> <span class="id" title="var">Hi</span> <span class="id" title="var">H</span> <span class="id" title="var">Hq</span>) <span class="id" title="keyword">as</span> →.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="PreciseTyping.html#pt2_qbs_typed"><span class="id" title="lemma">pt2_qbs_typed</span></a> <span class="id" title="var">_</span> <span class="id" title="var">Hi</span> <span class="id" title="var">H</span> <span class="id" title="var">H0</span> <span class="id" title="var">Hq</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">S</span> <span class="id" title="var">Hq'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHHp</span> <span class="id" title="var">_</span> <span class="id" title="var">Hi</span> <span class="id" title="constructor">eq_refl</span> <span class="id" title="var">_</span> <span class="id" title="var">Hq'</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">q'</span> [<span class="id" title="var">W</span> [<span class="id" title="var">Hrq'</span> [<span class="id" title="var">Hq''</span> [&lt;- | <span class="id" title="var">Hqq'</span>]]]]]; <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
If <span class="inlinecode"><span class="id" title="var">p</span></span>'s replacement type is <span class="inlinecode"><span class="id" title="var">q.type</span></span> and <span class="inlinecode"><span class="id" title="var">q</span></span> is well-typed, then
    <span class="inlinecode"><span class="id" title="var">p.a</span></span>'s replacement type is <span class="inlinecode"><span class="id" title="var">q.a.type</span></span> 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="path_elim_repl"><span class="id" title="lemma">path_elim_repl</span></a>: <span class="id" title="keyword">∀</span> <span class="id" title="var">G</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span> <span class="id" title="var">a</span> <span class="id" title="var">T</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#p"><span class="id" title="variable">p</span></a><a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#q"><span class="id" title="variable">q</span></a><a class="idref" href="Definitions.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a><a class="idref" href="ReplacementTyping.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#p"><span class="id" title="variable">p</span></a><a class="idref" href="Definitions.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a><a class="idref" href="ReplacementTyping.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#q"><span class="id" title="variable">q</span></a><a class="idref" href="Definitions.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a><a class="idref" href="ReplacementTyping.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hp</span> <span class="id" title="var">Hq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="ReplacementTyping.html#repl_to_invertible_sngl_repl_comp"><span class="id" title="lemma">repl_to_invertible_sngl_repl_comp</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">Hp</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">p'</span> [<span class="id" title="var">Hc</span> <span class="id" title="var">Hpi</span>]].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="PreciseTyping.html#repl_comp_sngl_inv1"><span class="id" title="lemma">repl_comp_sngl_inv1</span></a> <span class="id" title="var">Hc</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">r</span> <span class="id" title="var">Heq</span>]. <span class="id" title="var">inversions</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="InvertibleTyping.html#inv_to_precise_sngl_repl_comp"><span class="id" title="lemma">inv_to_precise_sngl_repl_comp</span></a> <span class="id" title="var">Hpi</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">r'</span> [<span class="id" title="var">Hp'</span> <span class="id" title="var">Hrc</span>]].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="ReplacementTyping.html#repl_prec_exists"><span class="id" title="lemma">repl_prec_exists</span></a> <span class="id" title="var">Hq</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">U</span> <span class="id" title="var">Hq'</span>]. <span class="id" title="tactic">clear</span> <span class="id" title="var">Hq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="PreciseTyping.html#field_typing_comp1"><span class="id" title="lemma">field_typing_comp1</span></a> <span class="id" title="var">_</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hc</span> <span class="id" title="var">Hq'</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">T1</span> <span class="id" title="var">Hra</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="PreciseTyping.html#field_typing_comp2"><span class="id" title="lemma">field_typing_comp2</span></a> <span class="id" title="var">_</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hrc</span> <span class="id" title="var">Hra</span>) <span class="id" title="keyword">as</span>[<span class="id" title="var">T2</span> <span class="id" title="var">Hr'a</span>].<br/>
&nbsp;&nbsp;<span class="id" title="var">lets</span> <span class="id" title="var">Hper</span>: (<a class="idref" href="PreciseTyping.html#path_elim_prec"><span class="id" title="lemma">path_elim_prec</span></a> <span class="id" title="var">_</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hp'</span> <span class="id" title="var">Hr'a</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">lets</span> <span class="id" title="var">Hinv</span>: (<a class="idref" href="InvertibleTyping.html#ty_precise_inv"><span class="id" title="constructor">ty_precise_inv</span></a> <span class="id" title="var">Hper</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">G</span> <a class="idref" href="PreciseTyping.html#c7af1974ce343fd5c18b2fc018fc3f99"><span class="id" title="notation">⊢</span></a> <span class="id" title="var">r'</span> <a class="idref" href="Definitions.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> <span class="id" title="var">a</span> <a class="idref" href="PreciseTyping.html#c7af1974ce343fd5c18b2fc018fc3f99"><span class="id" title="notation">⟿'</span></a> <span class="id" title="var">r</span> <a class="idref" href="Definitions.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> <span class="id" title="var">a</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hr'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span>× <a class="idref" href="PreciseTyping.html#repl_composition_fld_elim"><span class="id" title="lemma">repl_composition_fld_elim</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">G</span> <a class="idref" href="PreciseTyping.html#c7af1974ce343fd5c18b2fc018fc3f99"><span class="id" title="notation">⊢</span></a> <span class="id" title="var">q</span> <a class="idref" href="Definitions.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> <span class="id" title="var">a</span> <a class="idref" href="PreciseTyping.html#c7af1974ce343fd5c18b2fc018fc3f99"><span class="id" title="notation">⟿'</span></a> <span class="id" title="var">r</span> <a class="idref" href="Definitions.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> <span class="id" title="var">a</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hr''</span><br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span>× <a class="idref" href="PreciseTyping.html#repl_composition_fld_elim"><span class="id" title="lemma">repl_composition_fld_elim</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">lets</span> <span class="id" title="var">Hic</span>: (<a class="idref" href="InvertibleTyping.html#invertible_repl_closure_comp_typed"><span class="id" title="lemma">invertible_repl_closure_comp_typed</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">Hinv</span> <span class="id" title="var">Hr'</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span>× <a class="idref" href="ReplacementTyping.html#replacement_repl_closure_comp_typed"><span class="id" title="lemma">replacement_repl_closure_comp_typed</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Replacement typing is closed under singleton transitivity with a type <span class="inlinecode"><span class="id" title="var">q.type</span></span>
    if <span class="inlinecode"><span class="id" title="var">q</span></span> is typeable under invertible typing 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="inv_sngl_trans"><span class="id" title="lemma">inv_sngl_trans</span></a>: <span class="id" title="keyword">∀</span> <span class="id" title="var">G</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span> <span class="id" title="var">T</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="InvertibleTyping.html#73b11c120860bd23cb2b9718d29e8cd0"><span class="id" title="notation">⊢##</span></a> <a class="idref" href="ReplacementTyping.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="InvertibleTyping.html#73b11c120860bd23cb2b9718d29e8cd0"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T"><span class="id" title="variable">T</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hpq</span> <span class="id" title="var">Hq</span>. <span class="id" title="var">gen</span> <span class="id" title="var">p</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">Hq</span>; <span class="id" title="var">introv</span> <span class="id" title="var">Hpq</span>; <span class="id" title="tactic">eauto</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">solve</span> [<span class="id" title="tactic">apply</span>× <a class="idref" href="ReplacementTyping.html#replacement_repl_closure_pq"><span class="id" title="lemma">replacement_repl_closure_pq</span></a>].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="PreciseTyping.html#pt2_exists"><span class="id" title="lemma">pt2_exists</span></a> <span class="id" title="var">H</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">U</span> <span class="id" title="var">H'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="ReplacementTyping.html#repl_to_invertible_sngl"><span class="id" title="lemma">repl_to_invertible_sngl</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">Hpq</span> <span class="id" title="var">H'</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">r</span> [<span class="id" title="var">S</span> [<span class="id" title="var">Hpr</span> [<span class="id" title="var">Hq</span> <span class="id" title="var">Hrc</span>]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="InvertibleTyping.html#inv_to_precise_sngl"><span class="id" title="lemma">inv_to_precise_sngl</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">Hpr</span> (<a class="idref" href="PreciseTyping.html#pt3"><span class="id" title="constructor">pt3</span></a> <span class="id" title="var">Hq</span>)) <span class="id" title="keyword">as</span> [<span class="id" title="var">r'</span> [<span class="id" title="var">Hpr'</span> <span class="id" title="var">Hrc'</span>]]. <span class="id" title="tactic">clear</span> <span class="id" title="var">Hpr</span> <span class="id" title="var">Hpq</span> <span class="id" title="var">H'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hrc</span>, <span class="id" title="var">Hrc'</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">apply</span>× <a class="idref" href="PreciseTyping.html#pt3_sngl_trans3"><span class="id" title="lemma">pt3_sngl_trans3</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">apply</span>× <a class="idref" href="PreciseTyping.html#pt3_sngl_trans3"><span class="id" title="lemma">pt3_sngl_trans3</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">lets</span> <span class="id" title="var">Hpi</span>: (<a class="idref" href="PreciseTyping.html#pt3_invert"><span class="id" title="lemma">pt3_invert</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">H</span> <span class="id" title="var">H0</span>). <span class="id" title="var">destruct_all</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">apply</span>× <a class="idref" href="PreciseTyping.html#pt3_sngl_trans3"><span class="id" title="lemma">pt3_sngl_trans3</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id" title="tactic">apply</span> <a class="idref" href="InvertibleTyping.html#ty_precise_inv"><span class="id" title="constructor">ty_precise_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hpr'</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ReplacementTyping.html#ty_inv_r"><span class="id" title="constructor">ty_inv_r</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hpr'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>× <a class="idref" href="ReplacementTyping.html#replacement_repl_closure_qp3"><span class="id" title="lemma">replacement_repl_closure_qp3</span></a>. <span class="id" title="tactic">apply</span>× <a class="idref" href="Replacement.html#repl_intro_sngl"><span class="id" title="lemma">repl_intro_sngl</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">lets</span> <span class="id" title="var">Hpi</span>: (<a class="idref" href="PreciseTyping.html#pt3_invert"><span class="id" title="lemma">pt3_invert</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">H</span> <span class="id" title="var">H0</span>). <span class="id" title="var">destruct_all</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">apply</span>× <a class="idref" href="PreciseTyping.html#pt3_sngl_trans3"><span class="id" title="lemma">pt3_sngl_trans3</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">apply</span>× <a class="idref" href="PreciseTyping.html#pt3_sngl_trans3"><span class="id" title="lemma">pt3_sngl_trans3</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id" title="tactic">apply</span> <a class="idref" href="InvertibleTyping.html#ty_precise_inv"><span class="id" title="constructor">ty_precise_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hpr'</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ReplacementTyping.html#ty_inv_r"><span class="id" title="constructor">ty_inv_r</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hpr'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lets</span> <span class="id" title="var">Hc</span>: (<a class="idref" href="ReplacementTyping.html#replacement_repl_closure_pq3"><span class="id" title="lemma">replacement_repl_closure_pq3</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">Hpr'</span> <span class="id" title="var">H1</span> <span class="id" title="var">Hq</span> (<a class="idref" href="Replacement.html#repl_intro_sngl"><span class="id" title="lemma">repl_intro_sngl</span></a> <span class="id" title="var">r'</span> <span class="id" title="var">r</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>× <a class="idref" href="ReplacementTyping.html#replacement_repl_closure_qp3"><span class="id" title="lemma">replacement_repl_closure_qp3</span></a>. <span class="id" title="tactic">apply</span>× <a class="idref" href="Replacement.html#repl_intro_sngl"><span class="id" title="lemma">repl_intro_sngl</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> (<a class="idref" href="ReplacementTyping.html#replacement_subtyping_closure"><span class="id" title="lemma">replacement_subtyping_closure</span></a> <span class="id" title="var">Hi</span>). <span class="id" title="tactic">eapply</span> <a class="idref" href="TightTyping.html#subtyp_fld_t"><span class="id" title="constructor">subtyp_fld_t</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> (<a class="idref" href="ReplacementTyping.html#replacement_subtyping_closure"><span class="id" title="lemma">replacement_subtyping_closure</span></a> <span class="id" title="var">Hi</span>). <span class="id" title="tactic">eapply</span> <a class="idref" href="TightTyping.html#subtyp_typ_t"><span class="id" title="constructor">subtyp_typ_t</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> (<a class="idref" href="ReplacementTyping.html#replacement_subtyping_closure"><span class="id" title="lemma">replacement_subtyping_closure</span></a> <span class="id" title="var">Hi</span>). <span class="id" title="tactic">eapply</span> <a class="idref" href="TightTyping.html#subtyp_all_t"><span class="id" title="constructor">subtyp_all_t</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span>× <a class="idref" href="ReplacementTyping.html#repl_top"><span class="id" title="lemma">repl_top</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Replacement typing is closed under singleton transitivity 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="repl_sngl_trans"><span class="id" title="lemma">repl_sngl_trans</span></a>: <span class="id" title="keyword">∀</span> <span class="id" title="var">G</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span> <span class="id" title="var">T</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T"><span class="id" title="variable">T</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hpq</span> <span class="id" title="var">Hq</span>. <span class="id" title="var">gen</span> <span class="id" title="var">p</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">Hq</span>; <span class="id" title="var">introv</span> <span class="id" title="var">Hpq</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span>× <a class="idref" href="ReplacementTyping.html#inv_sngl_trans"><span class="id" title="lemma">inv_sngl_trans</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHHq</span> <span class="id" title="var">Hi</span> <span class="id" title="var">_</span> <span class="id" title="var">Hpq</span>). <span class="id" title="tactic">apply</span> <a class="idref" href="ReplacementTyping.html#ty_bnd_r"><span class="id" title="constructor">ty_bnd_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="ReplacementTyping.html#repl_to_inv"><span class="id" title="lemma">repl_to_inv</span></a> <span class="id" title="var">Hq</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">_</span> [<span class="id" title="var">_</span> [<span class="id" title="var">U</span> <span class="id" title="var">Hq'</span>]%<a class="idref" href="PreciseTyping.html#pt2_exists"><span class="id" title="lemma">pt2_exists</span></a>]%<a class="idref" href="InvertibleTyping.html#inv_to_prec"><span class="id" title="lemma">inv_to_prec</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="ReplacementTyping.html#repl_to_invertible_sngl"><span class="id" title="lemma">repl_to_invertible_sngl</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">Hpq</span> <span class="id" title="var">Hq'</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">r</span> [<span class="id" title="var">S</span> [<span class="id" title="var">Hpr</span> [<span class="id" title="var">Hs</span> <span class="id" title="var">Hor</span>]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="InvertibleTyping.html#inv_to_precise_sngl"><span class="id" title="lemma">inv_to_precise_sngl</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">Hpr</span> (<a class="idref" href="PreciseTyping.html#pt3"><span class="id" title="constructor">pt3</span></a> <span class="id" title="var">Hs</span>)) <span class="id" title="keyword">as</span> [<span class="id" title="var">r'</span> [<span class="id" title="var">Hpr'</span> <span class="id" title="var">Hor'</span>]]. <span class="id" title="tactic">clear</span> <span class="id" title="var">Hpr</span> <span class="id" title="var">Hpq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hor</span>, <span class="id" title="var">Hor'</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">assert</span> (<a class="idref" href="Replacement.html#repl_repeat_typ"><span class="id" title="abbreviation">repl_repeat_typ</span></a> <span class="id" title="var">r</span> <span class="id" title="var">p0</span> (<a class="idref" href="Definitions.html#open_typ_p"><span class="id" title="definition">open_typ_p</span></a> <span class="id" title="var">r</span> <span class="id" title="var">T</span>) (<a class="idref" href="Definitions.html#open_typ_p"><span class="id" title="definition">open_typ_p</span></a> <span class="id" title="var">p0</span> <span class="id" title="var">T</span>)) <span class="id" title="keyword">as</span> <span class="id" title="var">Hrr</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span>× <a class="idref" href="Replacement.html#repl_comp_open_rec"><span class="id" title="lemma">repl_comp_open_rec</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>× <a class="idref" href="ReplacementTyping.html#replacement_repl_closure_qp_comp"><span class="id" title="lemma">replacement_repl_closure_qp_comp</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">assert</span> (<a class="idref" href="Replacement.html#repl_repeat_typ"><span class="id" title="abbreviation">repl_repeat_typ</span></a> <span class="id" title="var">r</span> <span class="id" title="var">r'</span> (<a class="idref" href="Definitions.html#open_typ_p"><span class="id" title="definition">open_typ_p</span></a> <span class="id" title="var">r</span> <span class="id" title="var">T</span>) (<a class="idref" href="Definitions.html#open_typ_p"><span class="id" title="definition">open_typ_p</span></a> <span class="id" title="var">r'</span> <span class="id" title="var">T</span>)) <span class="id" title="keyword">as</span> <span class="id" title="var">Hrr</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span>× <a class="idref" href="Replacement.html#repl_comp_open_rec"><span class="id" title="lemma">repl_comp_open_rec</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lets</span> <span class="id" title="var">Hc</span>: (<a class="idref" href="ReplacementTyping.html#replacement_repl_closure_qp_comp"><span class="id" title="lemma">replacement_repl_closure_qp_comp</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">IHHq</span> <span class="id" title="var">H0</span> <span class="id" title="var">Hs</span> <span class="id" title="var">Hrr</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="PreciseTyping.html#pt2_exists"><span class="id" title="lemma">pt2_exists</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span> <span class="id" title="keyword">as</span> [? ?].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="ReplacementTyping.html#replacement_repl_closure_qp_comp"><span class="id" title="lemma">replacement_repl_closure_qp_comp</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">Hc</span>). <span class="id" title="tactic">apply</span> <span class="id" title="var">Hpr'</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>× <a class="idref" href="Replacement.html#repl_comp_open_rec"><span class="id" title="lemma">repl_comp_open_rec</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">assert</span> (<a class="idref" href="Replacement.html#repl_repeat_typ"><span class="id" title="abbreviation">repl_repeat_typ</span></a> <span class="id" title="var">p</span> <span class="id" title="var">r</span> (<a class="idref" href="Definitions.html#open_typ_p"><span class="id" title="definition">open_typ_p</span></a> <span class="id" title="var">p</span> <span class="id" title="var">T</span>) (<a class="idref" href="Definitions.html#open_typ_p"><span class="id" title="definition">open_typ_p</span></a> <span class="id" title="var">r</span> <span class="id" title="var">T</span>)) <span class="id" title="keyword">as</span> <span class="id" title="var">Hrr</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span>× <a class="idref" href="Replacement.html#repl_comp_open_rec"><span class="id" title="lemma">repl_comp_open_rec</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lets</span> <span class="id" title="var">Hc</span>: (<a class="idref" href="ReplacementTyping.html#replacement_repl_closure_pq_comp"><span class="id" title="lemma">replacement_repl_closure_pq_comp</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">IHHq</span> <span class="id" title="var">H</span> <span class="id" title="var">Hs</span> <span class="id" title="var">Hrr</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>× <a class="idref" href="ReplacementTyping.html#replacement_repl_closure_qp_comp"><span class="id" title="lemma">replacement_repl_closure_qp_comp</span></a>. <span class="id" title="tactic">apply</span>× <a class="idref" href="Replacement.html#repl_comp_open_rec"><span class="id" title="lemma">repl_comp_open_rec</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">assert</span> (<a class="idref" href="Replacement.html#repl_repeat_typ"><span class="id" title="abbreviation">repl_repeat_typ</span></a> <span class="id" title="var">p</span> <span class="id" title="var">r</span> (<a class="idref" href="Definitions.html#open_typ_p"><span class="id" title="definition">open_typ_p</span></a> <span class="id" title="var">p</span> <span class="id" title="var">T</span>) (<a class="idref" href="Definitions.html#open_typ_p"><span class="id" title="definition">open_typ_p</span></a> <span class="id" title="var">r</span> <span class="id" title="var">T</span>)) <span class="id" title="keyword">as</span> <span class="id" title="var">Hrr</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span>× <a class="idref" href="Replacement.html#repl_comp_open_rec"><span class="id" title="lemma">repl_comp_open_rec</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lets</span> <span class="id" title="var">Hc</span>: (<a class="idref" href="ReplacementTyping.html#replacement_repl_closure_pq_comp"><span class="id" title="lemma">replacement_repl_closure_pq_comp</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">IHHq</span> <span class="id" title="var">H</span> <span class="id" title="var">Hs</span> <span class="id" title="var">Hrr</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="Replacement.html#repl_repeat_typ"><span class="id" title="abbreviation">repl_repeat_typ</span></a> <span class="id" title="var">r</span> <span class="id" title="var">r'</span> (<a class="idref" href="Definitions.html#open_typ_p"><span class="id" title="definition">open_typ_p</span></a> <span class="id" title="var">r</span> <span class="id" title="var">T</span>) (<a class="idref" href="Definitions.html#open_typ_p"><span class="id" title="definition">open_typ_p</span></a> <span class="id" title="var">r'</span> <span class="id" title="var">T</span>)) <span class="id" title="keyword">as</span> <span class="id" title="var">Hrr'</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span>× <a class="idref" href="Replacement.html#repl_comp_open_rec"><span class="id" title="lemma">repl_comp_open_rec</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lets</span> <span class="id" title="var">Hc'</span>: (<a class="idref" href="ReplacementTyping.html#replacement_repl_closure_qp_comp"><span class="id" title="lemma">replacement_repl_closure_qp_comp</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">Hc</span> <span class="id" title="var">H0</span> <span class="id" title="var">Hs</span> <span class="id" title="var">Hrr'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="PreciseTyping.html#pt2_exists"><span class="id" title="lemma">pt2_exists</span></a> <span class="id" title="var">H0</span>) <span class="id" title="keyword">as</span> [? ?].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="ReplacementTyping.html#replacement_repl_closure_qp_comp"><span class="id" title="lemma">replacement_repl_closure_qp_comp</span></a> <span class="id" title="var">Hi</span>). <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Hc'</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Hpr'</span>. <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">apply</span>× <a class="idref" href="Replacement.html#repl_comp_open_rec"><span class="id" title="lemma">repl_comp_open_rec</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="ReplacementTyping.html#path_elim_repl"><span class="id" title="lemma">path_elim_repl</span></a> <span class="id" title="var">_</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hpq</span> <span class="id" title="var">Hq</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hp0a</span>. <span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHHq</span> <span class="id" title="var">Hi</span> <span class="id" title="var">_</span> <span class="id" title="var">Hp0a</span>). <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Tight typing implies replacement typing 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="replacement_closure"><span class="id" title="lemma">replacement_closure</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">G</span> <span class="id" title="var">p</span> <span class="id" title="var">T</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="TightTyping.html#1354e9ec79a363a81abeb2b2d3bd96e7"><span class="id" title="notation">⊢#</span></a> <a class="idref" href="ReplacementTyping.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="TightTyping.html#1354e9ec79a363a81abeb2b2d3bd96e7"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#p"><span class="id" title="variable">p</span></a><a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T"><span class="id" title="variable">T</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hp</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">Hp</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span> "ty_var_t"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span> "ty_new_elim_t"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>× <a class="idref" href="ReplacementTyping.html#repl_fld"><span class="id" title="lemma">repl_fld</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span> "ty_sngl_t"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>× <a class="idref" href="ReplacementTyping.html#repl_sngl_trans"><span class="id" title="lemma">repl_sngl_trans</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span> "ty_path_elim_t"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>× <a class="idref" href="ReplacementTyping.html#path_elim_repl"><span class="id" title="lemma">path_elim_repl</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span> "ty_rec_elim_t"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>× <a class="idref" href="ReplacementTyping.html#repl_rec_intro"><span class="id" title="lemma">repl_rec_intro</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span> "ty_sub_t"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="ReplacementTyping.html#replacement_subtyping_closure"><span class="id" title="lemma">replacement_subtyping_closure</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab65"></a><h2 class="section">Replacement typing for values</h2>


<div class="paragraph"> </div>

    The definition of replacement typing for values
    is similar to replacement typing for paths, but simpler. The same holds for
    its lemmas. To see the documentation for a replacement-typing-for-values lemma,
    please refer to its replacement-typing-for-paths version. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Reserved Notation</span> &quot;G '⊢//v' v ':' T" (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 40, <span class="id" title="var">v</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 59).<br/>

<br/>
<span class="id" title="keyword">Inductive</span> <a name="ty_replv"><span class="id" title="inductive">ty_replv</span></a> : <a class="idref" href="Definitions.html#ctx"><span class="id" title="definition">ctx</span></a> <span class="id" title="notation">→</span> <a class="idref" href="Definitions.html#val"><span class="id" title="inductive">val</span></a> <span class="id" title="notation">→</span> <a class="idref" href="Definitions.html#typ"><span class="id" title="inductive">typ</span></a> <span class="id" title="notation">→</span> <span class="id" title="keyword">Prop</span> :=<br/>
| <a name="ty_inv_rv"><span class="id" title="constructor">ty_inv_rv</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">G</span> <span class="id" title="var">v</span> <span class="id" title="var">T</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="InvertibleTyping.html#3592546c6d4926a7d0b92c881bbf3785"><span class="id" title="notation">⊢##</span></a><a class="idref" href="InvertibleTyping.html#3592546c6d4926a7d0b92c881bbf3785"><span class="id" title="notation">v</span></a> <a class="idref" href="ReplacementTyping.html#v"><span class="id" title="variable">v</span></a><a class="idref" href="InvertibleTyping.html#3592546c6d4926a7d0b92c881bbf3785"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">⊢//</span></a><a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">v</span></a> <a class="idref" href="ReplacementTyping.html#v"><span class="id" title="variable">v</span></a><a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T"><span class="id" title="variable">T</span></a><br/>
| <a name="ty_and_rv"><span class="id" title="constructor">ty_and_rv</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">G</span> <span class="id" title="var">v</span> <span class="id" title="var">T</span> <span class="id" title="var">U</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">⊢//</span></a><a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">v</span></a> <a class="idref" href="ReplacementTyping.html#v"><span class="id" title="variable">v</span></a><a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">⊢//</span></a><a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">v</span></a> <a class="idref" href="ReplacementTyping.html#v"><span class="id" title="variable">v</span></a><a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">⊢//</span></a><a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">v</span></a> <a class="idref" href="ReplacementTyping.html#v"><span class="id" title="variable">v</span></a><a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="Definitions.html#7a630e21245026e1b75685a10a5ca45a"><span class="id" title="notation">∧</span></a> <a class="idref" href="ReplacementTyping.html#U"><span class="id" title="variable">U</span></a><br/>
| <a name="ty_sel_rv"><span class="id" title="constructor">ty_sel_rv</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">G</span> <span class="id" title="var">v</span> <span class="id" title="var">T</span> <span class="id" title="var">q</span> <span class="id" title="var">S</span> <span class="id" title="var">A</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">⊢//</span></a><a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">v</span></a> <a class="idref" href="ReplacementTyping.html#v"><span class="id" title="variable">v</span></a><a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">⊢!</span></a> <a class="idref" href="ReplacementTyping.html#q"><span class="id" title="variable">q</span></a><a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#S"><span class="id" title="variable">S</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">⪼</span></a> <a class="idref" href="Definitions.html#typ_rcd"><span class="id" title="constructor">typ_rcd</span></a> <a class="idref" href="Definitions.html#b194d02349b51cad3901d2caba34fa00"><span class="id" title="notation">{</span></a><a class="idref" href="ReplacementTyping.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="Definitions.html#b194d02349b51cad3901d2caba34fa00"><span class="id" title="notation">&gt;:</span></a> <a class="idref" href="ReplacementTyping.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="Definitions.html#b194d02349b51cad3901d2caba34fa00"><span class="id" title="notation">&lt;:</span></a> <a class="idref" href="ReplacementTyping.html#T"><span class="id" title="variable">T</span></a><a class="idref" href="Definitions.html#b194d02349b51cad3901d2caba34fa00"><span class="id" title="notation">}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">⊢//</span></a><a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">v</span></a> <a class="idref" href="ReplacementTyping.html#v"><span class="id" title="variable">v</span></a><a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="Definitions.html#56a240108deb0dfbaeb49e48db859cf7"><span class="id" title="notation">↓</span></a> <a class="idref" href="ReplacementTyping.html#A"><span class="id" title="variable">A</span></a><br/>
| <a name="ty_rec_qp_rv"><span class="id" title="constructor">ty_rec_qp_rv</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">G</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span> <span class="id" title="var">v</span> <span class="id" title="var">T</span> <span class="id" title="var">T'</span> <span class="id" title="var">U</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">⊢!</span></a> <a class="idref" href="ReplacementTyping.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">⪼</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">⊢!!</span></a> <a class="idref" href="ReplacementTyping.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">⊢//</span></a><a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">v</span></a> <a class="idref" href="ReplacementTyping.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#57e8a3f1aebb1c6069654ec2f0cd7a19"><span class="id" title="notation">μ</span></a> <a class="idref" href="ReplacementTyping.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#repl_typ"><span class="id" title="inductive">repl_typ</span></a> <a class="idref" href="ReplacementTyping.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="ReplacementTyping.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="ReplacementTyping.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="ReplacementTyping.html#T'"><span class="id" title="variable">T'</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">⊢//</span></a><a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">v</span></a> <a class="idref" href="ReplacementTyping.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#57e8a3f1aebb1c6069654ec2f0cd7a19"><span class="id" title="notation">μ</span></a> <a class="idref" href="ReplacementTyping.html#T'"><span class="id" title="variable">T'</span></a><br/>
| <a name="ty_sel_qp_rv"><span class="id" title="constructor">ty_sel_qp_rv</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">G</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span> <span class="id" title="var">v</span> <span class="id" title="var">r'</span> <span class="id" title="var">r''</span> <span class="id" title="var">A</span> <span class="id" title="var">U</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">⊢!</span></a> <a class="idref" href="ReplacementTyping.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">⪼</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">⊢!!</span></a> <a class="idref" href="ReplacementTyping.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">⊢//</span></a><a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">v</span></a> <a class="idref" href="ReplacementTyping.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#r'"><span class="id" title="variable">r'</span></a> <a class="idref" href="Definitions.html#56a240108deb0dfbaeb49e48db859cf7"><span class="id" title="notation">↓</span></a> <a class="idref" href="ReplacementTyping.html#A"><span class="id" title="variable">A</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#repl_typ"><span class="id" title="inductive">repl_typ</span></a> <a class="idref" href="ReplacementTyping.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="ReplacementTyping.html#p"><span class="id" title="variable">p</span></a> (<a class="idref" href="ReplacementTyping.html#r'"><span class="id" title="variable">r'</span></a> <a class="idref" href="Definitions.html#56a240108deb0dfbaeb49e48db859cf7"><span class="id" title="notation">↓</span></a> <a class="idref" href="ReplacementTyping.html#A"><span class="id" title="variable">A</span></a>) (<a class="idref" href="ReplacementTyping.html#r''"><span class="id" title="variable">r''</span></a> <a class="idref" href="Definitions.html#56a240108deb0dfbaeb49e48db859cf7"><span class="id" title="notation">↓</span></a> <a class="idref" href="ReplacementTyping.html#A"><span class="id" title="variable">A</span></a>) <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">⊢//</span></a><a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">v</span></a> <a class="idref" href="ReplacementTyping.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#r''"><span class="id" title="variable">r''</span></a><a class="idref" href="Definitions.html#56a240108deb0dfbaeb49e48db859cf7"><span class="id" title="notation">↓</span></a><a class="idref" href="ReplacementTyping.html#A"><span class="id" title="variable">A</span></a><br/>
<span class="id" title="keyword">where</span> <a name="b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">&quot;</span></a>G '⊢//v' v ':' T" := (<a class="idref" href="ReplacementTyping.html#ty_replv"><span class="id" title="inductive">ty_replv</span></a> <span class="id" title="var">G</span> <span class="id" title="var">v</span> <span class="id" title="var">T</span>).<br/>

<br/>
<span class="id" title="keyword">Hint Constructors</span> <a class="idref" href="ReplacementTyping.html#ty_replv"><span class="id" title="inductive">ty_replv</span></a> : <span class="id" title="var">core</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="invertible_andv"><span class="id" title="lemma">invertible_andv</span></a>: <span class="id" title="keyword">∀</span> <span class="id" title="var">G</span> <span class="id" title="var">v</span> <span class="id" title="var">T</span> <span class="id" title="var">U</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="InvertibleTyping.html#3592546c6d4926a7d0b92c881bbf3785"><span class="id" title="notation">⊢##</span></a><a class="idref" href="InvertibleTyping.html#3592546c6d4926a7d0b92c881bbf3785"><span class="id" title="notation">v</span></a> <a class="idref" href="ReplacementTyping.html#v"><span class="id" title="variable">v</span></a><a class="idref" href="InvertibleTyping.html#3592546c6d4926a7d0b92c881bbf3785"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="Definitions.html#7a630e21245026e1b75685a10a5ca45a"><span class="id" title="notation">∧</span></a> <a class="idref" href="ReplacementTyping.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="InvertibleTyping.html#3592546c6d4926a7d0b92c881bbf3785"><span class="id" title="notation">⊢##</span></a><a class="idref" href="InvertibleTyping.html#3592546c6d4926a7d0b92c881bbf3785"><span class="id" title="notation">v</span></a> <a class="idref" href="ReplacementTyping.html#v"><span class="id" title="variable">v</span></a><a class="idref" href="InvertibleTyping.html#3592546c6d4926a7d0b92c881bbf3785"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">∧</span> <a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="InvertibleTyping.html#3592546c6d4926a7d0b92c881bbf3785"><span class="id" title="notation">⊢##</span></a><a class="idref" href="InvertibleTyping.html#3592546c6d4926a7d0b92c881bbf3785"><span class="id" title="notation">v</span></a> <a class="idref" href="ReplacementTyping.html#v"><span class="id" title="variable">v</span></a><a class="idref" href="InvertibleTyping.html#3592546c6d4926a7d0b92c881bbf3785"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#U"><span class="id" title="variable">U</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hp</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">Hp</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="repl_andv"><span class="id" title="lemma">repl_andv</span></a>: <span class="id" title="keyword">∀</span> <span class="id" title="var">G</span> <span class="id" title="var">v</span> <span class="id" title="var">T</span> <span class="id" title="var">U</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">⊢//</span></a><a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">v</span></a> <a class="idref" href="ReplacementTyping.html#v"><span class="id" title="variable">v</span></a><a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="Definitions.html#7a630e21245026e1b75685a10a5ca45a"><span class="id" title="notation">∧</span></a> <a class="idref" href="ReplacementTyping.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">⊢//</span></a><a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">v</span></a> <a class="idref" href="ReplacementTyping.html#v"><span class="id" title="variable">v</span></a><a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">∧</span> <a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">⊢//</span></a><a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">v</span></a> <a class="idref" href="ReplacementTyping.html#v"><span class="id" title="variable">v</span></a><a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#U"><span class="id" title="variable">U</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hv</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">Hv</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="ReplacementTyping.html#invertible_andv"><span class="id" title="lemma">invertible_andv</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">H</span>). <span class="id" title="tactic">split</span>×.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="replacement_repl_closure_qp_v"><span class="id" title="lemma">replacement_repl_closure_qp_v</span></a> <span class="id" title="var">G</span> <span class="id" title="var">v</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span> <span class="id" title="var">T</span> <span class="id" title="var">T'</span> <span class="id" title="var">U</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">⊢!</span></a> <a class="idref" href="ReplacementTyping.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">⪼</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">⊢!!</span></a> <a class="idref" href="ReplacementTyping.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">⊢//</span></a><a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">v</span></a> <a class="idref" href="ReplacementTyping.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#repl_typ"><span class="id" title="inductive">repl_typ</span></a> <a class="idref" href="ReplacementTyping.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="ReplacementTyping.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="ReplacementTyping.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="ReplacementTyping.html#T'"><span class="id" title="variable">T'</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">⊢//</span></a><a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">v</span></a> <a class="idref" href="ReplacementTyping.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T'"><span class="id" title="variable">T'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hpq</span> <span class="id" title="var">Hq</span> <span class="id" title="var">Hv</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">gen</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span> <span class="id" title="var">T'</span> <span class="id" title="var">U</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">Hv</span>; <span class="id" title="var">introv</span> <span class="id" title="var">Hpq</span>; <span class="id" title="var">introv</span> <span class="id" title="var">Hq</span> <span class="id" title="var">Hr</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span> "ty_inv_rv"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">gen</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span> <span class="id" title="var">T'</span> <span class="id" title="var">U</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">H</span>; <span class="id" title="var">introv</span> <span class="id" title="var">Hpq</span>; <span class="id" title="var">introv</span> <span class="id" title="var">Hr</span>; <span class="id" title="var">introv</span> <span class="id" title="var">Hq</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="tactic">solve</span> [<span class="id" title="var">invert_repl</span>; <span class="id" title="tactic">eauto</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">destruct</span> (<a class="idref" href="PreciseFlow.html#pfv_inert"><span class="id" title="lemma">pfv_inert</span></a> <span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">invert_repl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">eapply</span> <a class="idref" href="ReplacementTyping.html#ty_inv_rv"><span class="id" title="constructor">ty_inv_rv</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="InvertibleTyping.html#ty_all_invv"><span class="id" title="constructor">ty_all_invv</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">L</span> := <span class="id" title="notation">\{}</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="InvertibleTyping.html#ty_precise_invv"><span class="id" title="constructor">ty_precise_invv</span></a>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Replacement.html#repl_swap"><span class="id" title="lemma">repl_swap</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hy</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">eapply</span> <a class="idref" href="ReplacementTyping.html#ty_inv_rv"><span class="id" title="constructor">ty_inv_rv</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="InvertibleTyping.html#ty_all_invv"><span class="id" title="constructor">ty_all_invv</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">L</span> := <span class="id" title="axiom">dom</span> <span class="id" title="var">G</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="InvertibleTyping.html#ty_precise_invv"><span class="id" title="constructor">ty_precise_invv</span></a>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="Replacement.html#repl_open_var"><span class="id" title="lemma">repl_open_var</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H5</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">solve_names</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="Definitions.html#subtyp_sngl_qp"><span class="id" title="constructor">subtyp_sngl_qp</span></a>. <span class="id" title="tactic">apply</span>× <a class="idref" href="Weakening.html#weaken_ty_trm"><span class="id" title="lemma">weaken_ty_trm</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="PreciseFlow.html#precise_to_general"><span class="id" title="lemma">precise_to_general</span></a>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Hpq</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="Weakening.html#weaken_ty_trm"><span class="id" title="lemma">weaken_ty_trm</span></a>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">apply</span>× <a class="idref" href="PreciseTyping.html#precise_to_general2"><span class="id" title="lemma">precise_to_general2</span></a>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">invert_repl</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="var">invert_repl</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="ReplacementTyping.html#ty_inv_rv"><span class="id" title="constructor">ty_inv_rv</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">eapply</span> <a class="idref" href="InvertibleTyping.html#ty_all_invv"><span class="id" title="constructor">ty_all_invv</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">L</span> := <span class="id" title="var">L</span> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> <span class="id" title="notation">(</span><span class="id" title="axiom">dom</span> <span class="id" title="var">G</span><span class="id" title="notation">)</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">assert</span> (<span class="id" title="var">Hts</span> : <span class="id" title="var">G</span> <a class="idref" href="TightTyping.html#3350a03272d49af9ea81ab2b6cc8bf1f"><span class="id" title="notation">⊢#</span></a> <span class="id" title="var">T3</span> <a class="idref" href="TightTyping.html#3350a03272d49af9ea81ab2b6cc8bf1f"><span class="id" title="notation">&lt;:</span></a> <span class="id" title="var">S2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <a class="idref" href="Replacement.html#repl_swap"><span class="id" title="lemma">repl_swap</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H7</span>. <span class="id" title="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">introv</span> <span class="id" title="var">Hy</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="Narrowing.html#narrow_subtyping"><span class="id" title="lemma">narrow_subtyping</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hts</span> : <span class="id" title="var">G</span> <a class="idref" href="Definitions.html#d77433d9a5f06bee50380b6ca9a3f271"><span class="id" title="notation">⊢</span></a> <span class="id" title="var">T3</span> <a class="idref" href="Definitions.html#d77433d9a5f06bee50380b6ca9a3f271"><span class="id" title="notation">&lt;:</span></a> <span class="id" title="var">S2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <a class="idref" href="TightTyping.html#tight_to_general"><span class="id" title="lemma">tight_to_general</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Replacement.html#repl_swap"><span class="id" title="lemma">repl_swap</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H7</span>. <span class="id" title="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">eauto</span>. <span class="comment">(*&nbsp;narrowing&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">eapply</span> <a class="idref" href="InvertibleTyping.html#ty_all_invv"><span class="id" title="constructor">ty_all_invv</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">L</span> := <span class="id" title="var">L</span> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> <span class="id" title="notation">(</span><span class="id" title="axiom">dom</span> <span class="id" title="var">G</span><span class="id" title="notation">)</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">introv</span> <span class="id" title="var">Hy</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="Definitions.html#subtyp_trans"><span class="id" title="constructor">subtyp_trans</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>× <span class="id" title="var">H1</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="Replacement.html#repl_open_var"><span class="id" title="lemma">repl_open_var</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H7</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id" title="tactic">eapply</span> <a class="idref" href="Definitions.html#subtyp_sngl_qp"><span class="id" title="constructor">subtyp_sngl_qp</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="PreciseFlow.html#precise_to_general"><span class="id" title="lemma">precise_to_general</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hpq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Weakening.html#weaken_ty_trm"><span class="id" title="lemma">weaken_ty_trm</span></a>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Hpq</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Weakening.html#weaken_ty_trm"><span class="id" title="lemma">weaken_ty_trm</span></a>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">apply</span>× <a class="idref" href="PreciseTyping.html#precise_to_general2"><span class="id" title="lemma">precise_to_general2</span></a>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id" title="var">solve_names</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id" title="var">solve_names</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span> "ty_and_rv"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">invert_repl</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span> "ty_sel_rv"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">invert_repl</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span> "ty_rec_qp_rv"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">invert_repl</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span> "ty_sel_qp_rv"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lets</span> ?: (<a class="idref" href="ReplacementTyping.html#ty_sel_qp_rv"><span class="id" title="constructor">ty_sel_qp_rv</span></a> <span class="id" title="var">H</span> <span class="id" title="var">H0</span> <span class="id" title="var">Hv</span> <span class="id" title="var">H1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">invert_repl</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="replacement_repl_closure_qp2_v"><span class="id" title="lemma">replacement_repl_closure_qp2_v</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">G</span> <span class="id" title="var">p</span> <span class="id" title="var">v</span> <span class="id" title="var">r</span> <span class="id" title="var">T</span> <span class="id" title="var">T'</span> <span class="id" title="var">U</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">⊢!!</span></a> <a class="idref" href="ReplacementTyping.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">⊢!!</span></a> <a class="idref" href="ReplacementTyping.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">⊢//</span></a><a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">v</span></a> <a class="idref" href="ReplacementTyping.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#repl_typ"><span class="id" title="inductive">repl_typ</span></a> <a class="idref" href="ReplacementTyping.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="ReplacementTyping.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="ReplacementTyping.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="ReplacementTyping.html#T'"><span class="id" title="variable">T'</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">⊢//</span></a><a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">v</span></a> <a class="idref" href="ReplacementTyping.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T'"><span class="id" title="variable">T'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hp</span> <span class="id" title="var">Hr</span> <span class="id" title="var">Hv</span> <span class="id" title="var">Hrp</span>. <span class="id" title="var">gen</span> <span class="id" title="var">U</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">Hp</span>; <span class="id" title="var">introv</span> <span class="id" title="var">Hr</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">lets</span> <span class="id" title="var">Heq</span>: (<a class="idref" href="PreciseFlow.html#pf_sngl_T"><span class="id" title="lemma">pf_sngl_T</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">H</span>). <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>× <a class="idref" href="ReplacementTyping.html#replacement_repl_closure_qp_v"><span class="id" title="lemma">replacement_repl_closure_qp_v</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">lets</span> <span class="id" title="var">Hr'</span>: (<a class="idref" href="Replacement.html#repl_field_elim"><span class="id" title="lemma">repl_field_elim</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hrp</span>). <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="PreciseTyping.html#pt2_backtrack"><span class="id" title="lemma">pt2_backtrack</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hr</span>) <span class="id" title="keyword">as</span> [? <span class="id" title="var">Hq'</span>]. <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="replacement_repl_closure_qp3_v"><span class="id" title="lemma">replacement_repl_closure_qp3_v</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">G</span> <span class="id" title="var">v</span> <span class="id" title="var">p</span> <span class="id" title="var">r</span> <span class="id" title="var">T</span> <span class="id" title="var">T'</span> <span class="id" title="var">U</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">⊢!!!</span></a> <a class="idref" href="ReplacementTyping.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">⊢!!</span></a> <a class="idref" href="ReplacementTyping.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">⊢//</span></a><a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">v</span></a> <a class="idref" href="ReplacementTyping.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#repl_typ"><span class="id" title="inductive">repl_typ</span></a> <a class="idref" href="ReplacementTyping.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="ReplacementTyping.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="ReplacementTyping.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="ReplacementTyping.html#T'"><span class="id" title="variable">T'</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">⊢//</span></a><a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">v</span></a> <a class="idref" href="ReplacementTyping.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T'"><span class="id" title="variable">T'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hp</span> <span class="id" title="var">Hr</span> <span class="id" title="var">Hv</span> <span class="id" title="var">Hrp</span>. <span class="id" title="var">gen</span> <span class="id" title="var">v</span> <span class="id" title="var">T</span> <span class="id" title="var">T'</span> <span class="id" title="var">U</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">Hp</span>; <span class="id" title="var">introv</span> <span class="id" title="var">Hv</span>; <span class="id" title="var">introv</span> <span class="id" title="var">Hrp</span>; <span class="id" title="var">introv</span> <span class="id" title="var">Hr</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span>× <a class="idref" href="ReplacementTyping.html#replacement_repl_closure_qp2_v"><span class="id" title="lemma">replacement_repl_closure_qp2_v</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHHp</span> <span class="id" title="var">_</span> <span class="id" title="var">Hi</span> <span class="id" title="constructor">eq_refl</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="Replacement.html#repl_insert"><span class="id" title="lemma">repl_insert</span></a> <span class="id" title="var">q</span> <span class="id" title="var">Hrp</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">U'</span> [<span class="id" title="var">Hr1</span> <span class="id" title="var">Hr2</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="PreciseTyping.html#pt2_exists"><span class="id" title="lemma">pt2_exists</span></a> <span class="id" title="var">Hp</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">W</span> <span class="id" title="var">Hp'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHHp</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hv</span> <span class="id" title="var">_</span> <span class="id" title="var">Hr1</span>). <span class="id" title="tactic">eapply</span> <a class="idref" href="ReplacementTyping.html#replacement_repl_closure_qp2_v"><span class="id" title="lemma">replacement_repl_closure_qp2_v</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span>. <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">apply</span>× <span class="id" title="var">IHHp</span>. <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="replacement_repl_closure_pq_v"><span class="id" title="lemma">replacement_repl_closure_pq_v</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">G</span> <span class="id" title="var">v</span> <span class="id" title="var">q</span> <span class="id" title="var">r</span> <span class="id" title="var">T</span> <span class="id" title="var">T'</span> <span class="id" title="var">U</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">⊢//</span></a><a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">v</span></a> <a class="idref" href="ReplacementTyping.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">⊢!</span></a> <a class="idref" href="ReplacementTyping.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">⪼</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">⊢!!</span></a> <a class="idref" href="ReplacementTyping.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#repl_typ"><span class="id" title="inductive">repl_typ</span></a> <a class="idref" href="ReplacementTyping.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="ReplacementTyping.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="ReplacementTyping.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="ReplacementTyping.html#T'"><span class="id" title="variable">T'</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">⊢//</span></a><a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">v</span></a> <a class="idref" href="ReplacementTyping.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T'"><span class="id" title="variable">T'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hv</span> <span class="id" title="var">Hqr</span> <span class="id" title="var">Hr'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">gen</span> <span class="id" title="var">q</span> <span class="id" title="var">r</span> <span class="id" title="var">T'</span> <span class="id" title="var">U</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">Hv</span>; <span class="id" title="var">introv</span> <span class="id" title="var">Hq</span>; <span class="id" title="var">introv</span> <span class="id" title="var">Hr'</span> <span class="id" title="var">Hr</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;- <span class="id" title="var">Case</span> "ty_inv_r"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">apply</span>× <a class="idref" href="InvertibleTyping.html#invertible_repl_closure_v"><span class="id" title="lemma">invertible_repl_closure_v</span></a>.<br/>
&nbsp;&nbsp;&nbsp;- <span class="id" title="var">Case</span> "ty_and_r"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">invert_repl</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;- <span class="id" title="var">Case</span> "ty_sel_r"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">IHHv</span>. <span class="id" title="var">invert_repl</span>. <span class="id" title="var">lets</span> <span class="id" title="var">Heq</span>: (<a class="idref" href="PreciseFlow.html#pf_sngl_flds_elim"><span class="id" title="lemma">pf_sngl_flds_elim</span></a> <span class="id" title="var">_</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hq</span> <span class="id" title="var">H</span>). <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Binding.html#field_sel_nil"><span class="id" title="lemma">field_sel_nil</span></a> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lets</span> <span class="id" title="var">Heq</span>: (<a class="idref" href="PreciseFlow.html#pf_T_unique"><span class="id" title="lemma">pf_T_unique</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">H</span> <span class="id" title="var">Hq</span>). <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="PreciseFlow.html#pf_sngl_U"><span class="id" title="lemma">pf_sngl_U</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span> "ty_rec_qp_r"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">invert_repl</span>. <span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHHv</span> <span class="id" title="var">Hi</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hq</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="ReplacementTyping.html#replacement_repl_closure_pq_helper"><span class="id" title="lemma">replacement_repl_closure_pq_helper</span></a> <span class="id" title="var">H1</span> <span class="id" title="var">H5</span> <span class="id" title="var">Hi</span> <span class="id" title="var">H</span> <span class="id" title="var">Hq</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H2</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">destruct</span> <span class="id" title="var">H2</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">T3</span> [<span class="id" title="var">Hl</span> <span class="id" title="var">Hr</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">G</span> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">⊢//</span></a><a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">v</span></a> <span class="id" title="var">v</span> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#57e8a3f1aebb1c6069654ec2f0cd7a19"><span class="id" title="notation">μ</span></a> <span class="id" title="var">T3</span>) <span class="id" title="tactic">by</span> (<span class="id" title="tactic">eapply</span> <span class="id" title="var">IHHv</span>; <span class="id" title="tactic">eauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="ReplacementTyping.html#ty_rec_qp_rv"><span class="id" title="constructor">ty_rec_qp_rv</span></a> <span class="id" title="var">H</span> <span class="id" title="var">H0</span> <span class="id" title="var">H2</span> <span class="id" title="var">Hr</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span> "ty_sel_pq_r"%<span class="id" title="var">string</span>. <span class="id" title="var">invert_repl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHHv</span> <span class="id" title="var">Hi</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hq</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">q</span> <a class="idref" href="Definitions.html#086f2d7e593ce2ec7b60009929463693"><span class="id" title="notation">••</span></a> <span class="id" title="var">bs0</span> <span class="id" title="notation">=</span> <span class="id" title="var">r</span> <a class="idref" href="Definitions.html#086f2d7e593ce2ec7b60009929463693"><span class="id" title="notation">••</span></a> <span class="id" title="var">bs</span>). <span class="id" title="tactic">eapply</span> <a class="idref" href="PreciseFlow.html#pf_sngl_sel_unique"><span class="id" title="lemma">pf_sngl_sel_unique</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H1</span>. <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="replacement_repl_closure_pq2_v"><span class="id" title="lemma">replacement_repl_closure_pq2_v</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">G</span> <span class="id" title="var">v</span> <span class="id" title="var">q</span> <span class="id" title="var">r</span> <span class="id" title="var">T</span> <span class="id" title="var">T'</span> <span class="id" title="var">U</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">⊢//</span></a><a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">v</span></a> <a class="idref" href="ReplacementTyping.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">⊢!!</span></a> <a class="idref" href="ReplacementTyping.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">⊢!!</span></a> <a class="idref" href="ReplacementTyping.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#repl_typ"><span class="id" title="inductive">repl_typ</span></a> <a class="idref" href="ReplacementTyping.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="ReplacementTyping.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="ReplacementTyping.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="ReplacementTyping.html#T'"><span class="id" title="variable">T'</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">⊢//</span></a><a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">v</span></a> <a class="idref" href="ReplacementTyping.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T'"><span class="id" title="variable">T'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hv</span> <span class="id" title="var">Hq</span> <span class="id" title="var">Hr'</span> <span class="id" title="var">Hr</span>. <span class="id" title="var">gen</span> <span class="id" title="var">U</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">Hq</span>; <span class="id" title="var">introv</span> <span class="id" title="var">Hr'</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span>× <a class="idref" href="ReplacementTyping.html#replacement_repl_closure_pq_v"><span class="id" title="lemma">replacement_repl_closure_pq_v</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lets</span> <span class="id" title="var">Heq</span>: (<a class="idref" href="PreciseFlow.html#pf_sngl_T"><span class="id" title="lemma">pf_sngl_T</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">H</span>). <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">lets</span> <span class="id" title="var">Hr''</span>: (<a class="idref" href="Replacement.html#repl_field_elim"><span class="id" title="lemma">repl_field_elim</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hr</span>). <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="PreciseTyping.html#pt2_backtrack"><span class="id" title="lemma">pt2_backtrack</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hr'</span>) <span class="id" title="keyword">as</span> [? ?]. <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="replacement_repl_closure_pq3_v"><span class="id" title="lemma">replacement_repl_closure_pq3_v</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">G</span> <span class="id" title="var">v</span> <span class="id" title="var">q</span> <span class="id" title="var">r</span> <span class="id" title="var">T</span> <span class="id" title="var">T'</span> <span class="id" title="var">U</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">⊢//</span></a><a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">v</span></a> <a class="idref" href="ReplacementTyping.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">⊢!!!</span></a> <a class="idref" href="ReplacementTyping.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">⊢!!</span></a> <a class="idref" href="ReplacementTyping.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#repl_typ"><span class="id" title="inductive">repl_typ</span></a> <a class="idref" href="ReplacementTyping.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="ReplacementTyping.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="ReplacementTyping.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="ReplacementTyping.html#T'"><span class="id" title="variable">T'</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">⊢//</span></a><a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">v</span></a> <a class="idref" href="ReplacementTyping.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T'"><span class="id" title="variable">T'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hv</span> <span class="id" title="var">Hq</span> <span class="id" title="var">Hr</span> <span class="id" title="var">Hr'</span>. <span class="id" title="var">gen</span> <span class="id" title="var">v</span> <span class="id" title="var">T</span> <span class="id" title="var">U</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">Hq</span>; <span class="id" title="var">introv</span> <span class="id" title="var">Hv</span> <span class="id" title="var">Hr</span>; <span class="id" title="var">introv</span> <span class="id" title="var">Hr'</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span>× <a class="idref" href="ReplacementTyping.html#replacement_repl_closure_pq2_v"><span class="id" title="lemma">replacement_repl_closure_pq2_v</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> (<a class="idref" href="Replacement.html#repl_insert"><span class="id" title="lemma">repl_insert</span></a> <span class="id" title="var">q</span> <span class="id" title="var">Hr</span>) <span class="id" title="keyword">as</span> [? [<span class="id" title="var">Hr1</span> <span class="id" title="var">Hr2</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="PreciseTyping.html#pt2_exists"><span class="id" title="lemma">pt2_exists</span></a> <span class="id" title="var">Hq</span>) <span class="id" title="keyword">as</span> [? <span class="id" title="var">Hq'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lets</span> <span class="id" title="var">Hc</span>: (<a class="idref" href="ReplacementTyping.html#replacement_repl_closure_pq2_v"><span class="id" title="lemma">replacement_repl_closure_pq2_v</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">Hv</span> <span class="id" title="var">H</span> <span class="id" title="var">Hq'</span> <span class="id" title="var">Hr1</span>). <span class="id" title="tactic">apply</span>× <span class="id" title="var">IHHq</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="path_sel_repl2_v"><span class="id" title="lemma">path_sel_repl2_v</span></a>: <span class="id" title="keyword">∀</span> <span class="id" title="var">G</span> <span class="id" title="var">p</span> <span class="id" title="var">A</span> <span class="id" title="var">T</span> <span class="id" title="var">v</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">⊢!!</span></a> <a class="idref" href="ReplacementTyping.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#typ_rcd"><span class="id" title="constructor">typ_rcd</span></a> <a class="idref" href="Definitions.html#b194d02349b51cad3901d2caba34fa00"><span class="id" title="notation">{</span></a><a class="idref" href="ReplacementTyping.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="Definitions.html#b194d02349b51cad3901d2caba34fa00"><span class="id" title="notation">&gt;:</span></a> <a class="idref" href="ReplacementTyping.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="Definitions.html#b194d02349b51cad3901d2caba34fa00"><span class="id" title="notation">&lt;:</span></a> <a class="idref" href="ReplacementTyping.html#T"><span class="id" title="variable">T</span></a><a class="idref" href="Definitions.html#b194d02349b51cad3901d2caba34fa00"><span class="id" title="notation">}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">⊢//</span></a><a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">v</span></a> <a class="idref" href="ReplacementTyping.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">⊢//</span></a><a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">v</span></a> <a class="idref" href="ReplacementTyping.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#p"><span class="id" title="variable">p</span></a><a class="idref" href="Definitions.html#56a240108deb0dfbaeb49e48db859cf7"><span class="id" title="notation">↓</span></a><a class="idref" href="ReplacementTyping.html#A"><span class="id" title="variable">A</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hp</span> <span class="id" title="var">Hv</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">Hp</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="path_sel_repl_v"><span class="id" title="lemma">path_sel_repl_v</span></a>: <span class="id" title="keyword">∀</span> <span class="id" title="var">G</span> <span class="id" title="var">p</span> <span class="id" title="var">A</span> <span class="id" title="var">T</span> <span class="id" title="var">v</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">⊢!!!</span></a> <a class="idref" href="ReplacementTyping.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#typ_rcd"><span class="id" title="constructor">typ_rcd</span></a> <a class="idref" href="Definitions.html#b194d02349b51cad3901d2caba34fa00"><span class="id" title="notation">{</span></a><a class="idref" href="ReplacementTyping.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="Definitions.html#b194d02349b51cad3901d2caba34fa00"><span class="id" title="notation">&gt;:</span></a> <a class="idref" href="ReplacementTyping.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="Definitions.html#b194d02349b51cad3901d2caba34fa00"><span class="id" title="notation">&lt;:</span></a> <a class="idref" href="ReplacementTyping.html#T"><span class="id" title="variable">T</span></a><a class="idref" href="Definitions.html#b194d02349b51cad3901d2caba34fa00"><span class="id" title="notation">}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">⊢//</span></a><a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">v</span></a> <a class="idref" href="ReplacementTyping.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">⊢//</span></a><a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">v</span></a> <a class="idref" href="ReplacementTyping.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#p"><span class="id" title="variable">p</span></a><a class="idref" href="Definitions.html#56a240108deb0dfbaeb49e48db859cf7"><span class="id" title="notation">↓</span></a><a class="idref" href="ReplacementTyping.html#A"><span class="id" title="variable">A</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hp</span> <span class="id" title="var">Hv</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">Hp</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span>× <a class="idref" href="ReplacementTyping.html#path_sel_repl2_v"><span class="id" title="lemma">path_sel_repl2_v</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHHp</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hi</span> <span class="id" title="constructor">eq_refl</span> <span class="id" title="var">Hv</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="keyword">∀</span> <span class="id" title="var">q</span>, <a class="idref" href="ReplacementTyping.html#q"><span class="id" title="variable">q</span></a> <span class="id" title="notation">=</span> <a class="idref" href="ReplacementTyping.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="Definitions.html#086f2d7e593ce2ec7b60009929463693"><span class="id" title="notation">••</span></a> <span class="id" title="constructor">nil</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hnil</span>. {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span>. <span class="id" title="tactic">rewrite</span>× <a class="idref" href="Binding.html#field_sel_nil"><span class="id" title="lemma">field_sel_nil</span></a>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="id" title="var">lets</span> <span class="id" title="var">He1</span>: (<span class="id" title="var">Hnil</span> <span class="id" title="var">q</span>). <span class="id" title="var">lets</span> <span class="id" title="var">He2</span>: (<span class="id" title="var">Hnil</span> <span class="id" title="var">p</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="PreciseTyping.html#pt2_exists"><span class="id" title="lemma">pt2_exists</span></a> <span class="id" title="var">Hp</span>) <span class="id" title="keyword">as</span> [? <span class="id" title="var">Hq</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="ReplacementTyping.html#replacement_repl_closure_qp2_v"><span class="id" title="lemma">replacement_repl_closure_qp2_v</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">H</span> <span class="id" title="var">Hq</span> <span class="id" title="var">IHHp</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">He1</span> <span class="id" title="tactic">at</span> 2. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">He2</span> <span class="id" title="tactic">at</span> 2. <span class="id" title="tactic">apply</span> <a class="idref" href="Definitions.html#rpath"><span class="id" title="constructor">rpath</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="path_sel_repl_inv_v"><span class="id" title="lemma">path_sel_repl_inv_v</span></a>: <span class="id" title="keyword">∀</span> <span class="id" title="var">G</span> <span class="id" title="var">p</span> <span class="id" title="var">A</span> <span class="id" title="var">T</span> <span class="id" title="var">v</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">⊢!!!</span></a> <a class="idref" href="ReplacementTyping.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#typ_rcd"><span class="id" title="constructor">typ_rcd</span></a> <a class="idref" href="Definitions.html#b194d02349b51cad3901d2caba34fa00"><span class="id" title="notation">{</span></a><a class="idref" href="ReplacementTyping.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="Definitions.html#b194d02349b51cad3901d2caba34fa00"><span class="id" title="notation">&gt;:</span></a> <a class="idref" href="ReplacementTyping.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="Definitions.html#b194d02349b51cad3901d2caba34fa00"><span class="id" title="notation">&lt;:</span></a> <a class="idref" href="ReplacementTyping.html#T"><span class="id" title="variable">T</span></a><a class="idref" href="Definitions.html#b194d02349b51cad3901d2caba34fa00"><span class="id" title="notation">}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">⊢//</span></a><a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">v</span></a> <a class="idref" href="ReplacementTyping.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#p"><span class="id" title="variable">p</span></a><a class="idref" href="Definitions.html#56a240108deb0dfbaeb49e48db859cf7"><span class="id" title="notation">↓</span></a><a class="idref" href="ReplacementTyping.html#A"><span class="id" title="variable">A</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">⊢//</span></a><a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">v</span></a> <a class="idref" href="ReplacementTyping.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T"><span class="id" title="variable">T</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hp</span> <span class="id" title="var">Hv</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">Hv</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span> "ty_inv_r"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">apply</span>× <a class="idref" href="InvertibleTyping.html#path_sel_inv_v"><span class="id" title="lemma">path_sel_inv_v</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span> "ty_sel_r"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">IHHv</span>. <span class="id" title="var">lets</span> <span class="id" title="var">Heq</span>: (<a class="idref" href="PreciseTyping.html#pf_pt3_unique"><span class="id" title="lemma">pf_pt3_unique</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">H</span> <span class="id" title="var">Hp</span>). <span class="id" title="tactic">subst</span>×.<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span> "ty_sel_qp_r"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="Replacement.html#repl_prefixes_sel"><span class="id" title="lemma">repl_prefixes_sel</span></a> <span class="id" title="var">H1</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">bs</span> [<span class="id" title="var">He1</span> <span class="id" title="var">He2</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>. <span class="id" title="tactic">assert</span> (<a class="idref" href="Definitions.html#record_type"><span class="id" title="definition">record_type</span></a> (<a class="idref" href="Definitions.html#typ_rcd"><span class="id" title="constructor">typ_rcd</span></a> <a class="idref" href="Definitions.html#b194d02349b51cad3901d2caba34fa00"><span class="id" title="notation">{</span></a><span class="id" title="var">A</span> <a class="idref" href="Definitions.html#b194d02349b51cad3901d2caba34fa00"><span class="id" title="notation">&gt;:</span></a> <span class="id" title="var">T</span> <a class="idref" href="Definitions.html#b194d02349b51cad3901d2caba34fa00"><span class="id" title="notation">&lt;:</span></a> <span class="id" title="var">T</span><a class="idref" href="Definitions.html#b194d02349b51cad3901d2caba34fa00"><span class="id" title="notation">}</span></a>)) <span class="id" title="keyword">as</span> <span class="id" title="var">Hrt</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lets</span> <span class="id" title="var">Hqbs</span>: (<a class="idref" href="PreciseTyping.html#pf_pt3_trans_inv_mult'"><span class="id" title="lemma">pf_pt3_trans_inv_mult'</span></a> <span class="id" title="var">_</span> <span class="id" title="var">Hi</span> <span class="id" title="var">H</span> <span class="id" title="var">Hp</span> (<span class="id" title="constructor">or_intror</span> <span class="id" title="var">Hrt</span>)). <span class="id" title="tactic">apply</span>× <span class="id" title="var">IHHv</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="invertible_typing_closure_tight_v"><span class="id" title="lemma">invertible_typing_closure_tight_v</span></a>: <span class="id" title="keyword">∀</span> <span class="id" title="var">G</span> <span class="id" title="var">v</span> <span class="id" title="var">T</span> <span class="id" title="var">U</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">⊢//</span></a><a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">v</span></a> <a class="idref" href="ReplacementTyping.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="TightTyping.html#3350a03272d49af9ea81ab2b6cc8bf1f"><span class="id" title="notation">⊢#</span></a> <a class="idref" href="ReplacementTyping.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="TightTyping.html#3350a03272d49af9ea81ab2b6cc8bf1f"><span class="id" title="notation">&lt;:</span></a> <a class="idref" href="ReplacementTyping.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">⊢//</span></a><a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">v</span></a> <a class="idref" href="ReplacementTyping.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#U"><span class="id" title="variable">U</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hi</span> <span class="id" title="var">HT</span> <span class="id" title="var">Hsub</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Hsub</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">HT</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">HT</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span>× (<a class="idref" href="ReplacementTyping.html#repl_andv"><span class="id" title="lemma">repl_andv</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">HT</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span>× (<a class="idref" href="ReplacementTyping.html#repl_andv"><span class="id" title="lemma">repl_andv</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">HT</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">HT</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">HT</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="PreciseTyping.html#pt2_exists"><span class="id" title="lemma">pt2_exists</span></a> <span class="id" title="var">H0</span>) <span class="id" title="keyword">as</span> [? ?]. <span class="id" title="tactic">apply</span>× <a class="idref" href="ReplacementTyping.html#replacement_repl_closure_pq3_v"><span class="id" title="lemma">replacement_repl_closure_pq3_v</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;repl&nbsp;closure&nbsp;for&nbsp;vals&nbsp;*)</span><br/>
&nbsp;&nbsp;- <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="PreciseTyping.html#pt2_exists"><span class="id" title="lemma">pt2_exists</span></a> <span class="id" title="var">H0</span>) <span class="id" title="keyword">as</span> [? ?]. <span class="id" title="tactic">apply</span>× <a class="idref" href="ReplacementTyping.html#replacement_repl_closure_qp3_v"><span class="id" title="lemma">replacement_repl_closure_qp3_v</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;repl&nbsp;closure&nbsp;for&nbsp;vals&nbsp;*)</span><br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span>× <a class="idref" href="ReplacementTyping.html#path_sel_repl_v"><span class="id" title="lemma">path_sel_repl_v</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span>× <a class="idref" href="ReplacementTyping.html#path_sel_repl_inv_v"><span class="id" title="lemma">path_sel_repl_inv_v</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">HT</span>. <span class="id" title="tactic">constructor</span>×.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="replacement_closure_v"><span class="id" title="lemma">replacement_closure_v</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">G</span> <span class="id" title="var">v</span> <span class="id" title="var">T</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="TightTyping.html#df65c43956217d1537d1b44f104a7538"><span class="id" title="notation">⊢#</span></a><a class="idref" href="TightTyping.html#df65c43956217d1537d1b44f104a7538"><span class="id" title="notation">v</span></a> <a class="idref" href="ReplacementTyping.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="TightTyping.html#df65c43956217d1537d1b44f104a7538"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">⊢//</span></a><a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">v</span></a> <a class="idref" href="ReplacementTyping.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T"><span class="id" title="variable">T</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hty</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">Hty</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span>× <a class="idref" href="ReplacementTyping.html#invertible_typing_closure_tight_v"><span class="id" title="lemma">invertible_typing_closure_tight_v</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="repl_to_invertible_obj"><span class="id" title="lemma">repl_to_invertible_obj</span></a> <span class="id" title="var">G</span> <span class="id" title="var">U</span> <span class="id" title="var">v</span> :<br/>
&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">⊢//</span></a><a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">v</span></a> <a class="idref" href="ReplacementTyping.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#57e8a3f1aebb1c6069654ec2f0cd7a19"><span class="id" title="notation">μ</span></a> <a class="idref" href="ReplacementTyping.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<span class="id" title="notation">∃</span> <span class="id" title="var">U'</span><span class="id" title="notation">,</span> <a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="InvertibleTyping.html#3592546c6d4926a7d0b92c881bbf3785"><span class="id" title="notation">⊢##</span></a><a class="idref" href="InvertibleTyping.html#3592546c6d4926a7d0b92c881bbf3785"><span class="id" title="notation">v</span></a> <a class="idref" href="ReplacementTyping.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="InvertibleTyping.html#3592546c6d4926a7d0b92c881bbf3785"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#57e8a3f1aebb1c6069654ec2f0cd7a19"><span class="id" title="notation">μ</span></a> <a class="idref" href="ReplacementTyping.html#U'"><span class="id" title="variable">U'</span></a> <span class="id" title="notation">∧</span> <a class="idref" href="ReplacementTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#c7ef41c91aa73ea0925fafe08ac00851"><span class="id" title="notation">⊢</span></a> <a class="idref" href="ReplacementTyping.html#U"><span class="id" title="variable">U</span></a> <a class="idref" href="PreciseTyping.html#c7ef41c91aa73ea0925fafe08ac00851"><span class="id" title="notation">⟿</span></a> <a class="idref" href="ReplacementTyping.html#U'"><span class="id" title="variable">U'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hv</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">Hv</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">∃</span> <span class="id" title="var">U</span>. <span class="id" title="tactic">split</span>×. <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHHv</span> <span class="id" title="var">_</span> <span class="id" title="var">Hi</span> <span class="id" title="constructor">eq_refl</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">U'</span> [<span class="id" title="var">Hinv</span> <span class="id" title="var">Hrc</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eexists</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">eapply</span> <a class="idref" href="Sequences.html#star_trans"><span class="id" title="lemma">star_trans</span></a>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Hrc</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="Sequences.html#star_one"><span class="id" title="lemma">star_one</span></a>. <span class="id" title="tactic">econstructor</span>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">eexists</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/tebbi/coqdocjs">CoqdocJS</a>
</div>
</div>
</body>

</html>
