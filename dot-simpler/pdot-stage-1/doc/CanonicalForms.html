<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="assets/resources/coqdoc.css" rel="stylesheet" type="text/css" />
<link href="assets/resources/coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="assets/resources/config.js"></script>
<script type="text/javascript" src="assets/resources/coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="https://github.com/themaplelab/dot-public/tree/master/dot-simpler">README</a>
      <a href="./indexpage.html"> Index </a>
      <a href="./toc.html"> Table of Contents </a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<h1 class="libtitle">CanonicalForms</h1>

<div class="code">

<br/>
</div>

<div class="doc">
<a name="lab76"></a><h1 class="section">Canonical Forms</h1>
 This module proves the Canonical Forms Lemmas, which allow us
    to retrieve the shape of a value given its type. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Set Implicit Arguments</span>.<br/>

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">Coq.Program.Equality</span> <span class="id" title="library">List</span> <span class="id" title="library">String</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="Binding.html#"><span class="id" title="library">Binding</span></a> <a class="idref" href="Definitions.html#"><span class="id" title="library">Definitions</span></a> <a class="idref" href="GeneralToTight.html#"><span class="id" title="library">GeneralToTight</span></a> <a class="idref" href="InvertibleTyping.html#"><span class="id" title="library">InvertibleTyping</span></a> <a class="idref" href="Lookup.html#"><span class="id" title="library">Lookup</span></a> <a class="idref" href="Narrowing.html#"><span class="id" title="library">Narrowing</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PreciseTyping.html#"><span class="id" title="library">PreciseTyping</span></a> <a class="idref" href="Replacement.html#"><span class="id" title="library">Replacement</span></a> <a class="idref" href="ReplacementTyping.html#"><span class="id" title="library">ReplacementTyping</span></a> <a class="idref" href="RecordAndInertTypes.html#"><span class="id" title="library">RecordAndInertTypes</span></a> <a class="idref" href="Substitution.html#"><span class="id" title="library">Substitution</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Subenvironments.html#"><span class="id" title="library">Subenvironments</span></a> <a class="idref" href="TightTyping.html#"><span class="id" title="library">TightTyping</span></a> <a class="idref" href="Weakening.html#"><span class="id" title="library">Weakening</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="Sequences.html#"><span class="id" title="library">Sequences</span></a>.<br/>

<br/>
</div>

<div class="doc">
Converting a stable term to a general term 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a name="deftrm"><span class="id" title="definition">deftrm</span></a> <span class="id" title="var">t</span> : <a class="idref" href="Definitions.html#trm"><span class="id" title="inductive">trm</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="CanonicalForms.html#t"><span class="id" title="variable">t</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="Definitions.html#defp"><span class="id" title="constructor">defp</span></a> <span class="id" title="var">p</span> ⇒ <a class="idref" href="Definitions.html#trm_path"><span class="id" title="constructor">trm_path</span></a> <span class="id" title="var">p</span><br/>
&nbsp;&nbsp;| <a class="idref" href="Definitions.html#defv"><span class="id" title="constructor">defv</span></a> <span class="id" title="var">v</span> ⇒ <a class="idref" href="Definitions.html#trm_val"><span class="id" title="constructor">trm_val</span></a> <span class="id" title="var">v</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab77"></a><h2 class="section">Type preservation for path lookup</h2>

<div class="paragraph"> </div>

 If the record <span class="inlinecode">{<span class="id" title="var">a</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">t</span>}</span> has type <span class="inlinecode">{<span class="id" title="var">a</span>:</span> <span class="inlinecode"><span class="id" title="var">V</span>}</span> then <span class="inlinecode"><span class="id" title="var">t</span></span> is either
<ul class="doclist">
<li> a function that has type <span class="inlinecode"><span class="id" title="var">V</span></span>,

</li>
<li> an object <span class="inlinecode"><span class="id" title="var">ν</span>(<span class="id" title="var">U</span>)<span class="id" title="var">ds</span></span> that has type <span class="inlinecode"><span class="id" title="var">μ</span>(<span class="id" title="var">U</span>)</span>, and <span class="inlinecode"><span class="id" title="var">V</span>=<span class="id" title="var">μ</span>(<span class="id" title="var">U</span>)</span>, or

</li>
<li> a well-typed path <span class="inlinecode"><span class="id" title="var">q</span></span>, and <span class="inlinecode"><span class="id" title="var">V</span>=<span class="id" title="var">q.type</span></span> 
</li>
</ul>

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="object_typing"><span class="id" title="lemma">object_typing</span></a> <span class="id" title="var">G</span> <span class="id" title="var">x</span> <span class="id" title="var">bs</span> <span class="id" title="var">ds</span> <span class="id" title="var">T</span> <span class="id" title="var">a</span> <span class="id" title="var">t</span> <span class="id" title="var">V</span> :<br/>
&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#x"><span class="id" title="variable">x</span></a><a class="idref" href="Definitions.html#ed2865d5b6635aaa6d875cc0fd7c034b"><span class="id" title="notation">;</span></a> <a class="idref" href="CanonicalForms.html#bs"><span class="id" title="variable">bs</span></a><a class="idref" href="Definitions.html#ed2865d5b6635aaa6d875cc0fd7c034b"><span class="id" title="notation">;</span></a> <a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Definitions.html#ed2865d5b6635aaa6d875cc0fd7c034b"><span class="id" title="notation">⊢</span></a> <a class="idref" href="CanonicalForms.html#ds"><span class="id" title="variable">ds</span></a> <a class="idref" href="Definitions.html#ed2865d5b6635aaa6d875cc0fd7c034b"><span class="id" title="notation">::</span></a> <a class="idref" href="CanonicalForms.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<a class="idref" href="Definitions.html#defs_has"><span class="id" title="definition">defs_has</span></a> <a class="idref" href="CanonicalForms.html#ds"><span class="id" title="variable">ds</span></a> <a class="idref" href="Definitions.html#5c1231770009cbe12d8b89eaf73bf800"><span class="id" title="notation">{</span></a><a class="idref" href="CanonicalForms.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="Definitions.html#5c1231770009cbe12d8b89eaf73bf800"><span class="id" title="notation">:=</span></a> <a class="idref" href="CanonicalForms.html#t"><span class="id" title="variable">t</span></a><a class="idref" href="Definitions.html#5c1231770009cbe12d8b89eaf73bf800"><span class="id" title="notation">}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<a class="idref" href="Definitions.html#record_has"><span class="id" title="inductive">record_has</span></a> <a class="idref" href="CanonicalForms.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="Definitions.html#18cbe8108c7275adbcbe2d488cc0d64e"><span class="id" title="notation">{</span></a><a class="idref" href="CanonicalForms.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="Definitions.html#18cbe8108c7275adbcbe2d488cc0d64e"><span class="id" title="notation">⦂</span></a> <a class="idref" href="CanonicalForms.html#V"><span class="id" title="variable">V</span></a><a class="idref" href="Definitions.html#18cbe8108c7275adbcbe2d488cc0d64e"><span class="id" title="notation">}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="notation">∃</span> <span class="id" title="var">U</span> <span class="id" title="var">u</span><span class="id" title="notation">,</span> <a class="idref" href="CanonicalForms.html#t"><span class="id" title="variable">t</span></a> <span class="id" title="notation">=</span> <a class="idref" href="Definitions.html#defv"><span class="id" title="constructor">defv</span></a> (<a class="idref" href="Definitions.html#d9cc4b8b9bd644016bdfcf5f8009b5b6"><span class="id" title="notation">λ</span></a><a class="idref" href="Definitions.html#d9cc4b8b9bd644016bdfcf5f8009b5b6"><span class="id" title="notation">(</span></a><a class="idref" href="CanonicalForms.html#U"><span class="id" title="variable">U</span></a><a class="idref" href="Definitions.html#d9cc4b8b9bd644016bdfcf5f8009b5b6"><span class="id" title="notation">)</span></a> <a class="idref" href="CanonicalForms.html#u"><span class="id" title="variable">u</span></a>) <span class="id" title="notation">∧</span> <a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Definitions.html#8f800003c5c18bd4e5a8078841b62512"><span class="id" title="notation">⊢</span></a> <a class="idref" href="CanonicalForms.html#deftrm"><span class="id" title="definition">deftrm</span></a> <a class="idref" href="CanonicalForms.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="Definitions.html#8f800003c5c18bd4e5a8078841b62512"><span class="id" title="notation">:</span></a> <a class="idref" href="CanonicalForms.html#V"><span class="id" title="variable">V</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">∨</span><br/>
&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="notation">∃</span> <span class="id" title="var">U</span> <span class="id" title="var">ds'</span><span class="id" title="notation">,</span> <a class="idref" href="CanonicalForms.html#t"><span class="id" title="variable">t</span></a> <span class="id" title="notation">=</span> <a class="idref" href="Definitions.html#defv"><span class="id" title="constructor">defv</span></a> (<a class="idref" href="Definitions.html#810ccb94c27e2d024c0cf678f1f52104"><span class="id" title="notation">ν</span></a><a class="idref" href="Definitions.html#810ccb94c27e2d024c0cf678f1f52104"><span class="id" title="notation">(</span></a><a class="idref" href="CanonicalForms.html#U"><span class="id" title="variable">U</span></a><a class="idref" href="Definitions.html#810ccb94c27e2d024c0cf678f1f52104"><span class="id" title="notation">)</span></a> <a class="idref" href="CanonicalForms.html#ds'"><span class="id" title="variable">ds'</span></a>) <span class="id" title="notation">∧</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#x"><span class="id" title="variable">x</span></a><a class="idref" href="Definitions.html#ed2865d5b6635aaa6d875cc0fd7c034b"><span class="id" title="notation">;</span></a> <a class="idref" href="Definitions.html#ed2865d5b6635aaa6d875cc0fd7c034b"><span class="id" title="notation">(</span></a><a class="idref" href="CanonicalForms.html#a"><span class="id" title="variable">a</span></a> <span class="id" title="notation">::</span> <a class="idref" href="CanonicalForms.html#bs"><span class="id" title="variable">bs</span></a><a class="idref" href="Definitions.html#ed2865d5b6635aaa6d875cc0fd7c034b"><span class="id" title="notation">);</span></a> <a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Definitions.html#ed2865d5b6635aaa6d875cc0fd7c034b"><span class="id" title="notation">⊢</span></a> <a class="idref" href="Definitions.html#open_defs_p"><span class="id" title="definition">open_defs_p</span></a> (<a class="idref" href="Definitions.html#p_sel"><span class="id" title="constructor">p_sel</span></a> (<a class="idref" href="Definitions.html#avar_f"><span class="id" title="constructor">avar_f</span></a> <a class="idref" href="CanonicalForms.html#x"><span class="id" title="variable">x</span></a>) (<a class="idref" href="CanonicalForms.html#a"><span class="id" title="variable">a</span></a> <span class="id" title="notation">::</span> <a class="idref" href="CanonicalForms.html#bs"><span class="id" title="variable">bs</span></a>)) <a class="idref" href="CanonicalForms.html#ds'"><span class="id" title="variable">ds'</span></a> <a class="idref" href="Definitions.html#ed2865d5b6635aaa6d875cc0fd7c034b"><span class="id" title="notation">::</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#open_typ_p"><span class="id" title="definition">open_typ_p</span></a> (<a class="idref" href="Definitions.html#p_sel"><span class="id" title="constructor">p_sel</span></a> (<a class="idref" href="Definitions.html#avar_f"><span class="id" title="constructor">avar_f</span></a> <a class="idref" href="CanonicalForms.html#x"><span class="id" title="variable">x</span></a>) (<a class="idref" href="CanonicalForms.html#a"><span class="id" title="variable">a</span></a> <span class="id" title="notation">::</span> <a class="idref" href="CanonicalForms.html#bs"><span class="id" title="variable">bs</span></a>)) <a class="idref" href="CanonicalForms.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">∧</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#V"><span class="id" title="variable">V</span></a> <span class="id" title="notation">=</span> <a class="idref" href="Definitions.html#57e8a3f1aebb1c6069654ec2f0cd7a19"><span class="id" title="notation">μ</span></a> <a class="idref" href="CanonicalForms.html#U"><span class="id" title="variable">U</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">∨</span><br/>
&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="notation">∃</span> <span class="id" title="var">q</span> <span class="id" title="var">S</span><span class="id" title="notation">,</span> <a class="idref" href="CanonicalForms.html#t"><span class="id" title="variable">t</span></a> <span class="id" title="notation">=</span> <a class="idref" href="Definitions.html#defp"><span class="id" title="constructor">defp</span></a> <a class="idref" href="CanonicalForms.html#q"><span class="id" title="variable">q</span></a> <span class="id" title="notation">∧</span> <a class="idref" href="CanonicalForms.html#V"><span class="id" title="variable">V</span></a> <span class="id" title="notation">=</span> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="CanonicalForms.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">∧</span> <a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Definitions.html#8f800003c5c18bd4e5a8078841b62512"><span class="id" title="notation">⊢</span></a> <a class="idref" href="Definitions.html#trm_path"><span class="id" title="constructor">trm_path</span></a> <a class="idref" href="CanonicalForms.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="Definitions.html#8f800003c5c18bd4e5a8078841b62512"><span class="id" title="notation">:</span></a> <a class="idref" href="CanonicalForms.html#S"><span class="id" title="variable">S</span></a><span class="id" title="notation">)</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hds</span> <span class="id" title="var">Hdh</span> <span class="id" title="var">Hr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="Binding.html#record_has_ty_defs"><span class="id" title="lemma">record_has_ty_defs</span></a> <span class="id" title="var">Hds</span> <span class="id" title="var">Hr</span>) <span class="id" title="keyword">as</span> [? [<span class="id" title="var">Hdh'</span> <span class="id" title="var">Hdt</span>]].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="RecordAndInertTypes.html#defs_invert_trm"><span class="id" title="lemma">defs_invert_trm</span></a> <span class="id" title="var">Hdt</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">t'</span> -&gt;].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="Binding.html#defs_has_inv"><span class="id" title="lemma">defs_has_inv</span></a> <span class="id" title="var">Hdh</span> <span class="id" title="var">Hdh'</span>) <span class="id" title="keyword">as</span> &lt;-. <span class="id" title="tactic">destruct</span> <span class="id" title="var">t</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">q</span> | <span class="id" title="var">v</span>]; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">inversion</span>× <span class="id" title="var">Hdt</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">v</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">right</span>. <span class="id" title="tactic">left</span>. <span class="id" title="var">inversions</span> <span class="id" title="var">Hdt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> ×. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">left</span>. <span class="id" title="var">inversions</span> <span class="id" title="var">Hdt</span>. <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
If <span class="inlinecode"><span class="id" title="var">p</span></span> looks up to <span class="inlinecode"><span class="id" title="var">t</span></span> in a value environment, <span class="inlinecode"><span class="id" title="var">p</span></span>'s environment type
    is <span class="inlinecode"><span class="id" title="var">T</span></span> and <span class="inlinecode"><span class="id" title="var">p</span></span>'s precise type is <span class="inlinecode"><span class="id" title="var">U</span></span>, then either <span class="inlinecode"><span class="id" title="var">t</span></span> is
<ul class="doclist">
<li> a function that has type <span class="inlinecode"><span class="id" title="var">T</span></span>,

</li>
<li> an object <span class="inlinecode"><span class="id" title="var">ν</span>(<span class="id" title="var">S</span>)<span class="id" title="var">ds</span></span> that has type <span class="inlinecode"><span class="id" title="var">μ</span>(<span class="id" title="var">S</span>)</span>, and <span class="inlinecode"><span class="id" title="var">T</span></span> and <span class="inlinecode"><span class="id" title="var">μ</span>(<span class="id" title="var">s</span>)</span> are equivalent, or

</li>
<li> a well-typed path <span class="inlinecode"><span class="id" title="var">q</span></span>, and <span class="inlinecode"><span class="id" title="var">T</span></span> is equivalent to <span class="inlinecode"><span class="id" title="var">q.type</span></span> 
</li>
</ul>

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="lookup_step_preservation_prec1"><span class="id" title="lemma">lookup_step_preservation_prec1</span></a>: <span class="id" title="keyword">∀</span> <span class="id" title="var">G</span> <span class="id" title="var">γ</span> <span class="id" title="var">p</span> <span class="id" title="var">px</span> <span class="id" title="var">pbs</span> <span class="id" title="var">t</span> <span class="id" title="var">T</span> <span class="id" title="var">U</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PreciseTyping.html#wf"><span class="id" title="inductive">wf</span></a> <a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#b0e5ed29efd576246de3282fa163293b"><span class="id" title="variable">γ</span></a> <a class="idref" href="Definitions.html#3d0e0e057bcbfdd590f754a27815747e"><span class="id" title="notation">⫶</span></a> <a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#b0e5ed29efd576246de3282fa163293b"><span class="id" title="variable">γ</span></a> <a class="idref" href="Lookup.html#8cc79fc5d6dbc3a1ff519f58bcbc908b"><span class="id" title="notation">⟦</span></a> <a class="idref" href="CanonicalForms.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="Lookup.html#8cc79fc5d6dbc3a1ff519f58bcbc908b"><span class="id" title="notation">⤳</span></a> <a class="idref" href="CanonicalForms.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="Lookup.html#8cc79fc5d6dbc3a1ff519f58bcbc908b"><span class="id" title="notation">⟧</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">⊢!</span></a> <a class="idref" href="CanonicalForms.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">:</span></a> <a class="idref" href="CanonicalForms.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">⪼</span></a> <a class="idref" href="CanonicalForms.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#p"><span class="id" title="variable">p</span></a> <span class="id" title="notation">=</span> <a class="idref" href="Definitions.html#p_sel"><span class="id" title="constructor">p_sel</span></a> (<a class="idref" href="Definitions.html#avar_f"><span class="id" title="constructor">avar_f</span></a> <a class="idref" href="CanonicalForms.html#px"><span class="id" title="variable">px</span></a>) <a class="idref" href="CanonicalForms.html#pbs"><span class="id" title="variable">pbs</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="notation">∃</span> <span class="id" title="var">S</span> <span class="id" title="var">u</span><span class="id" title="notation">,</span> <a class="idref" href="CanonicalForms.html#t"><span class="id" title="variable">t</span></a> <span class="id" title="notation">=</span> <a class="idref" href="Definitions.html#defv"><span class="id" title="constructor">defv</span></a> (<a class="idref" href="Definitions.html#d9cc4b8b9bd644016bdfcf5f8009b5b6"><span class="id" title="notation">λ</span></a><a class="idref" href="Definitions.html#d9cc4b8b9bd644016bdfcf5f8009b5b6"><span class="id" title="notation">(</span></a><a class="idref" href="CanonicalForms.html#S"><span class="id" title="variable">S</span></a><a class="idref" href="Definitions.html#d9cc4b8b9bd644016bdfcf5f8009b5b6"><span class="id" title="notation">)</span></a> <a class="idref" href="CanonicalForms.html#u"><span class="id" title="variable">u</span></a>) <span class="id" title="notation">∧</span> <a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Definitions.html#8f800003c5c18bd4e5a8078841b62512"><span class="id" title="notation">⊢</span></a> <a class="idref" href="CanonicalForms.html#deftrm"><span class="id" title="definition">deftrm</span></a> <a class="idref" href="CanonicalForms.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="Definitions.html#8f800003c5c18bd4e5a8078841b62512"><span class="id" title="notation">:</span></a> <a class="idref" href="CanonicalForms.html#T"><span class="id" title="variable">T</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">∨</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="notation">∃</span> <span class="id" title="var">S</span> <span class="id" title="var">ds</span> <span class="id" title="var">W</span> <span class="id" title="var">T'</span> <span class="id" title="var">G1</span> <span class="id" title="var">G2</span> <span class="id" title="var">pT</span><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#t"><span class="id" title="variable">t</span></a> <span class="id" title="notation">=</span> <a class="idref" href="Definitions.html#defv"><span class="id" title="constructor">defv</span></a> (<a class="idref" href="Definitions.html#810ccb94c27e2d024c0cf678f1f52104"><span class="id" title="notation">ν</span></a><a class="idref" href="Definitions.html#810ccb94c27e2d024c0cf678f1f52104"><span class="id" title="notation">(</span></a><a class="idref" href="CanonicalForms.html#S"><span class="id" title="variable">S</span></a><a class="idref" href="Definitions.html#810ccb94c27e2d024c0cf678f1f52104"><span class="id" title="notation">)</span></a> <a class="idref" href="CanonicalForms.html#ds"><span class="id" title="variable">ds</span></a>) <span class="id" title="notation">∧</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">=</span> <a class="idref" href="Definitions.html#57e8a3f1aebb1c6069654ec2f0cd7a19"><span class="id" title="notation">μ</span></a> <a class="idref" href="CanonicalForms.html#T'"><span class="id" title="variable">T'</span></a> <span class="id" title="notation">∧</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">=</span> <a class="idref" href="CanonicalForms.html#G1"><span class="id" title="variable">G1</span></a> <span class="id" title="notation">&amp;</span> <a class="idref" href="CanonicalForms.html#px"><span class="id" title="variable">px</span></a> <span class="id" title="notation">~</span> <a class="idref" href="CanonicalForms.html#pT"><span class="id" title="variable">pT</span></a> <span class="id" title="notation">&amp;</span> <a class="idref" href="CanonicalForms.html#G2"><span class="id" title="variable">G2</span></a> <span class="id" title="notation">∧</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#px"><span class="id" title="variable">px</span></a> <a class="idref" href="Definitions.html#ed2865d5b6635aaa6d875cc0fd7c034b"><span class="id" title="notation">;</span></a> <a class="idref" href="CanonicalForms.html#pbs"><span class="id" title="variable">pbs</span></a><a class="idref" href="Definitions.html#ed2865d5b6635aaa6d875cc0fd7c034b"><span class="id" title="notation">;</span></a> <a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Definitions.html#ed2865d5b6635aaa6d875cc0fd7c034b"><span class="id" title="notation">⊢</span></a> <a class="idref" href="Definitions.html#open_defs_p"><span class="id" title="definition">open_defs_p</span></a> <a class="idref" href="CanonicalForms.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="CanonicalForms.html#ds"><span class="id" title="variable">ds</span></a> <a class="idref" href="Definitions.html#ed2865d5b6635aaa6d875cc0fd7c034b"><span class="id" title="notation">::</span></a> <a class="idref" href="Definitions.html#open_typ_p"><span class="id" title="definition">open_typ_p</span></a> <a class="idref" href="CanonicalForms.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="CanonicalForms.html#S"><span class="id" title="variable">S</span></a> <span class="id" title="notation">∧</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#G1"><span class="id" title="variable">G1</span></a> <a class="idref" href="PreciseTyping.html#218c7b55c498333123efe7fa512ad9ed"><span class="id" title="notation">⊩</span></a> <a class="idref" href="CanonicalForms.html#S"><span class="id" title="variable">S</span></a> <a class="idref" href="PreciseTyping.html#218c7b55c498333123efe7fa512ad9ed"><span class="id" title="notation">⟿</span></a> <a class="idref" href="CanonicalForms.html#W"><span class="id" title="variable">W</span></a> <a class="idref" href="PreciseTyping.html#218c7b55c498333123efe7fa512ad9ed"><span class="id" title="notation">⬳</span></a> <a class="idref" href="CanonicalForms.html#T'"><span class="id" title="variable">T'</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">∨</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="notation">∃</span> <span class="id" title="var">q</span> <span class="id" title="var">r</span> <span class="id" title="var">r'</span> <span class="id" title="var">G1</span> <span class="id" title="var">G2</span> <span class="id" title="var">pT</span><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#t"><span class="id" title="variable">t</span></a> <span class="id" title="notation">=</span> <a class="idref" href="Definitions.html#defp"><span class="id" title="constructor">defp</span></a> <a class="idref" href="CanonicalForms.html#q"><span class="id" title="variable">q</span></a> <span class="id" title="notation">∧</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">=</span> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="CanonicalForms.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">∧</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">=</span> <a class="idref" href="CanonicalForms.html#G1"><span class="id" title="variable">G1</span></a> <span class="id" title="notation">&amp;</span> <a class="idref" href="CanonicalForms.html#px"><span class="id" title="variable">px</span></a> <span class="id" title="notation">~</span> <a class="idref" href="CanonicalForms.html#pT"><span class="id" title="variable">pT</span></a> <span class="id" title="notation">&amp;</span> <a class="idref" href="CanonicalForms.html#G2"><span class="id" title="variable">G2</span></a> <span class="id" title="notation">∧</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><a class="idref" href="CanonicalForms.html#r"><span class="id" title="variable">r</span></a> <span class="id" title="notation">=</span> <a class="idref" href="CanonicalForms.html#r'"><span class="id" title="variable">r'</span></a> <span class="id" title="notation">∨</span> <a class="idref" href="CanonicalForms.html#G1"><span class="id" title="variable">G1</span></a> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">⊢!!!</span></a> <a class="idref" href="CanonicalForms.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="CanonicalForms.html#r'"><span class="id" title="variable">r'</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">∧</span> <span class="id" title="notation">(</span><a class="idref" href="CanonicalForms.html#q"><span class="id" title="variable">q</span></a> <span class="id" title="notation">=</span> <a class="idref" href="CanonicalForms.html#r'"><span class="id" title="variable">r'</span></a> <span class="id" title="notation">∨</span> <a class="idref" href="CanonicalForms.html#G1"><span class="id" title="variable">G1</span></a> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">⊢!!!</span></a> <a class="idref" href="CanonicalForms.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="CanonicalForms.html#r'"><span class="id" title="variable">r'</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a><span class="id" title="notation">)</span><span class="id" title="notation">)</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hwf</span> <span class="id" title="var">Hwt</span>. <span class="id" title="var">gen</span> <span class="id" title="var">p</span> <span class="id" title="var">px</span> <span class="id" title="var">pbs</span> <span class="id" title="var">t</span> <span class="id" title="var">T</span> <span class="id" title="var">U</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;induction&nbsp;on&nbsp;well-formedness&nbsp;**)</span><br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Hwt</span>; <span class="id" title="var">introv</span> <span class="id" title="var">Hs</span> <span class="id" title="var">Hp</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span> "G is empty"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">false</span>× <a class="idref" href="Lookup.html#lookup_empty"><span class="id" title="lemma">lookup_empty</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span> "G is not empty"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="Binding.html#typed_paths_named"><span class="id" title="lemma">typed_paths_named</span></a> (<a class="idref" href="PreciseFlow.html#precise_to_general"><span class="id" title="lemma">precise_to_general</span></a> <span class="id" title="var">Hp</span>)) <span class="id" title="keyword">as</span> [<span class="id" title="var">px'</span> [<span class="id" title="var">bs</span> -&gt;]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="lemma">classicT</span> (<span class="id" title="var">x</span> <span class="id" title="notation">=</span> <span class="id" title="var">px'</span>)) <span class="id" title="keyword">as</span> [-&gt; | <span class="id" title="var">Hn</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">SCase</span> "x = px"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;induction&nbsp;on&nbsp;⟦⤳⟧&nbsp;**)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">gen</span> <span class="id" title="var">T</span> <span class="id" title="var">U</span> <span class="id" title="var">T0</span> <span class="id" title="var">px</span> <span class="id" title="var">pbs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">Hs</span>; <span class="id" title="var">introv</span> <span class="id" title="var">Hwf</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hv</span>; <span class="id" title="var">introv</span> <span class="id" title="var">Hp</span>; <span class="id" title="var">introv</span> [= → &lt;-];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="var">simpl_dot</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="Binding.html#proj_rewrite"><span class="id" title="lemma">proj_rewrite</span></a> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">SSCase</span> "lookup_var"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">binds_push_eq_inv</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span> <span class="id" title="keyword">as</span> →.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lets</span> <span class="id" title="var">Hb</span>: (<a class="idref" href="PreciseFlow.html#pf_binds"><span class="id" title="lemma">pf_binds</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">Hp</span>). <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="lemma">binds_push_eq_inv</span> <span class="id" title="var">Hb</span>) <span class="id" title="keyword">as</span> →.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="PreciseFlow.html#binds_inert"><span class="id" title="lemma">binds_inert</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hb</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">v</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">S</span> <span class="id" title="var">ds</span> | <span class="id" title="var">S</span> <span class="id" title="var">u</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="comment">(*&nbsp;v&nbsp;is&nbsp;an&nbsp;object&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">right</span>. <span class="id" title="tactic">left</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lets</span> <span class="id" title="var">Hi'</span>: (<a class="idref" href="RecordAndInertTypes.html#inert_prefix"><span class="id" title="lemma">inert_prefix</span></a> <span class="id" title="var">Hi</span>). <span class="id" title="var">lets</span> <span class="id" title="var">Hwf'</span>: (<a class="idref" href="PreciseTyping.html#wf_prefix"><span class="id" title="lemma">wf_prefix</span></a> <span class="id" title="var">Hwf</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inversions</span> <span class="id" title="var">Hb</span>; <span class="id" title="var">proof_recipe</span>. { <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hvpr</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inversions</span> <span class="id" title="var">Hv</span>. <span class="id" title="var">pick_fresh</span> <span class="id" title="var">z</span>. <span class="id" title="tactic">assert</span> (<span class="id" title="var">z</span> <span class="id" title="notation">\</span><span class="id" title="notation">notin</span> <span class="id" title="var">L</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hz</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H4</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hz</span>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">eexists</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+++ <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">concat_empty_r</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+++ <span class="id" title="tactic">apply</span> <a class="idref" href="Binding.html#open_env_last_defs"><span class="id" title="lemma">open_env_last_defs</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Narrowing.html#narrow_defs"><span class="id" title="lemma">narrow_defs</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">G</span>:=<span class="id" title="var">G</span> <span class="id" title="notation">&amp;</span> <span class="id" title="var">px</span> <span class="id" title="notation">~</span> <a class="idref" href="Definitions.html#open_typ"><span class="id" title="definition">open_typ</span></a> <span class="id" title="var">px</span> <span class="id" title="var">S</span>). {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="Definitions.html#open_defs_p"><span class="id" title="definition">open_defs_p</span></a> (<a class="idref" href="Definitions.html#p_sel"><span class="id" title="constructor">p_sel</span></a> (<a class="idref" href="Definitions.html#avar_f"><span class="id" title="constructor">avar_f</span></a> <span class="id" title="var">px</span>) <span class="id" title="constructor">nil</span>) <span class="id" title="var">ds</span> <span class="id" title="notation">=</span> <a class="idref" href="Definitions.html#open_defs"><span class="id" title="definition">open_defs</span></a> <span class="id" title="var">px</span> <span class="id" title="var">ds</span>) <span class="id" title="keyword">as</span> → <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span>× <a class="idref" href="Binding.html#open_var_defs_eq"><span class="id" title="lemma">open_var_defs_eq</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="Definitions.html#open_typ_p"><span class="id" title="definition">open_typ_p</span></a> (<a class="idref" href="Definitions.html#p_sel"><span class="id" title="constructor">p_sel</span></a> (<a class="idref" href="Definitions.html#avar_f"><span class="id" title="constructor">avar_f</span></a> <span class="id" title="var">px</span>) <span class="id" title="constructor">nil</span>) <span class="id" title="var">S</span> <span class="id" title="notation">=</span> <a class="idref" href="Definitions.html#open_typ"><span class="id" title="definition">open_typ</span></a> <span class="id" title="var">px</span> <span class="id" title="var">S</span>) <span class="id" title="keyword">as</span> → <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span>× <a class="idref" href="Binding.html#open_var_typ_eq"><span class="id" title="lemma">open_var_typ_eq</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Substitution.html#rename_defs"><span class="id" title="lemma">rename_defs</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">x</span> := <span class="id" title="var">z</span>); <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Subenvironments.html#subenv_last"><span class="id" title="lemma">subenv_last</span></a>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">apply</span> (<a class="idref" href="PreciseTyping.html#repl_composition_open"><span class="id" title="lemma">repl_composition_open</span></a> (<a class="idref" href="Definitions.html#pvar"><span class="id" title="abbreviation">pvar</span></a> <span class="id" title="var">px</span>)) <span class="id" title="tactic">in</span> <span class="id" title="var">Hrc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="PreciseTyping.html#repl_composition_open"><span class="id" title="lemma">repl_composition_open</span></a> (<a class="idref" href="Definitions.html#pvar"><span class="id" title="abbreviation">pvar</span></a> <span class="id" title="var">px</span>)) <span class="id" title="tactic">in</span> <span class="id" title="var">Hrc'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Definitions.html#subtyp_trans"><span class="id" title="constructor">subtyp_trans</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">T</span>:=<a class="idref" href="Definitions.html#open_typ"><span class="id" title="definition">open_typ</span></a> <span class="id" title="var">px</span> <span class="id" title="var">U'</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="InvertibleTyping.html#repl_composition_sub"><span class="id" title="lemma">repl_composition_sub</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hrc'</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="InvertibleTyping.html#repl_composition_sub"><span class="id" title="lemma">repl_composition_sub</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hrc</span>; <span class="id" title="var">destruct_all</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="Binding.html#open_var_typ_eq"><span class="id" title="lemma">open_var_typ_eq</span></a> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">auto</span>. <span class="id" title="var">all</span>: <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+++ <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+++ <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="comment">(*&nbsp;v&nbsp;is&nbsp;a&nbsp;function&nbsp;*)</span> <span class="id" title="tactic">left</span>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">eexists</span>. <span class="id" title="tactic">apply</span>× <a class="idref" href="Weakening.html#weaken_ty_trm"><span class="id" title="lemma">weaken_ty_trm</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">SSCase</span> "lookup_sel_p"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="PreciseFlow.html#pf_path_sel"><span class="id" title="lemma">pf_path_sel</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hp</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">V</span> <span class="id" title="var">Hp'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHHs</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hwt</span> <span class="id" title="var">IHHwt</span> <span class="id" title="var">_</span> <span class="id" title="var">H0</span> <span class="id" title="var">H</span> <span class="id" title="constructor">JMeq_refl</span> <span class="id" title="constructor">eq_refl</span> <span class="id" title="var">_</span> <span class="id" title="var">Hwf</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hv</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hp'</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="constructor">eq_refl</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> [[? [? [[=] ?]]] |<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[[? [? [? [? [? [? [? [[=]]]]]]]]] |<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[? [? [? [? [? [? [[= -&gt;] [[=] ?]]]]]]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">SSCase</span> "lookup_sel_v"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="PreciseFlow.html#pf_path_sel"><span class="id" title="lemma">pf_path_sel</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hp</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">V</span> <span class="id" title="var">Hp'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHHs</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hwt</span> <span class="id" title="var">IHHwt</span> <span class="id" title="var">_</span> <span class="id" title="var">H0</span> <span class="id" title="var">H</span> <span class="id" title="constructor">JMeq_refl</span> <span class="id" title="constructor">eq_refl</span> <span class="id" title="var">_</span> <span class="id" title="var">Hwf</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hv</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hp'</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="constructor">eq_refl</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> [[? [? [[=] ?]]] |<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[[<span class="id" title="var">S</span> [<span class="id" title="var">ds'</span> [<span class="id" title="var">W</span> [<span class="id" title="var">T''</span> [<span class="id" title="var">G1</span> [<span class="id" title="var">G2</span> [<span class="id" title="var">pT</span> [[= → -&gt;] [[= -&gt;] [<span class="id" title="var">Heq</span> [<span class="id" title="var">Hds</span> <span class="id" title="var">Hrc</span>]]]]]]]]]]] |<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[? [? [? [? [? [? [[= -&gt;] [-&gt; [[= -&gt;] ?]]]]]]]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lets</span> <span class="id" title="var">H'</span>: (<a class="idref" href="RecordAndInertTypes.html#defs_has_open"><span class="id" title="lemma">defs_has_open</span></a> (<a class="idref" href="Definitions.html#p_sel"><span class="id" title="constructor">p_sel</span></a> (<a class="idref" href="Definitions.html#avar_f"><span class="id" title="constructor">avar_f</span></a> <span class="id" title="var">px</span>) <span class="id" title="var">f</span>) <span class="id" title="var">H1</span>). <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lets</span> <span class="id" title="var">Hr</span>: (<a class="idref" href="PreciseFlow.html#pf_record_has_U"><span class="id" title="lemma">pf_record_has_U</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">Hp'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heq</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hi</span>, <span class="id" title="var">Hwf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="PreciseTyping.html#repl_comp_trans_open"><span class="id" title="lemma">repl_comp_trans_open</span></a> (<a class="idref" href="Definitions.html#p_sel"><span class="id" title="constructor">p_sel</span></a> (<a class="idref" href="Definitions.html#avar_f"><span class="id" title="constructor">avar_f</span></a> <span class="id" title="var">px</span>) <span class="id" title="var">f</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="RecordAndInertTypes.html#inert_prefix"><span class="id" title="lemma">inert_prefix</span></a> (<a class="idref" href="RecordAndInertTypes.html#inert_prefix"><span class="id" title="lemma">inert_prefix</span></a> <span class="id" title="var">Hi</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Hrc</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hrc_op</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="PreciseTyping.html#repl_comp_trans_record_has"><span class="id" title="lemma">repl_comp_trans_record_has</span></a> <span class="id" title="var">Hrc_op</span> <span class="id" title="var">Hr</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">V</span> [<span class="id" title="var">W'</span> [<span class="id" title="var">Hrh</span> [<span class="id" title="var">Hrc1'</span> <span class="id" title="var">Hrc2'</span>]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="lemma">concat_empty_r</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span> <span class="id" title="tactic">at</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">G2</span> <span class="id" title="notation">=</span> <span class="id" title="axiom">empty</span>) <span class="id" title="keyword">as</span> →. {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="Binding.html#env_ok_inv"><span class="id" title="lemma">env_ok_inv</span></a>. <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">concat_empty_r</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heq</span>, <span class="id" title="lemma">concat_empty_r</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hi</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">concat_empty_r</span> <span class="id" title="tactic">in</span> ×. <span class="id" title="tactic">apply</span> <span class="id" title="lemma">eq_push_inv</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">_</span> [&lt;- &lt;-]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">G</span> <span class="id" title="notation">&amp;</span> <span class="id" title="var">px</span> <span class="id" title="notation">~</span> <span class="id" title="var">T0</span> <a class="idref" href="Definitions.html#d77433d9a5f06bee50380b6ca9a3f271"><span class="id" title="notation">⊢</span></a> <span class="id" title="var">V</span> <a class="idref" href="Definitions.html#d77433d9a5f06bee50380b6ca9a3f271"><span class="id" title="notation">&lt;:</span></a> <span class="id" title="var">T1</span> <span class="id" title="notation">∧</span> <span class="id" title="var">G</span> <span class="id" title="notation">&amp;</span> <span class="id" title="var">px</span> <span class="id" title="notation">~</span> <span class="id" title="var">T0</span> <a class="idref" href="Definitions.html#d77433d9a5f06bee50380b6ca9a3f271"><span class="id" title="notation">⊢</span></a> <span class="id" title="var">T1</span> <a class="idref" href="Definitions.html#d77433d9a5f06bee50380b6ca9a3f271"><span class="id" title="notation">&lt;:</span></a> <span class="id" title="var">V</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">HVT</span> <span class="id" title="var">HTV</span>]. {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="InvertibleTyping.html#repl_composition_sub"><span class="id" title="lemma">repl_composition_sub</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hrc2'</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="InvertibleTyping.html#repl_composition_sub"><span class="id" title="lemma">repl_composition_sub</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hrc1'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">destruct_all</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="Weakening.html#weaken_subtyp"><span class="id" title="lemma">weaken_subtyp</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="CanonicalForms.html#object_typing"><span class="id" title="lemma">object_typing</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">Hds</span> <span class="id" title="var">H'</span> <span class="id" title="var">Hrh</span>) <span class="id" title="keyword">as</span> [[<span class="id" title="var">U'</span> [<span class="id" title="var">u</span> [<span class="id" title="var">Heq</span> <span class="id" title="var">Ht'</span>]]] |<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[[<span class="id" title="var">U'</span> [<span class="id" title="var">ds''</span> [<span class="id" title="var">Heq</span> [<span class="id" title="var">Hds''</span> -&gt;]]]] | [<span class="id" title="var">q</span> [<span class="id" title="var">V'</span> [<span class="id" title="var">Heq1</span> [-&gt; <span class="id" title="var">Hq</span>]]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">destruct</span> <span class="id" title="var">t</span>; <span class="id" title="var">inversions</span> <span class="id" title="var">Heq</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">v0</span>; <span class="id" title="var">inversions</span> <span class="id" title="var">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">left</span>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">eexists</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">destruct</span> <span class="id" title="var">t</span> <span class="id" title="keyword">as</span> [|]; <span class="id" title="var">inversions</span> <span class="id" title="var">Heq</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">v0</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">X</span> <span class="id" title="var">ds</span> |]; <span class="id" title="var">inversions</span> <span class="id" title="var">H3</span>. <span class="id" title="tactic">fold</span> <a class="idref" href="Definitions.html#open_rec_defs_p"><span class="id" title="definition">open_rec_defs_p</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hds''</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">right</span>. <span class="id" title="tactic">left</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="PreciseTyping.html#repl_comp_bnd_inv1"><span class="id" title="lemma">repl_comp_bnd_inv1</span></a> <span class="id" title="var">Hrc1'</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">Y</span> -&gt;]. <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="PreciseTyping.html#repl_comp_bnd_inv2"><span class="id" title="lemma">repl_comp_bnd_inv2</span></a> <span class="id" title="var">Hrc2'</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">Z</span> -&gt;].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+++ <span class="id" title="tactic">apply</span> <a class="idref" href="PreciseTyping.html#repl_comp_bnd'"><span class="id" title="lemma">repl_comp_bnd'</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hrc1'</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">concat_empty_r</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+++ <span class="id" title="tactic">apply</span> <a class="idref" href="PreciseTyping.html#repl_comp_bnd'"><span class="id" title="lemma">repl_comp_bnd'</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hrc1'</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Hrc1'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+++ <span class="id" title="tactic">apply</span>× <a class="idref" href="PreciseTyping.html#repl_comp_bnd'"><span class="id" title="lemma">repl_comp_bnd'</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">destruct</span> <span class="id" title="var">t</span>; <span class="id" title="var">inversions</span> <span class="id" title="var">Heq1</span>. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="PreciseTyping.html#repl_comp_sngl_inv1"><span class="id" title="lemma">repl_comp_sngl_inv1</span></a> <span class="id" title="var">Hrc1'</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">r</span> -&gt;]. <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="PreciseTyping.html#repl_comp_sngl_inv2"><span class="id" title="lemma">repl_comp_sngl_inv2</span></a> <span class="id" title="var">Hrc2'</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">r'</span> -&gt;].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="PreciseFlow.html#pf_sngl_U"><span class="id" title="lemma">pf_sngl_U</span></a> <span class="id" title="var">Hp</span>) <span class="id" title="keyword">as</span> →.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="PreciseTyping.html#sngl_typed"><span class="id" title="lemma">sngl_typed</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">Hwf</span> <span class="id" title="var">Hp</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">V</span> <span class="id" title="var">Hr'</span>%<a class="idref" href="PreciseTyping.html#pt3"><span class="id" title="constructor">pt3</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="GeneralToTight.html#pt3_exists"><span class="id" title="lemma">pt3_exists</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">Hq</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">V''</span> <span class="id" title="var">Hp3</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="PreciseTyping.html#repl_comp_to_prec'"><span class="id" title="lemma">repl_comp_to_prec'</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">Hwf</span> <span class="id" title="var">Hrc2'</span> <span class="id" title="var">Hr'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> [-&gt; | <span class="id" title="var">Hpr</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="PreciseTyping.html#repl_comp_to_prec'"><span class="id" title="lemma">repl_comp_to_prec'</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">Hwf</span> <span class="id" title="var">Hrc1'</span> <span class="id" title="var">Hp3</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> [&lt;- | <span class="id" title="var">Hpr'</span>]; <span class="id" title="tactic">clear</span> <span class="id" title="var">Hrc1'</span> <span class="id" title="var">Hrc2'</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">concat_empty_r</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">SCase</span> "x &lt;&gt; x0"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="PreciseFlow.html#pf_strengthen"><span class="id" title="lemma">pf_strengthen</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hp</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="Lookup.html#lookup_strengthen_one"><span class="id" title="lemma">lookup_strengthen_one</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hs</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inversions</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHHwt</span> (<a class="idref" href="RecordAndInertTypes.html#inert_prefix"><span class="id" title="lemma">inert_prefix</span></a> <span class="id" title="var">Hi</span>) (<a class="idref" href="PreciseTyping.html#wf_prefix"><span class="id" title="lemma">wf_prefix</span></a> <span class="id" title="var">Hwf</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hs</span> <span class="id" title="var">Hp</span> <span class="id" title="constructor">eq_refl</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> [[? [? [[= -&gt;]]]] |<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[[? [? [? [? [? [? [? [-&gt; [-&gt; [-&gt; [<span class="id" title="var">Hds</span> [? ?]]]]]]]]]]]] |<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[? [? [? [? [? [? [[= -&gt;] [[= -&gt;] [-&gt; [? ?]]]]]]]]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">left</span>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">eexists</span>. <span class="id" title="tactic">apply</span>× <a class="idref" href="Weakening.html#weaken_ty_trm"><span class="id" title="lemma">weaken_ty_trm</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">right</span>. <span class="id" title="tactic">left</span>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">eexists</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">concat_assoc</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>× <a class="idref" href="Weakening.html#weaken_ty_defs"><span class="id" title="lemma">weaken_ty_defs</span></a>. <span class="id" title="var">all</span>: <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">right</span>. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">eexists</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">concat_assoc</span>. <span class="id" title="var">all</span>: <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
If <span class="inlinecode"><span class="id" title="var">p</span></span> looks up to <span class="inlinecode"><span class="id" title="var">t</span></span> in a value environment and <span class="inlinecode"><span class="id" title="var">p</span></span>'s II-level precise type
    is <span class="inlinecode"><span class="id" title="var">T</span></span>, then either <span class="inlinecode"><span class="id" title="var">t</span></span> is
<ul class="doclist">
<li> a function that has type <span class="inlinecode"><span class="id" title="var">T</span></span>, and <span class="inlinecode"><span class="id" title="var">T</span></span> is <span class="inlinecode"><span class="id" title="var">p</span></span>'s precise type,

</li>
<li> an object <span class="inlinecode"><span class="id" title="var">ν</span>(<span class="id" title="var">S</span>)<span class="id" title="var">ds</span></span> that has type <span class="inlinecode"><span class="id" title="var">μ</span>(<span class="id" title="var">S</span>)</span>, and <span class="inlinecode"><span class="id" title="var">T</span></span> and <span class="inlinecode"><span class="id" title="var">μ</span>(<span class="id" title="var">s</span>)</span> are equivalent, or

</li>
<li> a well-typed path <span class="inlinecode"><span class="id" title="var">q</span></span>, and <span class="inlinecode"><span class="id" title="var">T</span></span> is equivalent to <span class="inlinecode"><span class="id" title="var">q.type</span></span> 
</li>
</ul>

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="lookup_step_preservation_prec2"><span class="id" title="lemma">lookup_step_preservation_prec2</span></a> <span class="id" title="var">G</span> <span class="id" title="var">γ</span> <span class="id" title="var">p</span> <span class="id" title="var">px</span> <span class="id" title="var">pbs</span> <span class="id" title="var">t</span> <span class="id" title="var">T</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PreciseTyping.html#wf"><span class="id" title="inductive">wf</span></a> <a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#b0e5ed29efd576246de3282fa163293b"><span class="id" title="variable">γ</span></a> <a class="idref" href="Definitions.html#3d0e0e057bcbfdd590f754a27815747e"><span class="id" title="notation">⫶</span></a> <a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#b0e5ed29efd576246de3282fa163293b"><span class="id" title="variable">γ</span></a> <a class="idref" href="Lookup.html#8cc79fc5d6dbc3a1ff519f58bcbc908b"><span class="id" title="notation">⟦</span></a> <a class="idref" href="CanonicalForms.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="Lookup.html#8cc79fc5d6dbc3a1ff519f58bcbc908b"><span class="id" title="notation">⤳</span></a> <a class="idref" href="CanonicalForms.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="Lookup.html#8cc79fc5d6dbc3a1ff519f58bcbc908b"><span class="id" title="notation">⟧</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">⊢!!</span></a> <a class="idref" href="CanonicalForms.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">:</span></a> <a class="idref" href="CanonicalForms.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#p"><span class="id" title="variable">p</span></a> <span class="id" title="notation">=</span> <a class="idref" href="Definitions.html#p_sel"><span class="id" title="constructor">p_sel</span></a> (<a class="idref" href="Definitions.html#avar_f"><span class="id" title="constructor">avar_f</span></a> <a class="idref" href="CanonicalForms.html#px"><span class="id" title="variable">px</span></a>) <a class="idref" href="CanonicalForms.html#pbs"><span class="id" title="variable">pbs</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="notation">∃</span> <span class="id" title="var">S</span> <span class="id" title="var">U</span> <span class="id" title="var">u</span><span class="id" title="notation">,</span> <a class="idref" href="CanonicalForms.html#t"><span class="id" title="variable">t</span></a> <span class="id" title="notation">=</span> <a class="idref" href="Definitions.html#defv"><span class="id" title="constructor">defv</span></a> (<a class="idref" href="Definitions.html#d9cc4b8b9bd644016bdfcf5f8009b5b6"><span class="id" title="notation">λ</span></a><a class="idref" href="Definitions.html#d9cc4b8b9bd644016bdfcf5f8009b5b6"><span class="id" title="notation">(</span></a><a class="idref" href="CanonicalForms.html#S"><span class="id" title="variable">S</span></a><a class="idref" href="Definitions.html#d9cc4b8b9bd644016bdfcf5f8009b5b6"><span class="id" title="notation">)</span></a> <a class="idref" href="CanonicalForms.html#u"><span class="id" title="variable">u</span></a>) <span class="id" title="notation">∧</span> <a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Definitions.html#8f800003c5c18bd4e5a8078841b62512"><span class="id" title="notation">⊢</span></a> <a class="idref" href="CanonicalForms.html#deftrm"><span class="id" title="definition">deftrm</span></a> <a class="idref" href="CanonicalForms.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="Definitions.html#8f800003c5c18bd4e5a8078841b62512"><span class="id" title="notation">:</span></a> <a class="idref" href="CanonicalForms.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">∧</span> <a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">⊢!</span></a> <a class="idref" href="CanonicalForms.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">:</span></a> <a class="idref" href="CanonicalForms.html#U"><span class="id" title="variable">U</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">⪼</span></a> <a class="idref" href="CanonicalForms.html#T"><span class="id" title="variable">T</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">∨</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="notation">∃</span> <span class="id" title="var">S</span> <span class="id" title="var">ds</span> <span class="id" title="var">W</span> <span class="id" title="var">U</span> <span class="id" title="var">G1</span> <span class="id" title="var">G2</span> <span class="id" title="var">pT</span><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#t"><span class="id" title="variable">t</span></a> <span class="id" title="notation">=</span> <a class="idref" href="Definitions.html#defv"><span class="id" title="constructor">defv</span></a> (<a class="idref" href="Definitions.html#810ccb94c27e2d024c0cf678f1f52104"><span class="id" title="notation">ν</span></a><a class="idref" href="Definitions.html#810ccb94c27e2d024c0cf678f1f52104"><span class="id" title="notation">(</span></a><a class="idref" href="CanonicalForms.html#S"><span class="id" title="variable">S</span></a><a class="idref" href="Definitions.html#810ccb94c27e2d024c0cf678f1f52104"><span class="id" title="notation">)</span></a> <a class="idref" href="CanonicalForms.html#ds"><span class="id" title="variable">ds</span></a>) <span class="id" title="notation">∧</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">⊢!</span></a> <a class="idref" href="CanonicalForms.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#57e8a3f1aebb1c6069654ec2f0cd7a19"><span class="id" title="notation">μ</span></a> <a class="idref" href="CanonicalForms.html#U"><span class="id" title="variable">U</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">⪼</span></a> <a class="idref" href="CanonicalForms.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">∧</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">=</span> <a class="idref" href="CanonicalForms.html#G1"><span class="id" title="variable">G1</span></a> <span class="id" title="notation">&amp;</span> <a class="idref" href="CanonicalForms.html#px"><span class="id" title="variable">px</span></a> <span class="id" title="notation">~</span> <a class="idref" href="CanonicalForms.html#pT"><span class="id" title="variable">pT</span></a> <span class="id" title="notation">&amp;</span> <a class="idref" href="CanonicalForms.html#G2"><span class="id" title="variable">G2</span></a> <span class="id" title="notation">∧</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#px"><span class="id" title="variable">px</span></a> <a class="idref" href="Definitions.html#ed2865d5b6635aaa6d875cc0fd7c034b"><span class="id" title="notation">;</span></a> <a class="idref" href="CanonicalForms.html#pbs"><span class="id" title="variable">pbs</span></a><a class="idref" href="Definitions.html#ed2865d5b6635aaa6d875cc0fd7c034b"><span class="id" title="notation">;</span></a> <a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Definitions.html#ed2865d5b6635aaa6d875cc0fd7c034b"><span class="id" title="notation">⊢</span></a> <a class="idref" href="Definitions.html#open_defs_p"><span class="id" title="definition">open_defs_p</span></a> <a class="idref" href="CanonicalForms.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="CanonicalForms.html#ds"><span class="id" title="variable">ds</span></a> <a class="idref" href="Definitions.html#ed2865d5b6635aaa6d875cc0fd7c034b"><span class="id" title="notation">::</span></a> <a class="idref" href="Definitions.html#open_typ_p"><span class="id" title="definition">open_typ_p</span></a> <a class="idref" href="CanonicalForms.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="CanonicalForms.html#S"><span class="id" title="variable">S</span></a> <span class="id" title="notation">∧</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#G1"><span class="id" title="variable">G1</span></a> <a class="idref" href="PreciseTyping.html#218c7b55c498333123efe7fa512ad9ed"><span class="id" title="notation">⊩</span></a> <a class="idref" href="CanonicalForms.html#S"><span class="id" title="variable">S</span></a> <a class="idref" href="PreciseTyping.html#218c7b55c498333123efe7fa512ad9ed"><span class="id" title="notation">⟿</span></a> <a class="idref" href="CanonicalForms.html#W"><span class="id" title="variable">W</span></a> <a class="idref" href="PreciseTyping.html#218c7b55c498333123efe7fa512ad9ed"><span class="id" title="notation">⬳</span></a> <a class="idref" href="CanonicalForms.html#U"><span class="id" title="variable">U</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">∨</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="notation">∃</span> <span class="id" title="var">q</span> <span class="id" title="var">r</span> <span class="id" title="var">r'</span> <span class="id" title="var">G1</span> <span class="id" title="var">G2</span> <span class="id" title="var">pT</span><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#t"><span class="id" title="variable">t</span></a> <span class="id" title="notation">=</span> <a class="idref" href="Definitions.html#defp"><span class="id" title="constructor">defp</span></a> <a class="idref" href="CanonicalForms.html#q"><span class="id" title="variable">q</span></a> <span class="id" title="notation">∧</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">=</span> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="CanonicalForms.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">∧</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">=</span> <a class="idref" href="CanonicalForms.html#G1"><span class="id" title="variable">G1</span></a> <span class="id" title="notation">&amp;</span> <a class="idref" href="CanonicalForms.html#px"><span class="id" title="variable">px</span></a> <span class="id" title="notation">~</span> <a class="idref" href="CanonicalForms.html#pT"><span class="id" title="variable">pT</span></a> <span class="id" title="notation">&amp;</span> <a class="idref" href="CanonicalForms.html#G2"><span class="id" title="variable">G2</span></a> <span class="id" title="notation">∧</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><a class="idref" href="CanonicalForms.html#r"><span class="id" title="variable">r</span></a> <span class="id" title="notation">=</span> <a class="idref" href="CanonicalForms.html#r'"><span class="id" title="variable">r'</span></a> <span class="id" title="notation">∨</span> <a class="idref" href="CanonicalForms.html#G1"><span class="id" title="variable">G1</span></a> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">⊢!!!</span></a> <a class="idref" href="CanonicalForms.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="CanonicalForms.html#r'"><span class="id" title="variable">r'</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">∧</span> <span class="id" title="notation">(</span><a class="idref" href="CanonicalForms.html#r'"><span class="id" title="variable">r'</span></a> <span class="id" title="notation">=</span> <a class="idref" href="CanonicalForms.html#q"><span class="id" title="variable">q</span></a> <span class="id" title="notation">∨</span> <a class="idref" href="CanonicalForms.html#G1"><span class="id" title="variable">G1</span></a> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">⊢!!!</span></a> <a class="idref" href="CanonicalForms.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="CanonicalForms.html#r'"><span class="id" title="variable">r'</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a><span class="id" title="notation">)</span><span class="id" title="notation">)</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hwf</span> <span class="id" title="var">Hwt</span> <span class="id" title="var">Hs</span> <span class="id" title="var">Hp</span> <span class="id" title="var">Heq</span>. <span class="id" title="var">gen</span> <span class="id" title="var">γ</span> <span class="id" title="var">t</span> <span class="id" title="var">px</span> <span class="id" title="var">pbs</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">Hp</span>; <span class="id" title="var">introv</span> <span class="id" title="var">Hwt</span>; <span class="id" title="var">introv</span> <span class="id" title="var">Hs</span>; <span class="id" title="var">introv</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> (<a class="idref" href="CanonicalForms.html#lookup_step_preservation_prec1"><span class="id" title="lemma">lookup_step_preservation_prec1</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">Hwf</span> <span class="id" title="var">Hwt</span> <span class="id" title="var">Hs</span> <span class="id" title="var">H</span> <span class="id" title="var">Heq</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> [[? [? [[= -&gt;]]]] |<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[[<span class="id" title="var">S</span> [<span class="id" title="var">ds'</span> [<span class="id" title="var">W</span> [<span class="id" title="var">T''</span> [<span class="id" title="var">G1</span> [<span class="id" title="var">G2</span> [<span class="id" title="var">pT</span> [-&gt; [-&gt; [-&gt; [<span class="id" title="var">Hds</span> [<span class="id" title="var">Hrc1</span> <span class="id" title="var">Hrc2</span>]]]]]]]]]]]] |<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[? [? [? [? [? [? [-&gt; [-&gt; [-&gt; [? ?]]]]]]]]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">left</span>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">right</span>. <span class="id" title="tactic">left</span>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="PreciseFlow.html#pf_sngl_U"><span class="id" title="lemma">pf_sngl_U</span></a> <span class="id" title="var">H</span>) <span class="id" title="keyword">as</span> →. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">destruct_all</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">clear</span> <span class="id" title="var">IHHp2</span>. <span class="id" title="var">simpl_dot</span>. <span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHHp1</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hwf</span> <span class="id" title="var">_</span> <span class="id" title="var">Hwt</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">gen</span> <span class="id" title="var">q</span> <span class="id" title="var">U</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">Hs</span>; <span class="id" title="var">simpl_dot</span>; <span class="id" title="var">introv</span> <span class="id" title="var">Hp</span> <span class="id" title="var">IHHp1</span> <span class="id" title="var">Hv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHHp1</span> <span class="id" title="var">_</span> <span class="id" title="var">Hs</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="constructor">eq_refl</span>) <span class="id" title="keyword">as</span> [[? [? [? [[=] ?]]]] |<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[[? [? [? [? [? [? [? [[=] ?]]]]]]]] |<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="var">q'</span> [<span class="id" title="var">r</span> [<span class="id" title="var">r'</span> [<span class="id" title="var">G1</span> [<span class="id" title="var">G2</span> [<span class="id" title="var">pT</span> [[= &lt;-] [[= -&gt;] [-&gt; [<span class="id" title="var">Hrc1</span> <span class="id" title="var">Hrc2</span>]]]]]]]]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">right</span>. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">∃</span> (<span class="id" title="var">q</span> <a class="idref" href="Definitions.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> <span class="id" title="var">a</span>) (<span class="id" title="var">r</span> <a class="idref" href="Definitions.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> <span class="id" title="var">a</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="RecordAndInertTypes.html#inert_prefix"><span class="id" title="lemma">inert_prefix</span></a> (<a class="idref" href="RecordAndInertTypes.html#inert_prefix"><span class="id" title="lemma">inert_prefix</span></a> <span class="id" title="var">Hi</span>)) <span class="id" title="keyword">as</span> <span class="id" title="var">Hi'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="PreciseTyping.html#wf_prefix"><span class="id" title="lemma">wf_prefix</span></a> (<a class="idref" href="PreciseTyping.html#wf_prefix"><span class="id" title="lemma">wf_prefix</span></a> <span class="id" title="var">Hwf</span>)) <span class="id" title="keyword">as</span> <span class="id" title="var">Hwf'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hrc1</span> <span class="id" title="keyword">as</span> [-&gt; | <span class="id" title="var">Hr1</span>]; <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hrc2</span> <span class="id" title="keyword">as</span> [-&gt; | <span class="id" title="var">Hr2</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">apply</span>× <a class="idref" href="PreciseTyping.html#pt3_field_elim_p"><span class="id" title="lemma">pt3_field_elim_p</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>× <a class="idref" href="PreciseTyping.html#pt3_trans2"><span class="id" title="lemma">pt3_trans2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="PreciseTyping.html#sngl_typed3"><span class="id" title="lemma">sngl_typed3</span></a> <span class="id" title="var">Hi'</span> <span class="id" title="var">Hwf'</span> <span class="id" title="var">Hr2</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">_</span> [<span class="id" title="var">T</span> <span class="id" title="var">Ht</span>]%<a class="idref" href="PreciseTyping.html#pt2_exists"><span class="id" title="lemma">pt2_exists</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="lemma">concat_assoc</span> <span class="id" title="tactic">in</span> ×. <span class="id" title="tactic">apply</span>× <a class="idref" href="PreciseTyping.html#pt2_fld_strengthen"><span class="id" title="lemma">pt2_fld_strengthen</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">eexists</span>. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">apply</span>× <a class="idref" href="PreciseTyping.html#pt3_field_elim_p"><span class="id" title="lemma">pt3_field_elim_p</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="lemma">concat_assoc</span> <span class="id" title="tactic">in</span> ×. <span class="id" title="tactic">apply</span>× <a class="idref" href="PreciseTyping.html#pt3_fld_strengthen"><span class="id" title="lemma">pt3_fld_strengthen</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">left</span>×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="PreciseTyping.html#field_elim_q3"><span class="id" title="lemma">field_elim_q3</span></a>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="lemma">concat_assoc</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="PreciseTyping.html#pt3_weaken"><span class="id" title="lemma">pt3_weaken</span></a> (<a class="idref" href="PreciseFlow.html#inert_ok"><span class="id" title="lemma">inert_ok</span></a> <span class="id" title="var">Hi</span>) <span class="id" title="var">Hr1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hf</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hi</span> <span class="id" title="var">H</span> (<a class="idref" href="PreciseTyping.html#pt3"><span class="id" title="constructor">pt3</span></a> <span class="id" title="var">Hv</span>)) <span class="id" title="keyword">as</span> [<span class="id" title="var">S</span> <span class="id" title="var">Ht</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">eexists</span>. <span class="id" title="tactic">rewrite</span>× <span class="id" title="lemma">concat_assoc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">right</span>. <span class="id" title="tactic">apply</span>× <a class="idref" href="PreciseTyping.html#pt3_field_elim_p"><span class="id" title="lemma">pt3_field_elim_p</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>× <a class="idref" href="PreciseTyping.html#pt3_fld_strengthen"><span class="id" title="lemma">pt3_fld_strengthen</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">right</span>. <span class="id" title="tactic">apply</span>× <a class="idref" href="PreciseTyping.html#pt3_field_elim_p"><span class="id" title="lemma">pt3_field_elim_p</span></a>. <span class="id" title="tactic">apply</span>× <a class="idref" href="PreciseTyping.html#pt3_fld_strengthen"><span class="id" title="lemma">pt3_fld_strengthen</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="PreciseTyping.html#pt3_trans2"><span class="id" title="lemma">pt3_trans2</span></a>. <span class="id" title="tactic">eapply</span> <a class="idref" href="PreciseTyping.html#pt3_weaken"><span class="id" title="lemma">pt3_weaken</span></a>. <span class="id" title="tactic">apply</span>× <a class="idref" href="PreciseFlow.html#inert_ok"><span class="id" title="lemma">inert_ok</span></a>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Hr2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="PreciseTyping.html#pt3_weaken"><span class="id" title="lemma">pt3_weaken</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hr1</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Ht</span>. <span class="id" title="tactic">apply</span>× <a class="idref" href="PreciseFlow.html#inert_ok"><span class="id" title="lemma">inert_ok</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHHp1</span> <span class="id" title="var">_</span> <span class="id" title="var">Hs</span>) <span class="id" title="keyword">as</span> [[? [? [? [[= -&gt;] ?]]]] |<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[[? [? [? [? [? [? [? [? [[=]%<a class="idref" href="PreciseFlow.html#pf_sngl_T"><span class="id" title="lemma">pf_sngl_T</span></a> [[=] [<span class="id" title="var">HH</span> [<span class="id" title="var">HHH</span> ?]]]]]]]]]]]] |<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[? [? [? [? [? [? [[=] ?]]]]]]]]]; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
If <span class="inlinecode"><span class="id" title="var">p</span></span> looks up to <span class="inlinecode"><span class="id" title="var">t</span></span> in a value environment and <span class="inlinecode"><span class="id" title="var">p</span></span>'s III-level precise type
    is an <i>inert</i> type <span class="inlinecode"><span class="id" title="var">T</span></span>, then either <span class="inlinecode"><span class="id" title="var">t</span></span> is
<ul class="doclist">
<li> a function that has type <span class="inlinecode"><span class="id" title="var">T</span></span>,

</li>
<li> an object <span class="inlinecode"><span class="id" title="var">ν</span>(<span class="id" title="var">S</span>)<span class="id" title="var">ds</span></span> that has type <span class="inlinecode"><span class="id" title="var">μ</span>(<span class="id" title="var">S</span>)</span>, and <span class="inlinecode"><span class="id" title="var">T</span></span> and <span class="inlinecode"><span class="id" title="var">μ</span>(<span class="id" title="var">s</span>)</span> are equivalent, or

</li>
<li> a well-typed path <span class="inlinecode"><span class="id" title="var">q</span></span>, and <span class="inlinecode"><span class="id" title="var">q</span></span>'s type is <span class="inlinecode"><span class="id" title="var">T</span></span> 
</li>
</ul>

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="lookup_step_preservation_inert_prec3"><span class="id" title="lemma">lookup_step_preservation_inert_prec3</span></a>: <span class="id" title="keyword">∀</span> <span class="id" title="var">G</span> <span class="id" title="var">γ</span> <span class="id" title="var">p</span> <span class="id" title="var">T</span> <span class="id" title="var">t</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PreciseTyping.html#wf"><span class="id" title="inductive">wf</span></a> <a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#b0e5ed29efd576246de3282fa163293b"><span class="id" title="variable">γ</span></a> <a class="idref" href="Definitions.html#3d0e0e057bcbfdd590f754a27815747e"><span class="id" title="notation">⫶</span></a> <a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#b0e5ed29efd576246de3282fa163293b"><span class="id" title="variable">γ</span></a> <a class="idref" href="Lookup.html#8cc79fc5d6dbc3a1ff519f58bcbc908b"><span class="id" title="notation">⟦</span></a> <a class="idref" href="CanonicalForms.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="Lookup.html#8cc79fc5d6dbc3a1ff519f58bcbc908b"><span class="id" title="notation">⤳</span></a> <a class="idref" href="CanonicalForms.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="Lookup.html#8cc79fc5d6dbc3a1ff519f58bcbc908b"><span class="id" title="notation">⟧</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">⊢!!!</span></a> <a class="idref" href="CanonicalForms.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">:</span></a> <a class="idref" href="CanonicalForms.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert_typ"><span class="id" title="inductive">inert_typ</span></a> <a class="idref" href="CanonicalForms.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="notation">∃</span> <span class="id" title="var">S</span> <span class="id" title="var">U</span><span class="id" title="notation">,</span> <a class="idref" href="CanonicalForms.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">=</span> <a class="idref" href="Definitions.html#5602fefe5ae9ac7607d0a75368b09df0"><span class="id" title="notation">∀(</span></a><a class="idref" href="CanonicalForms.html#S"><span class="id" title="variable">S</span></a><a class="idref" href="Definitions.html#5602fefe5ae9ac7607d0a75368b09df0"><span class="id" title="notation">)</span></a> <a class="idref" href="CanonicalForms.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">∧</span> <a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Definitions.html#8f800003c5c18bd4e5a8078841b62512"><span class="id" title="notation">⊢</span></a> <a class="idref" href="CanonicalForms.html#deftrm"><span class="id" title="definition">deftrm</span></a> <a class="idref" href="CanonicalForms.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="Definitions.html#8f800003c5c18bd4e5a8078841b62512"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#5602fefe5ae9ac7607d0a75368b09df0"><span class="id" title="notation">∀(</span></a><a class="idref" href="CanonicalForms.html#S"><span class="id" title="variable">S</span></a><a class="idref" href="Definitions.html#5602fefe5ae9ac7607d0a75368b09df0"><span class="id" title="notation">)</span></a> <a class="idref" href="CanonicalForms.html#U"><span class="id" title="variable">U</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">∨</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="notation">∃</span> <span class="id" title="var">U</span><span class="id" title="notation">,</span> <a class="idref" href="CanonicalForms.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">=</span> <a class="idref" href="Definitions.html#57e8a3f1aebb1c6069654ec2f0cd7a19"><span class="id" title="notation">μ</span></a> <a class="idref" href="CanonicalForms.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">∧</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="notation">(</span><span class="id" title="notation">∃</span> <span class="id" title="var">S</span> <span class="id" title="var">ds</span> <span class="id" title="var">px</span> <span class="id" title="var">pbs</span> <span class="id" title="var">W</span><span class="id" title="notation">,</span> <a class="idref" href="CanonicalForms.html#t"><span class="id" title="variable">t</span></a> <span class="id" title="notation">=</span> <a class="idref" href="Definitions.html#defv"><span class="id" title="constructor">defv</span></a> (<a class="idref" href="Definitions.html#810ccb94c27e2d024c0cf678f1f52104"><span class="id" title="notation">ν</span></a><a class="idref" href="Definitions.html#810ccb94c27e2d024c0cf678f1f52104"><span class="id" title="notation">(</span></a><a class="idref" href="CanonicalForms.html#S"><span class="id" title="variable">S</span></a><a class="idref" href="Definitions.html#810ccb94c27e2d024c0cf678f1f52104"><span class="id" title="notation">)</span></a> <a class="idref" href="CanonicalForms.html#ds"><span class="id" title="variable">ds</span></a>) <span class="id" title="notation">∧</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#p"><span class="id" title="variable">p</span></a> <span class="id" title="notation">=</span> <a class="idref" href="Definitions.html#p_sel"><span class="id" title="constructor">p_sel</span></a> (<a class="idref" href="Definitions.html#avar_f"><span class="id" title="constructor">avar_f</span></a> <a class="idref" href="CanonicalForms.html#px"><span class="id" title="variable">px</span></a>) <a class="idref" href="CanonicalForms.html#pbs"><span class="id" title="variable">pbs</span></a> <span class="id" title="notation">∧</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#px"><span class="id" title="variable">px</span></a><a class="idref" href="Definitions.html#ed2865d5b6635aaa6d875cc0fd7c034b"><span class="id" title="notation">;</span></a> <a class="idref" href="CanonicalForms.html#pbs"><span class="id" title="variable">pbs</span></a><a class="idref" href="Definitions.html#ed2865d5b6635aaa6d875cc0fd7c034b"><span class="id" title="notation">;</span></a> <a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Definitions.html#ed2865d5b6635aaa6d875cc0fd7c034b"><span class="id" title="notation">⊢</span></a> <a class="idref" href="Definitions.html#open_defs_p"><span class="id" title="definition">open_defs_p</span></a> <a class="idref" href="CanonicalForms.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="CanonicalForms.html#ds"><span class="id" title="variable">ds</span></a> <a class="idref" href="Definitions.html#ed2865d5b6635aaa6d875cc0fd7c034b"><span class="id" title="notation">::</span></a> <a class="idref" href="Definitions.html#open_typ_p"><span class="id" title="definition">open_typ_p</span></a> <a class="idref" href="CanonicalForms.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="CanonicalForms.html#S"><span class="id" title="variable">S</span></a> <span class="id" title="notation">∧</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#218c7b55c498333123efe7fa512ad9ed"><span class="id" title="notation">⊩</span></a> <a class="idref" href="CanonicalForms.html#S"><span class="id" title="variable">S</span></a> <a class="idref" href="PreciseTyping.html#218c7b55c498333123efe7fa512ad9ed"><span class="id" title="notation">⟿</span></a> <a class="idref" href="CanonicalForms.html#W"><span class="id" title="variable">W</span></a> <a class="idref" href="PreciseTyping.html#218c7b55c498333123efe7fa512ad9ed"><span class="id" title="notation">⬳</span></a> <a class="idref" href="CanonicalForms.html#U"><span class="id" title="variable">U</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">∨</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="notation">∃</span> <span class="id" title="var">q</span><span class="id" title="notation">,</span> <a class="idref" href="CanonicalForms.html#t"><span class="id" title="variable">t</span></a> <span class="id" title="notation">=</span> <a class="idref" href="Definitions.html#defp"><span class="id" title="constructor">defp</span></a> <a class="idref" href="CanonicalForms.html#q"><span class="id" title="variable">q</span></a> <span class="id" title="notation">∧</span> <a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">⊢!!!</span></a> <a class="idref" href="CanonicalForms.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">:</span></a> <a class="idref" href="CanonicalForms.html#T"><span class="id" title="variable">T</span></a><span class="id" title="notation">)</span><span class="id" title="notation">)</span><span class="id" title="notation">)</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hwf</span> <span class="id" title="var">Hwt</span> <span class="id" title="var">Hs</span> <span class="id" title="var">Hp</span>. <span class="id" title="var">gen</span> <span class="id" title="var">t</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="Binding.html#typed_paths_named"><span class="id" title="lemma">typed_paths_named</span></a> (<a class="idref" href="PreciseTyping.html#precise_to_general3"><span class="id" title="lemma">precise_to_general3</span></a> <span class="id" title="var">Hp</span>)) <span class="id" title="keyword">as</span> [<span class="id" title="var">px</span> [<span class="id" title="var">pbs</span> <span class="id" title="var">Heq</span>]].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">Hp</span>; <span class="id" title="var">introv</span> <span class="id" title="var">Hs</span> <span class="id" title="var">Hit</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="CanonicalForms.html#lookup_step_preservation_prec2"><span class="id" title="lemma">lookup_step_preservation_prec2</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">Hwf</span> <span class="id" title="var">Hwt</span> <span class="id" title="var">Hs</span> <span class="id" title="var">H</span> <span class="id" title="var">Heq</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> [[<span class="id" title="var">S'</span> [<span class="id" title="var">U</span> [<span class="id" title="var">u</span> [[= -&gt;] [<span class="id" title="var">Hv</span> <span class="id" title="var">Hp'</span>]]]]] |<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[[<span class="id" title="var">S'</span> [<span class="id" title="var">ds</span> [<span class="id" title="var">W</span> [<span class="id" title="var">U</span> [<span class="id" title="var">G1</span> [<span class="id" title="var">G2</span> [<span class="id" title="var">pT</span> [[= -&gt;] [<span class="id" title="var">Hp'</span> [-&gt; [<span class="id" title="var">Hds</span> [<span class="id" title="var">Hrc1</span> <span class="id" title="var">Hrc2</span>]]]]]]]]]]]] |<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="var">q'</span> [<span class="id" title="var">r</span> [<span class="id" title="var">r'</span> [<span class="id" title="var">G1</span> [<span class="id" title="var">G2</span> [<span class="id" title="var">pT</span> [[= -&gt;] [[= -&gt;] [<span class="id" title="var">Heq'</span> [<span class="id" title="var">Hrc1</span> <span class="id" title="var">Hrc2</span>]]]]]]]]]]]]; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">left</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> ×. <span class="id" title="var">inversions</span> <span class="id" title="var">Hit</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">apply</span> (<a class="idref" href="PreciseFlow.html#pf_forall_T"><span class="id" title="lemma">pf_forall_T</span></a> <span class="id" title="var">Hi</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hp'</span> <span class="id" title="keyword">as</span> →. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">apply</span> (<a class="idref" href="PreciseFlow.html#pf_bnd_T"><span class="id" title="lemma">pf_bnd_T</span></a> <span class="id" title="var">Hi</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hp'</span> <span class="id" title="keyword">as</span> →. <span class="id" title="var">proof_recipe</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hv</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">right</span>. <span class="id" title="var">inversions</span> <span class="id" title="var">Hit</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">apply</span> (<a class="idref" href="PreciseFlow.html#pf_forall_T"><span class="id" title="lemma">pf_forall_T</span></a> <span class="id" title="var">Hi</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hp'</span> <span class="id" title="keyword">as</span> [=].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">apply</span> (<a class="idref" href="PreciseFlow.html#pf_bnd_T"><span class="id" title="lemma">pf_bnd_T</span></a> <span class="id" title="var">Hi</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hp'</span> <span class="id" title="keyword">as</span> [= -&gt;]. <span class="id" title="tactic">eexists</span>. <span class="id" title="tactic">split</span>×. <span class="id" title="tactic">left</span>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">eauto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">apply</span>× <a class="idref" href="PreciseTyping.html#repl_composition_weaken"><span class="id" title="lemma">repl_composition_weaken</span></a>; <span class="id" title="tactic">apply</span>× <a class="idref" href="PreciseFlow.html#inert_ok"><span class="id" title="lemma">inert_ok</span></a>; <span class="id" title="tactic">apply</span>× <a class="idref" href="RecordAndInertTypes.html#inert_prefix"><span class="id" title="lemma">inert_prefix</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hit</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="PreciseFlow.html#pf_sngl_T"><span class="id" title="lemma">pf_sngl_T</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hp'</span> <span class="id" title="keyword">as</span> -&gt;; <span class="id" title="tactic">auto</span>. <span class="id" title="var">proof_recipe</span>. <span class="id" title="var">inversions</span> <span class="id" title="var">Hv</span>. <span class="id" title="var">inversions</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> (<a class="idref" href="PreciseFlow.html#pf_sngl_T"><span class="id" title="lemma">pf_sngl_T</span></a> <span class="id" title="var">Hi</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hp'</span> <span class="id" title="keyword">as</span> [=].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">clear</span> <span class="id" title="var">IHHp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="notation">∃</span> <span class="id" title="var">V</span><span class="id" title="notation">,</span> <span class="id" title="var">G</span> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">⊢!!!</span></a> <span class="id" title="var">q'</span> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">:</span></a> <a class="idref" href="CanonicalForms.html#V"><span class="id" title="variable">V</span></a>) <span class="id" title="keyword">as</span> [<span class="id" title="var">V</span> <span class="id" title="var">Hq'</span>]. {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hrc1</span> <span class="id" title="keyword">as</span> [-&gt; | <span class="id" title="var">Hr</span>]; <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hrc2</span> <span class="id" title="keyword">as</span> [-&gt; | <span class="id" title="var">Hr'</span>]; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="lemma">concat_assoc</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">eexists</span>. <span class="id" title="tactic">apply</span>× <a class="idref" href="PreciseTyping.html#pt3_weaken"><span class="id" title="lemma">pt3_weaken</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="PreciseTyping.html#sngl_typed3"><span class="id" title="lemma">sngl_typed3</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hr</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">S</span> <span class="id" title="var">Ht</span>]. <span class="id" title="tactic">eexists</span>. <span class="id" title="tactic">apply</span>× <a class="idref" href="PreciseTyping.html#pt3_weaken"><span class="id" title="lemma">pt3_weaken</span></a>. <span class="id" title="tactic">apply</span>× <a class="idref" href="RecordAndInertTypes.html#inert_prefix"><span class="id" title="lemma">inert_prefix</span></a>. <span class="id" title="tactic">apply</span>× <a class="idref" href="PreciseTyping.html#wf_prefix"><span class="id" title="lemma">wf_prefix</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">eexists</span>. <span class="id" title="tactic">apply</span>× <a class="idref" href="PreciseTyping.html#pt3_weaken"><span class="id" title="lemma">pt3_weaken</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lets</span> <span class="id" title="var">Hok</span>: (<a class="idref" href="PreciseFlow.html#inert_ok"><span class="id" title="lemma">inert_ok</span></a> <span class="id" title="var">Hi</span>). <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heq'</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hok</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hrc1</span> <span class="id" title="keyword">as</span> [-&gt; | <span class="id" title="var">Hr</span>]; <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hrc2</span> <span class="id" title="keyword">as</span> [-&gt; | <span class="id" title="var">Hr'</span>]; <span class="id" title="var">inversions</span> <span class="id" title="var">Hit</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">left</span>; <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">apply</span>× <a class="idref" href="PreciseTyping.html#precise_to_general3"><span class="id" title="lemma">precise_to_general3</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">right</span>. <span class="id" title="tactic">eexists</span>. <span class="id" title="tactic">split</span>×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">left</span>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">eexists</span>. <span class="id" title="tactic">apply</span>× <a class="idref" href="PreciseTyping.html#precise_to_general3"><span class="id" title="lemma">precise_to_general3</span></a>. <span class="id" title="tactic">apply</span>× <a class="idref" href="PreciseTyping.html#pt3_sngl_trans3"><span class="id" title="lemma">pt3_sngl_trans3</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">apply</span>× <a class="idref" href="PreciseTyping.html#pt3_weaken"><span class="id" title="lemma">pt3_weaken</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">right</span>. <span class="id" title="tactic">eexists</span>. <span class="id" title="tactic">split</span>×. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">eexists</span>. <span class="id" title="tactic">split</span>×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>× <a class="idref" href="PreciseTyping.html#pt3_sngl_trans3"><span class="id" title="lemma">pt3_sngl_trans3</span></a>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">apply</span>× <a class="idref" href="PreciseTyping.html#pt3_weaken"><span class="id" title="lemma">pt3_weaken</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">left</span>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">eexists</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">eapply</span> <a class="idref" href="PreciseTyping.html#pt3_weaken"><span class="id" title="lemma">pt3_weaken</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="PreciseTyping.html#pt3_inert_sngl_invert"><span class="id" title="lemma">pt3_inert_sngl_invert</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">Hp</span> <span class="id" title="var">Hr</span> (<a class="idref" href="Definitions.html#inert_typ_all"><span class="id" title="constructor">inert_typ_all</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>)) <span class="id" title="keyword">as</span> <span class="id" title="var">Hr'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>× <a class="idref" href="PreciseTyping.html#precise_to_general3"><span class="id" title="lemma">precise_to_general3</span></a>. <span class="id" title="var">all</span>: <span class="id" title="tactic">eauto</span>; <span class="id" title="tactic">apply</span>× <a class="idref" href="PreciseFlow.html#inert_ok"><span class="id" title="lemma">inert_ok</span></a>. <span class="id" title="tactic">apply</span>× <a class="idref" href="RecordAndInertTypes.html#inert_prefix"><span class="id" title="lemma">inert_prefix</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">right</span>. <span class="id" title="tactic">eexists</span>. <span class="id" title="tactic">split</span>×. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">eexists</span>. <span class="id" title="tactic">split</span>×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">eapply</span> <a class="idref" href="PreciseTyping.html#pt3_weaken"><span class="id" title="lemma">pt3_weaken</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>× (<a class="idref" href="PreciseTyping.html#pt3_inert_sngl_invert"><span class="id" title="lemma">pt3_inert_sngl_invert</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">Hp</span> <span class="id" title="var">Hr</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">eauto</span>; <span class="id" title="tactic">apply</span>× <a class="idref" href="PreciseFlow.html#inert_ok"><span class="id" title="lemma">inert_ok</span></a>. <span class="id" title="tactic">apply</span>× <a class="idref" href="RecordAndInertTypes.html#inert_prefix"><span class="id" title="lemma">inert_prefix</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">left</span>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">eexists</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="PreciseTyping.html#precise_to_general3"><span class="id" title="lemma">precise_to_general3</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="PreciseTyping.html#pt3_sngl_trans3"><span class="id" title="lemma">pt3_sngl_trans3</span></a>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">apply</span>× <a class="idref" href="PreciseTyping.html#pt3_weaken"><span class="id" title="lemma">pt3_weaken</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>× <a class="idref" href="PreciseTyping.html#pt3_inert_sngl_invert"><span class="id" title="lemma">pt3_inert_sngl_invert</span></a>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">apply</span>× <a class="idref" href="PreciseTyping.html#pt3_weaken"><span class="id" title="lemma">pt3_weaken</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">right</span>. <span class="id" title="tactic">eexists</span>. <span class="id" title="tactic">split</span>×. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">eexists</span>. <span class="id" title="tactic">split</span>×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="PreciseTyping.html#pt3_sngl_trans3"><span class="id" title="lemma">pt3_sngl_trans3</span></a>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">apply</span>× <a class="idref" href="PreciseTyping.html#pt3_weaken"><span class="id" title="lemma">pt3_weaken</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>× <a class="idref" href="PreciseTyping.html#pt3_inert_sngl_invert"><span class="id" title="lemma">pt3_inert_sngl_invert</span></a>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">apply</span>× <a class="idref" href="PreciseTyping.html#pt3_weaken"><span class="id" title="lemma">pt3_weaken</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
If <span class="inlinecode"><span class="id" title="var">p</span></span> looks up to <span class="inlinecode"><span class="id" title="var">t</span></span> in a value environment and <span class="inlinecode"><span class="id" title="var">p</span></span>'s III-level precise type
    is a function type, then <span class="inlinecode"><span class="id" title="var">t</span></span> has the same function type 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="lookup_step_preservation_prec3_fun"><span class="id" title="lemma">lookup_step_preservation_prec3_fun</span></a> <span class="id" title="var">G</span> <span class="id" title="var">γ</span> <span class="id" title="var">p</span> <span class="id" title="var">T</span> <span class="id" title="var">S</span> <span class="id" title="var">t</span> :<br/>
&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<a class="idref" href="PreciseTyping.html#wf"><span class="id" title="inductive">wf</span></a> <a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#b0e5ed29efd576246de3282fa163293b"><span class="id" title="variable">γ</span></a> <a class="idref" href="Definitions.html#3d0e0e057bcbfdd590f754a27815747e"><span class="id" title="notation">⫶</span></a> <a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#b0e5ed29efd576246de3282fa163293b"><span class="id" title="variable">γ</span></a> <a class="idref" href="Lookup.html#8cc79fc5d6dbc3a1ff519f58bcbc908b"><span class="id" title="notation">⟦</span></a> <a class="idref" href="CanonicalForms.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="Lookup.html#8cc79fc5d6dbc3a1ff519f58bcbc908b"><span class="id" title="notation">⤳</span></a> <a class="idref" href="CanonicalForms.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="Lookup.html#8cc79fc5d6dbc3a1ff519f58bcbc908b"><span class="id" title="notation">⟧</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">⊢!!!</span></a> <a class="idref" href="CanonicalForms.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#5602fefe5ae9ac7607d0a75368b09df0"><span class="id" title="notation">∀(</span></a><a class="idref" href="CanonicalForms.html#T"><span class="id" title="variable">T</span></a><a class="idref" href="Definitions.html#5602fefe5ae9ac7607d0a75368b09df0"><span class="id" title="notation">)</span></a> <a class="idref" href="CanonicalForms.html#S"><span class="id" title="variable">S</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Definitions.html#8f800003c5c18bd4e5a8078841b62512"><span class="id" title="notation">⊢</span></a> <a class="idref" href="CanonicalForms.html#deftrm"><span class="id" title="definition">deftrm</span></a> <a class="idref" href="CanonicalForms.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="Definitions.html#8f800003c5c18bd4e5a8078841b62512"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#5602fefe5ae9ac7607d0a75368b09df0"><span class="id" title="notation">∀(</span></a><a class="idref" href="CanonicalForms.html#T"><span class="id" title="variable">T</span></a><a class="idref" href="Definitions.html#5602fefe5ae9ac7607d0a75368b09df0"><span class="id" title="notation">)</span></a> <a class="idref" href="CanonicalForms.html#S"><span class="id" title="variable">S</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hwf</span> <span class="id" title="var">Hwt</span> <span class="id" title="var">Hs</span> <span class="id" title="var">Hp</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="CanonicalForms.html#lookup_step_preservation_inert_prec3"><span class="id" title="lemma">lookup_step_preservation_inert_prec3</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">Hwf</span> <span class="id" title="var">Hwt</span> <span class="id" title="var">Hs</span> <span class="id" title="var">Hp</span>) <span class="id" title="keyword">as</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[[? [? [-&gt; <span class="id" title="var">Ht</span>]]] | [? [[=] ?]]]; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
The following two lemmas are needed only for path safety (not for term safety) 
<div class="paragraph"> </div>

 If a well-typed path <span class="inlinecode"><span class="id" title="var">p</span></span> looks up to a path <span class="inlinecode"><span class="id" title="var">q</span></span> then <span class="inlinecode"><span class="id" title="var">q</span></span> is also well-typed. 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="lookup_step_pres"><span class="id" title="lemma">lookup_step_pres</span></a> <span class="id" title="var">G</span> <span class="id" title="var">p</span> <span class="id" title="var">T</span> <span class="id" title="var">q</span> <span class="id" title="var">γ</span> :<br/>
&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<a class="idref" href="PreciseTyping.html#wf"><span class="id" title="inductive">wf</span></a> <a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#b0e5ed29efd576246de3282fa163293b"><span class="id" title="variable">γ</span></a> <a class="idref" href="Definitions.html#3d0e0e057bcbfdd590f754a27815747e"><span class="id" title="notation">⫶</span></a> <a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">⊢!!!</span></a> <a class="idref" href="CanonicalForms.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">:</span></a> <a class="idref" href="CanonicalForms.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#b0e5ed29efd576246de3282fa163293b"><span class="id" title="variable">γ</span></a> <a class="idref" href="Lookup.html#8cc79fc5d6dbc3a1ff519f58bcbc908b"><span class="id" title="notation">⟦</span></a> <a class="idref" href="CanonicalForms.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="Lookup.html#8cc79fc5d6dbc3a1ff519f58bcbc908b"><span class="id" title="notation">⤳</span></a> <a class="idref" href="Definitions.html#defp"><span class="id" title="constructor">defp</span></a> <a class="idref" href="CanonicalForms.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="Lookup.html#8cc79fc5d6dbc3a1ff519f58bcbc908b"><span class="id" title="notation">⟧</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<span class="id" title="notation">∃</span> <span class="id" title="var">U</span><span class="id" title="notation">,</span> <a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">⊢!!!</span></a> <a class="idref" href="CanonicalForms.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">:</span></a> <a class="idref" href="CanonicalForms.html#U"><span class="id" title="variable">U</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hwf</span> <span class="id" title="var">Hwt</span> <span class="id" title="var">Hp</span> <span class="id" title="var">Hl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="PreciseTyping.html#pt2_exists"><span class="id" title="lemma">pt2_exists</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hp</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">U</span> <span class="id" title="var">Hp</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="Lookup.html#named_lookup_step"><span class="id" title="lemma">named_lookup_step</span></a> <span class="id" title="var">Hl</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">x</span> [<span class="id" title="var">bs</span> <span class="id" title="var">Heq</span>]].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="CanonicalForms.html#lookup_step_preservation_prec2"><span class="id" title="lemma">lookup_step_preservation_prec2</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">Hwf</span> <span class="id" title="var">Hwt</span> <span class="id" title="var">Hl</span> <span class="id" title="var">Hp</span> <span class="id" title="var">Heq</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> [[? [? [? [[=] ?]]]] |<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[[? [? [? [? [? [? [? [[=] ?]]]]]]]] |<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="var">r'</span> [<span class="id" title="var">r</span> [<span class="id" title="var">G1</span> [<span class="id" title="var">G2</span> [<span class="id" title="var">pT</span> [<span class="id" title="var">S</span> [[= -&gt;] [-&gt; [-&gt; [[-&gt; | <span class="id" title="var">Hr</span>] [-&gt; | <span class="id" title="var">Hr'</span>]]]]]]]]]]]]].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="PreciseTyping.html#sngl_typed2"><span class="id" title="lemma">sngl_typed2</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hp</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">U</span> <span class="id" title="var">Hr</span>]; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eexists</span>. <span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">apply</span>× <a class="idref" href="PreciseTyping.html#pt3_weaken"><span class="id" title="lemma">pt3_weaken</span></a>. <span class="id" title="tactic">apply</span> <a class="idref" href="PreciseFlow.html#inert_ok"><span class="id" title="lemma">inert_ok</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hi</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>× <span class="id" title="lemma">ok_concat_inv_l</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="PreciseTyping.html#sngl_typed3"><span class="id" title="lemma">sngl_typed3</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hr</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">U</span> <span class="id" title="var">Hr</span>]; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eexists</span>. <span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">apply</span>× <a class="idref" href="PreciseTyping.html#pt3_weaken"><span class="id" title="lemma">pt3_weaken</span></a>. <span class="id" title="tactic">apply</span> <a class="idref" href="PreciseFlow.html#inert_ok"><span class="id" title="lemma">inert_ok</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hi</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>× <span class="id" title="lemma">ok_concat_inv_l</span>. <span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">apply</span>× <a class="idref" href="RecordAndInertTypes.html#inert_prefix"><span class="id" title="lemma">inert_prefix</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eexists</span>. <span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">apply</span>× <a class="idref" href="PreciseTyping.html#pt3_weaken"><span class="id" title="lemma">pt3_weaken</span></a>. <span class="id" title="tactic">apply</span> <a class="idref" href="PreciseFlow.html#inert_ok"><span class="id" title="lemma">inert_ok</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hi</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>× <span class="id" title="lemma">ok_concat_inv_l</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
If a well-typed path <span class="inlinecode"><span class="id" title="var">p</span></span> looks up to a path <span class="inlinecode"><span class="id" title="var">q</span></span> in a finite number
    of steps then <span class="inlinecode"><span class="id" title="var">q</span></span> is also well-typed.
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="lookup_pres"><span class="id" title="lemma">lookup_pres</span></a> <span class="id" title="var">G</span> <span class="id" title="var">p</span> <span class="id" title="var">T</span> <span class="id" title="var">q</span> <span class="id" title="var">γ</span> :<br/>
&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<a class="idref" href="PreciseTyping.html#wf"><span class="id" title="inductive">wf</span></a> <a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#b0e5ed29efd576246de3282fa163293b"><span class="id" title="variable">γ</span></a> <a class="idref" href="Definitions.html#3d0e0e057bcbfdd590f754a27815747e"><span class="id" title="notation">⫶</span></a> <a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">⊢!!!</span></a> <a class="idref" href="CanonicalForms.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">:</span></a> <a class="idref" href="CanonicalForms.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#b0e5ed29efd576246de3282fa163293b"><span class="id" title="variable">γ</span></a> <a class="idref" href="Lookup.html#ec3bbb547a98649fb30ac24026f522c9"><span class="id" title="notation">⟦</span></a> <a class="idref" href="Definitions.html#defp"><span class="id" title="constructor">defp</span></a> <a class="idref" href="CanonicalForms.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="Lookup.html#ec3bbb547a98649fb30ac24026f522c9"><span class="id" title="notation">⤳*</span></a> <a class="idref" href="Definitions.html#defp"><span class="id" title="constructor">defp</span></a> <a class="idref" href="CanonicalForms.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="Lookup.html#ec3bbb547a98649fb30ac24026f522c9"><span class="id" title="notation">⟧</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<span class="id" title="notation">∃</span> <span class="id" title="var">U</span><span class="id" title="notation">,</span> <a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">⊢!!!</span></a> <a class="idref" href="CanonicalForms.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">:</span></a> <a class="idref" href="CanonicalForms.html#U"><span class="id" title="variable">U</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hwf</span> <span class="id" title="var">Hwt</span> <span class="id" title="var">Hp</span> <span class="id" title="var">Hl</span>. <span class="id" title="var">gen</span> <span class="id" title="var">T</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">Hl</span>; <span class="id" title="var">introv</span> <span class="id" title="var">Hp</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="CanonicalForms.html#lookup_step_pres"><span class="id" title="lemma">lookup_step_pres</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">Hwf</span> <span class="id" title="var">Hwt</span> <span class="id" title="var">Hp</span> <span class="id" title="var">H</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">U</span> <span class="id" title="var">Hq</span>]. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="Lookup.html#lookup_val_inv"><span class="id" title="lemma">lookup_val_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hl</span> <span class="id" title="keyword">as</span> [=].<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
If a stable term <span class="inlinecode"><span class="id" title="var">t</span></span> has a function type and <span class="inlinecode"><span class="id" title="var">t</span></span> can be looked
    up to <span class="inlinecode"><span class="id" title="var">u</span></span> in a finite number of steps in the value environment,
    then <span class="inlinecode"><span class="id" title="var">u</span></span> has the same function type. 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="lookup_preservation_forall"><span class="id" title="lemma">lookup_preservation_forall</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">G</span> <span class="id" title="var">γ</span> <span class="id" title="var">t</span> <span class="id" title="var">u</span> <span class="id" title="var">T</span> <span class="id" title="var">S</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PreciseTyping.html#wf"><span class="id" title="inductive">wf</span></a> <a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#b0e5ed29efd576246de3282fa163293b"><span class="id" title="variable">γ</span></a> <a class="idref" href="Definitions.html#3d0e0e057bcbfdd590f754a27815747e"><span class="id" title="notation">⫶</span></a> <a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#b0e5ed29efd576246de3282fa163293b"><span class="id" title="variable">γ</span></a> <a class="idref" href="Lookup.html#ec3bbb547a98649fb30ac24026f522c9"><span class="id" title="notation">⟦</span></a> <a class="idref" href="CanonicalForms.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="Lookup.html#ec3bbb547a98649fb30ac24026f522c9"><span class="id" title="notation">⤳*</span></a> <a class="idref" href="CanonicalForms.html#u"><span class="id" title="variable">u</span></a> <a class="idref" href="Lookup.html#ec3bbb547a98649fb30ac24026f522c9"><span class="id" title="notation">⟧</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Definitions.html#8f800003c5c18bd4e5a8078841b62512"><span class="id" title="notation">⊢</span></a> <a class="idref" href="CanonicalForms.html#deftrm"><span class="id" title="definition">deftrm</span></a> <a class="idref" href="CanonicalForms.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="Definitions.html#8f800003c5c18bd4e5a8078841b62512"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#5602fefe5ae9ac7607d0a75368b09df0"><span class="id" title="notation">∀(</span></a><a class="idref" href="CanonicalForms.html#S"><span class="id" title="variable">S</span></a><a class="idref" href="Definitions.html#5602fefe5ae9ac7607d0a75368b09df0"><span class="id" title="notation">)</span></a> <a class="idref" href="CanonicalForms.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Definitions.html#8f800003c5c18bd4e5a8078841b62512"><span class="id" title="notation">⊢</span></a> <a class="idref" href="CanonicalForms.html#deftrm"><span class="id" title="definition">deftrm</span></a> <a class="idref" href="CanonicalForms.html#u"><span class="id" title="variable">u</span></a><a class="idref" href="Definitions.html#8f800003c5c18bd4e5a8078841b62512"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#5602fefe5ae9ac7607d0a75368b09df0"><span class="id" title="notation">∀(</span></a><a class="idref" href="CanonicalForms.html#S"><span class="id" title="variable">S</span></a><a class="idref" href="Definitions.html#5602fefe5ae9ac7607d0a75368b09df0"><span class="id" title="notation">)</span></a> <a class="idref" href="CanonicalForms.html#T"><span class="id" title="variable">T</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hwf</span> <span class="id" title="var">Hwt</span> <span class="id" title="var">Hl</span> <span class="id" title="var">Hp</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">Hl</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="notation">∃</span> <span class="id" title="var">q</span><span class="id" title="notation">,</span> <span class="id" title="var">a</span> <span class="id" title="notation">=</span> <a class="idref" href="Definitions.html#defp"><span class="id" title="constructor">defp</span></a> <a class="idref" href="CanonicalForms.html#q"><span class="id" title="variable">q</span></a>) <span class="id" title="keyword">as</span> [<span class="id" title="var">q</span> -&gt;] <span class="id" title="tactic">by</span> (<span class="id" title="var">inversions</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">eauto</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">proof_recipe</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="CanonicalForms.html#lookup_step_preservation_prec3_fun"><span class="id" title="lemma">lookup_step_preservation_prec3_fun</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">Hwf</span> <span class="id" title="var">Hwt</span> <span class="id" title="var">H</span> <span class="id" title="var">Hpr</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hb</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHHl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Definitions.html#ty_sub"><span class="id" title="constructor">ty_sub</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">T</span>:=<a class="idref" href="Definitions.html#5602fefe5ae9ac7607d0a75368b09df0"><span class="id" title="notation">∀(</span></a><span class="id" title="var">Spr</span><a class="idref" href="Definitions.html#5602fefe5ae9ac7607d0a75368b09df0"><span class="id" title="notation">)</span></a> <span class="id" title="var">Tpr</span>); <span class="id" title="tactic">auto</span>; <span class="id" title="var">fresh_constructor</span>; <span class="id" title="tactic">apply</span>× <a class="idref" href="TightTyping.html#tight_to_general"><span class="id" title="lemma">tight_to_general</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab78"></a><h2 class="section">Looking up well-typed paths</h2>
 If a path has a precise type then it can be looked up in the value environment 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="typ_to_lookup1"><span class="id" title="lemma">typ_to_lookup1</span></a> <span class="id" title="var">G</span> <span class="id" title="var">γ</span> <span class="id" title="var">p</span> <span class="id" title="var">T</span> <span class="id" title="var">U</span> :<br/>
&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<a class="idref" href="PreciseTyping.html#wf"><span class="id" title="inductive">wf</span></a> <a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#b0e5ed29efd576246de3282fa163293b"><span class="id" title="variable">γ</span></a> <a class="idref" href="Definitions.html#3d0e0e057bcbfdd590f754a27815747e"><span class="id" title="notation">⫶</span></a> <a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">⊢!</span></a> <a class="idref" href="CanonicalForms.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">:</span></a> <a class="idref" href="CanonicalForms.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">⪼</span></a> <a class="idref" href="CanonicalForms.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<span class="id" title="notation">∃</span> <span class="id" title="var">t</span><span class="id" title="notation">,</span> <a class="idref" href="CanonicalForms.html#b0e5ed29efd576246de3282fa163293b"><span class="id" title="variable">γ</span></a> <a class="idref" href="Lookup.html#8cc79fc5d6dbc3a1ff519f58bcbc908b"><span class="id" title="notation">⟦</span></a> <a class="idref" href="CanonicalForms.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="Lookup.html#8cc79fc5d6dbc3a1ff519f58bcbc908b"><span class="id" title="notation">⤳</span></a> <a class="idref" href="CanonicalForms.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="Lookup.html#8cc79fc5d6dbc3a1ff519f58bcbc908b"><span class="id" title="notation">⟧</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hwf</span> <span class="id" title="var">Hwt</span> <span class="id" title="var">Hp</span>. <span class="id" title="var">gen</span> <span class="id" title="var">p</span> <span class="id" title="var">T</span> <span class="id" title="var">U</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">Hwt</span>; <span class="id" title="var">introv</span> <span class="id" title="var">Hp</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;induction&nbsp;on&nbsp;⟦~⟧&nbsp;**)</span><br/>
&nbsp;&nbsp;- <span class="id" title="var">false</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">Hp</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">apply</span>× <span class="id" title="lemma">binds_empty_inv</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="Binding.html#typed_paths_named"><span class="id" title="lemma">typed_paths_named</span></a> (<a class="idref" href="PreciseFlow.html#precise_to_general"><span class="id" title="lemma">precise_to_general</span></a> <span class="id" title="var">Hp</span>)) <span class="id" title="keyword">as</span> [<span class="id" title="var">y</span> [<span class="id" title="var">bs</span> -&gt;]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;later&nbsp;when&nbsp;we&nbsp;figure&nbsp;out&nbsp;how&nbsp;to&nbsp;make&nbsp;env&nbsp;closed&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="lemma">classicT</span> (<span class="id" title="var">x</span> <span class="id" title="notation">=</span> <span class="id" title="var">y</span>)) <span class="id" title="keyword">as</span> [-&gt; | <span class="id" title="var">Hn</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">SCase</span> "x = y"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;induction&nbsp;on&nbsp;⟦⊢!⟧&nbsp;**)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">Hp</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">simpl_dot</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">eexists</span>. <span class="id" title="tactic">apply</span>× <a class="idref" href="Lookup.html#lookup_var"><span class="id" title="constructor">lookup_var</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHHp</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H0</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hwf</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hwt</span> <span class="id" title="var">H</span> <span class="id" title="var">H1</span> <span class="id" title="var">IHHwt</span> <span class="id" title="constructor">JMeq_refl</span> <span class="id" title="constructor">eq_refl</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">t</span> <span class="id" title="var">Hs</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="PreciseFlow.html#pf_bnd_T2"><span class="id" title="lemma">pf_bnd_T2</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">Hp</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">V</span> -&gt;].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="CanonicalForms.html#lookup_step_preservation_prec1"><span class="id" title="lemma">lookup_step_preservation_prec1</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">Hwf</span> (<a class="idref" href="Definitions.html#well_typed_push"><span class="id" title="constructor">well_typed_push</span></a> <span class="id" title="var">Hwt</span> <span class="id" title="var">H</span> <span class="id" title="var">H0</span> <span class="id" title="var">H1</span>) <span class="id" title="var">Hs</span> <span class="id" title="var">Hp</span> <span class="id" title="constructor">eq_refl</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> [[<span class="id" title="var">S</span> [<span class="id" title="var">u</span> [-&gt; <span class="id" title="var">Ht</span>]]] |<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[[<span class="id" title="var">S</span> [<span class="id" title="var">ds'</span> [<span class="id" title="var">W</span> [<span class="id" title="var">T''</span> [<span class="id" title="var">G1</span> [<span class="id" title="var">G2</span> [<span class="id" title="var">pT</span> [-&gt; [[= -&gt;] [<span class="id" title="var">Heq</span> [<span class="id" title="var">Hds</span> <span class="id" title="var">Hrc</span>]]]]]]]]]]] |<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[? [? [? [? [? [? [? [[=] [? ?]]]]]]]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="var">proof_recipe</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">assert</span> (<span class="id" title="notation">∃</span> <span class="id" title="var">u</span><span class="id" title="notation">,</span> <a class="idref" href="Definitions.html#defs_has"><span class="id" title="definition">defs_has</span></a> <span class="id" title="var">ds'</span> <a class="idref" href="Definitions.html#5c1231770009cbe12d8b89eaf73bf800"><span class="id" title="notation">{</span></a><span class="id" title="var">a</span> <a class="idref" href="Definitions.html#5c1231770009cbe12d8b89eaf73bf800"><span class="id" title="notation">:=</span></a> <a class="idref" href="CanonicalForms.html#u"><span class="id" title="variable">u</span></a><a class="idref" href="Definitions.html#5c1231770009cbe12d8b89eaf73bf800"><span class="id" title="notation">}</span></a>) <span class="id" title="keyword">as</span> [<span class="id" title="var">u</span> <span class="id" title="var">Hu</span>]. {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="PreciseFlow.html#pf_record_has_U"><span class="id" title="lemma">pf_record_has_U</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hp</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="PreciseTyping.html#repl_comp_trans_open"><span class="id" title="lemma">repl_comp_trans_open</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hrc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="PreciseTyping.html#repl_comp_trans_record_has"><span class="id" title="lemma">repl_comp_trans_record_has</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hrc</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">V</span> [<span class="id" title="var">X</span> [<span class="id" title="var">Hr</span> <span class="id" title="var">_</span>]]]; <span class="id" title="tactic">try</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">Hp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="Binding.html#record_has_ty_defs"><span class="id" title="lemma">record_has_ty_defs</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hds</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">d</span> [<span class="id" title="var">Hdh</span> <span class="id" title="var">Hds</span>]]; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="RecordAndInertTypes.html#defs_invert_trm"><span class="id" title="lemma">defs_invert_trm</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hds</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">t</span> -&gt;]. <span class="id" title="tactic">unfold</span> <a class="idref" href="Definitions.html#defs_has"><span class="id" title="definition">defs_has</span></a> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> ×. <span class="id" title="tactic">apply</span>× <a class="idref" href="RecordAndInertTypes.html#defs_has_open'"><span class="id" title="lemma">defs_has_open'</span></a>. <span class="id" title="tactic">rewrite</span>  <span class="id" title="var">Heq</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hi</span>, <span class="id" title="var">Hwf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">apply</span>× <a class="idref" href="RecordAndInertTypes.html#inert_prefix"><span class="id" title="lemma">inert_prefix</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eexists</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="Binding.html#proj_rewrite"><span class="id" title="lemma">proj_rewrite</span></a>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">SCase</span> "x &lt;&gt; y"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="PreciseFlow.html#pf_strengthen"><span class="id" title="lemma">pf_strengthen</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hp</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHHwt</span> (<a class="idref" href="RecordAndInertTypes.html#inert_prefix"><span class="id" title="lemma">inert_prefix</span></a> <span class="id" title="var">Hi</span>) (<a class="idref" href="PreciseTyping.html#wf_prefix"><span class="id" title="lemma">wf_prefix</span></a> <span class="id" title="var">Hwf</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hp</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">t</span> <span class="id" title="var">Hs</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eexists</span>. <span class="id" title="tactic">apply</span>× <a class="idref" href="Lookup.html#lookup_step_weaken_one"><span class="id" title="lemma">lookup_step_weaken_one</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
If a path has a II-level precise type then it can be looked up in the value environment 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="typ_to_lookup2"><span class="id" title="lemma">typ_to_lookup2</span></a> <span class="id" title="var">G</span> <span class="id" title="var">γ</span> <span class="id" title="var">p</span> <span class="id" title="var">T</span> :<br/>
&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<a class="idref" href="PreciseTyping.html#wf"><span class="id" title="inductive">wf</span></a> <a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#b0e5ed29efd576246de3282fa163293b"><span class="id" title="variable">γ</span></a> <a class="idref" href="Definitions.html#3d0e0e057bcbfdd590f754a27815747e"><span class="id" title="notation">⫶</span></a> <a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">⊢!!</span></a> <a class="idref" href="CanonicalForms.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">:</span></a> <a class="idref" href="CanonicalForms.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<span class="id" title="notation">∃</span> <span class="id" title="var">t</span><span class="id" title="notation">,</span> <a class="idref" href="CanonicalForms.html#b0e5ed29efd576246de3282fa163293b"><span class="id" title="variable">γ</span></a> <a class="idref" href="Lookup.html#8cc79fc5d6dbc3a1ff519f58bcbc908b"><span class="id" title="notation">⟦</span></a> <a class="idref" href="CanonicalForms.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="Lookup.html#8cc79fc5d6dbc3a1ff519f58bcbc908b"><span class="id" title="notation">⤳</span></a> <a class="idref" href="CanonicalForms.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="Lookup.html#8cc79fc5d6dbc3a1ff519f58bcbc908b"><span class="id" title="notation">⟧</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hwf</span> <span class="id" title="var">Hwt</span> <span class="id" title="var">Hp</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">Hp</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span>× <a class="idref" href="CanonicalForms.html#typ_to_lookup1"><span class="id" title="lemma">typ_to_lookup1</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHHp1</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hwf</span> <span class="id" title="var">Hwt</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">u1</span> <span class="id" title="var">Hs1</span>]. <span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHHp2</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hwf</span> <span class="id" title="var">Hwt</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">u2</span> <span class="id" title="var">Hs2</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="Binding.html#typed_paths_named"><span class="id" title="lemma">typed_paths_named</span></a> (<a class="idref" href="PreciseTyping.html#precise_to_general2"><span class="id" title="lemma">precise_to_general2</span></a> <span class="id" title="var">Hp1</span>)) <span class="id" title="keyword">as</span> [<span class="id" title="var">px</span> [<span class="id" title="var">pbs</span> -&gt;]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="CanonicalForms.html#lookup_step_preservation_prec2"><span class="id" title="lemma">lookup_step_preservation_prec2</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">Hwf</span> <span class="id" title="var">Hwt</span> <span class="id" title="var">Hs1</span> <span class="id" title="var">Hp1</span> <span class="id" title="constructor">eq_refl</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> [[<span class="id" title="var">S'</span> [<span class="id" title="var">U'</span> [<span class="id" title="var">u</span> [[= -&gt;] [<span class="id" title="var">Hv</span> <span class="id" title="var">Hp'</span>]]]]] |<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[[<span class="id" title="var">S'</span> [<span class="id" title="var">ds</span> [<span class="id" title="var">W</span> [<span class="id" title="var">U'</span> [<span class="id" title="var">G1</span> [<span class="id" title="var">G2</span> [<span class="id" title="var">pT</span> [-&gt; [<span class="id" title="var">Hp'</span> [<span class="id" title="var">Heq</span> [<span class="id" title="var">Hds</span> [<span class="id" title="var">Hrc1</span> <span class="id" title="var">Hrc2</span>]]]]]]]]]]]] |<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[? [? [? [? [? [? [-&gt; [[= -&gt;] ?]]]]]]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="PreciseFlow.html#pf_sngl_T"><span class="id" title="lemma">pf_sngl_T</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">Hp'</span>) <span class="id" title="keyword">as</span> →. <span class="id" title="var">proof_recipe</span>. <span class="id" title="var">inversions</span> <span class="id" title="var">Hv</span>. <span class="id" title="var">inversions</span> <span class="id" title="var">H</span>. <span class="id" title="var">inversions</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="PreciseFlow.html#pf_sngl_T"><span class="id" title="lemma">pf_sngl_T</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">Hp'</span>) <span class="id" title="keyword">as</span> [=].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
If a path has a III-level precise type then it can be looked up
    in the value environment 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="typ_to_lookup3"><span class="id" title="lemma">typ_to_lookup3</span></a> <span class="id" title="var">G</span> <span class="id" title="var">γ</span> <span class="id" title="var">p</span> <span class="id" title="var">T</span> :<br/>
&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<a class="idref" href="PreciseTyping.html#wf"><span class="id" title="inductive">wf</span></a> <a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#b0e5ed29efd576246de3282fa163293b"><span class="id" title="variable">γ</span></a> <a class="idref" href="Definitions.html#3d0e0e057bcbfdd590f754a27815747e"><span class="id" title="notation">⫶</span></a> <a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">⊢!!!</span></a><a class="idref" href="CanonicalForms.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">:</span></a> <a class="idref" href="CanonicalForms.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<span class="id" title="notation">∃</span> <span class="id" title="var">t</span><span class="id" title="notation">,</span> <a class="idref" href="CanonicalForms.html#b0e5ed29efd576246de3282fa163293b"><span class="id" title="variable">γ</span></a> <a class="idref" href="Lookup.html#8cc79fc5d6dbc3a1ff519f58bcbc908b"><span class="id" title="notation">⟦</span></a> <a class="idref" href="CanonicalForms.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="Lookup.html#8cc79fc5d6dbc3a1ff519f58bcbc908b"><span class="id" title="notation">⤳</span></a> <a class="idref" href="CanonicalForms.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="Lookup.html#8cc79fc5d6dbc3a1ff519f58bcbc908b"><span class="id" title="notation">⟧</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hwf</span> <span class="id" title="var">Hwt</span> <span class="id" title="var">Hp</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">Hp</span>; <span class="id" title="tactic">apply</span>× <a class="idref" href="CanonicalForms.html#typ_to_lookup2"><span class="id" title="lemma">typ_to_lookup2</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
If a path <span class="inlinecode"><span class="id" title="var">p</span></span>'s environment type is a singleton type <span class="inlinecode"><span class="id" title="var">q.type</span></span>
    then <span class="inlinecode"><span class="id" title="var">p</span></span> can be looked up to a path <span class="inlinecode"><span class="id" title="var">r</span></span> in the value environment,
    and either <span class="inlinecode"><span class="id" title="var">q</span>=<span class="id" title="var">r</span></span>, or there exists a path <span class="inlinecode"><span class="id" title="var">r'</span></span> such that
    both <span class="inlinecode"><span class="id" title="var">r'</span></span> is the III-level precise type of both <span class="inlinecode"><span class="id" title="var">q</span></span> and <span class="inlinecode"><span class="id" title="var">r</span></span>.
    In other words, <span class="inlinecode"><span class="id" title="var">q</span></span> and <span class="inlinecode"><span class="id" title="var">r</span></span> are aliases of the same path <span class="inlinecode"><span class="id" title="var">r'</span></span>. 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="sngl_path_lookup"><span class="id" title="lemma">sngl_path_lookup</span></a> <span class="id" title="var">G</span> <span class="id" title="var">γ</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span> <span class="id" title="var">U</span> :<br/>
&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<a class="idref" href="PreciseTyping.html#wf"><span class="id" title="inductive">wf</span></a> <a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#b0e5ed29efd576246de3282fa163293b"><span class="id" title="variable">γ</span></a> <a class="idref" href="Definitions.html#3d0e0e057bcbfdd590f754a27815747e"><span class="id" title="notation">⫶</span></a> <a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">⊢!</span></a> <a class="idref" href="CanonicalForms.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="CanonicalForms.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">⪼</span></a> <a class="idref" href="CanonicalForms.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">∃</span> <span class="id" title="var">r</span> <span class="id" title="var">r'</span><span class="id" title="notation">,</span> <a class="idref" href="CanonicalForms.html#b0e5ed29efd576246de3282fa163293b"><span class="id" title="variable">γ</span></a> <a class="idref" href="Lookup.html#8cc79fc5d6dbc3a1ff519f58bcbc908b"><span class="id" title="notation">⟦</span></a> <a class="idref" href="CanonicalForms.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="Lookup.html#8cc79fc5d6dbc3a1ff519f58bcbc908b"><span class="id" title="notation">⤳</span></a> <a class="idref" href="Definitions.html#defp"><span class="id" title="constructor">defp</span></a> <a class="idref" href="CanonicalForms.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="Lookup.html#8cc79fc5d6dbc3a1ff519f58bcbc908b"><span class="id" title="notation">⟧</span></a> <span class="id" title="notation">∧</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><a class="idref" href="CanonicalForms.html#r"><span class="id" title="variable">r</span></a> <span class="id" title="notation">=</span> <a class="idref" href="CanonicalForms.html#r'"><span class="id" title="variable">r'</span></a> <span class="id" title="notation">∨</span> <a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">⊢!!!</span></a> <a class="idref" href="CanonicalForms.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="CanonicalForms.html#r'"><span class="id" title="variable">r'</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">∧</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><a class="idref" href="CanonicalForms.html#q"><span class="id" title="variable">q</span></a> <span class="id" title="notation">=</span> <a class="idref" href="CanonicalForms.html#r'"><span class="id" title="variable">r'</span></a> <span class="id" title="notation">∨</span> <a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">⊢!!!</span></a> <a class="idref" href="CanonicalForms.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="CanonicalForms.html#r'"><span class="id" title="variable">r'</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a><span class="id" title="notation">)</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hwf</span> <span class="id" title="var">Hwt</span> <span class="id" title="var">Hp</span>. <span class="id" title="tactic">destruct</span> (<a class="idref" href="CanonicalForms.html#typ_to_lookup1"><span class="id" title="lemma">typ_to_lookup1</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">Hwf</span> <span class="id" title="var">Hwt</span> <span class="id" title="var">Hp</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">t</span> <span class="id" title="var">Hs</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="Binding.html#typed_paths_named"><span class="id" title="lemma">typed_paths_named</span></a> (<a class="idref" href="PreciseFlow.html#precise_to_general"><span class="id" title="lemma">precise_to_general</span></a> <span class="id" title="var">Hp</span>)) <span class="id" title="keyword">as</span> [<span class="id" title="var">px</span> [<span class="id" title="var">pbs</span> -&gt;]].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="CanonicalForms.html#lookup_step_preservation_prec1"><span class="id" title="lemma">lookup_step_preservation_prec1</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">Hwf</span> <span class="id" title="var">Hwt</span> <span class="id" title="var">Hs</span> <span class="id" title="var">Hp</span> <span class="id" title="constructor">eq_refl</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> [[<span class="id" title="var">S</span> [<span class="id" title="var">u</span> [-&gt; <span class="id" title="var">Ht</span>]]] |<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[[<span class="id" title="var">S</span> [<span class="id" title="var">ds'</span> [<span class="id" title="var">W</span> [<span class="id" title="var">T''</span> [<span class="id" title="var">G1</span> [<span class="id" title="var">G2</span> [<span class="id" title="var">pT</span> [-&gt; [[= -&gt;] ?]]]]]]]]] |<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[? [? [? [<span class="id" title="var">G1</span> [<span class="id" title="var">G2</span> [<span class="id" title="var">pT</span> [-&gt; [[= → ] [-&gt; [<span class="id" title="var">Hrc1</span> <span class="id" title="var">Hrc2</span>]]]]]]]]]]]].<br/>
&nbsp;&nbsp;- <span class="id" title="var">proof_recipe</span>. <span class="id" title="var">inversions</span> <span class="id" title="var">Ht</span>. <span class="id" title="var">inversions</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="PreciseFlow.html#inert_ok"><span class="id" title="lemma">inert_ok</span></a> <span class="id" title="var">Hi</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hok</span>%<span class="id" title="lemma">ok_concat_inv_l</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hrc1</span> <span class="id" title="keyword">as</span> [-&gt; | <span class="id" title="var">Hx0</span>]; <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hrc2</span> <span class="id" title="keyword">as</span> [-&gt; | <span class="id" title="var">Hrx1</span>]; <span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">split</span>×. <span class="id" title="tactic">split</span>. <span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">apply</span>× <a class="idref" href="PreciseTyping.html#pt3_weaken"><span class="id" title="lemma">pt3_weaken</span></a>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">split</span>×. <span class="id" title="tactic">split</span>. <span class="id" title="tactic">left</span>×. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">apply</span>× <a class="idref" href="PreciseTyping.html#pt3_weaken"><span class="id" title="lemma">pt3_weaken</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">split</span>×. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">right</span>; <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">apply</span>× <a class="idref" href="PreciseTyping.html#pt3_weaken"><span class="id" title="lemma">pt3_weaken</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
If <span class="inlinecode"><span class="id" title="var">p</span></span> looks up to <span class="inlinecode"><span class="id" title="var">t</span></span> in a value environment and <span class="inlinecode"><span class="id" title="var">p</span></span>'s III-level precise type
    is <span class="inlinecode"><span class="id" title="var">q.type</span></span>, where <span class="inlinecode"><span class="id" title="var">q</span></span>'s environment type is a function type, then
    <span class="inlinecode"><span class="id" title="var">t</span></span> is a path <span class="inlinecode"><span class="id" title="var">r</span></span>, and <span class="inlinecode"><span class="id" title="var">q</span></span> and <span class="inlinecode"><span class="id" title="var">r</span></span> are aliases. 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="lookup_step_preservation_sngl_prec3"><span class="id" title="lemma">lookup_step_preservation_sngl_prec3</span></a>: <span class="id" title="keyword">∀</span> <span class="id" title="var">G</span> <span class="id" title="var">γ</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span> <span class="id" title="var">t</span> <span class="id" title="var">Q1</span> <span class="id" title="var">Q2</span> <span class="id" title="var">Q3</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PreciseTyping.html#wf"><span class="id" title="inductive">wf</span></a> <a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#b0e5ed29efd576246de3282fa163293b"><span class="id" title="variable">γ</span></a> <a class="idref" href="Definitions.html#3d0e0e057bcbfdd590f754a27815747e"><span class="id" title="notation">⫶</span></a> <a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#b0e5ed29efd576246de3282fa163293b"><span class="id" title="variable">γ</span></a> <a class="idref" href="Lookup.html#8cc79fc5d6dbc3a1ff519f58bcbc908b"><span class="id" title="notation">⟦</span></a> <a class="idref" href="CanonicalForms.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="Lookup.html#8cc79fc5d6dbc3a1ff519f58bcbc908b"><span class="id" title="notation">⤳</span></a> <a class="idref" href="CanonicalForms.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="Lookup.html#8cc79fc5d6dbc3a1ff519f58bcbc908b"><span class="id" title="notation">⟧</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">⊢!!!</span></a> <a class="idref" href="CanonicalForms.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="CanonicalForms.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">⊢!</span></a> <a class="idref" href="CanonicalForms.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#5602fefe5ae9ac7607d0a75368b09df0"><span class="id" title="notation">∀(</span></a><a class="idref" href="CanonicalForms.html#Q1"><span class="id" title="variable">Q1</span></a><a class="idref" href="Definitions.html#5602fefe5ae9ac7607d0a75368b09df0"><span class="id" title="notation">)</span></a> <a class="idref" href="CanonicalForms.html#Q2"><span class="id" title="variable">Q2</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">⪼</span></a> <a class="idref" href="CanonicalForms.html#Q3"><span class="id" title="variable">Q3</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">∃</span> <span class="id" title="var">r</span> <span class="id" title="var">r'</span><span class="id" title="notation">,</span> <a class="idref" href="CanonicalForms.html#t"><span class="id" title="variable">t</span></a> <span class="id" title="notation">=</span> <a class="idref" href="Definitions.html#defp"><span class="id" title="constructor">defp</span></a> <a class="idref" href="CanonicalForms.html#r"><span class="id" title="variable">r</span></a> <span class="id" title="notation">∧</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><a class="idref" href="CanonicalForms.html#q"><span class="id" title="variable">q</span></a> <span class="id" title="notation">=</span> <a class="idref" href="CanonicalForms.html#r'"><span class="id" title="variable">r'</span></a> <span class="id" title="notation">∨</span> <a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">⊢!!!</span></a> <a class="idref" href="CanonicalForms.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="CanonicalForms.html#r'"><span class="id" title="variable">r'</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">∧</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><a class="idref" href="CanonicalForms.html#r"><span class="id" title="variable">r</span></a> <span class="id" title="notation">=</span> <a class="idref" href="CanonicalForms.html#r'"><span class="id" title="variable">r'</span></a> <span class="id" title="notation">∨</span> <a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">⊢!!!</span></a> <a class="idref" href="CanonicalForms.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="CanonicalForms.html#r'"><span class="id" title="variable">r'</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a><span class="id" title="notation">)</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hwf</span> <span class="id" title="var">Hwt</span> <span class="id" title="var">Hs</span> <span class="id" title="var">Hp</span>. <span class="id" title="var">gen</span> <span class="id" title="var">t</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="Binding.html#typed_paths_named"><span class="id" title="lemma">typed_paths_named</span></a> (<a class="idref" href="PreciseTyping.html#precise_to_general3"><span class="id" title="lemma">precise_to_general3</span></a> <span class="id" title="var">Hp</span>)) <span class="id" title="keyword">as</span> [<span class="id" title="var">px</span> [<span class="id" title="var">pbs</span> <span class="id" title="var">Heq</span>]].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">Hp</span>; <span class="id" title="var">introv</span> <span class="id" title="var">Hs</span> <span class="id" title="var">Hq</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="CanonicalForms.html#lookup_step_preservation_prec2"><span class="id" title="lemma">lookup_step_preservation_prec2</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">Hwf</span> <span class="id" title="var">Hwt</span> <span class="id" title="var">Hs</span> <span class="id" title="var">H</span> <span class="id" title="var">Heq</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> [[<span class="id" title="var">S'</span> [<span class="id" title="var">U'</span> [<span class="id" title="var">u</span> [[= -&gt;] [<span class="id" title="var">Hv</span> <span class="id" title="var">Hp'</span>]]]]] |<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[[<span class="id" title="var">S'</span> [<span class="id" title="var">ds</span> [<span class="id" title="var">W</span> [<span class="id" title="var">U</span> [<span class="id" title="var">G1</span> [<span class="id" title="var">G2</span> [<span class="id" title="var">pT</span> [-&gt; [<span class="id" title="var">Hp'</span> [<span class="id" title="var">Heq'</span> [<span class="id" title="var">Hds</span> [<span class="id" title="var">Hrc1</span> <span class="id" title="var">Hrc2</span>]]]]]]]]]]]] |<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="var">q'</span> [<span class="id" title="var">r</span> [<span class="id" title="var">r'</span> [<span class="id" title="var">G1</span> [<span class="id" title="var">G2</span> [<span class="id" title="var">pT</span> [-&gt; [[= -&gt;] [-&gt; [<span class="id" title="var">Hrc1</span> <span class="id" title="var">Hrc2</span>]]]]]]]]]]]].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="PreciseFlow.html#pf_sngl_T"><span class="id" title="lemma">pf_sngl_T</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">Hp'</span>) <span class="id" title="keyword">as</span> →. <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="CanonicalForms.html#sngl_path_lookup"><span class="id" title="lemma">sngl_path_lookup</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">Hwf</span> <span class="id" title="var">Hwt</span> <span class="id" title="var">Hp'</span>) <span class="id" title="keyword">as</span> [? [? [<span class="id" title="var">Hl</span> ?]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="Lookup.html#lookup_step_func"><span class="id" title="lemma">lookup_step_func</span></a> <span class="id" title="var">Hl</span> <span class="id" title="var">Hs</span>) <span class="id" title="keyword">as</span> [=].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="PreciseFlow.html#pf_sngl_T"><span class="id" title="lemma">pf_sngl_T</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">Hp'</span>) <span class="id" title="keyword">as</span> [=].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hrc1</span> <span class="id" title="keyword">as</span> [-&gt; | <span class="id" title="var">Hrc1</span>]; <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hrc2</span> <span class="id" title="keyword">as</span> [-&gt; | <span class="id" title="var">Hrc2</span>]; <span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">eauto</span>; <span class="id" title="tactic">split</span>*; <span class="id" title="tactic">split</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[ <span class="id" title="tactic">left</span>× | <span class="id" title="tactic">right</span> | <span class="id" title="tactic">right</span> | <span class="id" title="tactic">left</span>× | <span class="id" title="tactic">right</span> | <span class="id" title="tactic">right</span> ]; <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">apply</span>× <a class="idref" href="PreciseTyping.html#pt3_weaken"><span class="id" title="lemma">pt3_weaken</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">apply</span>× <a class="idref" href="PreciseFlow.html#inert_ok"><span class="id" title="lemma">inert_ok</span></a>; <span class="id" title="tactic">apply</span>× <a class="idref" href="RecordAndInertTypes.html#inert_prefix"><span class="id" title="lemma">inert_prefix</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="PreciseFlow.html#pf_sngl_T"><span class="id" title="lemma">pf_sngl_T</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">Hp'</span>) <span class="id" title="keyword">as</span> →. <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="CanonicalForms.html#sngl_path_lookup"><span class="id" title="lemma">sngl_path_lookup</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">Hwf</span> <span class="id" title="var">Hwt</span> <span class="id" title="var">Hp'</span>) <span class="id" title="keyword">as</span> [? [? [<span class="id" title="var">Hl</span> ?]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="Lookup.html#lookup_step_func"><span class="id" title="lemma">lookup_step_func</span></a> <span class="id" title="var">Hl</span> <span class="id" title="var">Hs</span>) <span class="id" title="keyword">as</span> [=].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="PreciseFlow.html#pf_sngl_T"><span class="id" title="lemma">pf_sngl_T</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">Hp'</span>) <span class="id" title="keyword">as</span> [=].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="CanonicalForms.html#typ_to_lookup3"><span class="id" title="lemma">typ_to_lookup3</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">Hwf</span> <span class="id" title="var">Hwt</span> <span class="id" title="var">Hp</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">t</span> <span class="id" title="var">Hl</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="Binding.html#typed_paths_named"><span class="id" title="lemma">typed_paths_named</span></a> (<a class="idref" href="PreciseTyping.html#precise_to_general3"><span class="id" title="lemma">precise_to_general3</span></a> <span class="id" title="var">Hp</span>)) <span class="id" title="keyword">as</span> [<span class="id" title="var">rx</span> [<span class="id" title="var">rbs</span> <span class="id" title="var">Heqr</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHHp</span> <span class="id" title="var">_</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hwf</span> <span class="id" title="var">Hwt</span> <span class="id" title="constructor">eq_refl</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Heqr</span> <span class="id" title="var">_</span> <span class="id" title="var">Hl</span> <span class="id" title="var">Hq</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">r1</span> [<span class="id" title="var">r2</span> [-&gt; [[-&gt; | <span class="id" title="var">Hq'</span>] [-&gt; | <span class="id" title="var">Hq''</span>]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hrc1</span> <span class="id" title="keyword">as</span> [-&gt; | <span class="id" title="var">Hp'</span>]; <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hrc2</span> <span class="id" title="keyword">as</span> [-&gt; | <span class="id" title="var">Hp''</span>]; <span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">split</span>×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id" title="tactic">split</span>. <span class="id" title="tactic">left</span>×. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">apply</span>× <a class="idref" href="PreciseTyping.html#pt3_sngl_trans3"><span class="id" title="lemma">pt3_sngl_trans3</span></a>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">apply</span>× <a class="idref" href="PreciseTyping.html#pt3_weaken"><span class="id" title="lemma">pt3_weaken</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="PreciseFlow.html#inert_ok"><span class="id" title="lemma">inert_ok</span></a>. <span class="id" title="tactic">apply</span>× <a class="idref" href="RecordAndInertTypes.html#inert_prefix"><span class="id" title="lemma">inert_prefix</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id" title="tactic">split</span>. <span class="id" title="tactic">left</span>×. <span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">eapply</span> <a class="idref" href="PreciseTyping.html#pt3_weaken"><span class="id" title="lemma">pt3_weaken</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hp'</span>. <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="PreciseTyping.html#pt3_invert"><span class="id" title="lemma">pt3_invert</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">Hp</span> <span class="id" title="var">Hp'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> [? | [<span class="id" title="var">r1</span> [[= -&gt;] [-&gt; | ?]]]]; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">false</span>× <a class="idref" href="PreciseTyping.html#pf_inert_pt3_sngl_false"><span class="id" title="lemma">pf_inert_pt3_sngl_false</span></a>. <span class="id" title="var">all</span>: <span class="id" title="tactic">apply</span>× <a class="idref" href="PreciseFlow.html#inert_ok"><span class="id" title="lemma">inert_ok</span></a>; <span class="id" title="tactic">apply</span>× <a class="idref" href="RecordAndInertTypes.html#inert_prefix"><span class="id" title="lemma">inert_prefix</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id" title="tactic">split</span>. <span class="id" title="tactic">left</span>×. <span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">eapply</span> <a class="idref" href="PreciseTyping.html#pt3_weaken"><span class="id" title="lemma">pt3_weaken</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hp'</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">solve</span> [<span class="id" title="tactic">apply</span>× <a class="idref" href="PreciseFlow.html#inert_ok"><span class="id" title="lemma">inert_ok</span></a>; <span class="id" title="tactic">apply</span>× <a class="idref" href="RecordAndInertTypes.html#inert_prefix"><span class="id" title="lemma">inert_prefix</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="PreciseTyping.html#pt3_invert"><span class="id" title="lemma">pt3_invert</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">Hp</span> <span class="id" title="var">Hp'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> [? | [<span class="id" title="var">r1</span> [[= -&gt;] [-&gt; | ?]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*** <span class="id" title="tactic">right</span>. <span class="id" title="tactic">apply</span>× <a class="idref" href="PreciseTyping.html#pt3_sngl_trans3"><span class="id" title="lemma">pt3_sngl_trans3</span></a>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">apply</span>× <a class="idref" href="PreciseTyping.html#pt3_weaken"><span class="id" title="lemma">pt3_weaken</span></a>. <span class="id" title="tactic">eapply</span> <a class="idref" href="PreciseFlow.html#inert_ok"><span class="id" title="lemma">inert_ok</span></a>, <a class="idref" href="RecordAndInertTypes.html#inert_prefix"><span class="id" title="lemma">inert_prefix</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*** <span class="id" title="tactic">right</span>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">apply</span>× <a class="idref" href="PreciseTyping.html#pt3_weaken"><span class="id" title="lemma">pt3_weaken</span></a>. <span class="id" title="tactic">eapply</span> <a class="idref" href="PreciseFlow.html#inert_ok"><span class="id" title="lemma">inert_ok</span></a>, <a class="idref" href="RecordAndInertTypes.html#inert_prefix"><span class="id" title="lemma">inert_prefix</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*** <span class="id" title="var">false</span>× <a class="idref" href="PreciseTyping.html#pf_inert_pt3_sngl_false"><span class="id" title="lemma">pf_inert_pt3_sngl_false</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hrc1</span> <span class="id" title="keyword">as</span> [-&gt; | <span class="id" title="var">Hp'</span>]; <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hrc2</span> <span class="id" title="keyword">as</span> [-&gt; | <span class="id" title="var">Hp''</span>]; <span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">split</span>×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id" title="tactic">split</span>. <span class="id" title="tactic">left</span>×. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="PreciseTyping.html#pt3_sngl_trans3"><span class="id" title="lemma">pt3_sngl_trans3</span></a>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">apply</span>× <a class="idref" href="PreciseTyping.html#pt3_weaken"><span class="id" title="lemma">pt3_weaken</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>× <a class="idref" href="PreciseFlow.html#inert_ok"><span class="id" title="lemma">inert_ok</span></a>. <span class="id" title="tactic">apply</span>× <a class="idref" href="RecordAndInertTypes.html#inert_prefix"><span class="id" title="lemma">inert_prefix</span></a>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id" title="tactic">split</span>. <span class="id" title="tactic">left</span>×. <span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">eapply</span> <a class="idref" href="PreciseTyping.html#pt3_weaken"><span class="id" title="lemma">pt3_weaken</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hp'</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">solve</span> [<span class="id" title="tactic">apply</span>× <a class="idref" href="PreciseFlow.html#inert_ok"><span class="id" title="lemma">inert_ok</span></a>; <span class="id" title="tactic">apply</span>× <a class="idref" href="RecordAndInertTypes.html#inert_prefix"><span class="id" title="lemma">inert_prefix</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="PreciseTyping.html#pt3_invert"><span class="id" title="lemma">pt3_invert</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">Hp</span> <span class="id" title="var">Hp'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> [? | [<span class="id" title="var">r1'</span> [[= -&gt;] [-&gt; | ?]]]]; <span class="id" title="tactic">eauto</span>. <span class="id" title="var">false</span>× <a class="idref" href="PreciseTyping.html#pf_inert_pt3_sngl_false"><span class="id" title="lemma">pf_inert_pt3_sngl_false</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id" title="tactic">split</span>. <span class="id" title="tactic">left</span>×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">eapply</span> <a class="idref" href="PreciseTyping.html#pt3_weaken"><span class="id" title="lemma">pt3_weaken</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hp'</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">solve</span> [<span class="id" title="tactic">apply</span>× <a class="idref" href="PreciseFlow.html#inert_ok"><span class="id" title="lemma">inert_ok</span></a>; <span class="id" title="tactic">apply</span>× <a class="idref" href="RecordAndInertTypes.html#inert_prefix"><span class="id" title="lemma">inert_prefix</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="PreciseTyping.html#pt3_invert"><span class="id" title="lemma">pt3_invert</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">Hp</span> <span class="id" title="var">Hp'</span>) <span class="id" title="keyword">as</span> [? | [<span class="id" title="var">r1'</span> [[= -&gt;] [-&gt; | <span class="id" title="var">HHH</span>]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*** <span class="id" title="tactic">right</span>. <span class="id" title="tactic">apply</span>× <a class="idref" href="PreciseTyping.html#pt3_sngl_trans3"><span class="id" title="lemma">pt3_sngl_trans3</span></a>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">apply</span>× <a class="idref" href="PreciseTyping.html#pt3_weaken"><span class="id" title="lemma">pt3_weaken</span></a>. <span class="id" title="tactic">apply</span>× <a class="idref" href="PreciseFlow.html#inert_ok"><span class="id" title="lemma">inert_ok</span></a>. <span class="id" title="tactic">apply</span>× <a class="idref" href="RecordAndInertTypes.html#inert_prefix"><span class="id" title="lemma">inert_prefix</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*** <span class="id" title="tactic">right</span>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">apply</span>× <a class="idref" href="PreciseTyping.html#pt3_weaken"><span class="id" title="lemma">pt3_weaken</span></a>. <span class="id" title="tactic">apply</span>× <a class="idref" href="PreciseFlow.html#inert_ok"><span class="id" title="lemma">inert_ok</span></a>. <span class="id" title="tactic">apply</span>× <a class="idref" href="RecordAndInertTypes.html#inert_prefix"><span class="id" title="lemma">inert_prefix</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*** <span class="id" title="var">false</span>× <a class="idref" href="PreciseTyping.html#pf_inert_pt3_sngl_false"><span class="id" title="lemma">pf_inert_pt3_sngl_false</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hrc1</span> <span class="id" title="keyword">as</span> [-&gt; | <span class="id" title="var">Hp'</span>]; <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hrc2</span> <span class="id" title="keyword">as</span> [-&gt; | <span class="id" title="var">Hp''</span>]; <span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">split</span>×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id" title="tactic">split</span>. <span class="id" title="tactic">left</span>×. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">apply</span>× <a class="idref" href="PreciseTyping.html#pt3_sngl_trans3"><span class="id" title="lemma">pt3_sngl_trans3</span></a>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">apply</span>× <a class="idref" href="PreciseTyping.html#pt3_weaken"><span class="id" title="lemma">pt3_weaken</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>× <a class="idref" href="PreciseFlow.html#inert_ok"><span class="id" title="lemma">inert_ok</span></a>. <span class="id" title="tactic">apply</span>× <a class="idref" href="RecordAndInertTypes.html#inert_prefix"><span class="id" title="lemma">inert_prefix</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id" title="tactic">split</span>. <span class="id" title="tactic">left</span>×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">eapply</span> <a class="idref" href="PreciseTyping.html#pt3_weaken"><span class="id" title="lemma">pt3_weaken</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hp'</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">solve</span> [<span class="id" title="tactic">apply</span>× <a class="idref" href="PreciseFlow.html#inert_ok"><span class="id" title="lemma">inert_ok</span></a>; <span class="id" title="tactic">apply</span>× <a class="idref" href="RecordAndInertTypes.html#inert_prefix"><span class="id" title="lemma">inert_prefix</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="PreciseTyping.html#pt3_invert"><span class="id" title="lemma">pt3_invert</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">Hp</span> <span class="id" title="var">Hp'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> [? | [<span class="id" title="var">r1</span> [[= -&gt;] [-&gt; | ?]]]]; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">false</span>× <a class="idref" href="PreciseTyping.html#pf_inert_pt3_sngl_false"><span class="id" title="lemma">pf_inert_pt3_sngl_false</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id" title="tactic">split</span>. <span class="id" title="tactic">left</span>×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">eapply</span> <a class="idref" href="PreciseTyping.html#pt3_weaken"><span class="id" title="lemma">pt3_weaken</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hp'</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">solve</span> [<span class="id" title="tactic">apply</span>× <a class="idref" href="PreciseFlow.html#inert_ok"><span class="id" title="lemma">inert_ok</span></a>; <span class="id" title="tactic">apply</span>× <a class="idref" href="RecordAndInertTypes.html#inert_prefix"><span class="id" title="lemma">inert_prefix</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="PreciseTyping.html#pt3_invert"><span class="id" title="lemma">pt3_invert</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">Hp</span> <span class="id" title="var">Hp'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> [? | [<span class="id" title="var">r1</span> [[= -&gt;] [-&gt; | ?]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*** <span class="id" title="tactic">right</span>. <span class="id" title="tactic">apply</span>× <a class="idref" href="PreciseTyping.html#pt3_sngl_trans3"><span class="id" title="lemma">pt3_sngl_trans3</span></a>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">apply</span>× <a class="idref" href="PreciseTyping.html#pt3_weaken"><span class="id" title="lemma">pt3_weaken</span></a>. <span class="id" title="tactic">apply</span>× <a class="idref" href="PreciseFlow.html#inert_ok"><span class="id" title="lemma">inert_ok</span></a>; <span class="id" title="tactic">apply</span>× <a class="idref" href="RecordAndInertTypes.html#inert_prefix"><span class="id" title="lemma">inert_prefix</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*** <span class="id" title="tactic">right</span>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">apply</span>× <a class="idref" href="PreciseTyping.html#pt3_weaken"><span class="id" title="lemma">pt3_weaken</span></a>. <span class="id" title="tactic">apply</span>× <a class="idref" href="PreciseFlow.html#inert_ok"><span class="id" title="lemma">inert_ok</span></a>; <span class="id" title="tactic">apply</span>× <a class="idref" href="RecordAndInertTypes.html#inert_prefix"><span class="id" title="lemma">inert_prefix</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*** <span class="id" title="var">false</span>× <a class="idref" href="PreciseTyping.html#pf_inert_pt3_sngl_false"><span class="id" title="lemma">pf_inert_pt3_sngl_false</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hrc1</span> <span class="id" title="keyword">as</span> [-&gt; | <span class="id" title="var">Hp'</span>]; <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hrc2</span> <span class="id" title="keyword">as</span> [-&gt; | <span class="id" title="var">Hp''</span>]; <span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">split</span>×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id" title="tactic">split</span>. <span class="id" title="tactic">left</span>×. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="PreciseTyping.html#pt3_sngl_trans3"><span class="id" title="lemma">pt3_sngl_trans3</span></a>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">apply</span>× <a class="idref" href="PreciseTyping.html#pt3_weaken"><span class="id" title="lemma">pt3_weaken</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="PreciseFlow.html#inert_ok"><span class="id" title="lemma">inert_ok</span></a>; <span class="id" title="tactic">apply</span>× <a class="idref" href="RecordAndInertTypes.html#inert_prefix"><span class="id" title="lemma">inert_prefix</span></a>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id" title="tactic">split</span>. <span class="id" title="tactic">left</span>×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">eapply</span> <a class="idref" href="PreciseTyping.html#pt3_weaken"><span class="id" title="lemma">pt3_weaken</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hp'</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">solve</span> [<span class="id" title="tactic">apply</span>× <a class="idref" href="PreciseFlow.html#inert_ok"><span class="id" title="lemma">inert_ok</span></a>; <span class="id" title="tactic">apply</span>× <a class="idref" href="RecordAndInertTypes.html#inert_prefix"><span class="id" title="lemma">inert_prefix</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="PreciseTyping.html#pt3_invert"><span class="id" title="lemma">pt3_invert</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">Hp</span> <span class="id" title="var">Hp'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> [? | [<span class="id" title="var">r1'</span> [[= -&gt;] [-&gt; | ?]]]]; <span class="id" title="tactic">eauto</span>. <span class="id" title="var">false</span>× <a class="idref" href="PreciseTyping.html#pf_inert_pt3_sngl_false"><span class="id" title="lemma">pf_inert_pt3_sngl_false</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id" title="tactic">split</span>. <span class="id" title="tactic">left</span>×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">eapply</span> <a class="idref" href="PreciseTyping.html#pt3_weaken"><span class="id" title="lemma">pt3_weaken</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hp'</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">solve</span> [<span class="id" title="tactic">apply</span>× <a class="idref" href="PreciseFlow.html#inert_ok"><span class="id" title="lemma">inert_ok</span></a>; <span class="id" title="tactic">apply</span>× <a class="idref" href="RecordAndInertTypes.html#inert_prefix"><span class="id" title="lemma">inert_prefix</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="PreciseTyping.html#pt3_invert"><span class="id" title="lemma">pt3_invert</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">Hp</span> <span class="id" title="var">Hp'</span>) <span class="id" title="keyword">as</span> [? | [<span class="id" title="var">r1'</span> [[= -&gt;] [-&gt; | <span class="id" title="var">HHH</span>]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*** <span class="id" title="tactic">right</span>. <span class="id" title="tactic">apply</span>× <a class="idref" href="PreciseTyping.html#pt3_sngl_trans3"><span class="id" title="lemma">pt3_sngl_trans3</span></a>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">apply</span>× <a class="idref" href="PreciseTyping.html#pt3_weaken"><span class="id" title="lemma">pt3_weaken</span></a>. <span class="id" title="tactic">apply</span>× <a class="idref" href="PreciseFlow.html#inert_ok"><span class="id" title="lemma">inert_ok</span></a>. <span class="id" title="tactic">apply</span>× <a class="idref" href="RecordAndInertTypes.html#inert_prefix"><span class="id" title="lemma">inert_prefix</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*** <span class="id" title="tactic">right</span>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">apply</span>× <a class="idref" href="PreciseTyping.html#pt3_weaken"><span class="id" title="lemma">pt3_weaken</span></a>. <span class="id" title="tactic">apply</span>× <a class="idref" href="PreciseFlow.html#inert_ok"><span class="id" title="lemma">inert_ok</span></a>. <span class="id" title="tactic">apply</span>× <a class="idref" href="RecordAndInertTypes.html#inert_prefix"><span class="id" title="lemma">inert_prefix</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*** <span class="id" title="var">false</span>× <a class="idref" href="PreciseTyping.html#pf_inert_pt3_sngl_false"><span class="id" title="lemma">pf_inert_pt3_sngl_false</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
If a <span class="inlinecode"><span class="id" title="var">x.bs</span></span> looks up to a path <span class="inlinecode"><span class="id" title="var">x.cs</span></span> in the value environment,
    and <span class="inlinecode"><span class="id" title="var">x.bs</span></span>'s environment type is <span class="inlinecode"><span class="id" title="var">T</span></span> then <span class="inlinecode"><span class="id" title="var">T</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">x.cs.type</span></span>. 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="lookup_same_var_same_type"><span class="id" title="lemma">lookup_same_var_same_type</span></a> <span class="id" title="var">G</span> <span class="id" title="var">γ</span> <span class="id" title="var">x</span> <span class="id" title="var">bs</span> <span class="id" title="var">cs</span> <span class="id" title="var">T</span>:<br/>
&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<a class="idref" href="PreciseTyping.html#wf"><span class="id" title="inductive">wf</span></a> <a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#b0e5ed29efd576246de3282fa163293b"><span class="id" title="variable">γ</span></a> <a class="idref" href="Definitions.html#3d0e0e057bcbfdd590f754a27815747e"><span class="id" title="notation">⫶</span></a> <a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#b0e5ed29efd576246de3282fa163293b"><span class="id" title="variable">γ</span></a> <a class="idref" href="Lookup.html#8cc79fc5d6dbc3a1ff519f58bcbc908b"><span class="id" title="notation">⟦</span></a> <a class="idref" href="Definitions.html#p_sel"><span class="id" title="constructor">p_sel</span></a> (<a class="idref" href="Definitions.html#avar_f"><span class="id" title="constructor">avar_f</span></a> <a class="idref" href="CanonicalForms.html#x"><span class="id" title="variable">x</span></a>) <a class="idref" href="CanonicalForms.html#bs"><span class="id" title="variable">bs</span></a> <a class="idref" href="Lookup.html#8cc79fc5d6dbc3a1ff519f58bcbc908b"><span class="id" title="notation">⤳</span></a> <a class="idref" href="Definitions.html#defp"><span class="id" title="constructor">defp</span></a> (<a class="idref" href="Definitions.html#p_sel"><span class="id" title="constructor">p_sel</span></a> (<a class="idref" href="Definitions.html#avar_f"><span class="id" title="constructor">avar_f</span></a> <a class="idref" href="CanonicalForms.html#x"><span class="id" title="variable">x</span></a>) <a class="idref" href="CanonicalForms.html#cs"><span class="id" title="variable">cs</span></a>) <a class="idref" href="Lookup.html#8cc79fc5d6dbc3a1ff519f58bcbc908b"><span class="id" title="notation">⟧</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">⊢!!</span></a> <a class="idref" href="Definitions.html#p_sel"><span class="id" title="constructor">p_sel</span></a> (<a class="idref" href="Definitions.html#avar_f"><span class="id" title="constructor">avar_f</span></a> <a class="idref" href="CanonicalForms.html#x"><span class="id" title="variable">x</span></a>) <a class="idref" href="CanonicalForms.html#bs"><span class="id" title="variable">bs</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">:</span></a> <a class="idref" href="CanonicalForms.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">=</span> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="Definitions.html#p_sel"><span class="id" title="constructor">p_sel</span></a> (<a class="idref" href="Definitions.html#avar_f"><span class="id" title="constructor">avar_f</span></a> <a class="idref" href="CanonicalForms.html#x"><span class="id" title="variable">x</span></a>) <a class="idref" href="CanonicalForms.html#cs"><span class="id" title="variable">cs</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hwf</span> <span class="id" title="var">Hwt</span>. <span class="id" title="var">gen</span> <span class="id" title="var">x</span> <span class="id" title="var">bs</span> <span class="id" title="var">cs</span> <span class="id" title="var">T</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">Hwt</span>; <span class="id" title="var">introv</span> <span class="id" title="var">Hs</span> <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span> "s is empty"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">false</span>× <a class="idref" href="Lookup.html#lookup_empty"><span class="id" title="lemma">lookup_empty</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span> "G is not empty"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="lemma">classicT</span> (<span class="id" title="var">x</span> <span class="id" title="notation">=</span> <span class="id" title="var">x0</span>)) <span class="id" title="keyword">as</span> [&lt;- | <span class="id" title="var">Hn</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">SCase</span> "x = x0"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="CanonicalForms.html#lookup_step_preservation_prec2"><span class="id" title="lemma">lookup_step_preservation_prec2</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">Hwf</span> (<a class="idref" href="Definitions.html#well_typed_push"><span class="id" title="constructor">well_typed_push</span></a> <span class="id" title="var">Hwt</span> <span class="id" title="var">H</span> <span class="id" title="var">H0</span> <span class="id" title="var">H1</span>) <span class="id" title="var">Hs</span> <span class="id" title="var">Ht</span> <span class="id" title="constructor">eq_refl</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> [[<span class="id" title="var">S'</span> [<span class="id" title="var">U'</span> [<span class="id" title="var">u</span> [[= -&gt;] [<span class="id" title="var">Hv</span> <span class="id" title="var">Hp'</span>]]]]] |<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[[<span class="id" title="var">S'</span> [<span class="id" title="var">ds</span> [<span class="id" title="var">W</span> [<span class="id" title="var">U'</span> [<span class="id" title="var">G1</span> [<span class="id" title="var">G2</span> [<span class="id" title="var">pT</span> [[=] [<span class="id" title="var">Hp'</span> [<span class="id" title="var">Heq</span> [<span class="id" title="var">Hds</span> [<span class="id" title="var">Hrc1</span> <span class="id" title="var">Hrc2</span>]]]]]]]]]]]] |<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="var">q</span> [<span class="id" title="var">r</span> [<span class="id" title="var">r'</span> [<span class="id" title="var">G1</span> [<span class="id" title="var">G2</span> [<span class="id" title="var">pT</span> [[= &lt;-] [-&gt; [<span class="id" title="var">Heq</span> [<span class="id" title="var">Hrc1</span> <span class="id" title="var">Hrc2</span>]]]]]]]]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="lemma">concat_empty_r</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span> <span class="id" title="tactic">at</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">eq_sym</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="Binding.html#env_ok_inv"><span class="id" title="lemma">env_ok_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span> <span class="id" title="keyword">as</span> [&lt;- [&lt;- -&gt;]]; <span class="id" title="tactic">try</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">concat_empty_r</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="PreciseTyping.html#sngl_typed2"><span class="id" title="lemma">sngl_typed2</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">Hwf</span> <span class="id" title="var">Ht</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">T</span> [<span class="id" title="var">rx</span> [<span class="id" title="var">rbs</span> -&gt;]]%<a class="idref" href="PreciseTyping.html#precise_to_general2"><span class="id" title="lemma">precise_to_general2</span></a>%<a class="idref" href="Binding.html#typed_paths_named"><span class="id" title="lemma">typed_paths_named</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hrc1</span> <span class="id" title="keyword">as</span> [-&gt; | <span class="id" title="var">Hrc1</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hrc2</span> <span class="id" title="keyword">as</span> [-&gt; | [<span class="id" title="var">U</span> <span class="id" title="var">Hu</span>]%<a class="idref" href="PreciseTyping.html#precise_to_general3"><span class="id" title="lemma">precise_to_general3</span></a>%<a class="idref" href="Binding.html#typing_implies_bound"><span class="id" title="lemma">typing_implies_bound</span></a>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">false</span> <span class="id" title="lemma">binds_fresh_inv</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">apply</span> <a class="idref" href="PreciseTyping.html#sngl_typed3"><span class="id" title="lemma">sngl_typed3</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hrc1</span> <span class="id" title="keyword">as</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[? [<span class="id" title="var">S</span> <span class="id" title="var">Hb</span>]%<a class="idref" href="PreciseTyping.html#precise_to_general3"><span class="id" title="lemma">precise_to_general3</span></a>%<a class="idref" href="Binding.html#typing_implies_bound"><span class="id" title="lemma">typing_implies_bound</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">false</span> <span class="id" title="lemma">binds_fresh_inv</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">apply</span>× <a class="idref" href="RecordAndInertTypes.html#inert_prefix"><span class="id" title="lemma">inert_prefix</span></a>. <span class="id" title="tactic">apply</span>× <a class="idref" href="PreciseTyping.html#wf_prefix"><span class="id" title="lemma">wf_prefix</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">false</span> <span class="id" title="lemma">binds_fresh_inv</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">SCase</span> "x &lt;&gt; x0"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="PreciseTyping.html#pt2_strengthen_one"><span class="id" title="lemma">pt2_strengthen_one</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Lookup.html#lookup_strengthen_one"><span class="id" title="lemma">lookup_strengthen_one</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hs</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">apply</span>× <span class="id" title="var">IHHwt</span>. <span class="id" title="tactic">apply</span>× <a class="idref" href="RecordAndInertTypes.html#inert_prefix"><span class="id" title="lemma">inert_prefix</span></a>. <span class="id" title="tactic">apply</span>× <a class="idref" href="PreciseTyping.html#wf_prefix"><span class="id" title="lemma">wf_prefix</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
If the path <span class="inlinecode"><span class="id" title="var">y.bs</span></span> has II-level precise type <span class="inlinecode"><span class="id" title="var">y.cs.type</span></span> then
    <span class="inlinecode"><span class="id" title="var">y.bs</span></span> looks up to <span class="inlinecode"><span class="id" title="var">y.cs</span></span> in the value environment. 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="typed_path_lookup_same_var2"><span class="id" title="lemma">typed_path_lookup_same_var2</span></a> <span class="id" title="var">G</span> <span class="id" title="var">γ</span> <span class="id" title="var">y</span> <span class="id" title="var">bs</span> <span class="id" title="var">cs</span> :<br/>
&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<a class="idref" href="PreciseTyping.html#wf"><span class="id" title="inductive">wf</span></a> <a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#b0e5ed29efd576246de3282fa163293b"><span class="id" title="variable">γ</span></a> <a class="idref" href="Definitions.html#3d0e0e057bcbfdd590f754a27815747e"><span class="id" title="notation">⫶</span></a> <a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">⊢!!</span></a> <a class="idref" href="Definitions.html#p_sel"><span class="id" title="constructor">p_sel</span></a> (<a class="idref" href="Definitions.html#avar_f"><span class="id" title="constructor">avar_f</span></a> <a class="idref" href="CanonicalForms.html#y"><span class="id" title="variable">y</span></a>) <a class="idref" href="CanonicalForms.html#bs"><span class="id" title="variable">bs</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="Definitions.html#p_sel"><span class="id" title="constructor">p_sel</span></a> (<a class="idref" href="Definitions.html#avar_f"><span class="id" title="constructor">avar_f</span></a> <a class="idref" href="CanonicalForms.html#y"><span class="id" title="variable">y</span></a>) <a class="idref" href="CanonicalForms.html#cs"><span class="id" title="variable">cs</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#b0e5ed29efd576246de3282fa163293b"><span class="id" title="variable">γ</span></a> <a class="idref" href="Lookup.html#8cc79fc5d6dbc3a1ff519f58bcbc908b"><span class="id" title="notation">⟦</span></a> <a class="idref" href="Definitions.html#p_sel"><span class="id" title="constructor">p_sel</span></a> (<a class="idref" href="Definitions.html#avar_f"><span class="id" title="constructor">avar_f</span></a> <a class="idref" href="CanonicalForms.html#y"><span class="id" title="variable">y</span></a>) <a class="idref" href="CanonicalForms.html#bs"><span class="id" title="variable">bs</span></a> <a class="idref" href="Lookup.html#8cc79fc5d6dbc3a1ff519f58bcbc908b"><span class="id" title="notation">⤳</span></a> <a class="idref" href="Definitions.html#defp"><span class="id" title="constructor">defp</span></a> (<a class="idref" href="Definitions.html#p_sel"><span class="id" title="constructor">p_sel</span></a> (<a class="idref" href="Definitions.html#avar_f"><span class="id" title="constructor">avar_f</span></a> <a class="idref" href="CanonicalForms.html#y"><span class="id" title="variable">y</span></a>) <a class="idref" href="CanonicalForms.html#cs"><span class="id" title="variable">cs</span></a>) <a class="idref" href="Lookup.html#8cc79fc5d6dbc3a1ff519f58bcbc908b"><span class="id" title="notation">⟧</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hwf</span> <span class="id" title="var">Hwt</span> <span class="id" title="var">Hp</span>. <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="CanonicalForms.html#typ_to_lookup2"><span class="id" title="lemma">typ_to_lookup2</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">Hwf</span> <span class="id" title="var">Hwt</span> <span class="id" title="var">Hp</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">t</span> <span class="id" title="var">Hs</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="CanonicalForms.html#lookup_step_preservation_prec2"><span class="id" title="lemma">lookup_step_preservation_prec2</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">Hwf</span> <span class="id" title="var">Hwt</span> <span class="id" title="var">Hs</span> <span class="id" title="var">Hp</span> <span class="id" title="constructor">eq_refl</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> [[? [? [? [[= -&gt;] [<span class="id" title="var">Hv</span> -&gt;%<a class="idref" href="PreciseFlow.html#pf_sngl_T"><span class="id" title="lemma">pf_sngl_T</span></a>]]]]] |<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[[? [? [? [? [? [? [? [[= -&gt;] [[=]%<a class="idref" href="PreciseFlow.html#pf_sngl_T"><span class="id" title="lemma">pf_sngl_T</span></a> ?]]]]]]]]] |<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="var">q'</span> [<span class="id" title="var">r</span> [<span class="id" title="var">r'</span> [<span class="id" title="var">G1</span> [<span class="id" title="var">G2</span> [<span class="id" title="var">pT</span> [-&gt; [[= &lt;-] [-&gt; [<span class="id" title="var">Hrc1</span> <span class="id" title="var">Hrc2</span>]]]]]]]]]]]]; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">proof_recipe</span>. <span class="id" title="var">inversions</span> <span class="id" title="var">Hv</span>. <span class="id" title="var">inversions</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> (<a class="idref" href="PreciseTyping.html#pt2_strengthen"><span class="id" title="lemma">pt2_strengthen</span></a> <span class="id" title="constructor">eq_refl</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hwf</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="Binding.html#wt_prefix"><span class="id" title="lemma">wt_prefix</span></a> <span class="id" title="var">Hwt</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">v</span> [<span class="id" title="var">s1</span> [<span class="id" title="var">s2</span> [-&gt; <span class="id" title="var">Hwt'</span>]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="Binding.html#9010ed482d18614b421f3281efc61255"><span class="id" title="lemma">wt_to_ok_γ</span></a> <span class="id" title="var">Hwt</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hoks</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="Lookup.html#lookup_strengthen"><span class="id" title="lemma">lookup_strengthen</span></a> <span class="id" title="var">Hoks</span> <span class="id" title="constructor">eq_refl</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="PreciseFlow.html#inert_ok"><span class="id" title="lemma">inert_ok</span></a> <span class="id" title="var">Hi</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hok</span>%<span class="id" title="lemma">ok_middle_inv_l</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hrc1</span> <span class="id" title="keyword">as</span> [&lt;- | <span class="id" title="var">Hrc1</span>]; <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hrc2</span> <span class="id" title="keyword">as</span> [-&gt; | <span class="id" title="var">Hrc2</span>]; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span>× <a class="idref" href="Lookup.html#lookup_step_weaken"><span class="id" title="lemma">lookup_step_weaken</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> (<a class="idref" href="PreciseTyping.html#sngl_typed3"><span class="id" title="lemma">sngl_typed3</span></a> (<a class="idref" href="RecordAndInertTypes.html#inert_prefix"><span class="id" title="lemma">inert_prefix</span></a> (<a class="idref" href="RecordAndInertTypes.html#inert_prefix"><span class="id" title="lemma">inert_prefix</span></a> <span class="id" title="var">Hi</span>))) <span class="id" title="tactic">in</span> <span class="id" title="var">Hrc2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> [<span class="id" title="var">T</span> [<span class="id" title="var">U</span> <span class="id" title="var">Hb</span>]%<a class="idref" href="PreciseTyping.html#precise_to_general3"><span class="id" title="lemma">precise_to_general3</span></a>%<a class="idref" href="Binding.html#typing_implies_bound"><span class="id" title="lemma">typing_implies_bound</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">false</span> <span class="id" title="lemma">binds_fresh_inv</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">apply</span>× <a class="idref" href="PreciseTyping.html#wf_prefix"><span class="id" title="lemma">wf_prefix</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="Binding.html#typing_implies_bound"><span class="id" title="lemma">typing_implies_bound</span></a> (<a class="idref" href="PreciseTyping.html#precise_to_general3"><span class="id" title="lemma">precise_to_general3</span></a> <span class="id" title="var">Hrc1</span>)) <span class="id" title="keyword">as</span> [<span class="id" title="var">S</span> <span class="id" title="var">Hb</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">false</span> <span class="id" title="lemma">binds_fresh_inv</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="Binding.html#typing_implies_bound"><span class="id" title="lemma">typing_implies_bound</span></a> (<a class="idref" href="PreciseTyping.html#precise_to_general3"><span class="id" title="lemma">precise_to_general3</span></a> <span class="id" title="var">Hrc1</span>)) <span class="id" title="keyword">as</span> [<span class="id" title="var">S</span> <span class="id" title="var">Hb</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">false</span> <span class="id" title="lemma">binds_fresh_inv</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
If the path <span class="inlinecode"><span class="id" title="var">y.bs</span></span> has III-level precise type <span class="inlinecode"><span class="id" title="var">y.cs.type</span></span> then
    <span class="inlinecode"><span class="id" title="var">y.bs</span></span> looks up to <span class="inlinecode"><span class="id" title="var">y.cs</span></span> in the value environment in a finite number of steps. 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="typed_path_lookup_same_var3"><span class="id" title="lemma">typed_path_lookup_same_var3</span></a> <span class="id" title="var">G</span> <span class="id" title="var">γ</span> <span class="id" title="var">y</span> <span class="id" title="var">bs</span> <span class="id" title="var">cs</span> :<br/>
&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<a class="idref" href="PreciseTyping.html#wf"><span class="id" title="inductive">wf</span></a> <a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#b0e5ed29efd576246de3282fa163293b"><span class="id" title="variable">γ</span></a> <a class="idref" href="Definitions.html#3d0e0e057bcbfdd590f754a27815747e"><span class="id" title="notation">⫶</span></a> <a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">⊢!!!</span></a> <a class="idref" href="Definitions.html#p_sel"><span class="id" title="constructor">p_sel</span></a> (<a class="idref" href="Definitions.html#avar_f"><span class="id" title="constructor">avar_f</span></a> <a class="idref" href="CanonicalForms.html#y"><span class="id" title="variable">y</span></a>) <a class="idref" href="CanonicalForms.html#bs"><span class="id" title="variable">bs</span></a> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="Definitions.html#p_sel"><span class="id" title="constructor">p_sel</span></a> (<a class="idref" href="Definitions.html#avar_f"><span class="id" title="constructor">avar_f</span></a> <a class="idref" href="CanonicalForms.html#y"><span class="id" title="variable">y</span></a>) <a class="idref" href="CanonicalForms.html#cs"><span class="id" title="variable">cs</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#b0e5ed29efd576246de3282fa163293b"><span class="id" title="variable">γ</span></a> <a class="idref" href="Lookup.html#ec3bbb547a98649fb30ac24026f522c9"><span class="id" title="notation">⟦</span></a> <a class="idref" href="Definitions.html#defp"><span class="id" title="constructor">defp</span></a> (<a class="idref" href="Definitions.html#p_sel"><span class="id" title="constructor">p_sel</span></a> (<a class="idref" href="Definitions.html#avar_f"><span class="id" title="constructor">avar_f</span></a> <a class="idref" href="CanonicalForms.html#y"><span class="id" title="variable">y</span></a>) <a class="idref" href="CanonicalForms.html#bs"><span class="id" title="variable">bs</span></a>) <a class="idref" href="Lookup.html#ec3bbb547a98649fb30ac24026f522c9"><span class="id" title="notation">⤳*</span></a> <a class="idref" href="Definitions.html#defp"><span class="id" title="constructor">defp</span></a> (<a class="idref" href="Definitions.html#p_sel"><span class="id" title="constructor">p_sel</span></a> (<a class="idref" href="Definitions.html#avar_f"><span class="id" title="constructor">avar_f</span></a> <a class="idref" href="CanonicalForms.html#y"><span class="id" title="variable">y</span></a>) <a class="idref" href="CanonicalForms.html#cs"><span class="id" title="variable">cs</span></a>) <a class="idref" href="Lookup.html#ec3bbb547a98649fb30ac24026f522c9"><span class="id" title="notation">⟧</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hwf</span> <span class="id" title="var">Hwt</span> <span class="id" title="var">Hp</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">Hp</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="Sequences.html#star_one"><span class="id" title="lemma">star_one</span></a>. <span class="id" title="tactic">apply</span>× <a class="idref" href="CanonicalForms.html#typed_path_lookup_same_var2"><span class="id" title="lemma">typed_path_lookup_same_var2</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="Binding.html#typed_paths_named"><span class="id" title="lemma">typed_paths_named</span></a> (<a class="idref" href="PreciseTyping.html#precise_to_general3"><span class="id" title="lemma">precise_to_general3</span></a> <span class="id" title="var">Hp</span>)) <span class="id" title="keyword">as</span> [<span class="id" title="var">qx</span> [<span class="id" title="var">qbs</span> -&gt;]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="lemma">classicT</span> (<span class="id" title="var">qx</span> <span class="id" title="notation">=</span> <span class="id" title="var">y</span>)) <span class="id" title="keyword">as</span> [-&gt; | <span class="id" title="var">Hn</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHHp</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hwf</span> <span class="id" title="var">Hwt</span> <span class="id" title="constructor">eq_refl</span> <span class="id" title="constructor">eq_refl</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="CanonicalForms.html#typed_path_lookup_same_var2"><span class="id" title="lemma">typed_path_lookup_same_var2</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">Hwf</span> <span class="id" title="var">Hwt</span> <span class="id" title="var">H</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="Sequences.html#star_trans"><span class="id" title="lemma">star_trans</span></a>. <span class="id" title="tactic">apply</span>× <a class="idref" href="Sequences.html#star_one"><span class="id" title="lemma">star_one</span></a>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">clear</span> <span class="id" title="var">IHHp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="Binding.html#typing_implies_bound"><span class="id" title="lemma">typing_implies_bound</span></a> (<a class="idref" href="PreciseTyping.html#precise_to_general2"><span class="id" title="lemma">precise_to_general2</span></a> <span class="id" title="var">H</span>)) <span class="id" title="keyword">as</span> [<span class="id" title="var">S</span> [<span class="id" title="var">G1</span> [<span class="id" title="var">G2</span> -&gt;]]%<a class="idref" href="Binding.html#binds_destruct"><span class="id" title="lemma">binds_destruct</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="PreciseFlow.html#inert_ok"><span class="id" title="lemma">inert_ok</span></a> <span class="id" title="var">Hi</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hok</span>%<span class="id" title="lemma">ok_middle_inv_l</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="PreciseTyping.html#pt2_strengthen"><span class="id" title="lemma">pt2_strengthen</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="PreciseTyping.html#sngl_typed2"><span class="id" title="lemma">sngl_typed2</span></a> (<a class="idref" href="RecordAndInertTypes.html#inert_prefix"><span class="id" title="lemma">inert_prefix</span></a> <span class="id" title="var">Hi</span>) (<a class="idref" href="PreciseTyping.html#wf_prefix"><span class="id" title="lemma">wf_prefix</span></a> <span class="id" title="var">Hwf</span>) <span class="id" title="var">H</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> [<span class="id" title="var">T</span> [<span class="id" title="var">U</span> [[-&gt; -&gt;] |<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="var">Hn'</span> [<span class="id" title="var">G1'</span> [<span class="id" title="var">G2'</span> -&gt;]]%<a class="idref" href="Binding.html#binds_destruct"><span class="id" title="lemma">binds_destruct</span></a>]]%<span class="id" title="lemma">binds_push_inv</span>]%<a class="idref" href="PreciseTyping.html#precise_to_general2"><span class="id" title="lemma">precise_to_general2</span></a>%<a class="idref" href="Binding.html#typing_implies_bound"><span class="id" title="lemma">typing_implies_bound</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">false</span>×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="lemma">concat_assoc</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hp</span>, <span class="id" title="var">Hi</span>, <span class="id" title="var">Hwf</span>. <span class="id" title="tactic">apply</span> (<a class="idref" href="PreciseTyping.html#pt3_strengthen"><span class="id" title="lemma">pt3_strengthen</span></a> <span class="id" title="constructor">eq_refl</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hwf</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="PreciseTyping.html#sngl_typed3"><span class="id" title="lemma">sngl_typed3</span></a> (<a class="idref" href="RecordAndInertTypes.html#inert_prefix"><span class="id" title="lemma">inert_prefix</span></a> <span class="id" title="var">Hi</span>) (<a class="idref" href="PreciseTyping.html#wf_prefix"><span class="id" title="lemma">wf_prefix</span></a> <span class="id" title="var">Hwf</span>)) <span class="id" title="tactic">in</span> <span class="id" title="var">Hp</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> [<span class="id" title="var">V</span> [<span class="id" title="var">W</span> <span class="id" title="var">Hb</span>]%<a class="idref" href="PreciseTyping.html#precise_to_general3"><span class="id" title="lemma">precise_to_general3</span></a>%<a class="idref" href="Binding.html#typing_implies_bound"><span class="id" title="lemma">typing_implies_bound</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">simpl_dom</span>. <span class="id" title="tactic">apply</span> <span class="id" title="lemma">notin_union</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hok</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hnu</span> <span class="id" title="var">_</span>]. <span class="id" title="var">false</span> <span class="id" title="lemma">binds_fresh_inv</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
If <span class="inlinecode"><span class="id" title="var">px.pbs</span></span> has III-level precise type <span class="inlinecode"><span class="id" title="var">qx.qbs.type</span></span>, and <span class="inlinecode"><span class="id" title="var">px</span></span> <span class="inlinecode">≠</span> <span class="inlinecode"><span class="id" title="var">qx</span></span>
    then there exists a type <span class="inlinecode"><span class="id" title="var">q'</span></span> that is <span class="inlinecode"><span class="id" title="var">px.pbs</span></span>'s II-level precise type,
    <span class="inlinecode"><span class="id" title="var">qx.qbs.type</span></span> is <span class="inlinecode"><span class="id" title="var">q'</span></span>'s III-level precise type, and <span class="inlinecode"><span class="id" title="var">q'</span></span>'s receiver is
    not equal to <span class="inlinecode"><span class="id" title="var">px</span></span>. 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="prev_var_exists"><span class="id" title="lemma">prev_var_exists</span></a> <span class="id" title="var">G</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span> <span class="id" title="var">px</span> <span class="id" title="var">pbs</span> <span class="id" title="var">qx</span> <span class="id" title="var">qbs</span>:<br/>
&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<a class="idref" href="PreciseTyping.html#wf"><span class="id" title="inductive">wf</span></a> <a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#p"><span class="id" title="variable">p</span></a> <span class="id" title="notation">=</span> <a class="idref" href="Definitions.html#p_sel"><span class="id" title="constructor">p_sel</span></a> (<a class="idref" href="Definitions.html#avar_f"><span class="id" title="constructor">avar_f</span></a> <a class="idref" href="CanonicalForms.html#px"><span class="id" title="variable">px</span></a>) <a class="idref" href="CanonicalForms.html#pbs"><span class="id" title="variable">pbs</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#q"><span class="id" title="variable">q</span></a> <span class="id" title="notation">=</span> <a class="idref" href="Definitions.html#p_sel"><span class="id" title="constructor">p_sel</span></a> (<a class="idref" href="Definitions.html#avar_f"><span class="id" title="constructor">avar_f</span></a> <a class="idref" href="CanonicalForms.html#qx"><span class="id" title="variable">qx</span></a>) <a class="idref" href="CanonicalForms.html#qbs"><span class="id" title="variable">qbs</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">⊢!!!</span></a> <a class="idref" href="CanonicalForms.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="CanonicalForms.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#px"><span class="id" title="variable">px</span></a> <span class="id" title="notation">≠</span> <a class="idref" href="CanonicalForms.html#qx"><span class="id" title="variable">qx</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<span class="id" title="notation">∃</span> <span class="id" title="var">p'</span> <span class="id" title="var">cs</span> <span class="id" title="var">q'</span> <span class="id" title="var">ds</span> <span class="id" title="var">rx</span><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#rx"><span class="id" title="variable">rx</span></a> <span class="id" title="notation">≠</span> <a class="idref" href="CanonicalForms.html#px"><span class="id" title="variable">px</span></a> <span class="id" title="notation">∧</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#p'"><span class="id" title="variable">p'</span></a> <span class="id" title="notation">=</span> <a class="idref" href="Definitions.html#p_sel"><span class="id" title="constructor">p_sel</span></a> (<a class="idref" href="Definitions.html#avar_f"><span class="id" title="constructor">avar_f</span></a> <a class="idref" href="CanonicalForms.html#px"><span class="id" title="variable">px</span></a>) <a class="idref" href="CanonicalForms.html#cs"><span class="id" title="variable">cs</span></a> <span class="id" title="notation">∧</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#q'"><span class="id" title="variable">q'</span></a> <span class="id" title="notation">=</span> <a class="idref" href="Definitions.html#p_sel"><span class="id" title="constructor">p_sel</span></a> (<a class="idref" href="Definitions.html#avar_f"><span class="id" title="constructor">avar_f</span></a> <a class="idref" href="CanonicalForms.html#rx"><span class="id" title="variable">rx</span></a>) <a class="idref" href="CanonicalForms.html#ds"><span class="id" title="variable">ds</span></a> <span class="id" title="notation">∧</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><a class="idref" href="CanonicalForms.html#p"><span class="id" title="variable">p</span></a> <span class="id" title="notation">=</span> <a class="idref" href="CanonicalForms.html#p'"><span class="id" title="variable">p'</span></a> <span class="id" title="notation">∨</span> <a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">⊢!!!</span></a> <a class="idref" href="CanonicalForms.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="CanonicalForms.html#p'"><span class="id" title="variable">p'</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">∧</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">⊢!!</span></a> <a class="idref" href="CanonicalForms.html#p'"><span class="id" title="variable">p'</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="CanonicalForms.html#q'"><span class="id" title="variable">q'</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">∧</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><a class="idref" href="CanonicalForms.html#q'"><span class="id" title="variable">q'</span></a> <span class="id" title="notation">=</span> <a class="idref" href="CanonicalForms.html#q"><span class="id" title="variable">q</span></a> <span class="id" title="notation">∨</span> <a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">⊢!!!</span></a> <a class="idref" href="CanonicalForms.html#q'"><span class="id" title="variable">q'</span></a> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="CanonicalForms.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a><span class="id" title="notation">)</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hwf</span> → → <span class="id" title="var">Hp</span> <span class="id" title="var">Hn</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">Hp</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="PreciseTyping.html#sngl_typed2"><span class="id" title="lemma">sngl_typed2</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">Hwf</span> <span class="id" title="var">H</span>) <span class="id" title="keyword">as</span> [? [<span class="id" title="var">rx</span> [<span class="id" title="var">rbs</span> -&gt;]]%<a class="idref" href="PreciseTyping.html#precise_to_general2"><span class="id" title="lemma">precise_to_general2</span></a>%<a class="idref" href="Binding.html#typed_paths_named"><span class="id" title="lemma">typed_paths_named</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="lemma">classicT</span> (<span class="id" title="var">rx</span> <span class="id" title="notation">=</span> <span class="id" title="var">qx</span>)) <span class="id" title="keyword">as</span> [-&gt; | <span class="id" title="var">Hn'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">do</span> 5 <span class="id" title="tactic">eexists</span>. <span class="id" title="tactic">split</span>. <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">split</span>×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHHp</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hwf</span> <span class="id" title="constructor">eq_refl</span> <span class="id" title="constructor">eq_refl</span> <span class="id" title="var">Hn'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> [<span class="id" title="var">p'</span> [<span class="id" title="var">cs</span> [<span class="id" title="var">q'</span> [<span class="id" title="var">ds</span> [<span class="id" title="var">sx</span> [<span class="id" title="var">Hn''</span> [-&gt; [-&gt; [<span class="id" title="var">Hp'</span> [<span class="id" title="var">Hpq</span> <span class="id" title="var">Hq</span>]]]]]]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="lemma">classicT</span> (<span class="id" title="var">px</span> <span class="id" title="notation">=</span> <span class="id" title="var">rx</span>)) <span class="id" title="keyword">as</span> [-&gt; | <span class="id" title="var">Hnpr</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">eexists</span>. <span class="id" title="tactic">∃</span> <span class="id" title="var">cs</span>. <span class="id" title="tactic">eexists</span>. <span class="id" title="tactic">∃</span> <span class="id" title="var">ds</span> <span class="id" title="var">sx</span>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>×. <span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hp'</span> <span class="id" title="keyword">as</span> [&lt;- | <span class="id" title="var">Hnr</span>]; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">eexists</span>. <span class="id" title="tactic">∃</span> <span class="id" title="var">pbs</span>. <span class="id" title="tactic">eexists</span>. <span class="id" title="tactic">∃</span> <span class="id" title="var">rbs</span> <span class="id" title="var">rx</span>. <span class="id" title="tactic">split</span>×.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
If <span class="inlinecode"><span class="id" title="var">p</span></span>'s III-level precise type is <span class="inlinecode"><span class="id" title="var">r.type</span></span> and <span class="inlinecode"><span class="id" title="var">r</span></span>'s environment type is
    a function type then <span class="inlinecode"><span class="id" title="var">p</span></span> can be looked up to <span class="inlinecode"><span class="id" title="var">r</span></span> in the value environment
    in a finite number of steps. 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="typed_path_lookup_helper"><span class="id" title="lemma">typed_path_lookup_helper</span></a> <span class="id" title="var">G</span> <span class="id" title="var">γ</span> <span class="id" title="var">p</span> <span class="id" title="var">r</span> <span class="id" title="var">S</span> <span class="id" title="var">T</span> <span class="id" title="var">V</span> :<br/>
&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<a class="idref" href="PreciseTyping.html#wf"><span class="id" title="inductive">wf</span></a> <a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#b0e5ed29efd576246de3282fa163293b"><span class="id" title="variable">γ</span></a> <a class="idref" href="Definitions.html#3d0e0e057bcbfdd590f754a27815747e"><span class="id" title="notation">⫶</span></a> <a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">⊢!!!</span></a> <a class="idref" href="CanonicalForms.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="CanonicalForms.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">⊢!</span></a> <a class="idref" href="CanonicalForms.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#5602fefe5ae9ac7607d0a75368b09df0"><span class="id" title="notation">∀(</span></a><a class="idref" href="CanonicalForms.html#S"><span class="id" title="variable">S</span></a><a class="idref" href="Definitions.html#5602fefe5ae9ac7607d0a75368b09df0"><span class="id" title="notation">)</span></a> <a class="idref" href="CanonicalForms.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">⪼</span></a> <a class="idref" href="CanonicalForms.html#V"><span class="id" title="variable">V</span></a><span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#b0e5ed29efd576246de3282fa163293b"><span class="id" title="variable">γ</span></a> <a class="idref" href="Lookup.html#ec3bbb547a98649fb30ac24026f522c9"><span class="id" title="notation">⟦</span></a> <a class="idref" href="Definitions.html#defp"><span class="id" title="constructor">defp</span></a> <a class="idref" href="CanonicalForms.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="Lookup.html#ec3bbb547a98649fb30ac24026f522c9"><span class="id" title="notation">⤳*</span></a> <a class="idref" href="Definitions.html#defp"><span class="id" title="constructor">defp</span></a> <a class="idref" href="CanonicalForms.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="Lookup.html#ec3bbb547a98649fb30ac24026f522c9"><span class="id" title="notation">⟧</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hwf</span> <span class="id" title="var">Hwt</span>. <span class="id" title="var">gen</span> <span class="id" title="var">p</span> <span class="id" title="var">r</span> <span class="id" title="var">S</span> <span class="id" title="var">T</span> <span class="id" title="var">V</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">Hwt</span>; <span class="id" title="var">introv</span> <span class="id" title="var">Hp</span> <span class="id" title="var">Hr</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span> "G is empty"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="PreciseFlow.html#precise_to_general"><span class="id" title="lemma">precise_to_general</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hr</span>. <span class="id" title="var">false</span>× <a class="idref" href="Binding.html#typing_empty_false"><span class="id" title="lemma">typing_empty_false</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span> "G is not empty"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">x'</span> <span class="id" title="var">bs</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="Binding.html#typed_paths_named"><span class="id" title="lemma">typed_paths_named</span></a> (<a class="idref" href="PreciseTyping.html#precise_to_general3"><span class="id" title="lemma">precise_to_general3</span></a> <span class="id" title="var">Hp</span>)) <span class="id" title="keyword">as</span> [<span class="id" title="var">px</span> [<span class="id" title="var">pbs</span> [= → -&gt;]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="lemma">classicT</span> (<span class="id" title="var">x</span> <span class="id" title="notation">=</span> <span class="id" title="var">px</span>)) <span class="id" title="keyword">as</span> [-&gt; | <span class="id" title="var">Hn</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">SCase</span> "x = px"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lets</span> <span class="id" title="var">Hwt'</span>: (<a class="idref" href="Definitions.html#well_typed_push"><span class="id" title="constructor">well_typed_push</span></a> <span class="id" title="var">Hwt</span> <span class="id" title="var">H</span> <span class="id" title="var">H0</span> <span class="id" title="var">H1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="CanonicalForms.html#typ_to_lookup3"><span class="id" title="lemma">typ_to_lookup3</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">Hwf</span> <span class="id" title="var">Hwt'</span> <span class="id" title="var">Hp</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">t</span> <span class="id" title="var">Hlt</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="CanonicalForms.html#lookup_step_preservation_sngl_prec3"><span class="id" title="lemma">lookup_step_preservation_sngl_prec3</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">Hwf</span> <span class="id" title="var">Hwt'</span> <span class="id" title="var">Hlt</span> <span class="id" title="var">Hp</span> <span class="id" title="var">Hr</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> [<span class="id" title="var">r1</span> [<span class="id" title="var">r2</span> [-&gt; [<span class="id" title="var">Hrc</span> <span class="id" title="var">Hrc'</span>]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="PreciseTyping.html#sngl_typed3"><span class="id" title="lemma">sngl_typed3</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">Hwf</span> <span class="id" title="var">Hp</span>) <span class="id" title="keyword">as</span> [? [<span class="id" title="var">rx</span> [<span class="id" title="var">rbs</span> -&gt;]]%<a class="idref" href="PreciseTyping.html#precise_to_general3"><span class="id" title="lemma">precise_to_general3</span></a>%<a class="idref" href="Binding.html#typed_paths_named"><span class="id" title="lemma">typed_paths_named</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="lemma">classicT</span> (<span class="id" title="var">px</span> <span class="id" title="notation">=</span> <span class="id" title="var">rx</span>)) <span class="id" title="keyword">as</span> [-&gt; | <span class="id" title="var">Hn</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span>× <a class="idref" href="CanonicalForms.html#typed_path_lookup_same_var3"><span class="id" title="lemma">typed_path_lookup_same_var3</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="CanonicalForms.html#prev_var_exists"><span class="id" title="lemma">prev_var_exists</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">Hwf</span> <span class="id" title="constructor">eq_refl</span> <span class="id" title="constructor">eq_refl</span> <span class="id" title="var">Hp</span> <span class="id" title="var">Hn</span>) <span class="id" title="keyword">as</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="var">p'</span> [<span class="id" title="var">cs'</span> [<span class="id" title="var">q'</span> [<span class="id" title="var">ds</span> [<span class="id" title="var">sx</span> [<span class="id" title="var">Hn'</span> [-&gt; [-&gt; [<span class="id" title="var">Hpp'</span> [<span class="id" title="var">Hp'q'</span> <span class="id" title="var">Hq'q</span>]]]]]]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="CanonicalForms.html#typ_to_lookup2"><span class="id" title="lemma">typ_to_lookup2</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">Hwf</span> <span class="id" title="var">Hwt'</span> <span class="id" title="var">Hp'q'</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">t</span> <span class="id" title="var">Hst</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="CanonicalForms.html#lookup_step_preservation_prec2"><span class="id" title="lemma">lookup_step_preservation_prec2</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">Hwf</span> <span class="id" title="var">Hwt'</span> <span class="id" title="var">Hst</span> <span class="id" title="var">Hp'q'</span> <span class="id" title="constructor">eq_refl</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> [[<span class="id" title="var">S'</span> [<span class="id" title="var">U'</span> [<span class="id" title="var">u</span> [[= -&gt;] [<span class="id" title="var">Hv</span> -&gt;%<a class="idref" href="PreciseFlow.html#pf_sngl_T"><span class="id" title="lemma">pf_sngl_T</span></a>]]]]] |<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[[<span class="id" title="var">S'</span> [<span class="id" title="var">ds'</span> [<span class="id" title="var">W</span> [<span class="id" title="var">U'</span> [<span class="id" title="var">G1</span> [<span class="id" title="var">G2</span> [<span class="id" title="var">pT</span> [-&gt; [[=]%<a class="idref" href="PreciseFlow.html#pf_sngl_T"><span class="id" title="lemma">pf_sngl_T</span></a> [<span class="id" title="var">Heq</span> [<span class="id" title="var">Hds</span> [<span class="id" title="var">Hrc1</span> <span class="id" title="var">Hrc2</span>]]]]]]]]]]]] |<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="var">q'</span> [<span class="id" title="var">r</span> [<span class="id" title="var">r'</span> [<span class="id" title="var">G1</span> [<span class="id" title="var">G2</span> [<span class="id" title="var">pT</span> [[= -&gt;] [[= &lt;-] [<span class="id" title="var">Heq'</span> [<span class="id" title="var">Hrc1</span> <span class="id" title="var">Hrc2</span>]]]]]]]]]]]]; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> ×. <span class="id" title="var">proof_recipe</span>. <span class="id" title="var">inversions</span> <span class="id" title="var">Hv</span>. <span class="id" title="var">inversions</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H3</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="RecordAndInertTypes.html#inert_prefix"><span class="id" title="lemma">inert_prefix</span></a> <span class="id" title="var">Hi</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hi'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="lemma">concat_empty_r</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq'</span> <span class="id" title="tactic">at</span> 1. <span class="id" title="tactic">apply</span> <a class="idref" href="Binding.html#env_ok_inv'"><span class="id" title="lemma">env_ok_inv'</span></a>  <span class="id" title="tactic">in</span> <span class="id" title="var">Heq'</span> <span class="id" title="keyword">as</span> [-&gt; [-&gt; &lt;-]];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">concat_empty_r</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="notation">∃</span> <span class="id" title="var">q'x</span> <span class="id" title="var">q'bs</span><span class="id" title="notation">,</span> <span class="id" title="var">q'</span> <span class="id" title="notation">=</span> <a class="idref" href="Definitions.html#p_sel"><span class="id" title="constructor">p_sel</span></a> (<a class="idref" href="Definitions.html#avar_f"><span class="id" title="constructor">avar_f</span></a> <a class="idref" href="CanonicalForms.html#q'x"><span class="id" title="variable">q'x</span></a>) <a class="idref" href="CanonicalForms.html#q'bs"><span class="id" title="variable">q'bs</span></a>) <span class="id" title="keyword">as</span> [<span class="id" title="var">q'x</span> [<span class="id" title="var">q'bs</span> -&gt;]]. {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hrc2</span> <span class="id" title="keyword">as</span> [-&gt; | <span class="id" title="var">Hq'</span>%<a class="idref" href="PreciseTyping.html#precise_to_general3"><span class="id" title="lemma">precise_to_general3</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hrc1</span> <span class="id" title="keyword">as</span> [&lt;- | <span class="id" title="var">Hq'</span>]; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="PreciseTyping.html#sngl_typed3"><span class="id" title="lemma">sngl_typed3</span></a> (<a class="idref" href="RecordAndInertTypes.html#inert_prefix"><span class="id" title="lemma">inert_prefix</span></a> <span class="id" title="var">Hi</span>) (<a class="idref" href="PreciseTyping.html#wf_prefix"><span class="id" title="lemma">wf_prefix</span></a> <span class="id" title="var">Hwf</span>) <span class="id" title="var">Hq'</span>) <span class="id" title="keyword">as</span> [? <span class="id" title="var">Hq''</span>%<a class="idref" href="PreciseTyping.html#precise_to_general3"><span class="id" title="lemma">precise_to_general3</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>× <a class="idref" href="Binding.html#typed_paths_named"><span class="id" title="lemma">typed_paths_named</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span>× <a class="idref" href="Binding.html#typed_paths_named"><span class="id" title="lemma">typed_paths_named</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Sequences.html#star_trans"><span class="id" title="lemma">star_trans</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">b</span>:=<a class="idref" href="Definitions.html#defp"><span class="id" title="constructor">defp</span></a> (<a class="idref" href="Definitions.html#p_sel"><span class="id" title="constructor">p_sel</span></a> (<a class="idref" href="Definitions.html#avar_f"><span class="id" title="constructor">avar_f</span></a> <span class="id" title="var">px</span>) <span class="id" title="var">cs'</span>)). {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hpp'</span> <span class="id" title="keyword">as</span> [[= -&gt;] | <span class="id" title="var">Hpp'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span>× <a class="idref" href="Sequences.html#star_refl"><span class="id" title="constructor">star_refl</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> (<a class="idref" href="CanonicalForms.html#typed_path_lookup_same_var3"><span class="id" title="lemma">typed_path_lookup_same_var3</span></a> <span class="id" title="var">Hi</span>); <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">Hpp'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="Definitions.html#p_sel"><span class="id" title="constructor">p_sel</span></a> (<a class="idref" href="Definitions.html#avar_f"><span class="id" title="constructor">avar_f</span></a> <span class="id" title="var">rx</span>) <span class="id" title="var">rbs</span> <span class="id" title="notation">=</span> <span class="id" title="var">r2</span>) <span class="id" title="keyword">as</span> &lt;-. {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hrc</span> <span class="id" title="keyword">as</span> [&lt;- | <span class="id" title="var">Ht</span>]; <span class="id" title="tactic">auto</span>. <span class="id" title="var">false</span> (<a class="idref" href="PreciseTyping.html#pf_inert_pt3_sngl_false"><span class="id" title="lemma">pf_inert_pt3_sngl_false</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">Hr</span> <span class="id" title="var">Ht</span>); <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">Hrc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Sequences.html#star_trans"><span class="id" title="lemma">star_trans</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">b</span>:=<a class="idref" href="Definitions.html#defp"><span class="id" title="constructor">defp</span></a> (<a class="idref" href="Definitions.html#p_sel"><span class="id" title="constructor">p_sel</span></a> (<a class="idref" href="Definitions.html#avar_f"><span class="id" title="constructor">avar_f</span></a> <span class="id" title="var">q'x</span>) <span class="id" title="var">q'bs</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span>× <a class="idref" href="Sequences.html#star_one"><span class="id" title="lemma">star_one</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>× <a class="idref" href="Lookup.html#lookup_weaken"><span class="id" title="lemma">lookup_weaken</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span>× <a class="idref" href="Binding.html#9010ed482d18614b421f3281efc61255"><span class="id" title="lemma">wt_to_ok_γ</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="PreciseTyping.html#wf_prefix"><span class="id" title="lemma">wf_prefix</span></a> <span class="id" title="var">Hwf</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hwf'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="PreciseFlow.html#pf_strengthen"><span class="id" title="lemma">pf_strengthen</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hr</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">Hrc'</span> <span class="id" title="var">Hst</span> <span class="id" title="var">Hp'q'</span> <span class="id" title="var">Hp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hq'q</span> <span class="id" title="keyword">as</span> [[= → -&gt;] | <span class="id" title="var">Hq'q</span>%<a class="idref" href="PreciseTyping.html#pt3_strengthen_one"><span class="id" title="lemma">pt3_strengthen_one</span></a>]; <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hrc1</span> <span class="id" title="keyword">as</span> [&lt;- | <span class="id" title="var">Hrc1</span>]; <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hrc2</span> <span class="id" title="keyword">as</span> [[= -&gt;] | <span class="id" title="var">Hrc2</span>]; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">auto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="tactic">solve</span> [<span class="id" title="tactic">apply</span>× <span class="id" title="var">IHHwt</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">solve</span> [<span class="id" title="var">false</span> (<a class="idref" href="PreciseTyping.html#pf_inert_pt3_sngl_false"><span class="id" title="lemma">pf_inert_pt3_sngl_false</span></a> <span class="id" title="var">Hi'</span> <span class="id" title="var">Hr</span> <span class="id" title="var">Hrc1</span>); <span class="id" title="tactic">auto</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">apply</span>× <span class="id" title="var">IHHwt</span>. <span class="id" title="tactic">apply</span>× <a class="idref" href="PreciseTyping.html#pt3_sngl_trans3"><span class="id" title="lemma">pt3_sngl_trans3</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="PreciseTyping.html#pt3_invert"><span class="id" title="lemma">pt3_invert</span></a> <span class="id" title="var">Hi'</span> <span class="id" title="var">Hrc1</span> <span class="id" title="var">Hq'q</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">Contra</span> | [<span class="id" title="var">q'</span> [[= -&gt;] [[= &lt;-] | <span class="id" title="var">Hqt</span>]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id" title="var">false</span> (<a class="idref" href="PreciseTyping.html#pf_inert_pt3_sngl_false"><span class="id" title="lemma">pf_inert_pt3_sngl_false</span></a> <span class="id" title="var">Hi'</span> <span class="id" title="var">Hr</span> <span class="id" title="var">Contra</span>); <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">apply</span>× <a class="idref" href="Sequences.html#star_refl"><span class="id" title="constructor">star_refl</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id" title="tactic">apply</span>× <span class="id" title="var">IHHwt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="PreciseTyping.html#pt3_invert"><span class="id" title="lemma">pt3_invert</span></a> <span class="id" title="var">Hi'</span> <span class="id" title="var">Hrc1</span> <span class="id" title="var">Hq'q</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">Contra</span> | [<span class="id" title="var">q'</span> [[= -&gt;] [[= &lt;-] | <span class="id" title="var">Hqt</span>]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id" title="var">false</span> (<a class="idref" href="PreciseTyping.html#pf_inert_pt3_sngl_false"><span class="id" title="lemma">pf_inert_pt3_sngl_false</span></a> <span class="id" title="var">Hi'</span> <span class="id" title="var">Hr</span> <span class="id" title="var">Contra</span>); <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id" title="tactic">apply</span>× <span class="id" title="var">IHHwt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id" title="tactic">apply</span> (<a class="idref" href="PreciseTyping.html#pt3_sngl_trans3"><span class="id" title="lemma">pt3_sngl_trans3</span></a> <span class="id" title="var">Hrc2</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hqt</span>. <span class="id" title="tactic">apply</span>× <span class="id" title="var">IHHwt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">SCase</span> "x &lt;&gt; px"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="PreciseTyping.html#pt3_strengthen_one"><span class="id" title="lemma">pt3_strengthen_one</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hp</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="Lookup.html#lookup_weaken"><span class="id" title="lemma">lookup_weaken</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span>× <span class="id" title="constructor">ok_push</span>. <span class="id" title="tactic">apply</span>× <a class="idref" href="Binding.html#9010ed482d18614b421f3281efc61255"><span class="id" title="lemma">wt_to_ok_γ</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="RecordAndInertTypes.html#inert_prefix"><span class="id" title="lemma">inert_prefix</span></a> <span class="id" title="var">Hi</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hi'</span>. <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="PreciseTyping.html#wf_prefix"><span class="id" title="lemma">wf_prefix</span></a> <span class="id" title="var">Hwf</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hwf'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>× <span class="id" title="var">IHHwt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="PreciseTyping.html#sngl_typed3"><span class="id" title="lemma">sngl_typed3</span></a> <span class="id" title="var">Hi'</span> <span class="id" title="var">Hwf'</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hp</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">U</span> <span class="id" title="var">Ht</span>]. <span class="id" title="tactic">apply</span>× <a class="idref" href="PreciseTyping.html#pf_strengthen_from_pt3"><span class="id" title="lemma">pf_strengthen_from_pt3</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
If <span class="inlinecode"><span class="id" title="var">p</span></span>'s III-level precise type is a function type then <span class="inlinecode"><span class="id" title="var">p</span></span> can be looked
    up to a value in the value environment. 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="typed_path_lookup3"><span class="id" title="lemma">typed_path_lookup3</span></a> <span class="id" title="var">G</span> <span class="id" title="var">γ</span> <span class="id" title="var">p</span> <span class="id" title="var">T</span> <span class="id" title="var">U</span> :<br/>
&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<a class="idref" href="PreciseTyping.html#wf"><span class="id" title="inductive">wf</span></a> <a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#b0e5ed29efd576246de3282fa163293b"><span class="id" title="variable">γ</span></a> <a class="idref" href="Definitions.html#3d0e0e057bcbfdd590f754a27815747e"><span class="id" title="notation">⫶</span></a> <a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">⊢!!!</span></a> <a class="idref" href="CanonicalForms.html#p"><span class="id" title="variable">p</span></a><a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#5602fefe5ae9ac7607d0a75368b09df0"><span class="id" title="notation">∀(</span></a><a class="idref" href="CanonicalForms.html#T"><span class="id" title="variable">T</span></a><a class="idref" href="Definitions.html#5602fefe5ae9ac7607d0a75368b09df0"><span class="id" title="notation">)</span></a> <a class="idref" href="CanonicalForms.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<span class="id" title="notation">∃</span> <span class="id" title="var">v</span><span class="id" title="notation">,</span> <a class="idref" href="CanonicalForms.html#b0e5ed29efd576246de3282fa163293b"><span class="id" title="variable">γ</span></a> <a class="idref" href="Lookup.html#ec3bbb547a98649fb30ac24026f522c9"><span class="id" title="notation">⟦</span></a> <a class="idref" href="Definitions.html#defp"><span class="id" title="constructor">defp</span></a> <a class="idref" href="CanonicalForms.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="Lookup.html#ec3bbb547a98649fb30ac24026f522c9"><span class="id" title="notation">⤳*</span></a> <a class="idref" href="Definitions.html#defv"><span class="id" title="constructor">defv</span></a> <a class="idref" href="CanonicalForms.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="Lookup.html#ec3bbb547a98649fb30ac24026f522c9"><span class="id" title="notation">⟧</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hwf</span> <span class="id" title="var">Hwt</span> <span class="id" title="var">Hp</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="Binding.html#typed_paths_named"><span class="id" title="lemma">typed_paths_named</span></a> (<a class="idref" href="PreciseTyping.html#precise_to_general3"><span class="id" title="lemma">precise_to_general3</span></a> <span class="id" title="var">Hp</span>)) <span class="id" title="keyword">as</span> [<span class="id" title="var">px</span> [<span class="id" title="var">pbs</span> -&gt;]].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="PreciseTyping.html#last_path"><span class="id" title="lemma">last_path</span></a> <span class="id" title="var">Hi</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hp</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hp</span> | [<span class="id" title="var">q</span> [<span class="id" title="var">Hpq</span> <span class="id" title="var">Hq</span>]]].<br/>
&nbsp;&nbsp;- <span class="id" title="var">inversions</span> <span class="id" title="var">Hp</span>. <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="CanonicalForms.html#typ_to_lookup1"><span class="id" title="lemma">typ_to_lookup1</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">Hwf</span> <span class="id" title="var">Hwt</span> <span class="id" title="var">H</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">t</span> <span class="id" title="var">Hs</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="CanonicalForms.html#lookup_step_preservation_prec1"><span class="id" title="lemma">lookup_step_preservation_prec1</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">Hwf</span> <span class="id" title="var">Hwt</span> <span class="id" title="var">Hs</span> <span class="id" title="var">H</span> <span class="id" title="constructor">eq_refl</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> [[<span class="id" title="var">S</span> [<span class="id" title="var">u</span> [-&gt; <span class="id" title="var">Ht</span>]]] |<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[[<span class="id" title="var">S</span> [<span class="id" title="var">ds'</span> [<span class="id" title="var">W</span> [<span class="id" title="var">T''</span> [<span class="id" title="var">G1</span> [<span class="id" title="var">G2</span> [<span class="id" title="var">pT</span> [-&gt; [[= -&gt;] [? ?]]]]]]]]]] |<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[? [? [? [? [? [? [? [[= -&gt;] [-&gt; ?]]]]]]]]]]]; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="PreciseFlow.html#pf_sngl_U"><span class="id" title="lemma">pf_sngl_U</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [=].<br/>
&nbsp;&nbsp;- <span class="id" title="var">inversions</span> <span class="id" title="var">Hq</span>. <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="PreciseFlow.html#pf_forall_T"><span class="id" title="lemma">pf_forall_T</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">H</span>) <span class="id" title="keyword">as</span> →.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="CanonicalForms.html#typed_path_lookup_helper"><span class="id" title="lemma">typed_path_lookup_helper</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">Hwf</span> <span class="id" title="var">Hwt</span> <span class="id" title="var">Hpq</span> <span class="id" title="var">H</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="CanonicalForms.html#typ_to_lookup1"><span class="id" title="lemma">typ_to_lookup1</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">Hwf</span> <span class="id" title="var">Hwt</span> <span class="id" title="var">H</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">t</span> <span class="id" title="var">Hs'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="Binding.html#typed_paths_named"><span class="id" title="lemma">typed_paths_named</span></a> (<a class="idref" href="PreciseFlow.html#precise_to_general"><span class="id" title="lemma">precise_to_general</span></a> <span class="id" title="var">H</span>)) <span class="id" title="keyword">as</span> [<span class="id" title="var">qx</span> [<span class="id" title="var">qbs</span> -&gt;]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="CanonicalForms.html#lookup_step_preservation_prec1"><span class="id" title="lemma">lookup_step_preservation_prec1</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">Hwf</span> <span class="id" title="var">Hwt</span> <span class="id" title="var">Hs'</span> <span class="id" title="var">H</span> <span class="id" title="constructor">eq_refl</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> [[<span class="id" title="var">S</span> [<span class="id" title="var">u</span> [-&gt; <span class="id" title="var">Ht</span>]]] |<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[[<span class="id" title="var">S</span> [<span class="id" title="var">ds'</span> [<span class="id" title="var">W</span> [<span class="id" title="var">T''</span> [<span class="id" title="var">G1</span> [<span class="id" title="var">G2</span> [<span class="id" title="var">pT</span> [-&gt; [[= -&gt;] [? ?]]]]]]]]]] |<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[? [? [? [? [? [? [? [[= -&gt;] [-&gt; ?]]]]]]]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eexists</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="Sequences.html#star_trans"><span class="id" title="lemma">star_trans</span></a>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Hs</span>. <span class="id" title="tactic">apply</span>× <a class="idref" href="Sequences.html#star_one"><span class="id" title="lemma">star_one</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
If a path has a III-level function type then the path can be
    looked up in the value environment in a finite number of steps
    to a value of the same type. 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="corresponding_types_fun"><span class="id" title="lemma">corresponding_types_fun</span></a>: <span class="id" title="keyword">∀</span> <span class="id" title="var">G</span> <span class="id" title="var">γ</span> <span class="id" title="var">p</span> <span class="id" title="var">S</span> <span class="id" title="var">T</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PreciseTyping.html#wf"><span class="id" title="inductive">wf</span></a> <a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#b0e5ed29efd576246de3282fa163293b"><span class="id" title="variable">γ</span></a> <a class="idref" href="Definitions.html#3d0e0e057bcbfdd590f754a27815747e"><span class="id" title="notation">⫶</span></a> <a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">⊢!!!</span></a> <a class="idref" href="CanonicalForms.html#p"><span class="id" title="variable">p</span></a><a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#5602fefe5ae9ac7607d0a75368b09df0"><span class="id" title="notation">∀(</span></a><a class="idref" href="CanonicalForms.html#S"><span class="id" title="variable">S</span></a><a class="idref" href="Definitions.html#5602fefe5ae9ac7607d0a75368b09df0"><span class="id" title="notation">)</span></a> <a class="idref" href="CanonicalForms.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="notation">∃</span> <span class="id" title="var">v</span><span class="id" title="notation">,</span> <a class="idref" href="CanonicalForms.html#b0e5ed29efd576246de3282fa163293b"><span class="id" title="variable">γ</span></a> <a class="idref" href="Lookup.html#ec3bbb547a98649fb30ac24026f522c9"><span class="id" title="notation">⟦</span></a> <a class="idref" href="Definitions.html#defp"><span class="id" title="constructor">defp</span></a> <a class="idref" href="CanonicalForms.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="Lookup.html#ec3bbb547a98649fb30ac24026f522c9"><span class="id" title="notation">⤳*</span></a> <a class="idref" href="Definitions.html#defv"><span class="id" title="constructor">defv</span></a> <a class="idref" href="CanonicalForms.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="Lookup.html#ec3bbb547a98649fb30ac24026f522c9"><span class="id" title="notation">⟧</span></a> <span class="id" title="notation">∧</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Definitions.html#8f800003c5c18bd4e5a8078841b62512"><span class="id" title="notation">⊢</span></a> <a class="idref" href="Definitions.html#trm_val"><span class="id" title="constructor">trm_val</span></a> <a class="idref" href="CanonicalForms.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="Definitions.html#8f800003c5c18bd4e5a8078841b62512"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#5602fefe5ae9ac7607d0a75368b09df0"><span class="id" title="notation">∀(</span></a><a class="idref" href="CanonicalForms.html#S"><span class="id" title="variable">S</span></a><a class="idref" href="Definitions.html#5602fefe5ae9ac7607d0a75368b09df0"><span class="id" title="notation">)</span></a> <a class="idref" href="CanonicalForms.html#T"><span class="id" title="variable">T</span></a><span class="id" title="notation">)</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hwf</span> <span class="id" title="var">Hwt</span> <span class="id" title="var">Hp</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="CanonicalForms.html#typed_path_lookup3"><span class="id" title="lemma">typed_path_lookup3</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">Hwf</span> <span class="id" title="var">Hwt</span> <span class="id" title="var">Hp</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">v</span> <span class="id" title="var">Hs</span>].<br/>
&nbsp;&nbsp;<span class="id" title="var">lets</span> <span class="id" title="var">Ht</span>: (<a class="idref" href="CanonicalForms.html#lookup_preservation_forall"><span class="id" title="lemma">lookup_preservation_forall</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">Hwf</span> <span class="id" title="var">Hwt</span> <span class="id" title="var">Hs</span> (<a class="idref" href="PreciseTyping.html#precise_to_general3"><span class="id" title="lemma">precise_to_general3</span></a> <span class="id" title="var">Hp</span>)). <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab79"></a><h2 class="section">Canonical Forms for Functions (Lemma 5.5)</h2>
 If a path has a function type then it can be looked up in the value environment
    in a finite number of steps to a function that has the same function type. 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="canonical_forms_fun"><span class="id" title="lemma">canonical_forms_fun</span></a>: <span class="id" title="keyword">∀</span> <span class="id" title="var">G</span> <span class="id" title="var">γ</span> <span class="id" title="var">p</span> <span class="id" title="var">T</span> <span class="id" title="var">U</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PreciseTyping.html#wf"><span class="id" title="inductive">wf</span></a> <a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#b0e5ed29efd576246de3282fa163293b"><span class="id" title="variable">γ</span></a> <a class="idref" href="Definitions.html#3d0e0e057bcbfdd590f754a27815747e"><span class="id" title="notation">⫶</span></a> <a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Definitions.html#8f800003c5c18bd4e5a8078841b62512"><span class="id" title="notation">⊢</span></a> <a class="idref" href="Definitions.html#trm_path"><span class="id" title="constructor">trm_path</span></a> <a class="idref" href="CanonicalForms.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="Definitions.html#8f800003c5c18bd4e5a8078841b62512"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#5602fefe5ae9ac7607d0a75368b09df0"><span class="id" title="notation">∀(</span></a><a class="idref" href="CanonicalForms.html#T"><span class="id" title="variable">T</span></a><a class="idref" href="Definitions.html#5602fefe5ae9ac7607d0a75368b09df0"><span class="id" title="notation">)</span></a> <a class="idref" href="CanonicalForms.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="notation">∃</span> <span class="id" title="var">L</span> <span class="id" title="var">T'</span> <span class="id" title="var">t</span><span class="id" title="notation">,</span> <a class="idref" href="CanonicalForms.html#b0e5ed29efd576246de3282fa163293b"><span class="id" title="variable">γ</span></a> <a class="idref" href="Lookup.html#ec3bbb547a98649fb30ac24026f522c9"><span class="id" title="notation">⟦</span></a> <a class="idref" href="Definitions.html#defp"><span class="id" title="constructor">defp</span></a> <a class="idref" href="CanonicalForms.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="Lookup.html#ec3bbb547a98649fb30ac24026f522c9"><span class="id" title="notation">⤳*</span></a> <a class="idref" href="Definitions.html#defv"><span class="id" title="constructor">defv</span></a> (<a class="idref" href="Definitions.html#d9cc4b8b9bd644016bdfcf5f8009b5b6"><span class="id" title="notation">λ</span></a><a class="idref" href="Definitions.html#d9cc4b8b9bd644016bdfcf5f8009b5b6"><span class="id" title="notation">(</span></a><a class="idref" href="CanonicalForms.html#T'"><span class="id" title="variable">T'</span></a><a class="idref" href="Definitions.html#d9cc4b8b9bd644016bdfcf5f8009b5b6"><span class="id" title="notation">)</span></a> <a class="idref" href="CanonicalForms.html#t"><span class="id" title="variable">t</span></a>) <a class="idref" href="Lookup.html#ec3bbb547a98649fb30ac24026f522c9"><span class="id" title="notation">⟧</span></a> <span class="id" title="notation">∧</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Definitions.html#d77433d9a5f06bee50380b6ca9a3f271"><span class="id" title="notation">⊢</span></a> <a class="idref" href="CanonicalForms.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="Definitions.html#d77433d9a5f06bee50380b6ca9a3f271"><span class="id" title="notation">&lt;:</span></a> <a class="idref" href="CanonicalForms.html#T'"><span class="id" title="variable">T'</span></a> <span class="id" title="notation">∧</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="keyword">∀</span> <span class="id" title="var">y</span>, <a class="idref" href="CanonicalForms.html#y"><span class="id" title="variable">y</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">notin</span> <a class="idref" href="CanonicalForms.html#L"><span class="id" title="variable">L</span></a> <span class="id" title="notation">→</span> <a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">&amp;</span> <a class="idref" href="CanonicalForms.html#y"><span class="id" title="variable">y</span></a> <span class="id" title="notation">~</span> <a class="idref" href="CanonicalForms.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="Definitions.html#8f800003c5c18bd4e5a8078841b62512"><span class="id" title="notation">⊢</span></a> <a class="idref" href="Definitions.html#open_trm"><span class="id" title="definition">open_trm</span></a> <a class="idref" href="CanonicalForms.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="CanonicalForms.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="Definitions.html#8f800003c5c18bd4e5a8078841b62512"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#open_typ"><span class="id" title="definition">open_typ</span></a> <a class="idref" href="CanonicalForms.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="CanonicalForms.html#U"><span class="id" title="variable">U</span></a><span class="id" title="notation">)</span><span class="id" title="notation">)</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hin</span> <span class="id" title="var">Hwf</span> <span class="id" title="var">Hwt</span> <span class="id" title="var">Hty</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="GeneralToTight.html#path_typ_all_to_precise"><span class="id" title="lemma">path_typ_all_to_precise</span></a> <span class="id" title="var">Hin</span> <span class="id" title="var">Hty</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">L</span> [<span class="id" title="var">S</span> [<span class="id" title="var">T'</span> [<span class="id" title="var">Hp</span> [<span class="id" title="var">Hs1</span> <span class="id" title="var">Hs2</span>]]]]].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="CanonicalForms.html#corresponding_types_fun"><span class="id" title="lemma">corresponding_types_fun</span></a> <span class="id" title="var">Hin</span> <span class="id" title="var">Hwf</span> <span class="id" title="var">Hwt</span> <span class="id" title="var">Hp</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">v</span> [<span class="id" title="var">P</span> <span class="id" title="var">Hv</span>]].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="GeneralToTight.html#val_typ_all_to_lambda"><span class="id" title="lemma">val_typ_all_to_lambda</span></a> <span class="id" title="var">Hin</span> <span class="id" title="var">Hv</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">L'</span> [<span class="id" title="var">S'</span> [<span class="id" title="var">t</span> [<span class="id" title="var">Heq</span> [<span class="id" title="var">Hs1'</span> <span class="id" title="var">Hs2'</span>]]]]].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">∃</span> (<span class="id" title="var">L</span> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> <span class="id" title="var">L'</span> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> <span class="id" title="notation">(</span><span class="id" title="axiom">dom</span> <span class="id" title="var">G</span><span class="id" title="notation">)</span>) <span class="id" title="var">S'</span> <span class="id" title="var">t</span>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>~.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <a class="idref" href="Definitions.html#subtyp_trans"><span class="id" title="constructor">subtyp_trans</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">HL</span>: <span class="id" title="var">y</span> <span class="id" title="notation">\</span><span class="id" title="notation">notin</span> <span class="id" title="var">L</span>) <span class="id" title="tactic">by</span> <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">HL'</span>: <span class="id" title="var">y</span> <span class="id" title="notation">\</span><span class="id" title="notation">notin</span> <span class="id" title="var">L'</span>) <span class="id" title="tactic">by</span> <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hs2</span> <span class="id" title="var">y</span> <span class="id" title="var">HL</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hs2'</span> <span class="id" title="var">y</span> <span class="id" title="var">HL'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Narrowing.html#narrow_typing"><span class="id" title="lemma">narrow_typing</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">G'</span>:=<span class="id" title="var">G</span> <span class="id" title="notation">&amp;</span> <span class="id" title="var">y</span> <span class="id" title="notation">~</span> <span class="id" title="var">T</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hs2'</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="Definitions.html#ty_sub"><span class="id" title="constructor">ty_sub</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/tebbi/coqdocjs">CoqdocJS</a>
</div>
</div>
</body>

</html>
