<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="assets/resources/coqdoc.css" rel="stylesheet" type="text/css" />
<link href="assets/resources/coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="assets/resources/config.js"></script>
<script type="text/javascript" src="assets/resources/coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="https://github.com/themaplelab/dot-public/tree/master/dot-simpler">README</a>
      <a href="./indexpage.html"> Index </a>
      <a href="./toc.html"> Table of Contents </a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<h1 class="libtitle">Sequences</h1>

<div class="code">
</div>

<div class="doc">
<a name="lab33"></a><h1 class="section">Xavier Leroy's Sequences Library</h1>

<div class="paragraph"> </div>

 A library of relation operators defining sequences of transitions
  and useful properties about them. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Set Implicit Arguments</span>.<br/>

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">Classical</span>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a name="SEQUENCES"><span class="id" title="section">SEQUENCES</span></a>.<br/>

<br/>
<span class="id" title="keyword">Variable</span> <a name="SEQUENCES.A"><span class="id" title="variable">A</span></a>: <span class="id" title="keyword">Type</span>. <span class="comment">(**r&nbsp;the&nbsp;type&nbsp;of&nbsp;states&nbsp;*)</span><br/>
<span class="id" title="keyword">Variable</span> <a name="SEQUENCES.R"><span class="id" title="variable">R</span></a>: <a class="idref" href="Sequences.html#SEQUENCES.A"><span class="id" title="variable">A</span></a> <span class="id" title="notation">→</span> <a class="idref" href="Sequences.html#SEQUENCES.A"><span class="id" title="variable">A</span></a> <span class="id" title="notation">→</span> <span class="id" title="keyword">Prop</span>. <span class="comment">(**r&nbsp;the&nbsp;transition&nbsp;relation,&nbsp;from&nbsp;one&nbsp;state&nbsp;to&nbsp;the&nbsp;next&nbsp;*)</span><br/>

<br/>
</div>

<div class="doc">
<a name="lab34"></a><h2 class="section">Finite sequences of transitions</h2>

<div class="paragraph"> </div>

 Zero, one or several transitions: reflexive, transitive closure of <span class="inlinecode"><span class="id" title="var">R</span></span>. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Inductive</span> <a name="star"><span class="id" title="inductive">star</span></a>: <a class="idref" href="Sequences.html#SEQUENCES.A"><span class="id" title="variable">A</span></a> <span class="id" title="notation">→</span> <a class="idref" href="Sequences.html#SEQUENCES.A"><span class="id" title="variable">A</span></a> <span class="id" title="notation">→</span> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;| <a name="star_refl"><span class="id" title="constructor">star_refl</span></a>: <span class="id" title="keyword">∀</span> <span class="id" title="var">a</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Sequences.html#star"><span class="id" title="inductive">star</span></a> <a class="idref" href="Sequences.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="Sequences.html#a"><span class="id" title="variable">a</span></a><br/>
&nbsp;&nbsp;| <a name="star_step"><span class="id" title="constructor">star_step</span></a>: <span class="id" title="keyword">∀</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Sequences.html#SEQUENCES.R"><span class="id" title="variable">R</span></a> <a class="idref" href="Sequences.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="Sequences.html#b"><span class="id" title="variable">b</span></a> <span class="id" title="notation">→</span> <a class="idref" href="Sequences.html#star"><span class="id" title="inductive">star</span></a> <a class="idref" href="Sequences.html#b"><span class="id" title="variable">b</span></a> <a class="idref" href="Sequences.html#c"><span class="id" title="variable">c</span></a> <span class="id" title="notation">→</span> <a class="idref" href="Sequences.html#star"><span class="id" title="inductive">star</span></a> <a class="idref" href="Sequences.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="Sequences.html#c"><span class="id" title="variable">c</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="star_one"><span class="id" title="lemma">star_one</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<span class="id" title="var">a</span> <span class="id" title="var">b</span>: <a class="idref" href="Sequences.html#SEQUENCES.A"><span class="id" title="variable">A</span></a>), <a class="idref" href="Sequences.html#SEQUENCES.R"><span class="id" title="variable">R</span></a> <a class="idref" href="Sequences.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="Sequences.html#b"><span class="id" title="variable">b</span></a> <span class="id" title="notation">→</span> <a class="idref" href="Sequences.html#star"><span class="id" title="inductive">star</span></a> <a class="idref" href="Sequences.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="Sequences.html#b"><span class="id" title="variable">b</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="Sequences.html#star"><span class="id" title="inductive">star</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="star_trans"><span class="id" title="lemma">star_trans</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<span class="id" title="var">a</span> <span class="id" title="var">b</span>: <a class="idref" href="Sequences.html#SEQUENCES.A"><span class="id" title="variable">A</span></a>), <a class="idref" href="Sequences.html#star"><span class="id" title="inductive">star</span></a> <a class="idref" href="Sequences.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="Sequences.html#b"><span class="id" title="variable">b</span></a> <span class="id" title="notation">→</span> <span class="id" title="keyword">∀</span> <span class="id" title="var">c</span>, <a class="idref" href="Sequences.html#star"><span class="id" title="inductive">star</span></a> <a class="idref" href="Sequences.html#b"><span class="id" title="variable">b</span></a> <a class="idref" href="Sequences.html#c"><span class="id" title="variable">c</span></a> <span class="id" title="notation">→</span> <a class="idref" href="Sequences.html#star"><span class="id" title="inductive">star</span></a> <a class="idref" href="Sequences.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="Sequences.html#c"><span class="id" title="variable">c</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> 1; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="Sequences.html#star"><span class="id" title="inductive">star</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
One or several transitions: transitive closure of <span class="inlinecode"><span class="id" title="var">R</span></span>. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Inductive</span> <a name="plus"><span class="id" title="inductive">plus</span></a>: <a class="idref" href="Sequences.html#SEQUENCES.A"><span class="id" title="variable">A</span></a> <span class="id" title="notation">→</span> <a class="idref" href="Sequences.html#SEQUENCES.A"><span class="id" title="variable">A</span></a> <span class="id" title="notation">→</span> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;| <a name="plus_left"><span class="id" title="constructor">plus_left</span></a>: <span class="id" title="keyword">∀</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Sequences.html#SEQUENCES.R"><span class="id" title="variable">R</span></a> <a class="idref" href="Sequences.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="Sequences.html#b"><span class="id" title="variable">b</span></a> <span class="id" title="notation">→</span> <a class="idref" href="Sequences.html#star"><span class="id" title="inductive">star</span></a> <a class="idref" href="Sequences.html#b"><span class="id" title="variable">b</span></a> <a class="idref" href="Sequences.html#c"><span class="id" title="variable">c</span></a> <span class="id" title="notation">→</span> <a class="idref" href="Sequences.html#plus"><span class="id" title="inductive">plus</span></a> <a class="idref" href="Sequences.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="Sequences.html#c"><span class="id" title="variable">c</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="plus_one"><span class="id" title="lemma">plus_one</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>, <a class="idref" href="Sequences.html#SEQUENCES.R"><span class="id" title="variable">R</span></a> <a class="idref" href="Sequences.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="Sequences.html#b"><span class="id" title="variable">b</span></a> <span class="id" title="notation">→</span> <a class="idref" href="Sequences.html#plus"><span class="id" title="inductive">plus</span></a> <a class="idref" href="Sequences.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="Sequences.html#b"><span class="id" title="variable">b</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="Sequences.html#star"><span class="id" title="inductive">star</span></a>, <a class="idref" href="Sequences.html#plus"><span class="id" title="inductive">plus</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="plus_star"><span class="id" title="lemma">plus_star</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="Sequences.html#plus"><span class="id" title="inductive">plus</span></a> <a class="idref" href="Sequences.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="Sequences.html#b"><span class="id" title="variable">b</span></a> <span class="id" title="notation">→</span> <a class="idref" href="Sequences.html#star"><span class="id" title="inductive">star</span></a> <a class="idref" href="Sequences.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="Sequences.html#b"><span class="id" title="variable">b</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="Sequences.html#star"><span class="id" title="inductive">star</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="plus_star_trans"><span class="id" title="lemma">plus_star_trans</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>, <a class="idref" href="Sequences.html#plus"><span class="id" title="inductive">plus</span></a> <a class="idref" href="Sequences.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="Sequences.html#b"><span class="id" title="variable">b</span></a> <span class="id" title="notation">→</span> <a class="idref" href="Sequences.html#star"><span class="id" title="inductive">star</span></a> <a class="idref" href="Sequences.html#b"><span class="id" title="variable">b</span></a> <a class="idref" href="Sequences.html#c"><span class="id" title="variable">c</span></a> <span class="id" title="notation">→</span> <a class="idref" href="Sequences.html#plus"><span class="id" title="inductive">plus</span></a> <a class="idref" href="Sequences.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="Sequences.html#c"><span class="id" title="variable">c</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="Sequences.html#plus"><span class="id" title="inductive">plus</span></a>, <a class="idref" href="Sequences.html#star_trans"><span class="id" title="lemma">star_trans</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="star_plus_trans"><span class="id" title="lemma">star_plus_trans</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>, <a class="idref" href="Sequences.html#star"><span class="id" title="inductive">star</span></a> <a class="idref" href="Sequences.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="Sequences.html#b"><span class="id" title="variable">b</span></a> <span class="id" title="notation">→</span> <a class="idref" href="Sequences.html#plus"><span class="id" title="inductive">plus</span></a> <a class="idref" href="Sequences.html#b"><span class="id" title="variable">b</span></a> <a class="idref" href="Sequences.html#c"><span class="id" title="variable">c</span></a> <span class="id" title="notation">→</span> <a class="idref" href="Sequences.html#plus"><span class="id" title="inductive">plus</span></a> <a class="idref" href="Sequences.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="Sequences.html#c"><span class="id" title="variable">c</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="Sequences.html#plus"><span class="id" title="inductive">plus</span></a>, <a class="idref" href="Sequences.html#star"><span class="id" title="inductive">star</span></a>, <a class="idref" href="Sequences.html#star_trans"><span class="id" title="lemma">star_trans</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="plus_right"><span class="id" title="lemma">plus_right</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>, <a class="idref" href="Sequences.html#star"><span class="id" title="inductive">star</span></a> <a class="idref" href="Sequences.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="Sequences.html#b"><span class="id" title="variable">b</span></a> <span class="id" title="notation">→</span> <a class="idref" href="Sequences.html#SEQUENCES.R"><span class="id" title="variable">R</span></a> <a class="idref" href="Sequences.html#b"><span class="id" title="variable">b</span></a> <a class="idref" href="Sequences.html#c"><span class="id" title="variable">c</span></a> <span class="id" title="notation">→</span> <a class="idref" href="Sequences.html#plus"><span class="id" title="inductive">plus</span></a> <a class="idref" href="Sequences.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="Sequences.html#c"><span class="id" title="variable">c</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="Sequences.html#star_plus_trans"><span class="id" title="lemma">star_plus_trans</span></a>, <a class="idref" href="Sequences.html#plus_one"><span class="id" title="lemma">plus_one</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab35"></a><h2 class="section">Infinite sequences of transitions</h2>

<div class="paragraph"> </div>

 It is easy to characterize the fact that all transition sequences starting
  from a state <span class="inlinecode"><span class="id" title="var">a</span></span> are infinite: it suffices to say that any finite sequence
  starting from <span class="inlinecode"><span class="id" title="var">a</span></span> can always be extended by one more transition. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a name="all_seq_inf"><span class="id" title="definition">all_seq_inf</span></a> (<span class="id" title="var">a</span>: <a class="idref" href="Sequences.html#SEQUENCES.A"><span class="id" title="variable">A</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">b</span>, <a class="idref" href="Sequences.html#star"><span class="id" title="inductive">star</span></a> <a class="idref" href="Sequences.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="Sequences.html#b"><span class="id" title="variable">b</span></a> <span class="id" title="notation">→</span> <span class="id" title="notation">∃</span> <span class="id" title="var">c</span><span class="id" title="notation">,</span> <a class="idref" href="Sequences.html#SEQUENCES.R"><span class="id" title="variable">R</span></a> <a class="idref" href="Sequences.html#b"><span class="id" title="variable">b</span></a> <a class="idref" href="Sequences.html#c"><span class="id" title="variable">c</span></a>.<br/>

<br/>
</div>

<div class="doc">
However, this is not the notion we are trying to characterize: that, starting
  from <span class="inlinecode"><span class="id" title="var">a</span></span>, there exists one infinite sequence of transitions
  <span class="inlinecode"><span class="id" title="var">a</span></span> <span class="inlinecode">--&gt;</span> <span class="inlinecode"><span class="id" title="var">a1</span></span> <span class="inlinecode">--&gt;</span> <span class="inlinecode"><span class="id" title="var">a2</span></span> <span class="inlinecode">--&gt;</span> <span class="inlinecode">...</span> <span class="inlinecode">→</span> <span class="inlinecode"><span class="id" title="var">aN</span></span> <span class="inlinecode">→</span> <span class="inlinecode">...</span>.

<div class="paragraph"> </div>

  Indeed, consider <span class="inlinecode"><span class="id" title="var">A</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">nat</span></span> and <span class="inlinecode"><span class="id" title="var">R</span></span> such that <span class="inlinecode"><span class="id" title="var">R</span></span> <span class="inlinecode">0</span> <span class="inlinecode">0</span> and <span class="inlinecode"><span class="id" title="var">R</span></span> <span class="inlinecode">0</span> <span class="inlinecode">1</span>.
  <span class="inlinecode"><span class="id" title="var">all_seq_inf</span></span> <span class="inlinecode">0</span> does not hold, because a sequence <span class="inlinecode">0</span> <span class="inlinecode">--&gt;*</span> <span class="inlinecode">1</span> cannot be extended.
  Yet, <span class="inlinecode"><span class="id" title="var">R</span></span> admits an infinite sequence, namely <span class="inlinecode">0</span> <span class="inlinecode">--&gt;</span> <span class="inlinecode">0</span> <span class="inlinecode">--&gt;</span> <span class="inlinecode">...</span>.

<div class="paragraph"> </div>

  Another attempt would be to represent the sequence of states
  <span class="inlinecode"><span class="id" title="var">a0</span></span> <span class="inlinecode">--&gt;</span> <span class="inlinecode"><span class="id" title="var">a1</span></span> <span class="inlinecode">--&gt;</span> <span class="inlinecode"><span class="id" title="var">a2</span></span> <span class="inlinecode">--&gt;</span> <span class="inlinecode">...</span> <span class="inlinecode">→</span> <span class="inlinecode"><span class="id" title="var">aN</span></span> <span class="inlinecode">→</span> <span class="inlinecode">...</span> explicitly, as a function
  <span class="inlinecode"><span class="id" title="var">f</span>:</span> <span class="inlinecode"><span class="id" title="var">nat</span></span> <span class="inlinecode">→</span> <span class="inlinecode"><span class="id" title="var">A</span></span> such that <span class="inlinecode"><span class="id" title="var">f</span></span> <span class="inlinecode"><span class="id" title="var">i</span></span> is the <span class="inlinecode"><span class="id" title="var">i</span></span>-th state <span class="inlinecode"><span class="id" title="var">ai</span></span> of the sequence. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a name="infseq_with_function"><span class="id" title="definition">infseq_with_function</span></a> (<span class="id" title="var">a</span>: <a class="idref" href="Sequences.html#SEQUENCES.A"><span class="id" title="variable">A</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="notation">∃</span> <span class="id" title="var">f</span>: <span class="id" title="inductive">nat</span> <span class="id" title="notation">→</span> <a class="idref" href="Sequences.html#SEQUENCES.A"><span class="id" title="variable">A</span></a><span class="id" title="notation">,</span> <a class="idref" href="Sequences.html#f"><span class="id" title="variable">f</span></a> 0 <span class="id" title="notation">=</span> <a class="idref" href="Sequences.html#a"><span class="id" title="variable">a</span></a> <span class="id" title="notation">∧</span> <span class="id" title="keyword">∀</span> <span class="id" title="var">i</span>, <a class="idref" href="Sequences.html#SEQUENCES.R"><span class="id" title="variable">R</span></a> (<a class="idref" href="Sequences.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="Sequences.html#i"><span class="id" title="variable">i</span></a>) (<a class="idref" href="Sequences.html#f"><span class="id" title="variable">f</span></a> (1 <span class="id" title="notation">+</span> <a class="idref" href="Sequences.html#i"><span class="id" title="variable">i</span></a>)).<br/>

<br/>
</div>

<div class="doc">
This is a correct characterization of the existence of an infinite sequence
  of reductions.  However, it is very inconvenient to work with this definition
  in Coq's constructive logic: in most use cases, the function <span class="inlinecode"><span class="id" title="var">f</span></span> is not
  computable and therefore cannot be defined in Coq.  
<div class="paragraph"> </div>

 To obtain a practical definition of infinite sequences, we use the following
  coinductive definition of the predicate <span class="inlinecode"><span class="id" title="var">infseq</span></span> <span class="inlinecode"><span class="id" title="var">a</span></span>. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">CoInductive</span> <a name="infseq"><span class="id" title="inductive">infseq</span></a>: <a class="idref" href="Sequences.html#SEQUENCES.A"><span class="id" title="variable">A</span></a> <span class="id" title="notation">→</span> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;| <a name="infseq_step"><span class="id" title="constructor">infseq_step</span></a>: <span class="id" title="keyword">∀</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Sequences.html#SEQUENCES.R"><span class="id" title="variable">R</span></a> <a class="idref" href="Sequences.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="Sequences.html#b"><span class="id" title="variable">b</span></a> <span class="id" title="notation">→</span> <a class="idref" href="Sequences.html#infseq"><span class="id" title="inductive">infseq</span></a> <a class="idref" href="Sequences.html#b"><span class="id" title="variable">b</span></a> <span class="id" title="notation">→</span> <a class="idref" href="Sequences.html#infseq"><span class="id" title="inductive">infseq</span></a> <a class="idref" href="Sequences.html#a"><span class="id" title="variable">a</span></a>.<br/>

<br/>
</div>

<div class="doc">
An inductive predicate such as <span class="inlinecode"><span class="id" title="var">star</span></span> <span class="inlinecode"><span class="id" title="var">a</span></span> <span class="inlinecode"><span class="id" title="var">b</span></span> holds iff there exists a finite
  derivation of the conclusion <span class="inlinecode"><span class="id" title="var">star</span></span> <span class="inlinecode"><span class="id" title="var">a</span></span> <span class="inlinecode"><span class="id" title="var">b</span></span> that uses the constructors
  <span class="inlinecode"><span class="id" title="var">star_refl</span></span> and <span class="inlinecode"><span class="id" title="var">star_step</span></span> a finite number of times.

<div class="paragraph"> </div>

  A coinductive predicate is similar, but holds iff there exists a finite
  OR INFINITE derivation of the conclusion that uses the constructors
  of the predicate a finite OR INFINITE number of times.

<div class="paragraph"> </div>

  In other words, an inductive predicate is a smallest fixpoint: the smallest predicate
  that satisfies its constructors; a coinductive predicate is a greatest fixpoint:
  the largest predicate that satisfies its constructors.

<div class="paragraph"> </div>

  The <span class="inlinecode"><span class="id" title="var">infseq</span></span> predicate above must be defined coinductively.  Indeed, if
  we define it inductively, the predicate would be empty (always false),
  since there are no base cases!

<div class="paragraph"> </div>

  Coq provides some primitive support for constructing infinite derivations
  of facts such as <span class="inlinecode"><span class="id" title="var">infseq</span></span> <span class="inlinecode"><span class="id" title="var">a</span></span>.  Such constructions are proofs by coinduction.
  For example, we can prove the following: 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Remark</span> <a name="cycle_infseq"><span class="id" title="lemma">cycle_infseq</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">a</span>, <a class="idref" href="Sequences.html#SEQUENCES.R"><span class="id" title="variable">R</span></a> <a class="idref" href="Sequences.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="Sequences.html#a"><span class="id" title="variable">a</span></a> <span class="id" title="notation">→</span> <a class="idref" href="Sequences.html#infseq"><span class="id" title="inductive">infseq</span></a> <a class="idref" href="Sequences.html#a"><span class="id" title="variable">a</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="keyword">cofix</span> <span class="id" title="var">COINDHYP</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="Sequences.html#infseq_step"><span class="id" title="constructor">infseq_step</span></a> <span class="id" title="keyword">with</span> <span class="id" title="var">a</span>. <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">COINDHYP</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
This style of proof by coinduction, using the <span class="inlinecode"><span class="id" title="keyword">cofix</span></span> tactic, is effective
  but can run into limitations of Coq's proof engine (the so-called
  "guard condition").  However, we can derive more conventional
  coinduction principles that are often easier to use. 
<div class="paragraph"> </div>

 Consider a set <span class="inlinecode"><span class="id" title="var">X</span></span> of states <span class="inlinecode"><span class="id" title="var">A</span></span>, that is, a predicate <span class="inlinecode"><span class="id" title="var">X</span>:</span> <span class="inlinecode"><span class="id" title="var">A</span></span> <span class="inlinecode">→</span> <span class="inlinecode"><span class="id" title="keyword">Prop</span></span>.
  Assume that for every <span class="inlinecode"><span class="id" title="var">a</span></span> in <span class="inlinecode"><span class="id" title="var">X</span></span>, we can make one <span class="inlinecode"><span class="id" title="var">R</span></span> transition to a <span class="inlinecode"><span class="id" title="var">b</span></span>
  that is still in <span class="inlinecode"><span class="id" title="var">X</span></span>.  Then, starting from <span class="inlinecode"><span class="id" title="var">a</span></span> in <span class="inlinecode"><span class="id" title="var">X</span></span>, we can transition
  to some <span class="inlinecode"><span class="id" title="var">a1</span></span> in <span class="inlinecode"><span class="id" title="var">X</span></span>, then to some <span class="inlinecode"><span class="id" title="var">a2</span></span> still in <span class="inlinecode"><span class="id" title="var">X</span></span>, then... It is clear
  that we are just building an infinite sequence of transitions starting from
  <span class="inlinecode"><span class="id" title="var">a</span></span>. Therefore <span class="inlinecode"><span class="id" title="var">infseq</span></span> <span class="inlinecode"><span class="id" title="var">a</span></span> should hold.  Let's prove this! 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a name="infseq_coinduction_principle"><span class="id" title="lemma">infseq_coinduction_principle</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<span class="id" title="var">X</span>: <a class="idref" href="Sequences.html#SEQUENCES.A"><span class="id" title="variable">A</span></a> <span class="id" title="notation">→</span> <span class="id" title="keyword">Prop</span>),<br/>
&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="keyword">∀</span> <span class="id" title="var">a</span>, <a class="idref" href="Sequences.html#X"><span class="id" title="variable">X</span></a> <a class="idref" href="Sequences.html#a"><span class="id" title="variable">a</span></a> <span class="id" title="notation">→</span> <span class="id" title="notation">∃</span> <span class="id" title="var">b</span><span class="id" title="notation">,</span> <a class="idref" href="Sequences.html#SEQUENCES.R"><span class="id" title="variable">R</span></a> <a class="idref" href="Sequences.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="Sequences.html#b"><span class="id" title="variable">b</span></a> <span class="id" title="notation">∧</span> <a class="idref" href="Sequences.html#X"><span class="id" title="variable">X</span></a> <a class="idref" href="Sequences.html#b"><span class="id" title="variable">b</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">a</span>, <a class="idref" href="Sequences.html#X"><span class="id" title="variable">X</span></a> <a class="idref" href="Sequences.html#a"><span class="id" title="variable">a</span></a> <span class="id" title="notation">→</span> <a class="idref" href="Sequences.html#infseq"><span class="id" title="inductive">infseq</span></a> <a class="idref" href="Sequences.html#a"><span class="id" title="variable">a</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">X</span> <span class="id" title="var">P</span>. <span class="id" title="keyword">cofix</span> <span class="id" title="var">COINDHYP</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">P</span> <span class="id" title="var">a</span> <span class="id" title="var">H</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">b</span> [<span class="id" title="var">U</span> <span class="id" title="var">V</span>]]. <span class="id" title="tactic">apply</span> <a class="idref" href="Sequences.html#infseq_step"><span class="id" title="constructor">infseq_step</span></a> <span class="id" title="keyword">with</span> <span class="id" title="var">b</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
An even more useful variant of this coinduction principle considers a
  set <span class="inlinecode"><span class="id" title="var">X</span></span> where for every <span class="inlinecode"><span class="id" title="var">a</span></span> in <span class="inlinecode"><span class="id" title="var">X</span></span>, we can make one *or several* transitions
  to reach a <span class="inlinecode"><span class="id" title="var">b</span></span> in <span class="inlinecode"><span class="id" title="var">X</span></span>.  
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a name="infseq_coinduction_principle_2"><span class="id" title="lemma">infseq_coinduction_principle_2</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<span class="id" title="var">X</span>: <a class="idref" href="Sequences.html#SEQUENCES.A"><span class="id" title="variable">A</span></a> <span class="id" title="notation">→</span> <span class="id" title="keyword">Prop</span>),<br/>
&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="keyword">∀</span> <span class="id" title="var">a</span>, <a class="idref" href="Sequences.html#X"><span class="id" title="variable">X</span></a> <a class="idref" href="Sequences.html#a"><span class="id" title="variable">a</span></a> <span class="id" title="notation">→</span> <span class="id" title="notation">∃</span> <span class="id" title="var">b</span><span class="id" title="notation">,</span> <a class="idref" href="Sequences.html#plus"><span class="id" title="inductive">plus</span></a> <a class="idref" href="Sequences.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="Sequences.html#b"><span class="id" title="variable">b</span></a> <span class="id" title="notation">∧</span> <a class="idref" href="Sequences.html#X"><span class="id" title="variable">X</span></a> <a class="idref" href="Sequences.html#b"><span class="id" title="variable">b</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">a</span>, <a class="idref" href="Sequences.html#X"><span class="id" title="variable">X</span></a> <a class="idref" href="Sequences.html#a"><span class="id" title="variable">a</span></a> <span class="id" title="notation">→</span> <a class="idref" href="Sequences.html#infseq"><span class="id" title="inductive">infseq</span></a> <a class="idref" href="Sequences.html#a"><span class="id" title="variable">a</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Sequences.html#infseq_coinduction_principle"><span class="id" title="lemma">infseq_coinduction_principle</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">X</span> := <span class="id" title="keyword">fun</span> <span class="id" title="var">a</span> ⇒ <span class="id" title="notation">∃</span> <span class="id" title="var">b</span><span class="id" title="notation">,</span> <a class="idref" href="Sequences.html#star"><span class="id" title="inductive">star</span></a> <a class="idref" href="Sequences.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="Sequences.html#b"><span class="id" title="variable">b</span></a> <span class="id" title="notation">∧</span> <span class="id" title="var">X</span> <a class="idref" href="Sequences.html#b"><span class="id" title="variable">b</span></a>).<br/>
- <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">b</span> [<span class="id" title="var">STAR</span> <span class="id" title="var">Xb</span>]]. <span class="id" title="tactic">inversion</span> <span class="id" title="var">STAR</span>; <span class="id" title="tactic">subst</span>.<br/>
+ <span class="id" title="tactic">destruct</span> (<span class="id" title="var">H</span> <span class="id" title="var">b</span> <span class="id" title="var">Xb</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">c</span> [<span class="id" title="var">PLUS</span> <span class="id" title="var">Xc</span>]]. <span class="id" title="tactic">inversion</span> <span class="id" title="var">PLUS</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">b0</span>; <span class="id" title="tactic">split</span>. <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">∃</span> <span class="id" title="var">c</span>; <span class="id" title="tactic">auto</span>.<br/>
+ <span class="id" title="tactic">∃</span> <span class="id" title="var">b0</span>; <span class="id" title="tactic">split</span>. <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">∃</span> <span class="id" title="var">b</span>; <span class="id" title="tactic">auto</span>.<br/>
- <span class="id" title="tactic">∃</span> <span class="id" title="var">a</span>; <span class="id" title="tactic">split</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="Sequences.html#star_refl"><span class="id" title="constructor">star_refl</span></a>. <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Here is an example of use of <span class="inlinecode"><span class="id" title="var">infseq_coinduction_principle</span></span>:
  if all finite transition sequences starting at <span class="inlinecode"><span class="id" title="var">a</span></span> can be extended,
  <span class="inlinecode"><span class="id" title="var">infseq</span></span> <span class="inlinecode"><span class="id" title="var">a</span></span> holds. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a name="infseq_if_all_seq_inf"><span class="id" title="lemma">infseq_if_all_seq_inf</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">a</span>, <a class="idref" href="Sequences.html#all_seq_inf"><span class="id" title="definition">all_seq_inf</span></a> <a class="idref" href="Sequences.html#a"><span class="id" title="variable">a</span></a> <span class="id" title="notation">→</span> <a class="idref" href="Sequences.html#infseq"><span class="id" title="inductive">infseq</span></a> <a class="idref" href="Sequences.html#a"><span class="id" title="variable">a</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Sequences.html#infseq_coinduction_principle"><span class="id" title="lemma">infseq_coinduction_principle</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">destruct</span> (<span class="id" title="var">H</span> <span class="id" title="var">a</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">b</span> <span class="id" title="var">Rb</span>]. <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">b</span>; <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Sequences.html#all_seq_inf"><span class="id" title="definition">all_seq_inf</span></a>; <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="Sequences.html#star_step"><span class="id" title="constructor">star_step</span></a> <span class="id" title="keyword">with</span> <span class="id" title="var">b</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Likewise, the function-based characterization <span class="inlinecode"><span class="id" title="var">infseq_with_function</span></span>
  implies <span class="inlinecode"><span class="id" title="var">infseq</span></span>. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a name="infseq_from_function"><span class="id" title="lemma">infseq_from_function</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">a</span>, <a class="idref" href="Sequences.html#infseq_with_function"><span class="id" title="definition">infseq_with_function</span></a> <a class="idref" href="Sequences.html#a"><span class="id" title="variable">a</span></a> <span class="id" title="notation">→</span> <a class="idref" href="Sequences.html#infseq"><span class="id" title="inductive">infseq</span></a> <a class="idref" href="Sequences.html#a"><span class="id" title="variable">a</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Sequences.html#infseq_coinduction_principle"><span class="id" title="lemma">infseq_coinduction_principle</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">f</span> [<span class="id" title="var">P</span> <span class="id" title="var">Q</span>]].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">∃</span> (<span class="id" title="var">f</span> 1); <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">subst</span> <span class="id" title="var">a</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Q</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">∃</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">n</span> ⇒ <span class="id" title="var">f</span> (1 <span class="id" title="notation">+</span> <a class="idref" href="Sequences.html#n"><span class="id" title="variable">n</span></a>)); <span class="id" title="tactic">split</span>. <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Q</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Consider the transition sequences starting at state <span class="inlinecode"><span class="id" title="var">a</span></span>.
  They can be infinite, or they can be finite: after a number of transitions,
  we reach a state from with no transition is possible.  It is intuitively
  obvious that at least one of the two cases must hold.

<div class="paragraph"> </div>

  It is however impossible to prove this fact in Coq's constructive logic.
  Indeed, a constructive proof would be isomorphic (by the Curry-Howard isomorphism)
  to a terminating function that solves Turing's halting problem!

<div class="paragraph"> </div>

  To prove this fact, we must enrich Coq with axioms from classical logic,
  namely the axiom of excluded middle: for all propositions <span class="inlinecode"><span class="id" title="var">P</span></span>,
  either <span class="inlinecode"><span class="id" title="var">P</span></span> or <span class="inlinecode">¬<span class="id" title="var">P</span></span> hold.  The Coq standard library provides such axioms
  in the module named <span class="inlinecode"><span class="id" title="var">Classical</span></span>, which we imported above. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a name="irred"><span class="id" title="definition">irred</span></a> (<span class="id" title="var">a</span>: <a class="idref" href="Sequences.html#SEQUENCES.A"><span class="id" title="variable">A</span></a>) : <span class="id" title="keyword">Prop</span> := <span class="id" title="keyword">∀</span> <span class="id" title="var">b</span>, <span class="id" title="notation">~(</span><a class="idref" href="Sequences.html#SEQUENCES.R"><span class="id" title="variable">R</span></a> <a class="idref" href="Sequences.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="Sequences.html#b"><span class="id" title="variable">b</span></a><span class="id" title="notation">)</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="infseq_or_finseq"><span class="id" title="lemma">infseq_or_finseq</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">a</span>, <a class="idref" href="Sequences.html#infseq"><span class="id" title="inductive">infseq</span></a> <a class="idref" href="Sequences.html#a"><span class="id" title="variable">a</span></a> <span class="id" title="notation">∨</span> <span class="id" title="notation">∃</span> <span class="id" title="var">b</span><span class="id" title="notation">,</span> <a class="idref" href="Sequences.html#star"><span class="id" title="inductive">star</span></a> <a class="idref" href="Sequences.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="Sequences.html#b"><span class="id" title="variable">b</span></a> <span class="id" title="notation">∧</span> <a class="idref" href="Sequences.html#irred"><span class="id" title="definition">irred</span></a> <a class="idref" href="Sequences.html#b"><span class="id" title="variable">b</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="axiom">classic</span> (<span class="id" title="keyword">∀</span> <span class="id" title="var">b</span>, <a class="idref" href="Sequences.html#star"><span class="id" title="inductive">star</span></a> <span class="id" title="var">a</span> <a class="idref" href="Sequences.html#b"><span class="id" title="variable">b</span></a> <span class="id" title="notation">→</span> <span class="id" title="notation">∃</span> <span class="id" title="var">c</span><span class="id" title="notation">,</span> <a class="idref" href="Sequences.html#SEQUENCES.R"><span class="id" title="variable">R</span></a> <a class="idref" href="Sequences.html#b"><span class="id" title="variable">b</span></a> <a class="idref" href="Sequences.html#c"><span class="id" title="variable">c</span></a>)).<br/>
- <span class="id" title="tactic">left</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="Sequences.html#infseq_if_all_seq_inf"><span class="id" title="lemma">infseq_if_all_seq_inf</span></a>; <span class="id" title="tactic">auto</span>.<br/>
- <span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">not_all_ex_not</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">b</span> <span class="id" title="var">P</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">imply_to_and</span> <span class="id" title="tactic">in</span> <span class="id" title="var">P</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">P</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">U</span> <span class="id" title="var">V</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">b</span>; <span class="id" title="tactic">split</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">red</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">red</span>; <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">elim</span> <span class="id" title="var">V</span>. <span class="id" title="tactic">∃</span> <span class="id" title="var">b0</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab36"></a><h2 class="section">Determinism properties for functional transition relations.</h2>

<div class="paragraph"> </div>

 A transition relation is functional if every state can transition to at most
  one other state. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Hypothesis</span> <a name="SEQUENCES.R_functional"><span class="id" title="variable">R_functional</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>, <a class="idref" href="Sequences.html#SEQUENCES.R"><span class="id" title="variable">R</span></a> <a class="idref" href="Sequences.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="Sequences.html#b"><span class="id" title="variable">b</span></a> <span class="id" title="notation">→</span> <a class="idref" href="Sequences.html#SEQUENCES.R"><span class="id" title="variable">R</span></a> <a class="idref" href="Sequences.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="Sequences.html#c"><span class="id" title="variable">c</span></a> <span class="id" title="notation">→</span> <a class="idref" href="Sequences.html#b"><span class="id" title="variable">b</span></a> <span class="id" title="notation">=</span> <a class="idref" href="Sequences.html#c"><span class="id" title="variable">c</span></a>.<br/>

<br/>
</div>

<div class="doc">
Uniqueness of finite transition sequences. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a name="star_star_inv"><span class="id" title="lemma">star_star_inv</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>, <a class="idref" href="Sequences.html#star"><span class="id" title="inductive">star</span></a> <a class="idref" href="Sequences.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="Sequences.html#b"><span class="id" title="variable">b</span></a> <span class="id" title="notation">→</span> <span class="id" title="keyword">∀</span> <span class="id" title="var">c</span>, <a class="idref" href="Sequences.html#star"><span class="id" title="inductive">star</span></a> <a class="idref" href="Sequences.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="Sequences.html#c"><span class="id" title="variable">c</span></a> <span class="id" title="notation">→</span> <a class="idref" href="Sequences.html#star"><span class="id" title="inductive">star</span></a> <a class="idref" href="Sequences.html#b"><span class="id" title="variable">b</span></a> <a class="idref" href="Sequences.html#c"><span class="id" title="variable">c</span></a> <span class="id" title="notation">∨</span> <a class="idref" href="Sequences.html#star"><span class="id" title="inductive">star</span></a> <a class="idref" href="Sequences.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="Sequences.html#b"><span class="id" title="variable">b</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> 1; <span class="id" title="tactic">intros</span>.<br/>
- <span class="id" title="tactic">auto</span>.<br/>
- <span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>; <span class="id" title="tactic">subst</span>.<br/>
+ <span class="id" title="tactic">right</span>. <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="Sequences.html#star"><span class="id" title="inductive">star</span></a>.<br/>
+ <span class="id" title="tactic">assert</span> (<span class="id" title="var">b</span> <span class="id" title="notation">=</span> <span class="id" title="var">b0</span>) <span class="id" title="tactic">by</span> (<span class="id" title="tactic">eapply</span> <a class="idref" href="Sequences.html#SEQUENCES.R_functional"><span class="id" title="variable">R_functional</span></a>; <span class="id" title="tactic">eauto</span>). <span class="id" title="tactic">subst</span> <span class="id" title="var">b0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHstar</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="finseq_unique"><span class="id" title="lemma">finseq_unique</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">b'</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="Sequences.html#star"><span class="id" title="inductive">star</span></a> <a class="idref" href="Sequences.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="Sequences.html#b"><span class="id" title="variable">b</span></a> <span class="id" title="notation">→</span> <a class="idref" href="Sequences.html#irred"><span class="id" title="definition">irred</span></a> <a class="idref" href="Sequences.html#b"><span class="id" title="variable">b</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<a class="idref" href="Sequences.html#star"><span class="id" title="inductive">star</span></a> <a class="idref" href="Sequences.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="Sequences.html#b'"><span class="id" title="variable">b'</span></a> <span class="id" title="notation">→</span> <a class="idref" href="Sequences.html#irred"><span class="id" title="definition">irred</span></a> <a class="idref" href="Sequences.html#b'"><span class="id" title="variable">b'</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<a class="idref" href="Sequences.html#b"><span class="id" title="variable">b</span></a> <span class="id" title="notation">=</span> <a class="idref" href="Sequences.html#b'"><span class="id" title="variable">b'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">destruct</span> (<a class="idref" href="Sequences.html#star_star_inv"><span class="id" title="lemma">star_star_inv</span></a> <span class="id" title="var">H</span> <span class="id" title="var">H1</span>).<br/>
- <span class="id" title="tactic">inversion</span> <span class="id" title="var">H3</span>; <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">elim</span> (<span class="id" title="var">H0</span> <span class="id" title="var">_</span> <span class="id" title="var">H4</span>).<br/>
- <span class="id" title="tactic">inversion</span> <span class="id" title="var">H3</span>; <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">elim</span> (<span class="id" title="var">H2</span> <span class="id" title="var">_</span> <span class="id" title="var">H4</span>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
A state cannot both diverge and terminate on an irreducible state. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a name="infseq_star_inv"><span class="id" title="lemma">infseq_star_inv</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>, <a class="idref" href="Sequences.html#star"><span class="id" title="inductive">star</span></a> <a class="idref" href="Sequences.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="Sequences.html#b"><span class="id" title="variable">b</span></a> <span class="id" title="notation">→</span> <a class="idref" href="Sequences.html#infseq"><span class="id" title="inductive">infseq</span></a> <a class="idref" href="Sequences.html#a"><span class="id" title="variable">a</span></a> <span class="id" title="notation">→</span> <a class="idref" href="Sequences.html#infseq"><span class="id" title="inductive">infseq</span></a> <a class="idref" href="Sequences.html#b"><span class="id" title="variable">b</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> 1; <span class="id" title="tactic">intros</span>.<br/>
- <span class="id" title="tactic">auto</span>.<br/>
- <span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">b</span> <span class="id" title="notation">=</span> <span class="id" title="var">b0</span>) <span class="id" title="tactic">by</span> (<span class="id" title="tactic">eapply</span> <a class="idref" href="Sequences.html#SEQUENCES.R_functional"><span class="id" title="variable">R_functional</span></a>; <span class="id" title="tactic">eauto</span>). <span class="id" title="tactic">subst</span> <span class="id" title="var">b0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHstar</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="infseq_finseq_excl"><span class="id" title="lemma">infseq_finseq_excl</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="Sequences.html#star"><span class="id" title="inductive">star</span></a> <a class="idref" href="Sequences.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="Sequences.html#b"><span class="id" title="variable">b</span></a> <span class="id" title="notation">→</span> <a class="idref" href="Sequences.html#irred"><span class="id" title="definition">irred</span></a> <a class="idref" href="Sequences.html#b"><span class="id" title="variable">b</span></a> <span class="id" title="notation">→</span> <a class="idref" href="Sequences.html#infseq"><span class="id" title="inductive">infseq</span></a> <a class="idref" href="Sequences.html#a"><span class="id" title="variable">a</span></a> <span class="id" title="notation">→</span> <span class="id" title="inductive">False</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="Sequences.html#infseq"><span class="id" title="inductive">infseq</span></a> <span class="id" title="var">b</span>) <span class="id" title="tactic">by</span> (<span class="id" title="tactic">eapply</span> <a class="idref" href="Sequences.html#infseq_star_inv"><span class="id" title="lemma">infseq_star_inv</span></a>; <span class="id" title="tactic">eauto</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">elim</span> (<span class="id" title="var">H0</span> <span class="id" title="var">b0</span>); <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
If there exists an infinite sequence of transitions from <span class="inlinecode"><span class="id" title="var">a</span></span>,
  all sequences of transitions arising from <span class="inlinecode"><span class="id" title="var">a</span></span> are infinite. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a name="infseq_all_seq_inf"><span class="id" title="lemma">infseq_all_seq_inf</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">a</span>, <a class="idref" href="Sequences.html#infseq"><span class="id" title="inductive">infseq</span></a> <a class="idref" href="Sequences.html#a"><span class="id" title="variable">a</span></a> <span class="id" title="notation">→</span> <a class="idref" href="Sequences.html#all_seq_inf"><span class="id" title="definition">all_seq_inf</span></a> <a class="idref" href="Sequences.html#a"><span class="id" title="variable">a</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="Sequences.html#all_seq_inf"><span class="id" title="definition">all_seq_inf</span></a>. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="Sequences.html#infseq"><span class="id" title="inductive">infseq</span></a> <span class="id" title="var">b</span>) <span class="id" title="tactic">by</span> (<span class="id" title="tactic">eapply</span> <a class="idref" href="Sequences.html#infseq_star_inv"><span class="id" title="lemma">infseq_star_inv</span></a>; <span class="id" title="tactic">eauto</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">∃</span> <span class="id" title="var">b0</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="Sequences.html#SEQUENCES"><span class="id" title="section">SEQUENCES</span></a>.<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/tebbi/coqdocjs">CoqdocJS</a>
</div>
</div>
</body>

</html>
