<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="assets/resources/coqdoc.css" rel="stylesheet" type="text/css" />
<link href="assets/resources/coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="assets/resources/config.js"></script>
<script type="text/javascript" src="assets/resources/coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="../README.html">README</a>
      <a href="./indexpage.html"> Index </a>
      <a href="./toc.html"> Table of Contents </a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<h1 class="libtitle">DOT.HeapEffInit.SubHeapFree</h1>

<div class="code">

<br/>
<span class="id" title="keyword">Set Implicit Arguments</span>.<br/>

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="DOT.Lib.LibExtra.html#"><span class="id" title="library">LibExtra</span></a> <a class="idref" href="DOT.Lib.DotTactics.html#"><span class="id" title="library">DotTactics</span></a> <a class="idref" href="DOT.Definitions.Syntax.AbstractSyntax.html#"><span class="id" title="library">AbstractSyntax</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="DOT.Definitions.TypingClasses.Typing.html#"><span class="id" title="library">Typing</span></a> <a class="idref" href="DOT.Definitions.Effects.Effects.html#"><span class="id" title="library">Effects</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Initialization.InitVar.html#"><span class="id" title="library">InitVar</span></a> <a class="idref" href="DOT.Initialization.InitVarSubtyping.html#"><span class="id" title="library">InitVarSubtyping</span></a> <a class="idref" href="DOT.Definitions.Initialization.InitTyping.html#"><span class="id" title="library">InitTyping</span></a> <a class="idref" href="DOT.Initialization.InitWeakening.html#"><span class="id" title="library">InitWeakening</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Definitions.Typing.GeneralTyping.html#"><span class="id" title="library">GeneralTyping</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="DOT.CanonicalForms.HeapCorrespondence.html#"><span class="id" title="library">HeapCorrespondence</span></a> <a class="idref" href="DOT.Definitions.OperationalSemantics.HeapUpdate.html#"><span class="id" title="library">HeapUpdate</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="DOT.HeapEffInit.HeapCommit.html#"><span class="id" title="library">HeapCommit</span></a> <a class="idref" href="DOT.Definitions.PointsTo.WellPointed.html#"><span class="id" title="library">WellPointed</span></a> <a class="idref" href="DOT.HeapEffInit.HeapItemFree.html#"><span class="id" title="library">HeapItemFree</span></a>.<br/>

<br/>
<span class="id" title="keyword">Implicit</span> <span class="id" title="keyword">Types</span> (<span class="id" title="var">Delta</span> : <a class="idref" href="DOT.Definitions.Syntax.Types.html#init_ctx"><span class="id" title="abbreviation">init_ctx</span></a>) (<span class="id" title="var">Sigma</span> : <a class="idref" href="DOT.Definitions.Syntax.AbstractMachine.html#heap"><span class="id" title="abbreviation">heap</span></a>) (<span class="id" title="var">ℰ</span> : <a class="idref" href="DOT.Definitions.Effects.Effects.html#eff_ctx"><span class="id" title="abbreviation">eff_ctx</span></a>).<br/>

<br/>
</div>

<div class="doc">
<a name="lab12"></a><h1 class="section">Free Sub heaps</h1>

</div>
<div class="code">
<span class="comment">(*&nbsp;Denotes&nbsp;a&nbsp;valid&nbsp;free&nbsp;topmost&nbsp;heap&nbsp;as&nbsp;ℰ&nbsp;captures&nbsp;only&nbsp;the&nbsp;effects&nbsp;for&nbsp;one<br/>
&nbsp;&nbsp;&nbsp;object&nbsp;*)</span><br/>
<span class="id" title="keyword">Definition</span> <a name="free_sub_heap"><span class="id" title="definition">free_sub_heap</span></a> (<span class="id" title="var">ℰ</span> : <a class="idref" href="DOT.Definitions.Effects.Effects.html#eff_ctx"><span class="id" title="abbreviation">eff_ctx</span></a>) (<span class="id" title="var">Sigma</span> : <a class="idref" href="DOT.Definitions.Syntax.AbstractMachine.html#heap"><span class="id" title="abbreviation">heap</span></a>) (<span class="id" title="var">Delta</span> : <a class="idref" href="DOT.Definitions.Syntax.Types.html#init_ctx"><span class="id" title="abbreviation">init_ctx</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> <span class="id" title="var">effs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;The&nbsp;next&nbsp;two&nbsp;lines&nbsp;simply&nbsp;say&nbsp;that&nbsp;ℰ&nbsp;only&nbsp;contains&nbsp;effects&nbsp;for&nbsp;a&nbsp;single<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;variable&nbsp;x&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">binds</span> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#effs"><span class="id" title="variable">effs</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#dc1b905d8ef0ab32d16a033ee43ce82f"><span class="id" title="variable">ℰ</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="keyword">forall</span> <span class="id" title="var">y</span> <span class="id" title="var">a</span>, <span class="id" title="notation">(</span><a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#y"><span class="id" title="variable">y</span></a><span class="id" title="notation">,</span><a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#a"><span class="id" title="variable">a</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">\</span><span class="id" title="notation">in</span> <span class="id" title="notation">(</span><span class="id" title="definition">from_list</span> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#effs"><span class="id" title="variable">effs</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">-&gt;</span> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#y"><span class="id" title="variable">y</span></a> <span class="id" title="notation">=</span> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#x"><span class="id" title="variable">x</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">/\</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;For&nbsp;that&nbsp;single&nbsp;variable&nbsp;x,&nbsp;the&nbsp;heap&nbsp;Sigma&nbsp;bounds&nbsp;x&nbsp;to&nbsp;some&nbsp;item&nbsp;itm&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">exists</span> <span class="id" title="var">itm</span><span class="id" title="notation">,</span> <span class="id" title="definition">binds</span> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#itm"><span class="id" title="variable">itm</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#Sigma"><span class="id" title="variable">Sigma</span></a> <span class="id" title="notation">/\</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;And&nbsp;this&nbsp;heap&nbsp;item&nbsp;itm&nbsp;is&nbsp;free&nbsp;with&nbsp;relation&nbsp;to&nbsp;x.&nbsp;That&nbsp;is,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(by&nbsp;inverting&nbsp;the&nbsp;definitions&nbsp;of&nbsp;free_heap_item)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;x&nbsp;is&nbsp;free<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;ℰ&nbsp;states&nbsp;that&nbsp;the&nbsp;null&nbsp;fields&nbsp;of&nbsp;x,&nbsp;(i.e.&nbsp;the&nbsp;defs&nbsp;in&nbsp;itm<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;must&nbsp;be&nbsp;assigned<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;If&nbsp;x.a&nbsp;=&nbsp;z&nbsp;for&nbsp;some&nbsp;z&nbsp;then&nbsp;either&nbsp;z&nbsp;is&nbsp;committed<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;according&nbsp;to&nbsp;Delta&nbsp;or&nbsp;it's&nbsp;free&nbsp;but&nbsp;will&nbsp;be&nbsp;assigned&nbsp;according<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;to&nbsp;ℰ.&nbsp;This&nbsp;should&nbsp;be&nbsp;equivalent&nbsp;to&nbsp;pointing&nbsp;to&nbsp;a&nbsp;free&nbsp;object<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;in&nbsp;the&nbsp;same&nbsp;free&nbsp;sub-heap&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.HeapEffInit.HeapItemFree.html#free_heap_item"><span class="id" title="inductive">free_heap_item</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#Delta"><span class="id" title="variable">Delta</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#dc1b905d8ef0ab32d16a033ee43ce82f"><span class="id" title="variable">ℰ</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#itm"><span class="id" title="variable">itm</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab13"></a><h1 class="section">Effect Correspondence</h1>
 This is needed for preservation 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a name="eff_ctx_corr_one"><span class="id" title="definition">eff_ctx_corr_one</span></a> (<span class="id" title="var">ℰ</span> : <a class="idref" href="DOT.Definitions.Effects.Effects.html#eff_ctx"><span class="id" title="abbreviation">eff_ctx</span></a>) <span class="id" title="var">effs</span> :=<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;effs&nbsp;corresponds&nbsp;with&nbsp;ℰ&nbsp;means&nbsp;that&nbsp;for&nbsp;each&nbsp;(x,&nbsp;effs')&nbsp;\in&nbsp;ℰ,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;one&nbsp;has&nbsp;that&nbsp;effs'&nbsp;\subseteq&nbsp;effs.&nbsp;In&nbsp;essence&nbsp;effs&nbsp;says&nbsp;that&nbsp;at&nbsp;least<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;as&nbsp;many&nbsp;fields&nbsp;in&nbsp;effs'&nbsp;should&nbsp;be&nbsp;assigned&nbsp;*)</span><br/>
&nbsp;&nbsp;(<span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> <span class="id" title="var">effs'</span>, <span class="id" title="definition">binds</span> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#effs'"><span class="id" title="variable">effs'</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#dc1b905d8ef0ab32d16a033ee43ce82f"><span class="id" title="variable">ℰ</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">eff</span>, <span class="id" title="notation">(</span><a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#eff"><span class="id" title="variable">eff</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">in</span> <span class="id" title="notation">(</span><span class="id" title="definition">from_list</span> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#effs'"><span class="id" title="variable">effs'</span></a><span class="id" title="notation">)</span><span class="id" title="notation">)</span> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#eff"><span class="id" title="variable">eff</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">in</span> <span class="id" title="notation">(</span><span class="id" title="definition">from_list</span> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#effs"><span class="id" title="variable">effs</span></a><span class="id" title="notation">)</span><span class="id" title="notation">)</span>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="eff_ctx_corr_one_empty"><span class="id" title="lemma">eff_ctx_corr_one_empty</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">effs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#eff_ctx_corr_one"><span class="id" title="definition">eff_ctx_corr_one</span></a> <span class="id" title="axiom">empty</span> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#effs"><span class="id" title="variable">effs</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#eff_ctx_corr_one"><span class="id" title="definition">eff_ctx_corr_one</span></a>; <span class="id" title="tactic">intros</span>; <span class="id" title="var">exfalso</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <span class="id" title="lemma">binds_empty_inv</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a name="Domains"><span class="id" title="section">Domains</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Hint Resolve</span> <span class="id" title="var">free_heap_item_in_effs</span> <span class="id" title="var">free_heap_item_in_inits</span> : <span class="id" title="var">core</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Hint Resolve</span> <span class="id" title="var">binds_to_dom</span> : <span class="id" title="var">core</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="free_sub_heap_effs_dom_inits"><span class="id" title="lemma">free_sub_heap_effs_dom_inits</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">ℰ</span> <span class="id" title="var">Delta</span> <span class="id" title="var">Sigma</span> <span class="id" title="var">x</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#free_sub_heap"><span class="id" title="definition">free_sub_heap</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#dc1b905d8ef0ab32d16a033ee43ce82f"><span class="id" title="variable">ℰ</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#Sigma"><span class="id" title="variable">Sigma</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#Delta"><span class="id" title="variable">Delta</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">in</span> <span class="id" title="axiom">dom</span> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#dc1b905d8ef0ab32d16a033ee43ce82f"><span class="id" title="variable">ℰ</span></a> <span class="id" title="notation">-&gt;</span> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">in</span> <span class="id" title="axiom">dom</span> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#Delta"><span class="id" title="variable">Delta</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#free_sub_heap"><span class="id" title="definition">free_sub_heap</span></a>; <span class="id" title="var">introv</span> <span class="id" title="var">Hfsh</span> <span class="id" title="var">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#dom_to_binds"><span class="id" title="lemma">dom_to_binds</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hin</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hin</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">v</span> <span class="id" title="var">HbiE</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hfsh</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">HbiE</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">_</span> [<span class="id" title="var">itm</span> [<span class="id" title="var">HbiS</span> <span class="id" title="var">Hfhi</span>]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="free_sub_heap_effs_dom_inits'"><span class="id" title="lemma">free_sub_heap_effs_dom_inits'</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">ℰ</span> <span class="id" title="var">Delta</span> <span class="id" title="var">Sigma</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#free_sub_heap"><span class="id" title="definition">free_sub_heap</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#dc1b905d8ef0ab32d16a033ee43ce82f"><span class="id" title="variable">ℰ</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#Sigma"><span class="id" title="variable">Sigma</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#Delta"><span class="id" title="variable">Delta</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">x</span>, <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">in</span> <span class="id" title="axiom">dom</span> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#dc1b905d8ef0ab32d16a033ee43ce82f"><span class="id" title="variable">ℰ</span></a> <span class="id" title="notation">-&gt;</span> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">in</span> <span class="id" title="axiom">dom</span> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#Delta"><span class="id" title="variable">Delta</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#free_sub_heap_effs_dom_inits"><span class="id" title="lemma">free_sub_heap_effs_dom_inits</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="free_sub_heap_effs_dom_heap"><span class="id" title="lemma">free_sub_heap_effs_dom_heap</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">ℰ</span> <span class="id" title="var">Delta</span> <span class="id" title="var">Sigma</span> <span class="id" title="var">x</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#free_sub_heap"><span class="id" title="definition">free_sub_heap</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#dc1b905d8ef0ab32d16a033ee43ce82f"><span class="id" title="variable">ℰ</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#Sigma"><span class="id" title="variable">Sigma</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#Delta"><span class="id" title="variable">Delta</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">in</span> <span class="id" title="axiom">dom</span> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#dc1b905d8ef0ab32d16a033ee43ce82f"><span class="id" title="variable">ℰ</span></a> <span class="id" title="notation">-&gt;</span> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">in</span> <span class="id" title="axiom">dom</span> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#Sigma"><span class="id" title="variable">Sigma</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#free_sub_heap"><span class="id" title="definition">free_sub_heap</span></a>; <span class="id" title="var">introv</span> <span class="id" title="var">Hfsh</span> <span class="id" title="var">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#dom_to_binds"><span class="id" title="lemma">dom_to_binds</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hin</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hin</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">v</span> <span class="id" title="var">HbiE</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hfsh</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">HbiE</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">_</span> [<span class="id" title="var">itm</span> [<span class="id" title="var">HbiS</span> <span class="id" title="var">Hfhi</span>]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Hint Resolve</span> <span class="id" title="var">free_sub_heap_effs_dom_inits</span> : <span class="id" title="var">core</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="free_sub_heap_fresh_inits"><span class="id" title="lemma">free_sub_heap_fresh_inits</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">ℰ</span> <span class="id" title="var">Delta</span> <span class="id" title="var">Sigma</span> <span class="id" title="var">x</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#free_sub_heap"><span class="id" title="definition">free_sub_heap</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#dc1b905d8ef0ab32d16a033ee43ce82f"><span class="id" title="variable">ℰ</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#Sigma"><span class="id" title="variable">Sigma</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#Delta"><span class="id" title="variable">Delta</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">#</span> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#Delta"><span class="id" title="variable">Delta</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">#</span> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#dc1b905d8ef0ab32d16a033ee43ce82f"><span class="id" title="variable">ℰ</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">intro</span> <span class="id" title="var">Contra</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Hint Resolve</span> <span class="id" title="var">free_sub_heap_effs_dom_heap</span> : <span class="id" title="var">core</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="free_sub_heap_fresh_heap"><span class="id" title="lemma">free_sub_heap_fresh_heap</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">ℰ</span> <span class="id" title="var">Delta</span> <span class="id" title="var">Sigma</span> <span class="id" title="var">x</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#free_sub_heap"><span class="id" title="definition">free_sub_heap</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#dc1b905d8ef0ab32d16a033ee43ce82f"><span class="id" title="variable">ℰ</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#Sigma"><span class="id" title="variable">Sigma</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#Delta"><span class="id" title="variable">Delta</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">#</span> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#Sigma"><span class="id" title="variable">Sigma</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">#</span> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#dc1b905d8ef0ab32d16a033ee43ce82f"><span class="id" title="variable">ℰ</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">intro</span> <span class="id" title="var">Contra</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#Domains"><span class="id" title="section">Domains</span></a>.<br/>
<span class="id" title="keyword">Local Hint Resolve</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">free_sub_heap_fresh_heap</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">free_sub_heap_fresh_inits</span> : <span class="id" title="var">core</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab14"></a><h2 class="section">Weakening Lemmas for <span class="inlinecode"><span class="id" title="var">free_sub_heap</span></span></h2>

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="free_sub_heap_empty"><span class="id" title="lemma">free_sub_heap_empty</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">Sigma</span> <span class="id" title="var">Delta</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#free_sub_heap"><span class="id" title="definition">free_sub_heap</span></a> <span class="id" title="axiom">empty</span> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#Sigma"><span class="id" title="variable">Sigma</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#Delta"><span class="id" title="variable">Delta</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#free_sub_heap"><span class="id" title="definition">free_sub_heap</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="var">exfalso</span>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <span class="id" title="lemma">binds_empty_inv</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Local Hint Resolve</span> <span class="id" title="var">free_sub_heap_empty</span> : <span class="id" title="var">core</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab15"></a><h2 class="section">Pushing Lemmas for <span class="inlinecode"><span class="id" title="var">free_sub_heap</span></span></h2>

</div>
<div class="code">
<span class="id" title="keyword">Local Hint Resolve</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">free_heap_item_weaken_inits</span> <span class="id" title="var">free_heap_item_weaken_effs</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">free_heap_item_push_obj</span> <span class="id" title="var">free_heap_item_first_obj</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">binds_push_fresh</span> <span class="id" title="var">binds_push_neq</span> : <span class="id" title="var">core</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="free_sub_heap_push_fresh"><span class="id" title="lemma">free_sub_heap_push_fresh</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">ℰ</span> <span class="id" title="var">Sigma</span> <span class="id" title="var">Delta</span> <span class="id" title="var">x</span> <span class="id" title="var">itm</span> <span class="id" title="var">i</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#free_sub_heap"><span class="id" title="definition">free_sub_heap</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#dc1b905d8ef0ab32d16a033ee43ce82f"><span class="id" title="variable">ℰ</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#Sigma"><span class="id" title="variable">Sigma</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#Delta"><span class="id" title="variable">Delta</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">#</span> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#Sigma"><span class="id" title="variable">Sigma</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">#</span> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#Delta"><span class="id" title="variable">Delta</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#free_sub_heap"><span class="id" title="definition">free_sub_heap</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#dc1b905d8ef0ab32d16a033ee43ce82f"><span class="id" title="variable">ℰ</span></a> (<a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#Sigma"><span class="id" title="variable">Sigma</span></a> <span class="id" title="notation">&amp;</span> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">~</span> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#itm"><span class="id" title="variable">itm</span></a>) (<a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#Delta"><span class="id" title="variable">Delta</span></a> <span class="id" title="notation">&amp;</span> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">~</span> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#i"><span class="id" title="variable">i</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#free_sub_heap"><span class="id" title="definition">free_sub_heap</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hfsh</span> <span class="id" title="var">HfrS</span> <span class="id" title="var">HfrD</span> <span class="id" title="var">HbiE</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hfsh</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">HbiE</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">Heqs</span> [<span class="id" title="var">itm'</span> [<span class="id" title="var">HbiD</span> <span class="id" title="var">Hfhi</span>]]].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">itm'</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="free_sub_heap_push_obj"><span class="id" title="lemma">free_sub_heap_push_obj</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">ℰ</span> <span class="id" title="var">Sigma</span> <span class="id" title="var">Delta</span> <span class="id" title="var">x</span> <span class="id" title="var">T</span> <span class="id" title="var">ds</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#free_sub_heap"><span class="id" title="definition">free_sub_heap</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#dc1b905d8ef0ab32d16a033ee43ce82f"><span class="id" title="variable">ℰ</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#Sigma"><span class="id" title="variable">Sigma</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#Delta"><span class="id" title="variable">Delta</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">#</span> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#Sigma"><span class="id" title="variable">Sigma</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">#</span> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#Delta"><span class="id" title="variable">Delta</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#free_sub_heap"><span class="id" title="definition">free_sub_heap</span></a> (<a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#dc1b905d8ef0ab32d16a033ee43ce82f"><span class="id" title="variable">ℰ</span></a> <span class="id" title="notation">&amp;</span> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">~</span> <a class="idref" href="DOT.HeapEffInit.HeapItemFree.html#heap_defs_effs"><span class="id" title="definition">heap_defs_effs</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#x"><span class="id" title="variable">x</span></a> (<a class="idref" href="DOT.Definitions.Syntax.Items.html#heap_defs_of_defs"><span class="id" title="definition">heap_defs_of_defs</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#ds"><span class="id" title="variable">ds</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#Sigma"><span class="id" title="variable">Sigma</span></a> <span class="id" title="notation">&amp;</span> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">~</span> <a class="idref" href="DOT.Definitions.Syntax.Items.html#item_obj"><span class="id" title="constructor">item_obj</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#T"><span class="id" title="variable">T</span></a> (<a class="idref" href="DOT.Definitions.Syntax.Items.html#heap_defs_of_defs"><span class="id" title="definition">heap_defs_of_defs</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#ds"><span class="id" title="variable">ds</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#Delta"><span class="id" title="variable">Delta</span></a> <span class="id" title="notation">&amp;</span> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">~</span> <a class="idref" href="DOT.Definitions.Syntax.Types.html#free"><span class="id" title="constructor">free</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#free_sub_heap"><span class="id" title="definition">free_sub_heap</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hfsh</span> <span class="id" title="var">HfrS</span> <span class="id" title="var">HfrD</span> <span class="id" title="var">HbiE</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">binds_push_inv</span> <span class="id" title="tactic">in</span> <span class="id" title="var">HbiE</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">HbiE</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">Heq</span> <span class="id" title="var">Heq'</span>] | [<span class="id" title="var">Hneq</span> <span class="id" title="var">HbiE</span>]]; <span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">eauto</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">solve</span> [<span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">eauto</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="var">Hfsh</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">HbiE</span>) <span class="id" title="keyword">as</span> [?<span class="id" title="var">H</span> [<span class="id" title="var">itm</span> [?<span class="id" title="var">H</span> ?<span class="id" title="var">H</span>]]]; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">itm</span>; <span class="id" title="tactic">split</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Local Hint Resolve</span> <span class="id" title="var">free_sub_heap_push_obj</span> : <span class="id" title="var">core</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="free_sub_heap_first_obj"><span class="id" title="lemma">free_sub_heap_first_obj</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">ℰ</span> <span class="id" title="var">Sigma</span> <span class="id" title="var">Delta</span> <span class="id" title="var">x</span> <span class="id" title="var">T</span> <span class="id" title="var">ds</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#free_sub_heap"><span class="id" title="definition">free_sub_heap</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#dc1b905d8ef0ab32d16a033ee43ce82f"><span class="id" title="variable">ℰ</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#Sigma"><span class="id" title="variable">Sigma</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#Delta"><span class="id" title="variable">Delta</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">#</span> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#Sigma"><span class="id" title="variable">Sigma</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">#</span> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#Delta"><span class="id" title="variable">Delta</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#free_sub_heap"><span class="id" title="definition">free_sub_heap</span></a> (<a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">~</span> <span class="id" title="notation">(</span><a class="idref" href="DOT.HeapEffInit.HeapItemFree.html#heap_defs_effs"><span class="id" title="definition">heap_defs_effs</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#x"><span class="id" title="variable">x</span></a> (<a class="idref" href="DOT.Definitions.Syntax.Items.html#heap_defs_of_defs"><span class="id" title="definition">heap_defs_of_defs</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#ds"><span class="id" title="variable">ds</span></a>)<span class="id" title="notation">)</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#Sigma"><span class="id" title="variable">Sigma</span></a> <span class="id" title="notation">&amp;</span> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">~</span> <a class="idref" href="DOT.Definitions.Syntax.Items.html#item_obj"><span class="id" title="constructor">item_obj</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#T"><span class="id" title="variable">T</span></a> (<a class="idref" href="DOT.Definitions.Syntax.Items.html#heap_defs_of_defs"><span class="id" title="definition">heap_defs_of_defs</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#ds"><span class="id" title="variable">ds</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#Delta"><span class="id" title="variable">Delta</span></a> <span class="id" title="notation">&amp;</span> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">~</span> <a class="idref" href="DOT.Definitions.Syntax.Types.html#free"><span class="id" title="constructor">free</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">rewrite</span> &lt;- (<span class="id" title="lemma">concat_empty_l</span> (<span class="id" title="var">x</span> <span class="id" title="notation">~</span> <span class="id" title="notation">(</span><a class="idref" href="DOT.HeapEffInit.HeapItemFree.html#heap_defs_effs"><span class="id" title="definition">heap_defs_effs</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span><span class="id" title="notation">)</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab16"></a><h1 class="section">Update Lemmas</h1>

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="free_sub_heap_correspondence_other"><span class="id" title="lemma">free_sub_heap_correspondence_other</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">Sigma</span> <span class="id" title="var">ℰ</span> <span class="id" title="var">Delta</span> <span class="id" title="var">x</span> <span class="id" title="var">a</span> <span class="id" title="var">y</span> <span class="id" title="var">Sigma'</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#free_sub_heap"><span class="id" title="definition">free_sub_heap</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#dc1b905d8ef0ab32d16a033ee43ce82f"><span class="id" title="variable">ℰ</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#Sigma"><span class="id" title="variable">Sigma</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#Delta"><span class="id" title="variable">Delta</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Definitions.OperationalSemantics.HeapUpdate.html#heap_update"><span class="id" title="definition">heap_update</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#Sigma"><span class="id" title="variable">Sigma</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#Sigma'"><span class="id" title="variable">Sigma'</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">#</span> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#dc1b905d8ef0ab32d16a033ee43ce82f"><span class="id" title="variable">ℰ</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#free_sub_heap"><span class="id" title="definition">free_sub_heap</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#dc1b905d8ef0ab32d16a033ee43ce82f"><span class="id" title="variable">ℰ</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#Sigma'"><span class="id" title="variable">Sigma'</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#Delta"><span class="id" title="variable">Delta</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="DOT.Definitions.OperationalSemantics.HeapUpdate.html#heap_update"><span class="id" title="definition">heap_update</span></a>, <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#free_sub_heap"><span class="id" title="definition">free_sub_heap</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> * <span class="id" title="var">Hfsh</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">T</span> [<span class="id" title="var">hds</span> [<span class="id" title="var">hds'</span> [<span class="id" title="var">Sigma1</span> [<span class="id" title="var">Sigma2</span> [?<span class="id" title="var">Heq</span> [<span class="id" title="var">HfrS2</span> [<span class="id" title="var">Hup</span> ?<span class="id" title="var">Heq</span>]]]]]]]];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hfr</span> <span class="id" title="var">x'</span> <span class="id" title="var">effs</span> <span class="id" title="var">Hbi</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">x'</span> <span class="id" title="notation">&lt;&gt;</span> <span class="id" title="var">x</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hneq</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> (<span class="id" title="tactic">intro</span> <span class="id" title="var">contra</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#binds_to_dom"><span class="id" title="lemma">binds_to_dom</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hfsh</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hbi</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">Heqs</span> [<span class="id" title="var">itm</span> [<span class="id" title="var">HbiS</span> <span class="id" title="var">Hfhi</span>]]];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">itm</span>; <span class="id" title="tactic">split</span>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#binds_middle_update"><span class="id" title="lemma">binds_middle_update</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="free_sub_heap_commited_other"><span class="id" title="lemma">free_sub_heap_commited_other</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">ℰ</span> <span class="id" title="var">Sigma</span> <span class="id" title="var">Delta</span> <span class="id" title="var">x</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#free_sub_heap"><span class="id" title="definition">free_sub_heap</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#dc1b905d8ef0ab32d16a033ee43ce82f"><span class="id" title="variable">ℰ</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#Sigma"><span class="id" title="variable">Sigma</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#Delta"><span class="id" title="variable">Delta</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">binds</span> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="DOT.Definitions.Syntax.Types.html#committed"><span class="id" title="constructor">committed</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#Delta"><span class="id" title="variable">Delta</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">#</span> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#dc1b905d8ef0ab32d16a033ee43ce82f"><span class="id" title="variable">ℰ</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">intro</span> <span class="id" title="var">Contra</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#free_sub_heap"><span class="id" title="definition">free_sub_heap</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="DOT.Lib.LibExtraEnv.html#dom_to_binds"><span class="id" title="lemma">dom_to_binds</span></a> <span class="id" title="var">Contra</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">itm</span> <span class="id" title="var">Hbic</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="var">H</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hbic</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">Heqs</span> [<span class="id" title="var">itm'</span> [<span class="id" title="var">Hbi</span> <span class="id" title="var">Hfhi</span>]]].<br/>
&nbsp;&nbsp;<span class="id" title="var">inversions</span> <span class="id" title="var">Hfhi</span>. <span class="id" title="var">inversions</span> <span class="id" title="var">H1</span>; <span class="id" title="var">destruct_ands</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">destruct_all</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="lemma">binds_functional</span> <span class="id" title="var">H2</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="DOT.Initialization.InitVar.html#init_var_sub_free"><span class="id" title="lemma">init_var_sub_free</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H4</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H4</span>; <span class="id" title="tactic">congruence</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="free_sub_heap_correspondence_committed"><span class="id" title="lemma">free_sub_heap_correspondence_committed</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">Sigma</span> <span class="id" title="var">ℰ</span> <span class="id" title="var">Delta</span> <span class="id" title="var">x</span> <span class="id" title="var">a</span> <span class="id" title="var">y</span> <span class="id" title="var">Sigma'</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#free_sub_heap"><span class="id" title="definition">free_sub_heap</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#dc1b905d8ef0ab32d16a033ee43ce82f"><span class="id" title="variable">ℰ</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#Sigma"><span class="id" title="variable">Sigma</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#Delta"><span class="id" title="variable">Delta</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Definitions.OperationalSemantics.HeapUpdate.html#heap_update"><span class="id" title="definition">heap_update</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#Sigma"><span class="id" title="variable">Sigma</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#Sigma'"><span class="id" title="variable">Sigma'</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">binds</span> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="DOT.Definitions.Syntax.Types.html#committed"><span class="id" title="constructor">committed</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#Delta"><span class="id" title="variable">Delta</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#free_sub_heap"><span class="id" title="definition">free_sub_heap</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#dc1b905d8ef0ab32d16a033ee43ce82f"><span class="id" title="variable">ℰ</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#Sigma'"><span class="id" title="variable">Sigma'</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#Delta"><span class="id" title="variable">Delta</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#free_sub_heap_commited_other"><span class="id" title="lemma">free_sub_heap_commited_other</span></a>,<br/>
&nbsp;&nbsp;<a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#free_sub_heap_correspondence_other"><span class="id" title="lemma">free_sub_heap_correspondence_other</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="free_sub_heap_correspondence"><span class="id" title="lemma">free_sub_heap_correspondence</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">Gamma</span> <span class="id" title="var">Sigma</span> <span class="id" title="var">ℰ</span> <span class="id" title="var">Delta</span> <span class="id" title="var">x</span> <span class="id" title="var">a</span> <span class="id" title="var">y</span> <span class="id" title="var">Sigma'</span> <span class="id" title="var">effs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.CanonicalForms.HeapCorrespondence.html#heap_correspond"><span class="id" title="definition">heap_correspond</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#Gamma"><span class="id" title="variable">Gamma</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#Sigma"><span class="id" title="variable">Sigma</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#free_sub_heap"><span class="id" title="definition">free_sub_heap</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#dc1b905d8ef0ab32d16a033ee43ce82f"><span class="id" title="variable">ℰ</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#Sigma"><span class="id" title="variable">Sigma</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#Delta"><span class="id" title="variable">Delta</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Definitions.OperationalSemantics.HeapUpdate.html#heap_update"><span class="id" title="definition">heap_update</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#Sigma"><span class="id" title="variable">Sigma</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#Sigma'"><span class="id" title="variable">Sigma'</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">binds</span> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#effs"><span class="id" title="variable">effs</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#dc1b905d8ef0ab32d16a033ee43ce82f"><span class="id" title="variable">ℰ</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Definitions.PointsTo.WellPointed.html#well_pointed"><span class="id" title="abbreviation">well_pointed</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#Delta"><span class="id" title="variable">Delta</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#dc1b905d8ef0ab32d16a033ee43ce82f"><span class="id" title="variable">ℰ</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#y"><span class="id" title="variable">y</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">exists</span> <span class="id" title="var">ℰ'</span> <span class="id" title="var">effs'</span><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.HeapEffInit.HeapItemFree.html#eff_update"><span class="id" title="definition">eff_update</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#dc1b905d8ef0ab32d16a033ee43ce82f"><span class="id" title="variable">ℰ</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#effs'"><span class="id" title="variable">effs'</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#302f2f6e222c2d6676cbe448f64a4a41"><span class="id" title="variable">ℰ'</span></a> <span class="id" title="notation">/\</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.HeapEffInit.HeapItemFree.html#eff_remove"><span class="id" title="definition">eff_remove</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#effs"><span class="id" title="variable">effs</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#effs'"><span class="id" title="variable">effs'</span></a> <span class="id" title="notation">/\</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#free_sub_heap"><span class="id" title="definition">free_sub_heap</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#302f2f6e222c2d6676cbe448f64a4a41"><span class="id" title="variable">ℰ'</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#Sigma'"><span class="id" title="variable">Sigma'</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#Delta"><span class="id" title="variable">Delta</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="DOT.Definitions.OperationalSemantics.HeapUpdate.html#heap_update"><span class="id" title="definition">heap_update</span></a>, <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#free_sub_heap"><span class="id" title="definition">free_sub_heap</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> * <span class="id" title="var">Hcorr</span> <span class="id" title="var">Hfsh</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">T</span> [<span class="id" title="var">hds</span> [<span class="id" title="var">hds'</span> [<span class="id" title="var">Sigma1</span> [<span class="id" title="var">Sigma2</span> [?<span class="id" title="var">Heq</span> [<span class="id" title="var">HfrS2</span> [<span class="id" title="var">Hup</span> ?<span class="id" title="var">Heq</span>]]]]]]]];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">HxEEp</span> <span class="id" title="var">Hwp</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="DOT.HeapEffInit.HeapItemFree.html#eff_update_exists"><span class="id" title="lemma">eff_update_exists</span></a> (<a class="idref" href="DOT.HeapEffInit.HeapItemFree.html#heap_defs_effs"><span class="id" title="definition">heap_defs_effs</span></a> <span class="id" title="var">x</span> <span class="id" title="var">hds'</span>) (<a class="idref" href="DOT.Lib.LibExtraEnv.html#binds_to_dom"><span class="id" title="lemma">binds_to_dom</span></a> <span class="id" title="var">HxEEp</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> [<span class="id" title="var">ℰ'</span> <span class="id" title="var">Heup</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">ℰ'</span> (<a class="idref" href="DOT.HeapEffInit.HeapItemFree.html#heap_defs_effs"><span class="id" title="definition">heap_defs_effs</span></a> <span class="id" title="var">x</span> <span class="id" title="var">hds'</span>); <span class="id" title="var">repeat_split_right</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hfsh</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">HxEEp</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">_</span> [?<span class="id" title="var">itm</span> [?<span class="id" title="var">HbiS</span> ?<span class="id" title="var">Hfhi</span>]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="definition">binds</span> <span class="id" title="var">x</span> (<a class="idref" href="DOT.Definitions.Syntax.Items.html#item_obj"><span class="id" title="constructor">item_obj</span></a> <span class="id" title="var">T</span> <span class="id" title="var">hds</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Sigma1</span> <span class="id" title="notation">&amp;</span> <span class="id" title="var">x</span> <span class="id" title="notation">~</span> <a class="idref" href="DOT.Definitions.Syntax.Items.html#item_obj"><span class="id" title="constructor">item_obj</span></a> <span class="id" title="var">T</span> <span class="id" title="var">hds</span> <span class="id" title="notation">&amp;</span> <span class="id" title="var">Sigma2</span>)) <span class="id" title="tactic">by</span> <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">binds_eq</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="DOT.CanonicalForms.HeapCorrespondence.html#heap_correspond"><span class="id" title="definition">heap_correspond</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hcorr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hcorr</span> <span class="id" title="keyword">as</span> [?<span class="id" title="var">H</span> ?<span class="id" title="var">Htis</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="DOT.Lib.LibExtraEnv.html#binds_to_dom"><span class="id" title="lemma">binds_to_dom</span></a> <span class="id" title="var">HbiS</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">HdinS</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">HdinG</span>: <span class="id" title="var">x</span> <span class="id" title="notation">\</span><span class="id" title="notation">in</span> <span class="id" title="axiom">dom</span> <span class="id" title="var">Gamma</span>) <span class="id" title="tactic">by</span> <span class="id" title="tactic">congruence</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">HdinS</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Htis</span> <span class="id" title="var">_</span> <span class="id" title="var">HdinG</span>); <span class="id" title="tactic">clear</span> <span class="id" title="var">HdinG</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inversions</span> <span class="id" title="var">Htis</span>; <span class="id" title="tactic">repeat</span> <span class="id" title="var">binds_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inversions</span> <span class="id" title="var">Hfhi</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="DOT.HeapEffInit.HeapItemFree.html#free_heap_defs"><span class="id" title="definition">free_heap_defs</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H6</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H6</span> <span class="id" title="keyword">as</span> [?<span class="id" title="var">HbiD</span> [?<span class="id" title="var">HbiE</span> <span class="id" title="var">_</span>]]; <span class="id" title="tactic">repeat</span> <span class="id" title="var">binds_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="DOT.HeapEffInit.HeapItemFree.html#defs_update_eff_remove"><span class="id" title="lemma">defs_update_eff_remove</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="DOT.Lib.LibExtraVar.html#var_decide"><span class="id" title="lemma">var_decide</span></a> <span class="id" title="var">x0</span> <span class="id" title="var">x</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">Heq</span> | <span class="id" title="var">Hneq</span>]; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="notation">proj32</span> <span class="id" title="var">Heup</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="var">Hfsh</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">HxEEp</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">Heqs</span> [<span class="id" title="var">itm'</span> [<span class="id" title="var">HbiS1</span> <span class="id" title="var">Hfhi</span>]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="definition">binds</span> <span class="id" title="var">x</span> (<a class="idref" href="DOT.Definitions.Syntax.Items.html#item_obj"><span class="id" title="constructor">item_obj</span></a> <span class="id" title="var">T</span> <span class="id" title="var">hds</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Sigma1</span> <span class="id" title="notation">&amp;</span> <span class="id" title="var">x</span> <span class="id" title="notation">~</span> <a class="idref" href="DOT.Definitions.Syntax.Items.html#item_obj"><span class="id" title="constructor">item_obj</span></a> <span class="id" title="var">T</span> <span class="id" title="var">hds</span> <span class="id" title="notation">&amp;</span> <span class="id" title="var">Sigma2</span>)) <span class="id" title="tactic">by</span> <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="var">binds_eq</span>. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<a class="idref" href="DOT.Definitions.Syntax.Items.html#item_obj"><span class="id" title="constructor">item_obj</span></a> <span class="id" title="var">T</span> <span class="id" title="var">hds'</span>); <span class="id" title="tactic">split</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="DOT.HeapEffInit.HeapItemFree.html#free_heap_item_update"><span class="id" title="lemma">free_heap_item_update</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> <span class="id" title="var">Heup</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Heup''</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="DOT.HeapEffInit.HeapItemFree.html#eff_update"><span class="id" title="definition">eff_update</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heup</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Heup</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">HEE'</span> [<span class="id" title="var">Hbi'</span> <span class="id" title="var">Heup'</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="DOT.Lib.LibExtraEnv.html#dom_update_binds_inv"><span class="id" title="lemma">dom_update_binds_inv</span></a> (<span class="id" title="var">x</span>:=<span class="id" title="var">x</span>) <span class="id" title="var">HEE'</span> <span class="id" title="var">Heup'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> <span class="id" title="var">Hdmup</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="var">Hfsh</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">Hdmup</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hneq</span> <span class="id" title="var">H</span>)) <span class="id" title="keyword">as</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[?<span class="id" title="var">Heqs</span> [<span class="id" title="var">itm'</span> [<span class="id" title="var">HbiS1</span> <span class="id" title="var">Hfhi</span>]]]; <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">itm'</span>; <span class="id" title="tactic">split</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="DOT.HeapEffInit.HeapItemFree.html#free_heap_item_update_other"><span class="id" title="lemma">free_heap_item_update_other</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Lib.LibExtraEnv.html#binds_middle_update"><span class="id" title="lemma">binds_middle_update</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="free_sub_heap_commit_other"><span class="id" title="lemma">free_sub_heap_commit_other</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">ℰ</span> <span class="id" title="var">Sigma</span> <span class="id" title="var">Delta</span> <span class="id" title="var">Delta'</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#free_sub_heap"><span class="id" title="definition">free_sub_heap</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#dc1b905d8ef0ab32d16a033ee43ce82f"><span class="id" title="variable">ℰ</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#Sigma"><span class="id" title="variable">Sigma</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#Delta"><span class="id" title="variable">Delta</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> <span class="id" title="var">init</span>, <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">in</span> <span class="id" title="axiom">dom</span> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#dc1b905d8ef0ab32d16a033ee43ce82f"><span class="id" title="variable">ℰ</span></a> <span class="id" title="notation">-&gt;</span> <span class="id" title="definition">binds</span> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#init"><span class="id" title="variable">init</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#Delta"><span class="id" title="variable">Delta</span></a> <span class="id" title="notation">-&gt;</span> <span class="id" title="definition">binds</span> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#init"><span class="id" title="variable">init</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#Delta'"><span class="id" title="variable">Delta'</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.HeapEffInit.HeapCommit.html#more_committed"><span class="id" title="definition">more_committed</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#Delta"><span class="id" title="variable">Delta</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#Delta'"><span class="id" title="variable">Delta'</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#free_sub_heap"><span class="id" title="definition">free_sub_heap</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#dc1b905d8ef0ab32d16a033ee43ce82f"><span class="id" title="variable">ℰ</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#Sigma"><span class="id" title="variable">Sigma</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#Delta'"><span class="id" title="variable">Delta'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#free_sub_heap"><span class="id" title="definition">free_sub_heap</span></a>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H2</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Heqs</span> [<span class="id" title="var">itm</span> [<span class="id" title="var">Hbi</span> <span class="id" title="var">Hfhi</span>]]]. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">itm</span>; <span class="id" title="tactic">split</span>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="DOT.HeapEffInit.HeapItemFree.html#free_heap_item_commit_other"><span class="id" title="lemma">free_heap_item_commit_other</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="free_sub_heap_commit_sub_other"><span class="id" title="lemma">free_sub_heap_commit_sub_other</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">ℰ</span> <span class="id" title="var">Sigma</span> <span class="id" title="var">Delta</span> <span class="id" title="var">Delta'</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#free_sub_heap"><span class="id" title="definition">free_sub_heap</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#dc1b905d8ef0ab32d16a033ee43ce82f"><span class="id" title="variable">ℰ</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#Sigma"><span class="id" title="variable">Sigma</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#Delta"><span class="id" title="variable">Delta</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="keyword">forall</span> (<span class="id" title="var">x</span> : <span class="id" title="axiom">var</span>), <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">in</span> <span class="id" title="axiom">dom</span> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#dc1b905d8ef0ab32d16a033ee43ce82f"><span class="id" title="variable">ℰ</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<span class="id" title="var">i</span> : <a class="idref" href="DOT.Definitions.Syntax.Types.html#init_typ"><span class="id" title="inductive">init_typ</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">binds</span> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#Delta"><span class="id" title="variable">Delta</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">exists</span> <span class="id" title="var">i'</span><span class="id" title="notation">,</span> <span class="id" title="definition">binds</span> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#i'"><span class="id" title="variable">i'</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#Delta'"><span class="id" title="variable">Delta'</span></a> <span class="id" title="notation">/\</span> <a class="idref" href="DOT.Initialization.InitVarDefs.html#init_sub"><span class="id" title="inductive">init_sub</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#i'"><span class="id" title="variable">i'</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#i"><span class="id" title="variable">i</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.HeapEffInit.HeapCommit.html#more_committed"><span class="id" title="definition">more_committed</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#Delta"><span class="id" title="variable">Delta</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#Delta'"><span class="id" title="variable">Delta'</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#free_sub_heap"><span class="id" title="definition">free_sub_heap</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#dc1b905d8ef0ab32d16a033ee43ce82f"><span class="id" title="variable">ℰ</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#Sigma"><span class="id" title="variable">Sigma</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#Delta'"><span class="id" title="variable">Delta'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hfsh</span> <span class="id" title="var">Hinitsub</span> <span class="id" title="var">Hmc</span>. <span class="id" title="tactic">hnf</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hbin</span>. <span class="id" title="tactic">hnf</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hfsh</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hfsh</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hbin</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hsame</span> [<span class="id" title="var">itm</span> [<span class="id" title="var">Hbin</span> <span class="id" title="var">Hfhi</span>]]].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">itm</span>. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="DOT.HeapEffInit.HeapItemFree.html#free_heap_item_sub_other"><span class="id" title="lemma">free_heap_item_sub_other</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="eff_ctx_corr_one_notin"><span class="id" title="lemma">eff_ctx_corr_one_notin</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">ℰ</span> <span class="id" title="var">effs</span> <span class="id" title="var">x</span> <span class="id" title="var">Sigma</span> <span class="id" title="var">Delta</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">notin</span> <span class="id" title="axiom">dom</span> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#effs"><span class="id" title="variable">effs</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#free_sub_heap"><span class="id" title="definition">free_sub_heap</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#dc1b905d8ef0ab32d16a033ee43ce82f"><span class="id" title="variable">ℰ</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#Sigma"><span class="id" title="variable">Sigma</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#Delta"><span class="id" title="variable">Delta</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#eff_ctx_corr_one"><span class="id" title="definition">eff_ctx_corr_one</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#dc1b905d8ef0ab32d16a033ee43ce82f"><span class="id" title="variable">ℰ</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#effs"><span class="id" title="variable">effs</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">not</span> (<span class="id" title="definition">binds</span> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="constructor">nil</span> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#dc1b905d8ef0ab32d16a033ee43ce82f"><span class="id" title="variable">ℰ</span></a>) <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">notin</span> <span class="id" title="axiom">dom</span> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#dc1b905d8ef0ab32d16a033ee43ce82f"><span class="id" title="variable">ℰ</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;If&nbsp;x&nbsp;∈&nbsp;dom&nbsp;ℰ&nbsp;then&nbsp;x&nbsp;binds&nbsp;to&nbsp;some&nbsp;effs'&nbsp;in&nbsp;ℰ.&nbsp;Since&nbsp;effs'&nbsp;≠&nbsp;nil,&nbsp;by&nbsp;Hfsh,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(x,&nbsp;a)&nbsp;∈&nbsp;effs'&nbsp;and&nbsp;so&nbsp;by&nbsp;Hcorr,&nbsp;(x,&nbsp;a)&nbsp;∈&nbsp;effs.&nbsp;But&nbsp;this&nbsp;would&nbsp;mean&nbsp;that<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x&nbsp;∈&nbsp;dom&nbsp;effs.&nbsp;A&nbsp;contradiction.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hxnineffs</span> <span class="id" title="var">Hfsh</span> <span class="id" title="var">Hcorr</span> <span class="id" title="var">Hxnnil</span>. <span class="id" title="tactic">hnf</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hcorr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="definition">notin</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="definition">not</span>. <span class="id" title="var">introv</span> <span class="id" title="var">Hxinℰ</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#dom_to_binds"><span class="id" title="lemma">dom_to_binds</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hxinℰ</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">effs'</span> <span class="id" title="var">Hxbinℰ</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hcorr</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hxbinℰ</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">hnf</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hfsh</span>. <span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hfsh</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hxbinℰ</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">Hlblsame</span> <span class="id" title="var">_</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">effs'</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">x'</span> <span class="id" title="var">a</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="notation">(</span><span class="id" title="var">x'</span><span class="id" title="notation">,</span> <span class="id" title="var">a</span><span class="id" title="notation">)</span> <span class="id" title="notation">\</span><span class="id" title="notation">in</span> <span class="id" title="definition">from_list</span> (<span class="id" title="notation">(</span><span class="id" title="var">x'</span><span class="id" title="notation">,</span> <span class="id" title="var">a</span><span class="id" title="notation">)</span> <span class="id" title="notation">::</span> <span class="id" title="var">effs'</span>)) <span class="id" title="keyword">as</span> <span class="id" title="var">Hxain</span> <span class="id" title="tactic">by</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">from_list_cons</span>, <span class="id" title="axiom">in_union</span>, <span class="id" title="axiom">in_singleton</span>; <span class="id" title="tactic">auto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hlblsame</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hxain</span>); <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hcorr</span> <span class="id" title="var">_</span> <span class="id" title="var">Hxain</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#from_list_dom"><span class="id" title="lemma">from_list_dom</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/tebbi/coqdocjs">CoqdocJS</a>
</div>
</div>
</body>

</html>
