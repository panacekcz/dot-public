<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="assets/resources/coqdoc.css" rel="stylesheet" type="text/css" />
<link href="assets/resources/coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="assets/resources/config.js"></script>
<script type="text/javascript" src="assets/resources/coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="../README.html">README</a>
      <a href="./indexpage.html"> Index </a>
      <a href="./toc.html"> Table of Contents </a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<h1 class="libtitle">DOT.GeneralTyping.Substitution</h1>

<div class="code">

<br/>
<span class="id" title="keyword">Set Implicit Arguments</span>.<br/>

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="DOT.Lib.DotTactics.html#"><span class="id" title="library">DotTactics</span></a> <a class="idref" href="DOT.Lib.LibExtra.html#"><span class="id" title="library">LibExtra</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="DOT.Definitions.Syntax.AbstractSyntax.html#"><span class="id" title="library">AbstractSyntax</span></a> <a class="idref" href="DOT.Definitions.TypingClasses.PreTyping.html#"><span class="id" title="library">PreTyping</span></a> <a class="idref" href="DOT.Definitions.TypingClasses.Typing.html#"><span class="id" title="library">Typing</span></a> <a class="idref" href="DOT.Definitions.Typing.GeneralTyping.html#"><span class="id" title="library">GeneralTyping</span></a> <a class="idref" href="DOT.GeneralTyping.Weakening.html#"><span class="id" title="library">Weakening</span></a> <a class="idref" href="DOT.Definitions.TypingClasses.SubstitutionClass.html#"><span class="id" title="library">SubstitutionClass</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab107"></a><h1 class="section">Tactics for Subsitution Lemma</h1>

</div>
<div class="code">
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">unfold_fvar</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="DOT.Lib.LibExtraSubstFvar.html#subst_fvar"><span class="id" title="definition">subst_fvar</span></a>; <span class="id" title="tactic">rewrite</span>~ <span class="id" title="lemma">If_r</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">subst_open_fresh</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [ |- <span class="id" title="keyword">context</span> [ (?<span class="id" title="var">O</span> ?<span class="id" title="var">n</span> ?<span class="id" title="var">z</span> (?<span class="id" title="var">S</span> ?<span class="id" title="var">x</span> ?<span class="id" title="var">y</span> ?<span class="id" title="var">T</span>)) ] ] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (<a class="idref" href="DOT.Lib.SyntaxClasses.html#subst_open_commut_single"><span class="id" title="lemma">subst_open_commut_single</span></a> <span class="id" title="var">n</span> <span class="id" title="var">y</span> <span class="id" title="var">T</span>) <span class="id" title="tactic">by</span> <span class="id" title="tactic">auto</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">fold_subst_env</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="tactic">rewrite</span> ? <a class="idref" href="DOT.Lib.TransformCollect.html#subst_singles_rev_to_list"><span class="id" title="lemma">subst_singles_rev_to_list</span></a> <span class="id" title="tactic">by</span> <span class="id" title="tactic">auto</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="tactic">rewrite</span> ? <a class="idref" href="DOT.Lib.SyntaxClasses.html#subst_single"><span class="id" title="lemma">subst_single</span></a>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- ? <span class="id" title="lemma">concat_assoc</span>, &lt;- ? <span class="id" title="lemma">map_concat</span>, ? <span class="id" title="lemma">concat_assoc</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">unfold_subst_env</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">map_concat</span>, &lt;- <a class="idref" href="DOT.Lib.SyntaxClasses.html#subst_single"><span class="id" title="lemma">subst_single</span></a>.<br/>

<br/>
<span class="id" title="keyword">Local Hint Extern</span> 1 (<span class="id" title="var">_</span> <span class="id" title="notation">&amp;</span> <span class="id" title="var">_</span> <a class="idref" href="DOT.Definitions.TypingClasses.Typing.html#3db3136034a83ac4081977ececfc4888"><span class="id" title="notation">⊢</span></a> <span class="id" title="var">_</span> <a class="idref" href="DOT.Definitions.TypingClasses.Typing.html#3db3136034a83ac4081977ececfc4888"><span class="id" title="notation">∶</span></a> <span class="id" title="var">_</span>) =&gt; <span class="id" title="tactic">apply</span> <a class="idref" href="DOT.Definitions.TypingClasses.PreTyping.html#weaken"><span class="id" title="lemma">weaken</span></a> : <span class="id" title="var">core</span>.<br/>
<span class="id" title="keyword">Local Hint Extern</span> 2 (<span class="id" title="var">_</span> <span class="id" title="notation">&amp;</span> <span class="id" title="var">_</span> <a class="idref" href="DOT.Definitions.TypingClasses.Typing.html#d77433d9a5f06bee50380b6ca9a3f271"><span class="id" title="notation">⊢</span></a> <span class="id" title="var">_</span> <a class="idref" href="DOT.Definitions.TypingClasses.Typing.html#d77433d9a5f06bee50380b6ca9a3f271"><span class="id" title="notation">&lt;:</span></a> <span class="id" title="var">_</span>) =&gt; <span class="id" title="tactic">apply</span> <a class="idref" href="DOT.Definitions.TypingClasses.PreTyping.html#weaken_middle"><span class="id" title="definition">weaken_middle</span></a> : <span class="id" title="var">core</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">subst_solver</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">fresh_constructor</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">subst_open_fresh</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| [ <span class="id" title="var">H</span>: <span class="id" title="keyword">forall</span> <span class="id" title="var">z</span>, <a class="idref" href="DOT.GeneralTyping.Substitution.html#z"><span class="id" title="variable">z</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">notin</span> ?<span class="id" title="var">L</span> <span class="id" title="notation">-&gt;</span> <span class="id" title="keyword">forall</span> <span class="id" title="var">G</span>, <span class="id" title="var">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|- <span class="id" title="keyword">context</span> [ ?<span class="id" title="var">G1</span> <span class="id" title="notation">&amp;</span> <span class="id" title="axiom">map</span> (?<span class="id" title="var">S1</span> ?<span class="id" title="var">x</span> ?<span class="id" title="var">y</span>) ?<span class="id" title="var">G2</span> <span class="id" title="notation">&amp;</span> ?<span class="id" title="var">z</span> <span class="id" title="notation">~</span> ?<span class="id" title="var">S2</span> ?<span class="id" title="var">x</span> ?<span class="id" title="var">y</span> ?<span class="id" title="var">T</span>] ] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">G1</span> <span class="id" title="notation">&amp;</span> <span class="id" title="axiom">map</span> (<span class="id" title="var">S1</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) <span class="id" title="var">G2</span> <span class="id" title="notation">&amp;</span> <span class="id" title="var">z</span> <span class="id" title="notation">~</span> <span class="id" title="var">S2</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">T</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">=</span> <span class="id" title="var">G1</span> <span class="id" title="notation">&amp;</span> <a class="idref" href="DOT.Lib.SyntaxClasses.html#subst_env"><span class="id" title="abbreviation">subst_env</span></a> <span class="id" title="var">x</span> <span class="id" title="var">y</span> (<span class="id" title="var">G2</span> <span class="id" title="notation">&amp;</span> <span class="id" title="var">z</span> <span class="id" title="notation">~</span> <span class="id" title="var">T</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> <span class="id" title="var">B</span> <span class="id" title="tactic">by</span> (<span class="id" title="var">unfold_subst_env</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">concat_assoc</span>; <span class="id" title="tactic">auto</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">B</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">rewrite</span> ? <span class="id" title="lemma">concat_assoc</span>; <span class="id" title="tactic">auto</span> 2;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">map_concat</span>; <span class="id" title="tactic">rewrite</span> ? <span class="id" title="lemma">concat_assoc</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> ? <span class="id" title="lemma">map_single</span>; <span class="id" title="tactic">auto</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">subst_open_commut_solver</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="var">sympls</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="DOT.Lib.SyntaxClasses.html#subst_open_commut"><span class="id" title="definition">subst_open_commut</span></a>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">auto</span>; <span class="id" title="tactic">eauto</span> 4.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">fold_subst</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| [ |- <span class="id" title="keyword">context</span> [ <a class="idref" href="DOT.Definitions.Syntax.Terms.html#trm_var"><span class="id" title="constructor">trm_var</span></a> (<a class="idref" href="DOT.Definitions.Syntax.Vars.html#avar_f"><span class="id" title="constructor">avar_f</span></a> (<span class="id" title="notation">If</span> ?<span class="id" title="var">x</span> <span class="id" title="notation">=</span> ?<span class="id" title="var">y</span> <span class="id" title="notation">then</span> ?<span class="id" title="var">z</span> <span class="id" title="notation">else</span> ?<span class="id" title="var">x</span>)) ] ] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">asserts_rewrite</span> (<a class="idref" href="DOT.Definitions.Syntax.Terms.html#trm_var"><span class="id" title="constructor">trm_var</span></a> (<a class="idref" href="DOT.Definitions.Syntax.Vars.html#avar_f"><span class="id" title="constructor">avar_f</span></a> (<span class="id" title="notation">If</span> <span class="id" title="var">x</span> <span class="id" title="notation">=</span> <span class="id" title="var">y</span> <span class="id" title="notation">then</span> <span class="id" title="var">z</span> <span class="id" title="notation">else</span> <span class="id" title="var">x</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">=</span> <a class="idref" href="DOT.Definitions.Syntax.Terms.html#subst_trm"><span class="id" title="definition">subst_trm</span></a> <span class="id" title="var">y</span> <span class="id" title="var">z</span> (<a class="idref" href="DOT.Definitions.Syntax.Terms.html#trm_var"><span class="id" title="constructor">trm_var</span></a> (<a class="idref" href="DOT.Definitions.Syntax.Vars.html#avar_f"><span class="id" title="constructor">avar_f</span></a> <span class="id" title="var">x</span>))); <span class="id" title="tactic">auto</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| [ |- <span class="id" title="keyword">context</span> [ <a class="idref" href="DOT.Lib.SyntaxClasses.html#open"><span class="id" title="abbreviation">open</span></a> (<span class="id" title="notation">If</span> ?<span class="id" title="var">x</span> <span class="id" title="notation">=</span> ?<span class="id" title="var">y</span> <span class="id" title="notation">then</span> ?<span class="id" title="var">z</span> <span class="id" title="notation">else</span> ?<span class="id" title="var">x</span>) (<a class="idref" href="DOT.Lib.SyntaxClasses.html#subst_var"><span class="id" title="definition">subst_var</span></a> ?<span class="id" title="var">y</span> ?<span class="id" title="var">z</span> ?<span class="id" title="var">T</span>) ] ] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">asserts_rewrite</span> (<a class="idref" href="DOT.Lib.SyntaxClasses.html#open"><span class="id" title="abbreviation">open</span></a> (<span class="id" title="notation">If</span> <span class="id" title="var">x</span> <span class="id" title="notation">=</span> <span class="id" title="var">y</span> <span class="id" title="notation">then</span> <span class="id" title="var">z</span> <span class="id" title="notation">else</span> <span class="id" title="var">x</span>) (<a class="idref" href="DOT.Lib.SyntaxClasses.html#subst_var"><span class="id" title="definition">subst_var</span></a> <span class="id" title="var">y</span> <span class="id" title="var">z</span> <span class="id" title="var">T</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">=</span> <a class="idref" href="DOT.Lib.SyntaxClasses.html#subst_var"><span class="id" title="definition">subst_var</span></a> <span class="id" title="var">y</span> <span class="id" title="var">z</span> (<a class="idref" href="DOT.Lib.SyntaxClasses.html#open"><span class="id" title="abbreviation">open</span></a> <span class="id" title="var">x</span> <span class="id" title="var">T</span>)); <span class="id" title="tactic">auto</span>  <span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Local Ltac</span> <span class="id" title="var">simpl_length_s</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [ |- <span class="id" title="keyword">context</span>[ <a class="idref" href="DOT.Lib.SyntaxClasses.html#length_s"><span class="id" title="definition">length_s</span></a> (<span class="id" title="var">_</span> <a class="idref" href="DOT.Lib.SyntaxClasses.html#96b633d5169de23740e8856c1f4462cf"><span class="id" title="notation">/[</span></a> <span class="id" title="var">_</span> <a class="idref" href="DOT.Lib.SyntaxClasses.html#96b633d5169de23740e8856c1f4462cf"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="var">_</span><a class="idref" href="DOT.Lib.SyntaxClasses.html#96b633d5169de23740e8856c1f4462cf"><span class="id" title="notation">]</span></a>) ] ] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="DOT.Lib.TransformCollect.html#length_s_subst"><span class="id" title="lemma">length_s_subst</span></a><br/>
&nbsp;&nbsp;| [ <span class="id" title="var">H</span>: <span class="id" title="keyword">context</span>[ <a class="idref" href="DOT.Lib.SyntaxClasses.html#length_s"><span class="id" title="definition">length_s</span></a> (<span class="id" title="var">_</span> <a class="idref" href="DOT.Lib.SyntaxClasses.html#96b633d5169de23740e8856c1f4462cf"><span class="id" title="notation">/[</span></a> <span class="id" title="var">_</span> <a class="idref" href="DOT.Lib.SyntaxClasses.html#96b633d5169de23740e8856c1f4462cf"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="var">_</span><a class="idref" href="DOT.Lib.SyntaxClasses.html#96b633d5169de23740e8856c1f4462cf"><span class="id" title="notation">]</span></a>) ] |- <span class="id" title="var">_</span> ] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="DOT.Lib.TransformCollect.html#length_s_subst"><span class="id" title="lemma">length_s_subst</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Implicit</span> <span class="id" title="keyword">Types</span> (<span class="id" title="var">d</span> : <a class="idref" href="DOT.Definitions.Syntax.Terms.html#def"><span class="id" title="inductive">def</span></a>) (<span class="id" title="var">ds</span> : <a class="idref" href="DOT.Definitions.Syntax.Terms.html#defs"><span class="id" title="abbreviation">defs</span></a>) (<span class="id" title="var">T</span> : <a class="idref" href="DOT.Definitions.Syntax.Types.html#typ"><span class="id" title="inductive">typ</span></a>).<br/>

<br/>
</div>

<div class="doc">
<a name="lab108"></a><h1 class="section">Substitution Lemmas</h1>
 Dependent Substitution states that safety subsitute variables in terms if we
    also substitute the variable in types.
    The substitution lemmas are automatically derived via the typeclass
    mechanism by providing instances of <span class="inlinecode"><span class="id" title="var">DecTySubstMiddle</span></span>, or <span class="inlinecode"><span class="id" title="var">TySubstMiddle</span></span>,
    <span class="inlinecode"><span class="id" title="var">TysSubstMiddle</span></span>.
 
</div>
<div class="code">
<span class="id" title="keyword">Instance</span> <a name="DefDecTySubstMiddle"><span class="id" title="instance">DefDecTySubstMiddle</span></a> : <a class="idref" href="DOT.Definitions.TypingClasses.SubstitutionClass.html#DecTySubstMiddle"><span class="id" title="class">DecTySubstMiddle</span></a> <a class="idref" href="DOT.Definitions.Typing.GeneralTyping.html#ty_def"><span class="id" title="inductive">ty_def</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">hnf</span>; <span class="id" title="var">introv</span> <span class="id" title="var">Hfr</span> <span class="id" title="var">Hty</span>; <span class="id" title="var">inversions</span> <span class="id" title="var">Hty</span>; <span class="id" title="var">sympl</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">G1</span>,</span> <span class="inlinecode"><span class="id" title="var">x</span>:</span> <span class="inlinecode"><span class="id" title="var">S</span>,</span> <span class="inlinecode"><span class="id" title="var">G2</span></span> <span class="inlinecode">⊢</span> <span class="inlinecode"><span class="id" title="var">t</span>∶</span> <span class="inlinecode"><span class="id" title="var">T</span></span>            <br>
    <span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode">#</span> <span class="inlinecode"><span class="id" title="var">G2</span></span>               <br>
    <span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode">\<span class="id" title="var">notin</span></span> <span class="inlinecode"><span class="id" title="var">fv</span>(<span class="id" title="var">G1</span>)</span>                 <br>
    <span class="inlinecode"><span class="id" title="var">G1</span>,</span> <span class="inlinecode"><span class="id" title="var">G2</span>[<span class="id" title="var">y</span>/<span class="id" title="var">x</span>]</span> <span class="inlinecode">⊢</span> <span class="inlinecode"><span class="id" title="var">y</span>∶</span> <span class="inlinecode"><span class="id" title="var">S</span>[<span class="id" title="var">y</span>/<span class="id" title="var">x</span>]</span>       <br>
    <span class="inlinecode">―――――――――――――――――――――――――――――</span>  <br>
    <span class="inlinecode"><span class="id" title="var">G1</span>,</span> <span class="inlinecode"><span class="id" title="var">G2</span>[<span class="id" title="var">y</span>/<span class="id" title="var">x</span>]</span> <span class="inlinecode">⊢</span> <span class="inlinecode"><span class="id" title="var">t</span>[<span class="id" title="var">y</span>/<span class="id" title="var">x</span>]∶</span> <span class="inlinecode"><span class="id" title="var">T</span>[<span class="id" title="var">y</span>/<span class="id" title="var">x</span>]</span> <br>  <br>

<div class="paragraph"> </div>

    and

<div class="paragraph"> </div>

    <span class="inlinecode"><span class="id" title="var">G1</span>,</span> <span class="inlinecode"><span class="id" title="var">x</span>:</span> <span class="inlinecode"><span class="id" title="var">S</span>,</span> <span class="inlinecode"><span class="id" title="var">G2</span></span> <span class="inlinecode">⊢</span> <span class="inlinecode"><span class="id" title="var">l</span>∶</span> <span class="inlinecode"><span class="id" title="var">T</span></span>            <br>
    <span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode">#</span> <span class="inlinecode"><span class="id" title="var">G2</span></span>               <br>
    <span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode">\<span class="id" title="var">notin</span></span> <span class="inlinecode"><span class="id" title="var">fv</span>(<span class="id" title="var">G1</span>)</span>                 <br>
    <span class="inlinecode"><span class="id" title="var">G1</span>,</span> <span class="inlinecode"><span class="id" title="var">G2</span>[<span class="id" title="var">y</span>/<span class="id" title="var">x</span>]</span> <span class="inlinecode">⊢</span> <span class="inlinecode"><span class="id" title="var">y</span>∶</span> <span class="inlinecode"><span class="id" title="var">S</span>[<span class="id" title="var">y</span>/<span class="id" title="var">x</span>]</span>       <br>
    <span class="inlinecode">―――――――――――――――――――――――――――――</span>  <br>
    <span class="inlinecode"><span class="id" title="var">G1</span>,</span> <span class="inlinecode"><span class="id" title="var">G2</span>[<span class="id" title="var">y</span>/<span class="id" title="var">x</span>]</span> <span class="inlinecode">⊢</span> <span class="inlinecode"><span class="id" title="var">l</span>[<span class="id" title="var">y</span>/<span class="id" title="var">x</span>]∶</span> <span class="inlinecode"><span class="id" title="var">T</span>[<span class="id" title="var">y</span>/<span class="id" title="var">x</span>]</span> <br>  <br>

<div class="paragraph"> </div>

    and

<div class="paragraph"> </div>

    <span class="inlinecode"><span class="id" title="var">G1</span>,</span> <span class="inlinecode"><span class="id" title="var">x</span>:</span> <span class="inlinecode"><span class="id" title="var">S</span>,</span> <span class="inlinecode"><span class="id" title="var">G2</span></span> <span class="inlinecode">⊢</span> <span class="inlinecode"><span class="id" title="var">T</span></span> <span class="inlinecode">&lt;:</span> <span class="inlinecode"><span class="id" title="var">U</span></span>           <br>
    <span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode">#</span> <span class="inlinecode"><span class="id" title="var">G2</span></span>               <br>
    <span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode">\<span class="id" title="var">notin</span></span> <span class="inlinecode"><span class="id" title="var">fv</span>(<span class="id" title="var">G1</span>)</span>                  <br>
    <span class="inlinecode"><span class="id" title="var">G1</span>,</span> <span class="inlinecode"><span class="id" title="var">G2</span>[<span class="id" title="var">y</span>/<span class="id" title="var">x</span>]</span> <span class="inlinecode">⊢</span> <span class="inlinecode"><span class="id" title="var">y</span>∶</span> <span class="inlinecode"><span class="id" title="var">S</span>[<span class="id" title="var">y</span>/<span class="id" title="var">x</span>]</span>        <br>
    <span class="inlinecode">―――――――――――――――――――――――――――――――</span> <br>
    <span class="inlinecode"><span class="id" title="var">G1</span>,</span> <span class="inlinecode"><span class="id" title="var">G2</span>[<span class="id" title="var">y</span>/<span class="id" title="var">x</span>]</span> <span class="inlinecode">⊢</span> <span class="inlinecode"><span class="id" title="var">T</span>[<span class="id" title="var">y</span>/<span class="id" title="var">x</span>]</span> <span class="inlinecode">&lt;:</span> <span class="inlinecode"><span class="id" title="var">U</span>[<span class="id" title="var">y</span>/<span class="id" title="var">x</span>]</span> <br>  <br> 
<div class="paragraph"> </div>

 The proof is by mutual induction on term typing, literal typing, and
    subtyping. The <span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode">\<span class="id" title="var">notin</span></span> <span class="inlinecode"><span class="id" title="var">fv_env</span></span> <span class="inlinecode"><span class="id" title="var">G1</span></span> is required because the typing rules allow
    <span class="inlinecode"><span class="id" title="var">x</span></span> to appear free in the context <span class="inlinecode"><span class="id" title="var">G1</span></span>.
    Example: <span class="inlinecode"><span class="id" title="var">typ_all</span></span> <span class="inlinecode">(<span class="id" title="var">typ_sel</span></span> <span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode"><span class="id" title="var">A</span>)</span> <span class="inlinecode">(<span class="id" title="var">typ_sel</span></span> <span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode"><span class="id" title="var">A</span>)</span>. 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="subst_rules"><span class="id" title="lemma">subst_rules</span></a>: <span class="id" title="keyword">forall</span> <span class="id" title="var">y</span> <span class="id" title="var">S</span>,<br/>
&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="keyword">forall</span> <span class="id" title="var">G</span> <span class="id" title="var">t</span> <span class="id" title="var">T</span>, <a class="idref" href="DOT.GeneralTyping.Substitution.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="DOT.Definitions.TypingClasses.Typing.html#3db3136034a83ac4081977ececfc4888"><span class="id" title="notation">⊢</span></a> <a class="idref" href="DOT.GeneralTyping.Substitution.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="DOT.Definitions.TypingClasses.Typing.html#3db3136034a83ac4081977ececfc4888"><span class="id" title="notation">∶</span></a> <a class="idref" href="DOT.GeneralTyping.Substitution.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">-&gt;</span> <span class="id" title="keyword">forall</span> <span class="id" title="var">G1</span> <span class="id" title="var">G2</span> <span class="id" title="var">x</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.GeneralTyping.Substitution.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">=</span> <a class="idref" href="DOT.GeneralTyping.Substitution.html#G1"><span class="id" title="variable">G1</span></a> <span class="id" title="notation">&amp;</span> <a class="idref" href="DOT.GeneralTyping.Substitution.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">~</span> <a class="idref" href="DOT.GeneralTyping.Substitution.html#S"><span class="id" title="variable">S</span></a> <span class="id" title="notation">&amp;</span> <a class="idref" href="DOT.GeneralTyping.Substitution.html#G2"><span class="id" title="variable">G2</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.GeneralTyping.Substitution.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">#</span> <a class="idref" href="DOT.GeneralTyping.Substitution.html#G2"><span class="id" title="variable">G2</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.GeneralTyping.Substitution.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">notin</span> <a class="idref" href="DOT.Lib.SyntaxClasses.html#fv_env"><span class="id" title="abbreviation">fv_env</span></a> <a class="idref" href="DOT.GeneralTyping.Substitution.html#G1"><span class="id" title="variable">G1</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.GeneralTyping.Substitution.html#G1"><span class="id" title="variable">G1</span></a> <span class="id" title="notation">&amp;</span> <span class="id" title="notation">(</span><a class="idref" href="DOT.Lib.SyntaxClasses.html#subst_env"><span class="id" title="abbreviation">subst_env</span></a> <a class="idref" href="DOT.GeneralTyping.Substitution.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="DOT.GeneralTyping.Substitution.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="DOT.GeneralTyping.Substitution.html#G2"><span class="id" title="variable">G2</span></a><span class="id" title="notation">)</span> <a class="idref" href="DOT.Definitions.TypingClasses.Typing.html#3db3136034a83ac4081977ececfc4888"><span class="id" title="notation">⊢</span></a> <a class="idref" href="DOT.Definitions.Syntax.Terms.html#trm_var"><span class="id" title="constructor">trm_var</span></a> (<a class="idref" href="DOT.Definitions.Syntax.Vars.html#avar_f"><span class="id" title="constructor">avar_f</span></a> <a class="idref" href="DOT.GeneralTyping.Substitution.html#y"><span class="id" title="variable">y</span></a>) <a class="idref" href="DOT.Definitions.TypingClasses.Typing.html#3db3136034a83ac4081977ececfc4888"><span class="id" title="notation">∶</span></a> <a class="idref" href="DOT.Lib.SyntaxClasses.html#subst_var"><span class="id" title="definition">subst_var</span></a> <a class="idref" href="DOT.GeneralTyping.Substitution.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="DOT.GeneralTyping.Substitution.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="DOT.GeneralTyping.Substitution.html#S"><span class="id" title="variable">S</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.GeneralTyping.Substitution.html#G1"><span class="id" title="variable">G1</span></a> <span class="id" title="notation">&amp;</span> <span class="id" title="notation">(</span><a class="idref" href="DOT.Lib.SyntaxClasses.html#subst_env"><span class="id" title="abbreviation">subst_env</span></a> <a class="idref" href="DOT.GeneralTyping.Substitution.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="DOT.GeneralTyping.Substitution.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="DOT.GeneralTyping.Substitution.html#G2"><span class="id" title="variable">G2</span></a><span class="id" title="notation">)</span> <a class="idref" href="DOT.Definitions.TypingClasses.Typing.html#3db3136034a83ac4081977ececfc4888"><span class="id" title="notation">⊢</span></a> <a class="idref" href="DOT.Lib.SyntaxClasses.html#subst_var"><span class="id" title="definition">subst_var</span></a> <a class="idref" href="DOT.GeneralTyping.Substitution.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="DOT.GeneralTyping.Substitution.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="DOT.GeneralTyping.Substitution.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="DOT.Definitions.TypingClasses.Typing.html#3db3136034a83ac4081977ececfc4888"><span class="id" title="notation">∶</span></a> <a class="idref" href="DOT.Lib.SyntaxClasses.html#subst_var"><span class="id" title="definition">subst_var</span></a> <a class="idref" href="DOT.GeneralTyping.Substitution.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="DOT.GeneralTyping.Substitution.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="DOT.GeneralTyping.Substitution.html#T"><span class="id" title="variable">T</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">/\</span><br/>
&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="keyword">forall</span> <span class="id" title="var">G</span> (<span class="id" title="var">l</span> : <a class="idref" href="DOT.Definitions.Syntax.Terms.html#lit"><span class="id" title="inductive">lit</span></a>) <span class="id" title="var">T</span>, <a class="idref" href="DOT.GeneralTyping.Substitution.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="DOT.Definitions.TypingClasses.Typing.html#3db3136034a83ac4081977ececfc4888"><span class="id" title="notation">⊢</span></a> <a class="idref" href="DOT.GeneralTyping.Substitution.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="DOT.Definitions.TypingClasses.Typing.html#3db3136034a83ac4081977ececfc4888"><span class="id" title="notation">∶</span></a> <a class="idref" href="DOT.GeneralTyping.Substitution.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">-&gt;</span> <span class="id" title="keyword">forall</span> <span class="id" title="var">G1</span> <span class="id" title="var">G2</span> <span class="id" title="var">x</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.GeneralTyping.Substitution.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">=</span> <a class="idref" href="DOT.GeneralTyping.Substitution.html#G1"><span class="id" title="variable">G1</span></a> <span class="id" title="notation">&amp;</span> <a class="idref" href="DOT.GeneralTyping.Substitution.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">~</span> <a class="idref" href="DOT.GeneralTyping.Substitution.html#S"><span class="id" title="variable">S</span></a> <span class="id" title="notation">&amp;</span> <a class="idref" href="DOT.GeneralTyping.Substitution.html#G2"><span class="id" title="variable">G2</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.GeneralTyping.Substitution.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">#</span> <a class="idref" href="DOT.GeneralTyping.Substitution.html#G2"><span class="id" title="variable">G2</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.GeneralTyping.Substitution.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">notin</span> <a class="idref" href="DOT.Lib.SyntaxClasses.html#fv_env"><span class="id" title="abbreviation">fv_env</span></a> <a class="idref" href="DOT.GeneralTyping.Substitution.html#G1"><span class="id" title="variable">G1</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.GeneralTyping.Substitution.html#G1"><span class="id" title="variable">G1</span></a> <span class="id" title="notation">&amp;</span> <span class="id" title="notation">(</span><a class="idref" href="DOT.Lib.SyntaxClasses.html#subst_env"><span class="id" title="abbreviation">subst_env</span></a> <a class="idref" href="DOT.GeneralTyping.Substitution.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="DOT.GeneralTyping.Substitution.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="DOT.GeneralTyping.Substitution.html#G2"><span class="id" title="variable">G2</span></a><span class="id" title="notation">)</span> <a class="idref" href="DOT.Definitions.TypingClasses.Typing.html#3db3136034a83ac4081977ececfc4888"><span class="id" title="notation">⊢</span></a> <a class="idref" href="DOT.Definitions.Syntax.Terms.html#trm_var"><span class="id" title="constructor">trm_var</span></a> (<a class="idref" href="DOT.Definitions.Syntax.Vars.html#avar_f"><span class="id" title="constructor">avar_f</span></a> <a class="idref" href="DOT.GeneralTyping.Substitution.html#y"><span class="id" title="variable">y</span></a>) <a class="idref" href="DOT.Definitions.TypingClasses.Typing.html#3db3136034a83ac4081977ececfc4888"><span class="id" title="notation">∶</span></a> <a class="idref" href="DOT.Lib.SyntaxClasses.html#subst_var"><span class="id" title="definition">subst_var</span></a> <a class="idref" href="DOT.GeneralTyping.Substitution.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="DOT.GeneralTyping.Substitution.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="DOT.GeneralTyping.Substitution.html#S"><span class="id" title="variable">S</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.GeneralTyping.Substitution.html#G1"><span class="id" title="variable">G1</span></a> <span class="id" title="notation">&amp;</span> <span class="id" title="notation">(</span><a class="idref" href="DOT.Lib.SyntaxClasses.html#subst_env"><span class="id" title="abbreviation">subst_env</span></a> <a class="idref" href="DOT.GeneralTyping.Substitution.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="DOT.GeneralTyping.Substitution.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="DOT.GeneralTyping.Substitution.html#G2"><span class="id" title="variable">G2</span></a><span class="id" title="notation">)</span> <a class="idref" href="DOT.Definitions.TypingClasses.Typing.html#3db3136034a83ac4081977ececfc4888"><span class="id" title="notation">⊢</span></a> <a class="idref" href="DOT.Lib.SyntaxClasses.html#subst_var"><span class="id" title="definition">subst_var</span></a> <a class="idref" href="DOT.GeneralTyping.Substitution.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="DOT.GeneralTyping.Substitution.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="DOT.GeneralTyping.Substitution.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="DOT.Definitions.TypingClasses.Typing.html#3db3136034a83ac4081977ececfc4888"><span class="id" title="notation">∶</span></a> <a class="idref" href="DOT.Lib.SyntaxClasses.html#subst_var"><span class="id" title="definition">subst_var</span></a> <a class="idref" href="DOT.GeneralTyping.Substitution.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="DOT.GeneralTyping.Substitution.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="DOT.GeneralTyping.Substitution.html#T"><span class="id" title="variable">T</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">/\</span><br/>
&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="keyword">forall</span> <span class="id" title="var">G</span> <span class="id" title="var">T</span> <span class="id" title="var">U</span>, <a class="idref" href="DOT.GeneralTyping.Substitution.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="DOT.Definitions.TypingClasses.Typing.html#d77433d9a5f06bee50380b6ca9a3f271"><span class="id" title="notation">⊢</span></a> <a class="idref" href="DOT.GeneralTyping.Substitution.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="DOT.Definitions.TypingClasses.Typing.html#d77433d9a5f06bee50380b6ca9a3f271"><span class="id" title="notation">&lt;:</span></a> <a class="idref" href="DOT.GeneralTyping.Substitution.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">-&gt;</span> <span class="id" title="keyword">forall</span> <span class="id" title="var">G1</span> <span class="id" title="var">G2</span> <span class="id" title="var">x</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.GeneralTyping.Substitution.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">=</span> <a class="idref" href="DOT.GeneralTyping.Substitution.html#G1"><span class="id" title="variable">G1</span></a> <span class="id" title="notation">&amp;</span> <a class="idref" href="DOT.GeneralTyping.Substitution.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">~</span> <a class="idref" href="DOT.GeneralTyping.Substitution.html#S"><span class="id" title="variable">S</span></a> <span class="id" title="notation">&amp;</span> <a class="idref" href="DOT.GeneralTyping.Substitution.html#G2"><span class="id" title="variable">G2</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.GeneralTyping.Substitution.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">#</span> <a class="idref" href="DOT.GeneralTyping.Substitution.html#G2"><span class="id" title="variable">G2</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.GeneralTyping.Substitution.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">notin</span> <a class="idref" href="DOT.Lib.SyntaxClasses.html#fv_env"><span class="id" title="abbreviation">fv_env</span></a> <a class="idref" href="DOT.GeneralTyping.Substitution.html#G1"><span class="id" title="variable">G1</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.GeneralTyping.Substitution.html#G1"><span class="id" title="variable">G1</span></a> <span class="id" title="notation">&amp;</span> <span class="id" title="notation">(</span><a class="idref" href="DOT.Lib.SyntaxClasses.html#subst_env"><span class="id" title="abbreviation">subst_env</span></a> <a class="idref" href="DOT.GeneralTyping.Substitution.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="DOT.GeneralTyping.Substitution.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="DOT.GeneralTyping.Substitution.html#G2"><span class="id" title="variable">G2</span></a><span class="id" title="notation">)</span> <a class="idref" href="DOT.Definitions.TypingClasses.Typing.html#3db3136034a83ac4081977ececfc4888"><span class="id" title="notation">⊢</span></a> <a class="idref" href="DOT.Definitions.Syntax.Terms.html#trm_var"><span class="id" title="constructor">trm_var</span></a> (<a class="idref" href="DOT.Definitions.Syntax.Vars.html#avar_f"><span class="id" title="constructor">avar_f</span></a> <a class="idref" href="DOT.GeneralTyping.Substitution.html#y"><span class="id" title="variable">y</span></a>) <a class="idref" href="DOT.Definitions.TypingClasses.Typing.html#3db3136034a83ac4081977ececfc4888"><span class="id" title="notation">∶</span></a> <a class="idref" href="DOT.Lib.SyntaxClasses.html#subst_var"><span class="id" title="definition">subst_var</span></a> <a class="idref" href="DOT.GeneralTyping.Substitution.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="DOT.GeneralTyping.Substitution.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="DOT.GeneralTyping.Substitution.html#S"><span class="id" title="variable">S</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.GeneralTyping.Substitution.html#G1"><span class="id" title="variable">G1</span></a> <span class="id" title="notation">&amp;</span> <span class="id" title="notation">(</span><a class="idref" href="DOT.Lib.SyntaxClasses.html#subst_env"><span class="id" title="abbreviation">subst_env</span></a> <a class="idref" href="DOT.GeneralTyping.Substitution.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="DOT.GeneralTyping.Substitution.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="DOT.GeneralTyping.Substitution.html#G2"><span class="id" title="variable">G2</span></a><span class="id" title="notation">)</span> <a class="idref" href="DOT.Definitions.TypingClasses.Typing.html#d77433d9a5f06bee50380b6ca9a3f271"><span class="id" title="notation">⊢</span></a> <a class="idref" href="DOT.Lib.SyntaxClasses.html#subst_var"><span class="id" title="definition">subst_var</span></a> <a class="idref" href="DOT.GeneralTyping.Substitution.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="DOT.GeneralTyping.Substitution.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="DOT.GeneralTyping.Substitution.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="DOT.Definitions.TypingClasses.Typing.html#d77433d9a5f06bee50380b6ca9a3f271"><span class="id" title="notation">&lt;:</span></a> <a class="idref" href="DOT.Lib.SyntaxClasses.html#subst_var"><span class="id" title="definition">subst_var</span></a> <a class="idref" href="DOT.GeneralTyping.Substitution.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="DOT.GeneralTyping.Substitution.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="DOT.GeneralTyping.Substitution.html#U"><span class="id" title="variable">U</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">/\</span><br/>
&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="keyword">forall</span> <span class="id" title="var">G</span> <span class="id" title="var">avs</span> <span class="id" title="var">Ts</span>, <a class="idref" href="DOT.GeneralTyping.Substitution.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="DOT.Definitions.TypingClasses.Typing.html#18e6d19815cc1c2f71d9cd6c6234b36b"><span class="id" title="notation">⊢</span></a> <a class="idref" href="DOT.GeneralTyping.Substitution.html#avs"><span class="id" title="variable">avs</span></a> <a class="idref" href="DOT.Definitions.TypingClasses.Typing.html#18e6d19815cc1c2f71d9cd6c6234b36b"><span class="id" title="notation">::</span></a> <a class="idref" href="DOT.GeneralTyping.Substitution.html#Ts"><span class="id" title="variable">Ts</span></a> <span class="id" title="notation">-&gt;</span> <span class="id" title="keyword">forall</span> <span class="id" title="var">G1</span> <span class="id" title="var">G2</span> <span class="id" title="var">x</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.GeneralTyping.Substitution.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">=</span> <a class="idref" href="DOT.GeneralTyping.Substitution.html#G1"><span class="id" title="variable">G1</span></a> <span class="id" title="notation">&amp;</span> <a class="idref" href="DOT.GeneralTyping.Substitution.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">~</span> <a class="idref" href="DOT.GeneralTyping.Substitution.html#S"><span class="id" title="variable">S</span></a> <span class="id" title="notation">&amp;</span> <a class="idref" href="DOT.GeneralTyping.Substitution.html#G2"><span class="id" title="variable">G2</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.GeneralTyping.Substitution.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">#</span> <a class="idref" href="DOT.GeneralTyping.Substitution.html#G2"><span class="id" title="variable">G2</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.GeneralTyping.Substitution.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">notin</span> <a class="idref" href="DOT.Lib.SyntaxClasses.html#fv_env"><span class="id" title="abbreviation">fv_env</span></a> <a class="idref" href="DOT.GeneralTyping.Substitution.html#G1"><span class="id" title="variable">G1</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.GeneralTyping.Substitution.html#G1"><span class="id" title="variable">G1</span></a> <span class="id" title="notation">&amp;</span> <span class="id" title="notation">(</span><a class="idref" href="DOT.Lib.SyntaxClasses.html#subst_env"><span class="id" title="abbreviation">subst_env</span></a> <a class="idref" href="DOT.GeneralTyping.Substitution.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="DOT.GeneralTyping.Substitution.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="DOT.GeneralTyping.Substitution.html#G2"><span class="id" title="variable">G2</span></a><span class="id" title="notation">)</span> <a class="idref" href="DOT.Definitions.TypingClasses.Typing.html#3db3136034a83ac4081977ececfc4888"><span class="id" title="notation">⊢</span></a> <a class="idref" href="DOT.Definitions.Syntax.Terms.html#trm_var"><span class="id" title="constructor">trm_var</span></a> (<a class="idref" href="DOT.Definitions.Syntax.Vars.html#avar_f"><span class="id" title="constructor">avar_f</span></a> <a class="idref" href="DOT.GeneralTyping.Substitution.html#y"><span class="id" title="variable">y</span></a>) <a class="idref" href="DOT.Definitions.TypingClasses.Typing.html#3db3136034a83ac4081977ececfc4888"><span class="id" title="notation">∶</span></a> <a class="idref" href="DOT.Lib.SyntaxClasses.html#subst_var"><span class="id" title="definition">subst_var</span></a> <a class="idref" href="DOT.GeneralTyping.Substitution.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="DOT.GeneralTyping.Substitution.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="DOT.GeneralTyping.Substitution.html#S"><span class="id" title="variable">S</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.GeneralTyping.Substitution.html#G1"><span class="id" title="variable">G1</span></a> <span class="id" title="notation">&amp;</span> <span class="id" title="notation">(</span><a class="idref" href="DOT.Lib.SyntaxClasses.html#subst_env"><span class="id" title="abbreviation">subst_env</span></a> <a class="idref" href="DOT.GeneralTyping.Substitution.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="DOT.GeneralTyping.Substitution.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="DOT.GeneralTyping.Substitution.html#G2"><span class="id" title="variable">G2</span></a><span class="id" title="notation">)</span> <a class="idref" href="DOT.Definitions.TypingClasses.Typing.html#18e6d19815cc1c2f71d9cd6c6234b36b"><span class="id" title="notation">⊢</span></a> <a class="idref" href="DOT.Lib.SyntaxClasses.html#subst_var"><span class="id" title="definition">subst_var</span></a> <a class="idref" href="DOT.GeneralTyping.Substitution.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="DOT.GeneralTyping.Substitution.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="DOT.GeneralTyping.Substitution.html#avs"><span class="id" title="variable">avs</span></a> <a class="idref" href="DOT.Definitions.TypingClasses.Typing.html#18e6d19815cc1c2f71d9cd6c6234b36b"><span class="id" title="notation">::</span></a> <a class="idref" href="DOT.Lib.SyntaxClasses.html#subst_var"><span class="id" title="definition">subst_var</span></a> <a class="idref" href="DOT.GeneralTyping.Substitution.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="DOT.GeneralTyping.Substitution.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="DOT.GeneralTyping.Substitution.html#Ts"><span class="id" title="variable">Ts</span></a><span class="id" title="notation">)</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="DOT.Definitions.Typing.GeneralTyping.html#rules_mutind"><span class="id" title="definition">rules_mutind</span></a>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="var">sympl</span> <span class="id" title="tactic">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="var">subst_solver</span>; <span class="id" title="var">subst_open_commut_solver</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span> "ty_var".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cases_if</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#binds_middle_eq_fresh_inv"><span class="id" title="lemma">binds_middle_eq_fresh_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">b</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> (<a class="idref" href="DOT.Lib.SyntaxClasses.html#subst_fresh_ctx"><span class="id" title="lemma">subst_fresh_ctx</span></a> <span class="id" title="var">y</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H1</span>, &lt;- <span class="id" title="lemma">map_concat</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <span class="id" title="lemma">binds_map</span>, <span class="id" title="lemma">binds_subst</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span> "ty_new".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="DOT.Lib.SyntaxClasses.html#subst_open_rec_vars_commut"><span class="id" title="lemma">subst_open_rec_vars_commut</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">auto</span> 2. <span class="id" title="tactic">apply</span> <a class="idref" href="DOT.Definitions.Syntax.Vars.html#subst_vars_of_avars"><span class="id" title="lemma">subst_vars_of_avars</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span> "ty_rec_intro".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="DOT.Definitions.Typing.GeneralTyping.html#ty_rec_intro"><span class="id" title="constructor">ty_rec_intro</span></a>. <span class="id" title="var">fold_subst</span>; <span class="id" title="var">sympl</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="DOT.Lib.SyntaxClasses.html#subst_open_commut"><span class="id" title="definition">subst_open_commut</span></a>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span> "ty_con_intro".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;clear&nbsp;t0&nbsp;t1.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>* (@<a class="idref" href="DOT.Definitions.Typing.GeneralTyping.html#ty_con_intro"><span class="id" title="constructor">ty_con_intro</span></a> (<span class="id" title="var">L</span> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> <span class="id" title="axiom">dom</span> (<span class="id" title="var">G1</span> <span class="id" title="notation">&amp;</span> <span class="id" title="var">x</span> <span class="id" title="notation">~</span> <span class="id" title="var">S</span> <span class="id" title="notation">&amp;</span> <span class="id" title="var">G2</span>))); <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="DOT.Lib.SyntaxClasses.html#subst_open_vars_commut_fresh_length"><span class="id" title="lemma">subst_open_vars_commut_fresh_length</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> (<span class="id" title="var">simpls</span>; <span class="id" title="var">destruct_all</span>; <span class="id" title="var">simpl_dom</span>; <span class="id" title="tactic">auto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">simpl_length_s</span>; <span class="id" title="var">fold_subst_env</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="DOT.Definitions.TypingClasses.SubstitutionClass.html#ty_subst_middle"><span class="id" title="definition">ty_subst_middle</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">S0</span>:= <span class="id" title="var">S</span>); <span class="id" title="tactic">eauto</span> 3;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- ? <span class="id" title="lemma">concat_assoc</span>, ? <span class="id" title="lemma">map_concat</span>, ? <span class="id" title="lemma">concat_assoc</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">sympl</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">simpl_dom</span>; <span class="id" title="tactic">rewrite</span> ? <span class="id" title="lemma">notin_union</span>; <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#fresh_notin_dom"><span class="id" title="lemma">fresh_notin_dom</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">rewrite</span> &lt;- ? <a class="idref" href="DOT.Lib.SyntaxClasses.html#subst_single"><span class="id" title="lemma">subst_single</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- ? <a class="idref" href="DOT.Lib.TransformCollect.html#subst_singles_rev_to_list"><span class="id" title="lemma">subst_singles_rev_to_list</span></a> <span class="id" title="tactic">by</span> <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="DOT.Definitions.TypingClasses.PreTyping.html#weaken_fresh_list_cons"><span class="id" title="lemma">weaken_fresh_list_cons</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">dom_concat</span>, <span class="id" title="lemma">dom_map</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> ? <span class="id" title="lemma">dom_concat</span>, &lt;- ? <span class="id" title="lemma">union_assoc</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">change</span> (<span class="id" title="definition">length</span> (<a class="idref" href="DOT.Lib.SyntaxClasses.html#to_list"><span class="id" title="definition">to_list</span></a> (<span class="id" title="var">Ts</span> <a class="idref" href="DOT.Lib.SyntaxClasses.html#96b633d5169de23740e8856c1f4462cf"><span class="id" title="notation">/[</span></a> <span class="id" title="var">x</span> <a class="idref" href="DOT.Lib.SyntaxClasses.html#96b633d5169de23740e8856c1f4462cf"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="var">y</span> <a class="idref" href="DOT.Lib.SyntaxClasses.html#96b633d5169de23740e8856c1f4462cf"><span class="id" title="notation">]</span></a>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span> (<a class="idref" href="DOT.Lib.SyntaxClasses.html#length_s"><span class="id" title="definition">length_s</span></a> (<span class="id" title="var">Ts</span> <a class="idref" href="DOT.Lib.SyntaxClasses.html#96b633d5169de23740e8856c1f4462cf"><span class="id" title="notation">/[</span></a> <span class="id" title="var">x</span> <a class="idref" href="DOT.Lib.SyntaxClasses.html#96b633d5169de23740e8856c1f4462cf"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="var">y</span> <a class="idref" href="DOT.Lib.SyntaxClasses.html#96b633d5169de23740e8856c1f4462cf"><span class="id" title="notation">]</span></a>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="DOT.Lib.TransformCollect.html#length_s_subst"><span class="id" title="lemma">length_s_subst</span></a>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="DOT.Lib.SyntaxClasses.html#subst_open_vars_commut_fresh_length"><span class="id" title="lemma">subst_open_vars_commut_fresh_length</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> (<span class="id" title="var">simpls</span>; <span class="id" title="var">destruct_all</span>; <span class="id" title="var">simpl_dom</span>; <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">simpl_length_s</span>; <span class="id" title="var">fold_subst_env</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H4</span>. <span class="id" title="var">sympl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="definition">fresh</span> <span class="id" title="var">L</span> (<span class="id" title="definition">length</span> (<span class="id" title="var">x0</span> <span class="id" title="notation">::</span> <span class="id" title="var">ys</span>)) (<span class="id" title="var">x0</span> <span class="id" title="notation">::</span> <span class="id" title="var">ys</span>)) <span class="id" title="tactic">by</span> <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">H</span> <span class="id" title="var">x0</span> <span class="id" title="var">ys</span> <span class="id" title="var">H0</span> <span class="id" title="var">H6</span> <span class="id" title="var">G1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">G2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">&amp;</span> <span class="id" title="var">ys</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#d49bbae905db9a1ef2bacb57bfb3b51d"><span class="id" title="notation">~**</span></a> <a class="idref" href="DOT.Lib.SyntaxClasses.html#to_list"><span class="id" title="definition">to_list</span></a> <span class="id" title="var">Ts</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">&amp;</span> <span class="id" title="var">x0</span> <span class="id" title="notation">~</span> <a class="idref" href="DOT.Lib.SyntaxClasses.html#open_rec_vars"><span class="id" title="definition">open_rec_vars</span></a> 1 <span class="id" title="var">ys</span> (<a class="idref" href="DOT.Lib.SyntaxClasses.html#open"><span class="id" title="abbreviation">open</span></a> <span class="id" title="var">x0</span> <span class="id" title="var">T</span>)) <span class="id" title="var">x</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="notation">(</span><a class="idref" href="DOT.Lib.SyntaxClasses.html#open_rec_vars"><span class="id" title="definition">open_rec_vars</span></a> 1 <span class="id" title="var">ys</span> (<a class="idref" href="DOT.Lib.SyntaxClasses.html#open"><span class="id" title="abbreviation">open</span></a> <span class="id" title="var">x0</span> <span class="id" title="var">T'</span>) <a class="idref" href="DOT.Lib.SyntaxClasses.html#96b633d5169de23740e8856c1f4462cf"><span class="id" title="notation">/[</span></a> <span class="id" title="var">x</span> <a class="idref" href="DOT.Lib.SyntaxClasses.html#96b633d5169de23740e8856c1f4462cf"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="var">y</span><a class="idref" href="DOT.Lib.SyntaxClasses.html#96b633d5169de23740e8856c1f4462cf"><span class="id" title="notation">]</span></a><span class="id" title="notation">)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">=</span> <span class="id" title="notation">(</span><a class="idref" href="DOT.Lib.SyntaxClasses.html#open_rec_vars"><span class="id" title="definition">open_rec_vars</span></a> 1 <span class="id" title="var">ys</span> (<a class="idref" href="DOT.Lib.SyntaxClasses.html#open"><span class="id" title="abbreviation">open</span></a> <span class="id" title="var">x0</span> (<span class="id" title="var">T'</span> <a class="idref" href="DOT.Lib.SyntaxClasses.html#96b633d5169de23740e8856c1f4462cf"><span class="id" title="notation">/[</span></a> <span class="id" title="var">x</span> <a class="idref" href="DOT.Lib.SyntaxClasses.html#96b633d5169de23740e8856c1f4462cf"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="var">y</span><a class="idref" href="DOT.Lib.SyntaxClasses.html#96b633d5169de23740e8856c1f4462cf"><span class="id" title="notation">]</span></a>))<span class="id" title="notation">)</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <a class="idref" href="DOT.Lib.SyntaxClasses.html#subst_open_vars_commut_fresh_length"><span class="id" title="lemma">subst_open_vars_commut_fresh_length</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> (<span class="id" title="var">simpl_dom</span>; <span class="id" title="tactic">auto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">x0</span> <span class="id" title="notation">&lt;&gt;</span> <span class="id" title="var">x</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> (<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="lemma">notin_singleton</span>; <span class="id" title="var">simpl_dom</span>; <span class="id" title="tactic">auto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="DOT.Lib.SyntaxClasses.html#subst_open_commut"><span class="id" title="definition">subst_open_commut</span></a>; <span class="id" title="var">cases_if</span>; <span class="id" title="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H7</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">rewrite</span> ? <span class="id" title="lemma">concat_assoc</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">dom_concat</span>, <span class="id" title="lemma">notin_union</span>; <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span> 2.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#fresh_cons_notin_rev"><span class="id" title="lemma">fresh_cons_notin_rev</span></a>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> ? <span class="id" title="lemma">dom_concat</span>, ? <span class="id" title="lemma">dom_single</span>, &lt;- ? <span class="id" title="lemma">union_assoc</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">rewrite</span> ? <span class="id" title="lemma">map_concat</span>, ? <span class="id" title="lemma">concat_assoc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="DOT.Lib.TransformCollect.html#subst_singles_rev_to_list"><span class="id" title="lemma">subst_singles_rev_to_list</span></a>, <span class="id" title="lemma">map_single</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="DOT.Definitions.TypingClasses.PreTyping.html#weaken_fresh_list_cons"><span class="id" title="lemma">weaken_fresh_list_cons</span></a>; <span class="id" title="tactic">auto</span> 2.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">rewrite</span> ? <span class="id" title="lemma">dom_concat</span>, ? <span class="id" title="lemma">dom_map</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">change</span> (<span class="id" title="definition">length</span> (<a class="idref" href="DOT.Lib.SyntaxClasses.html#to_list"><span class="id" title="definition">to_list</span></a> (<span class="id" title="var">Ts</span> <a class="idref" href="DOT.Lib.SyntaxClasses.html#96b633d5169de23740e8856c1f4462cf"><span class="id" title="notation">/[</span></a> <span class="id" title="var">x</span> <a class="idref" href="DOT.Lib.SyntaxClasses.html#96b633d5169de23740e8856c1f4462cf"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="var">y</span><a class="idref" href="DOT.Lib.SyntaxClasses.html#96b633d5169de23740e8856c1f4462cf"><span class="id" title="notation">]</span></a>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span> (<a class="idref" href="DOT.Lib.SyntaxClasses.html#length_s"><span class="id" title="definition">length_s</span></a> (<span class="id" title="var">Ts</span> <a class="idref" href="DOT.Lib.SyntaxClasses.html#96b633d5169de23740e8856c1f4462cf"><span class="id" title="notation">/[</span></a> <span class="id" title="var">x</span> <a class="idref" href="DOT.Lib.SyntaxClasses.html#96b633d5169de23740e8856c1f4462cf"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="var">y</span> <a class="idref" href="DOT.Lib.SyntaxClasses.html#96b633d5169de23740e8856c1f4462cf"><span class="id" title="notation">]</span></a>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="DOT.Lib.TransformCollect.html#length_s_subst"><span class="id" title="lemma">length_s_subst</span></a>. <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
The substitution lemma for term typing. 
</div>
<div class="code">
<span class="id" title="keyword">Instance</span> <a name="TrmTySubstMiddle"><span class="id" title="instance">TrmTySubstMiddle</span></a> : <a class="idref" href="DOT.Definitions.TypingClasses.SubstitutionClass.html#TySubstMiddle"><span class="id" title="class">TySubstMiddle</span></a> <a class="idref" href="DOT.Definitions.Typing.GeneralTyping.html#ty_trm"><span class="id" title="inductive">ty_trm</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">hnf</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">eapply</span> <a class="idref" href="DOT.GeneralTyping.Substitution.html#subst_rules"><span class="id" title="lemma">subst_rules</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Instance</span> <a name="LitTySubstMiddle"><span class="id" title="instance">LitTySubstMiddle</span></a> : <a class="idref" href="DOT.Definitions.TypingClasses.SubstitutionClass.html#TySubstMiddle"><span class="id" title="class">TySubstMiddle</span></a> <a class="idref" href="DOT.Definitions.Typing.GeneralTyping.html#ty_lit"><span class="id" title="inductive">ty_lit</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">hnf</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">eapply</span> <a class="idref" href="DOT.GeneralTyping.Substitution.html#subst_rules"><span class="id" title="lemma">subst_rules</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Instance</span> <a name="AvarsTysSubst"><span class="id" title="instance">AvarsTysSubst</span></a> : <a class="idref" href="DOT.Definitions.TypingClasses.SubstitutionClass.html#TysSubstMiddle"><span class="id" title="class">TysSubstMiddle</span></a> <a class="idref" href="DOT.Definitions.Typing.GeneralTyping.html#ty_avars"><span class="id" title="inductive">ty_avars</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">hnf</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">eapply</span> <a class="idref" href="DOT.GeneralTyping.Substitution.html#subst_rules"><span class="id" title="lemma">subst_rules</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/tebbi/coqdocjs">CoqdocJS</a>
</div>
</div>
</body>

</html>
