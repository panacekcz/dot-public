<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="assets/resources/coqdoc.css" rel="stylesheet" type="text/css" />
<link href="assets/resources/coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="assets/resources/config.js"></script>
<script type="text/javascript" src="assets/resources/coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="../README.html">README</a>
      <a href="./indexpage.html"> Index </a>
      <a href="./toc.html"> Table of Contents </a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<h1 class="libtitle">DOT.Lib.TransformCollect</h1>

<div class="code">

<br/>
<span class="id" title="keyword">Set Implicit Arguments</span>.<br/>

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">Coq.Bool.Bool</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="DOT.Lib.LibExtra.html#"><span class="id" title="library">LibExtra</span></a> <a class="idref" href="DOT.Lib.SyntaxClasses.html#"><span class="id" title="library">SyntaxClasses</span></a>.<br/>

<br/>
<span class="id" title="keyword">Generalizable</span> <span class="id" title="keyword">Variables</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span>.<br/>

<br/>
<span class="comment">(*&nbsp;**************************************************************************&nbsp;*)</span><br/>
</div>

<div class="doc">
<a name="lab204"></a><h2 class="section">Collecting</h2>
 Many operations on a syntax class involves collecting information about
    all instances of a sub-syntax. 
</div>
<div class="code">
<span class="id" title="keyword">Class</span> <a name="Collect"><span class="id" title="record">Collect</span></a> `(<span class="id" title="var">AS</span> : <a class="idref" href="DOT.Lib.SyntaxClasses.html#AbstractSyntax"><span class="id" title="class">AbstractSyntax</span></a> <span class="id" title="var">B</span>) `(<span class="id" title="var">AS'</span>: <a class="idref" href="DOT.Lib.SyntaxClasses.html#AbstractSyntax"><span class="id" title="class">AbstractSyntax</span></a> <span class="id" title="var">A</span>) :=<br/>
&nbsp;&nbsp;<a name="collect"><span class="id" title="projection">collect</span></a> : <span class="id" title="keyword">forall</span> {<span class="id" title="var">C</span> : <span class="id" title="keyword">Type</span>}, <a class="idref" href="DOT.Lib.TransformCollect.html#C"><span class="id" title="variable">C</span></a> <span class="id" title="notation">-&gt;</span> <span class="id" title="notation">(</span><a class="idref" href="DOT.Lib.TransformCollect.html#B"><span class="id" title="variable">B</span></a> <span class="id" title="notation">-&gt;</span> <a class="idref" href="DOT.Lib.TransformCollect.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">-&gt;</span> <span class="id" title="notation">(</span><a class="idref" href="DOT.Lib.TransformCollect.html#C"><span class="id" title="variable">C</span></a> <span class="id" title="notation">-&gt;</span> <a class="idref" href="DOT.Lib.TransformCollect.html#C"><span class="id" title="variable">C</span></a> <span class="id" title="notation">-&gt;</span> <a class="idref" href="DOT.Lib.TransformCollect.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">-&gt;</span> <a class="idref" href="DOT.Lib.TransformCollect.html#A"><span class="id" title="variable">A</span></a> <span class="id" title="notation">-&gt;</span> <a class="idref" href="DOT.Lib.TransformCollect.html#C"><span class="id" title="variable">C</span></a>.<br/>
<span class="id" title="var">Arguments</span> <a class="idref" href="DOT.Lib.TransformCollect.html#collect"><span class="id" title="definition">collect</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> !<span class="id" title="var">_</span> /.<br/>

<br/>
<span class="id" title="keyword">Class</span> <a name="ListLikeCollect"><span class="id" title="record">ListLikeCollect</span></a> `{<span class="id" title="var">ASB</span> : <a class="idref" href="DOT.Lib.SyntaxClasses.html#AbstractSyntax"><span class="id" title="class">AbstractSyntax</span></a> <span class="id" title="var">B</span>} `{<span class="id" title="var">ASA</span>: <a class="idref" href="DOT.Lib.SyntaxClasses.html#AbstractSyntax"><span class="id" title="class">AbstractSyntax</span></a> <span class="id" title="var">A</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">C</span>: <span class="id" title="keyword">Set</span>} `{<span class="id" title="var">ASC</span>: <a class="idref" href="DOT.Lib.SyntaxClasses.html#AbstractSyntax"><span class="id" title="class">AbstractSyntax</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#C"><span class="id" title="variable">C</span></a>} {<span class="id" title="var">TL</span>: <a class="idref" href="DOT.Lib.SyntaxClasses.html#ToList"><span class="id" title="class">ToList</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#C"><span class="id" title="variable">C</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#A"><span class="id" title="variable">A</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">CBC</span>: <a class="idref" href="DOT.Lib.TransformCollect.html#Collect"><span class="id" title="class">Collect</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#ASB"><span class="id" title="variable">ASB</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#ASC"><span class="id" title="variable">ASC</span></a>) (<span class="id" title="var">CBA</span>: <a class="idref" href="DOT.Lib.TransformCollect.html#Collect"><span class="id" title="class">Collect</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#ASB"><span class="id" title="variable">ASB</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#ASA"><span class="id" title="variable">ASA</span></a>) :=<br/>
&nbsp;&nbsp;<a name="collect_fold_right_map"><span class="id" title="projection">collect_fold_right_map</span></a> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">C'</span> : <span class="id" title="keyword">Type</span>) (<span class="id" title="var">df</span> : <a class="idref" href="DOT.Lib.TransformCollect.html#C'"><span class="id" title="variable">C'</span></a>) <span class="id" title="var">f</span> <span class="id" title="var">comb</span> (<span class="id" title="var">a</span> : <a class="idref" href="DOT.Lib.TransformCollect.html#A"><span class="id" title="variable">A</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Lib.TransformCollect.html#collect"><span class="id" title="definition">collect</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#df"><span class="id" title="variable">df</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#comb"><span class="id" title="variable">comb</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#a"><span class="id" title="variable">a</span></a> <span class="id" title="notation">=</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">List.fold_right</span> <a class="idref" href="DOT.Lib.TransformCollect.html#comb"><span class="id" title="variable">comb</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#df"><span class="id" title="variable">df</span></a> (<span class="id" title="definition">List.map</span> (<a class="idref" href="DOT.Lib.TransformCollect.html#collect"><span class="id" title="definition">collect</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#df"><span class="id" title="variable">df</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#comb"><span class="id" title="variable">comb</span></a>) (<a class="idref" href="DOT.Lib.SyntaxClasses.html#to_list"><span class="id" title="definition">to_list</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#a"><span class="id" title="variable">a</span></a>)).<br/>

<br/>
</div>

<div class="doc">
Sanity for Collect 
</div>
<div class="code">
<span class="id" title="keyword">Class</span> <a name="CollectCompose"><span class="id" title="record">CollectCompose</span></a> `(<span class="id" title="var">C</span>: <a class="idref" href="DOT.Lib.TransformCollect.html#Collect"><span class="id" title="class">Collect</span></a> <span class="id" title="var">B</span> <span class="id" title="var">A</span>) :=<br/>
&nbsp;&nbsp;<a name="collect_compose"><span class="id" title="projection">collect_compose</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> {<span class="id" title="var">C</span> <span class="id" title="var">D</span>} (<span class="id" title="var">f</span> : <a class="idref" href="DOT.Lib.TransformCollect.html#C"><span class="id" title="variable">C</span></a> <span class="id" title="notation">-&gt;</span> <a class="idref" href="DOT.Lib.TransformCollect.html#D"><span class="id" title="variable">D</span></a>) <span class="id" title="var">g</span> <span class="id" title="var">comb1</span> <span class="id" title="var">comb2</span> <span class="id" title="var">i</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>, <a class="idref" href="DOT.Lib.TransformCollect.html#f"><span class="id" title="variable">f</span></a> (<a class="idref" href="DOT.Lib.TransformCollect.html#comb1"><span class="id" title="variable">comb1</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#y"><span class="id" title="variable">y</span></a>) <span class="id" title="notation">=</span> <a class="idref" href="DOT.Lib.TransformCollect.html#comb2"><span class="id" title="variable">comb2</span></a> (<a class="idref" href="DOT.Lib.TransformCollect.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#x"><span class="id" title="variable">x</span></a>) (<a class="idref" href="DOT.Lib.TransformCollect.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#y"><span class="id" title="variable">y</span></a>)<span class="id" title="notation">)</span> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Lib.TransformCollect.html#f"><span class="id" title="variable">f</span></a> <span class="id" title="notation">∘</span> <span class="id" title="notation">(</span><a class="idref" href="DOT.Lib.TransformCollect.html#collect"><span class="id" title="definition">collect</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#g"><span class="id" title="variable">g</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#comb1"><span class="id" title="variable">comb1</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">=</span> <a class="idref" href="DOT.Lib.TransformCollect.html#collect"><span class="id" title="definition">collect</span></a> (<a class="idref" href="DOT.Lib.TransformCollect.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#i"><span class="id" title="variable">i</span></a>) (<a class="idref" href="DOT.Lib.TransformCollect.html#f"><span class="id" title="variable">f</span></a> <span class="id" title="notation">∘</span> <a class="idref" href="DOT.Lib.TransformCollect.html#g"><span class="id" title="variable">g</span></a>) <a class="idref" href="DOT.Lib.TransformCollect.html#comb2"><span class="id" title="variable">comb2</span></a>.<br/>

<br/>
<span class="id" title="keyword">Class</span> <a name="CollectReflect"><span class="id" title="record">CollectReflect</span></a> `(<span class="id" title="var">C</span>: <a class="idref" href="DOT.Lib.TransformCollect.html#Collect"><span class="id" title="class">Collect</span></a> <span class="id" title="var">B</span> <span class="id" title="var">A</span>) :=<br/>
&nbsp;&nbsp;<a name="collect_reflect"><span class="id" title="projection">collect_reflect</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">P</span> <span class="id" title="var">p</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="keyword">forall</span> <span class="id" title="var">b</span>, <span class="id" title="notation">(</span><a class="idref" href="DOT.Lib.TransformCollect.html#P"><span class="id" title="variable">P</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#b"><span class="id" title="variable">b</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">&lt;-&gt;</span> <span class="id" title="notation">(</span><a class="idref" href="DOT.Lib.TransformCollect.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#b"><span class="id" title="variable">b</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">=</span> <span class="id" title="constructor">true</span><span class="id" title="notation">)</span> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> {<span class="id" title="var">bl</span>} <span class="id" title="var">a</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="notation">(</span><a class="idref" href="DOT.Lib.TransformCollect.html#collect"><span class="id" title="definition">collect</span></a> (<span class="id" title="definition">Is_true</span> <a class="idref" href="DOT.Lib.TransformCollect.html#bl"><span class="id" title="variable">bl</span></a>) <a class="idref" href="DOT.Lib.TransformCollect.html#P"><span class="id" title="variable">P</span></a> <span class="id" title="inductive">or</span> <a class="idref" href="DOT.Lib.TransformCollect.html#a"><span class="id" title="variable">a</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">&lt;-&gt;</span> <span class="id" title="notation">(</span><a class="idref" href="DOT.Lib.TransformCollect.html#collect"><span class="id" title="definition">collect</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#bl"><span class="id" title="variable">bl</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#p"><span class="id" title="variable">p</span></a> <span class="id" title="definition">orb</span> <a class="idref" href="DOT.Lib.TransformCollect.html#a"><span class="id" title="variable">a</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">=</span> <span class="id" title="constructor">true</span>).<br/>

<br/>
</div>

<div class="doc">
Lifting Syntax Operations 
</div>
<div class="code">
<span class="id" title="keyword">Class</span> <a name="FvCollect"><span class="id" title="record">FvCollect</span></a> `(<a class="idref" href="DOT.Lib.TransformCollect.html#Collect"><span class="id" title="class">Collect</span></a>) :=<br/>
&nbsp;&nbsp;<a name="fv_collect"><span class="id" title="projection">fv_collect</span></a> : <a class="idref" href="DOT.Lib.SyntaxClasses.html#fv"><span class="id" title="definition">fv</span></a> <span class="id" title="notation">=</span> <a class="idref" href="DOT.Lib.TransformCollect.html#collect"><span class="id" title="definition">collect</span></a> (<span class="id" title="notation">\{}</span>) <a class="idref" href="DOT.Lib.SyntaxClasses.html#fv"><span class="id" title="definition">fv</span></a> (@<span class="id" title="axiom">union</span> <span class="id" title="axiom">var</span>).<br/>

<br/>
<span class="id" title="keyword">Section</span> <a name="AboutCollectCompose"><span class="id" title="section">AboutCollectCompose</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<span class="id" title="var">C</span>: <a class="idref" href="DOT.Lib.TransformCollect.html#Collect"><span class="id" title="class">Collect</span></a> <span class="id" title="var">B</span> <span class="id" title="var">A</span>}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<span class="id" title="var">CC</span>: <a class="idref" href="DOT.Lib.TransformCollect.html#CollectCompose"><span class="id" title="class">CollectCompose</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#AboutCollectCompose.C"><span class="id" title="variable">C</span></a>}.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="collect_compose_same"><span class="id" title="lemma">collect_compose_same</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> {<span class="id" title="var">C</span>} (<span class="id" title="var">f</span> : <a class="idref" href="DOT.Lib.TransformCollect.html#C"><span class="id" title="variable">C</span></a> <span class="id" title="notation">-&gt;</span> <a class="idref" href="DOT.Lib.TransformCollect.html#C"><span class="id" title="variable">C</span></a>) <span class="id" title="var">g</span> <span class="id" title="var">comb</span> <span class="id" title="var">i</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>, <a class="idref" href="DOT.Lib.TransformCollect.html#f"><span class="id" title="variable">f</span></a> (<a class="idref" href="DOT.Lib.TransformCollect.html#comb"><span class="id" title="variable">comb</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#y"><span class="id" title="variable">y</span></a>) <span class="id" title="notation">=</span> <a class="idref" href="DOT.Lib.TransformCollect.html#comb"><span class="id" title="variable">comb</span></a> (<a class="idref" href="DOT.Lib.TransformCollect.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#x"><span class="id" title="variable">x</span></a>) (<a class="idref" href="DOT.Lib.TransformCollect.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#y"><span class="id" title="variable">y</span></a>)<span class="id" title="notation">)</span> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Lib.TransformCollect.html#f"><span class="id" title="variable">f</span></a> <span class="id" title="notation">∘</span> <span class="id" title="notation">(</span><a class="idref" href="DOT.Lib.TransformCollect.html#collect"><span class="id" title="definition">collect</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#g"><span class="id" title="variable">g</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#comb"><span class="id" title="variable">comb</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">=</span> <a class="idref" href="DOT.Lib.TransformCollect.html#collect"><span class="id" title="definition">collect</span></a> (<a class="idref" href="DOT.Lib.TransformCollect.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#i"><span class="id" title="variable">i</span></a>) (<a class="idref" href="DOT.Lib.TransformCollect.html#f"><span class="id" title="variable">f</span></a> <span class="id" title="notation">∘</span> <a class="idref" href="DOT.Lib.TransformCollect.html#g"><span class="id" title="variable">g</span></a>) <a class="idref" href="DOT.Lib.TransformCollect.html#comb"><span class="id" title="variable">comb</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="var">CC</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span> <span class="id" title="keyword">using</span> <a class="idref" href="DOT.Lib.TransformCollect.html#collect_compose"><span class="id" title="definition">collect_compose</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="collect_compose_negb_orb"><span class="id" title="lemma">collect_compose_negb_orb</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">b</span> <span class="id" title="var">f</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">negb</span> <span class="id" title="notation">∘</span> <span class="id" title="notation">(</span><a class="idref" href="DOT.Lib.TransformCollect.html#collect"><span class="id" title="definition">collect</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#b"><span class="id" title="variable">b</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#f"><span class="id" title="variable">f</span></a> <span class="id" title="definition">orb</span><span class="id" title="notation">)</span> <span class="id" title="notation">=</span> <a class="idref" href="DOT.Lib.TransformCollect.html#collect"><span class="id" title="definition">collect</span></a> (<span class="id" title="definition">negb</span> <a class="idref" href="DOT.Lib.TransformCollect.html#b"><span class="id" title="variable">b</span></a>) (<span class="id" title="definition">negb</span> <span class="id" title="notation">∘</span> <a class="idref" href="DOT.Lib.TransformCollect.html#f"><span class="id" title="variable">f</span></a>) <span class="id" title="definition">andb</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="var">CC</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="DOT.Lib.TransformCollect.html#collect_compose"><span class="id" title="definition">collect_compose</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">negb_orb</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="in_collect"><span class="id" title="lemma">in_collect</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> <span class="id" title="var">a</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><a class="idref" href="DOT.Lib.TransformCollect.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">in</span> <a class="idref" href="DOT.Lib.TransformCollect.html#collect"><span class="id" title="definition">collect</span></a> <span class="id" title="notation">\{}</span> <a class="idref" href="DOT.Lib.SyntaxClasses.html#fv"><span class="id" title="definition">fv</span></a> (<span class="id" title="axiom">union</span> (<span class="id" title="var">A</span>:=<span class="id" title="axiom">var</span>)) <a class="idref" href="DOT.Lib.TransformCollect.html#a"><span class="id" title="variable">a</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">=</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Lib.TransformCollect.html#collect"><span class="id" title="definition">collect</span></a> (<a class="idref" href="DOT.Lib.TransformCollect.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">in</span> <span class="id" title="notation">\{}</span>) (<span class="id" title="keyword">fun</span> <span class="id" title="var">b</span> =&gt; <a class="idref" href="DOT.Lib.TransformCollect.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">in</span> <a class="idref" href="DOT.Lib.SyntaxClasses.html#fv"><span class="id" title="definition">fv</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#b"><span class="id" title="variable">b</span></a>) <span class="id" title="inductive">or</span> <a class="idref" href="DOT.Lib.TransformCollect.html#a"><span class="id" title="variable">a</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="var">CC</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">remember</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">s</span> =&gt; <span class="id" title="var">x</span> <span class="id" title="notation">\</span><span class="id" title="notation">in</span> <a class="idref" href="DOT.Lib.TransformCollect.html#s"><span class="id" title="variable">s</span></a>) <span class="id" title="keyword">as</span> <span class="id" title="var">ff</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">H'</span>: <span class="id" title="keyword">forall</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span>, <span class="id" title="var">ff</span> (<a class="idref" href="DOT.Lib.TransformCollect.html#y"><span class="id" title="variable">y</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> <a class="idref" href="DOT.Lib.TransformCollect.html#z"><span class="id" title="variable">z</span></a>) <span class="id" title="notation">=</span> <span class="id" title="notation">(</span><span class="id" title="var">ff</span> <a class="idref" href="DOT.Lib.TransformCollect.html#y"><span class="id" title="variable">y</span></a> <span class="id" title="notation">\/</span> <span class="id" title="var">ff</span> <a class="idref" href="DOT.Lib.TransformCollect.html#z"><span class="id" title="variable">z</span></a><span class="id" title="notation">)</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heqff</span>. <span class="id" title="tactic">apply</span> <span class="id" title="axiom">in_union</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="DOT.Lib.LibExtraProgram.html#fold_compose"><span class="id" title="lemma">fold_compose</span></a> <span class="id" title="var">ff</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="DOT.Lib.TransformCollect.html#collect_compose"><span class="id" title="definition">collect_compose</span></a> <span class="id" title="var">ff</span> <a class="idref" href="DOT.Lib.SyntaxClasses.html#fv"><span class="id" title="definition">fv</span></a> (@<span class="id" title="axiom">union</span> <span class="id" title="axiom">var</span>) <span class="id" title="inductive">or</span> <span class="id" title="notation">\{}</span>); <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="notin_collect"><span class="id" title="lemma">notin_collect</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> <span class="id" title="var">a</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><a class="idref" href="DOT.Lib.TransformCollect.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">notin</span> <a class="idref" href="DOT.Lib.TransformCollect.html#collect"><span class="id" title="definition">collect</span></a> <span class="id" title="notation">\{}</span> <a class="idref" href="DOT.Lib.SyntaxClasses.html#fv"><span class="id" title="definition">fv</span></a> (<span class="id" title="axiom">union</span> (<span class="id" title="var">A</span>:=<span class="id" title="axiom">var</span>)) <a class="idref" href="DOT.Lib.TransformCollect.html#a"><span class="id" title="variable">a</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">=</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Lib.TransformCollect.html#collect"><span class="id" title="definition">collect</span></a> (<a class="idref" href="DOT.Lib.TransformCollect.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">notin</span> <span class="id" title="notation">\{}</span>) (<span class="id" title="keyword">fun</span> <span class="id" title="var">b</span> =&gt; <a class="idref" href="DOT.Lib.TransformCollect.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">notin</span> <a class="idref" href="DOT.Lib.SyntaxClasses.html#fv"><span class="id" title="definition">fv</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#b"><span class="id" title="variable">b</span></a>) <span class="id" title="inductive">and</span> <a class="idref" href="DOT.Lib.TransformCollect.html#a"><span class="id" title="variable">a</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="var">CC</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">remember</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">s</span> =&gt; <span class="id" title="var">x</span> <span class="id" title="notation">\</span><span class="id" title="notation">notin</span> <a class="idref" href="DOT.Lib.TransformCollect.html#s"><span class="id" title="variable">s</span></a>) <span class="id" title="keyword">as</span> <span class="id" title="var">ff</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">H'</span>: <span class="id" title="keyword">forall</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span>, <span class="id" title="var">ff</span> (<a class="idref" href="DOT.Lib.TransformCollect.html#y"><span class="id" title="variable">y</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> <a class="idref" href="DOT.Lib.TransformCollect.html#z"><span class="id" title="variable">z</span></a>) <span class="id" title="notation">=</span> <span class="id" title="notation">(</span><span class="id" title="var">ff</span> <a class="idref" href="DOT.Lib.TransformCollect.html#y"><span class="id" title="variable">y</span></a> <span class="id" title="notation">/\</span> <span class="id" title="var">ff</span> <a class="idref" href="DOT.Lib.TransformCollect.html#z"><span class="id" title="variable">z</span></a><span class="id" title="notation">)</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">apply</span> <span class="id" title="axiom">prop_ext</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heqff</span>. <span class="id" title="tactic">apply</span> <span class="id" title="lemma">notin_union</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="DOT.Lib.LibExtraProgram.html#fold_compose"><span class="id" title="lemma">fold_compose</span></a> <span class="id" title="var">ff</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="DOT.Lib.TransformCollect.html#collect_compose"><span class="id" title="definition">collect_compose</span></a> <span class="id" title="var">ff</span> <a class="idref" href="DOT.Lib.SyntaxClasses.html#fv"><span class="id" title="definition">fv</span></a> (@<span class="id" title="axiom">union</span> <span class="id" title="axiom">var</span>) <span class="id" title="inductive">and</span> <span class="id" title="notation">\{}</span>); <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="DOT.Lib.TransformCollect.html#AboutCollectCompose"><span class="id" title="section">AboutCollectCompose</span></a>.<br/>

<br/>
<span class="comment">(*&nbsp;**************************************************************************&nbsp;*)</span><br/>
</div>

<div class="doc">
<a name="lab205"></a><h2 class="section">Transforming</h2>
 Many operations on a syntax class involves transforming sub-syntaxes. 
</div>
<div class="code">
<span class="id" title="keyword">Class</span> <a name="Transform"><span class="id" title="record">Transform</span></a> `(<span class="id" title="var">AS</span> : <a class="idref" href="DOT.Lib.SyntaxClasses.html#AbstractSyntax"><span class="id" title="class">AbstractSyntax</span></a> <span class="id" title="var">B</span>) `(<span class="id" title="var">AS'</span>: <a class="idref" href="DOT.Lib.SyntaxClasses.html#AbstractSyntax"><span class="id" title="class">AbstractSyntax</span></a> <span class="id" title="var">A</span>) :=<br/>
&nbsp;&nbsp;<a name="transform"><span class="id" title="projection">transform</span></a> : <span class="id" title="notation">(</span><a class="idref" href="DOT.Lib.TransformCollect.html#B"><span class="id" title="variable">B</span></a> <span class="id" title="notation">-&gt;</span> <span class="id" title="inductive">nat</span> <span class="id" title="notation">-&gt;</span> <a class="idref" href="DOT.Lib.TransformCollect.html#B"><span class="id" title="variable">B</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">-&gt;</span> <a class="idref" href="DOT.Lib.TransformCollect.html#A"><span class="id" title="variable">A</span></a> <span class="id" title="notation">-&gt;</span> <span class="id" title="inductive">nat</span> <span class="id" title="notation">-&gt;</span> <a class="idref" href="DOT.Lib.TransformCollect.html#A"><span class="id" title="variable">A</span></a>.<br/>
<span class="id" title="var">Arguments</span> <a class="idref" href="DOT.Lib.TransformCollect.html#transform"><span class="id" title="definition">transform</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> !<span class="id" title="var">_</span> /.<br/>

<br/>
<span class="id" title="keyword">Class</span> <a name="ListLikeTransform"><span class="id" title="record">ListLikeTransform</span></a> `{<span class="id" title="var">ASB</span> : <a class="idref" href="DOT.Lib.SyntaxClasses.html#AbstractSyntax"><span class="id" title="class">AbstractSyntax</span></a> <span class="id" title="var">B</span>} `{<span class="id" title="var">ASA</span>: <a class="idref" href="DOT.Lib.SyntaxClasses.html#AbstractSyntax"><span class="id" title="class">AbstractSyntax</span></a> <span class="id" title="var">A</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">C</span>: <span class="id" title="keyword">Set</span>} `{<span class="id" title="var">ASC</span>: <a class="idref" href="DOT.Lib.SyntaxClasses.html#AbstractSyntax"><span class="id" title="class">AbstractSyntax</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#C"><span class="id" title="variable">C</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">TL</span>: <a class="idref" href="DOT.Lib.SyntaxClasses.html#ToList"><span class="id" title="class">ToList</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#C"><span class="id" title="variable">C</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#A"><span class="id" title="variable">A</span></a>} {<span class="id" title="var">FL</span>: <a class="idref" href="DOT.Lib.SyntaxClasses.html#OfList"><span class="id" title="class">OfList</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#C"><span class="id" title="variable">C</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#A"><span class="id" title="variable">A</span></a>} {<span class="id" title="var">LL</span>: <a class="idref" href="DOT.Lib.SyntaxClasses.html#ListLike"><span class="id" title="class">ListLike</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#TL"><span class="id" title="variable">TL</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#FL"><span class="id" title="variable">FL</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">TBC</span>: <a class="idref" href="DOT.Lib.TransformCollect.html#Transform"><span class="id" title="class">Transform</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#ASB"><span class="id" title="variable">ASB</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#ASC"><span class="id" title="variable">ASC</span></a>) (<span class="id" title="var">TBA</span>: <a class="idref" href="DOT.Lib.TransformCollect.html#Transform"><span class="id" title="class">Transform</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#ASB"><span class="id" title="variable">ASB</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#ASA"><span class="id" title="variable">ASA</span></a>) :=<br/>
&nbsp;&nbsp;<a name="transform_map_f"><span class="id" title="projection">transform_map_f</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">f</span> <span class="id" title="var">n</span> <span class="id" title="var">a</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Lib.TransformCollect.html#transform"><span class="id" title="definition">transform</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#n"><span class="id" title="variable">n</span></a> <span class="id" title="notation">=</span> <a class="idref" href="DOT.Lib.SyntaxClasses.html#map_f"><span class="id" title="definition">map_f</span></a> (<span class="id" title="keyword">fun</span> <span class="id" title="var">c</span> =&gt; <a class="idref" href="DOT.Lib.TransformCollect.html#transform"><span class="id" title="definition">transform</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#n"><span class="id" title="variable">n</span></a>) <a class="idref" href="DOT.Lib.TransformCollect.html#a"><span class="id" title="variable">a</span></a>.<br/>

<br/>
</div>

<div class="doc">
Sanity for Transform 
</div>
<div class="code">
<span class="id" title="keyword">Class</span> <a name="TransformId"><span class="id" title="record">TransformId</span></a> `(<span class="id" title="var">T</span>: <a class="idref" href="DOT.Lib.TransformCollect.html#Transform"><span class="id" title="class">Transform</span></a> <span class="id" title="var">B</span> <span class="id" title="var">A</span>) :=<br/>
&nbsp;&nbsp;<a name="transform_id"><span class="id" title="projection">transform_id</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> <span class="id" title="var">n</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Lib.TransformCollect.html#transform"><span class="id" title="definition">transform</span></a> (<a class="idref" href="DOT.Lib.LibExtraProgram.html#ignore_second"><span class="id" title="definition">ignore_second</span></a> <span class="id" title="definition">id</span>) <a class="idref" href="DOT.Lib.TransformCollect.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#n"><span class="id" title="variable">n</span></a> <span class="id" title="notation">=</span> <a class="idref" href="DOT.Lib.TransformCollect.html#x"><span class="id" title="variable">x</span></a>.<br/>

<br/>
<span class="id" title="keyword">Class</span> <a name="TransformCompose"><span class="id" title="record">TransformCompose</span></a> `(<span class="id" title="var">T</span>: <a class="idref" href="DOT.Lib.TransformCollect.html#Transform"><span class="id" title="class">Transform</span></a> <span class="id" title="var">B</span> <span class="id" title="var">A</span>) :=<br/>
&nbsp;&nbsp;<a name="transform_compose"><span class="id" title="projection">transform_compose</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">f</span> <span class="id" title="var">g</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Lib.LibExtraProgram.html#b0118793a9858100d67795ca92b2f466"><span class="id" title="notation">(</span></a><a class="idref" href="DOT.Lib.TransformCollect.html#transform"><span class="id" title="definition">transform</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#f"><span class="id" title="variable">f</span></a><a class="idref" href="DOT.Lib.LibExtraProgram.html#b0118793a9858100d67795ca92b2f466"><span class="id" title="notation">)</span></a> <a class="idref" href="DOT.Lib.LibExtraProgram.html#b0118793a9858100d67795ca92b2f466"><span class="id" title="notation">∘∘</span></a> <a class="idref" href="DOT.Lib.LibExtraProgram.html#b0118793a9858100d67795ca92b2f466"><span class="id" title="notation">(</span></a><a class="idref" href="DOT.Lib.TransformCollect.html#transform"><span class="id" title="definition">transform</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#g"><span class="id" title="variable">g</span></a><a class="idref" href="DOT.Lib.LibExtraProgram.html#b0118793a9858100d67795ca92b2f466"><span class="id" title="notation">)</span></a> <span class="id" title="notation">=</span> <a class="idref" href="DOT.Lib.TransformCollect.html#transform"><span class="id" title="definition">transform</span></a> (<a class="idref" href="DOT.Lib.TransformCollect.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="DOT.Lib.LibExtraProgram.html#b0118793a9858100d67795ca92b2f466"><span class="id" title="notation">∘∘</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#g"><span class="id" title="variable">g</span></a>).<br/>

<br/>
</div>

<div class="doc">
Lifting Syntax Operations 
</div>
<div class="code">
<span class="id" title="keyword">Class</span> <a name="OpenTransform"><span class="id" title="record">OpenTransform</span></a> `(<a class="idref" href="DOT.Lib.TransformCollect.html#Transform"><span class="id" title="class">Transform</span></a>) :=<br/>
&nbsp;&nbsp;<a name="open_transform"><span class="id" title="projection">open_transform</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">n</span> <span class="id" title="var">x</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><a class="idref" href="DOT.Lib.SyntaxClasses.html#open_depth_rec"><span class="id" title="definition">open_depth_rec</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#x"><span class="id" title="variable">x</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">=</span> <a class="idref" href="DOT.Lib.TransformCollect.html#transform"><span class="id" title="definition">transform</span></a> (<a class="idref" href="DOT.Lib.SyntaxClasses.html#open_depth_rec"><span class="id" title="definition">open_depth_rec</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#x"><span class="id" title="variable">x</span></a>).<br/>

<br/>
<span class="id" title="keyword">Class</span> <a name="SubstTransform"><span class="id" title="record">SubstTransform</span></a> `(<a class="idref" href="DOT.Lib.TransformCollect.html#Transform"><span class="id" title="class">Transform</span></a>) :=<br/>
&nbsp;&nbsp;<a name="subst_transform"><span class="id" title="projection">subst_transform</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><a class="idref" href="DOT.Lib.LibExtraProgram.html#ignore_second"><span class="id" title="definition">ignore_second</span></a> (<a class="idref" href="DOT.Lib.SyntaxClasses.html#subst_var"><span class="id" title="definition">subst_var</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#y"><span class="id" title="variable">y</span></a>)<span class="id" title="notation">)</span> <span class="id" title="notation">=</span> <a class="idref" href="DOT.Lib.TransformCollect.html#transform"><span class="id" title="definition">transform</span></a> (<a class="idref" href="DOT.Lib.LibExtraProgram.html#ignore_second"><span class="id" title="definition">ignore_second</span></a> (<a class="idref" href="DOT.Lib.SyntaxClasses.html#subst_var"><span class="id" title="definition">subst_var</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#y"><span class="id" title="variable">y</span></a>)).<br/>

<br/>
<span class="comment">(*&nbsp;**************************************************************************&nbsp;*)</span><br/>
</div>

<div class="doc">
<a name="lab206"></a><h2 class="section">Links Between Syntax, Collect and Transform</h2>

</div>
<div class="code">
<span class="id" title="keyword">Class</span> <a name="CollectTransform"><span class="id" title="record">CollectTransform</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<span class="id" title="var">ASB</span> : <a class="idref" href="DOT.Lib.SyntaxClasses.html#AbstractSyntax"><span class="id" title="class">AbstractSyntax</span></a> <span class="id" title="var">B</span>} `{<span class="id" title="var">ASA</span> : <a class="idref" href="DOT.Lib.SyntaxClasses.html#AbstractSyntax"><span class="id" title="class">AbstractSyntax</span></a> <span class="id" title="var">A</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">C</span> : <a class="idref" href="DOT.Lib.TransformCollect.html#Collect"><span class="id" title="class">Collect</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#ASB"><span class="id" title="variable">ASB</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#ASA"><span class="id" title="variable">ASA</span></a>) (<span class="id" title="var">T</span> : <a class="idref" href="DOT.Lib.TransformCollect.html#Transform"><span class="id" title="class">Transform</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#ASB"><span class="id" title="variable">ASB</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#ASA"><span class="id" title="variable">ASA</span></a>) :=<br/>
&nbsp;&nbsp;<a name="collect_transform"><span class="id" title="projection">collect_transform</span></a>: <span class="id" title="keyword">forall</span> <span class="id" title="var">bl</span> <span class="id" title="var">p</span> <span class="id" title="var">a</span> <span class="id" title="var">f</span> <span class="id" title="var">g</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><a class="idref" href="DOT.Lib.TransformCollect.html#collect"><span class="id" title="definition">collect</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#bl"><span class="id" title="variable">bl</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#p"><span class="id" title="variable">p</span></a> <span class="id" title="definition">andb</span> <a class="idref" href="DOT.Lib.TransformCollect.html#a"><span class="id" title="variable">a</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">=</span> <span class="id" title="constructor">true</span> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Lib.TransformCollect.html#transform"><span class="id" title="definition">transform</span></a> (<a class="idref" href="DOT.Lib.LibExtraProgram.html#dec_apply"><span class="id" title="definition">dec_apply</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#g"><span class="id" title="variable">g</span></a>) <a class="idref" href="DOT.Lib.TransformCollect.html#a"><span class="id" title="variable">a</span></a> <span class="id" title="notation">=</span> <a class="idref" href="DOT.Lib.TransformCollect.html#transform"><span class="id" title="definition">transform</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#a"><span class="id" title="variable">a</span></a>.<br/>

<br/>
<span class="comment">(*&nbsp;**************************************************************************&nbsp;*)</span><br/>
</div>

<div class="doc">
<a name="lab207"></a><h2 class="section">Transformed Syntax Lemmas</h2>

</div>
<div class="code">
<span class="id" title="keyword">Section</span> <a name="AboutTransformSyntax"><span class="id" title="section">AboutTransformSyntax</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<span class="id" title="var">OA</span>: <a class="idref" href="DOT.Lib.SyntaxClasses.html#Openable"><span class="id" title="class">Openable</span></a> <span class="id" title="var">A</span>} {<span class="id" title="var">FA</span>: <a class="idref" href="DOT.Lib.SyntaxClasses.html#FreeVar"><span class="id" title="class">FreeVar</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#A"><span class="id" title="variable">A</span></a>} {<span class="id" title="var">SA</span>: <a class="idref" href="DOT.Lib.SyntaxClasses.html#SubstVar"><span class="id" title="class">SubstVar</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#A"><span class="id" title="variable">A</span></a>}.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<span class="id" title="var">OB</span>: <a class="idref" href="DOT.Lib.SyntaxClasses.html#Openable"><span class="id" title="class">Openable</span></a> <span class="id" title="var">B</span>} {<span class="id" title="var">FB</span>: <a class="idref" href="DOT.Lib.SyntaxClasses.html#FreeVar"><span class="id" title="class">FreeVar</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#B"><span class="id" title="variable">B</span></a>} {<span class="id" title="var">SB</span>: <a class="idref" href="DOT.Lib.SyntaxClasses.html#SubstVar"><span class="id" title="class">SubstVar</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#B"><span class="id" title="variable">B</span></a>}.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<span class="id" title="var">ASB</span>: <a class="idref" href="DOT.Lib.SyntaxClasses.html#AbstractSyntax"><span class="id" title="class">AbstractSyntax</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#AboutTransformSyntax.OB"><span class="id" title="variable">OB</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#AboutTransformSyntax.FB"><span class="id" title="variable">FB</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#AboutTransformSyntax.SB"><span class="id" title="variable">SB</span></a>} {<span class="id" title="var">ASA</span>: <a class="idref" href="DOT.Lib.SyntaxClasses.html#AbstractSyntax"><span class="id" title="class">AbstractSyntax</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#AboutTransformSyntax.OA"><span class="id" title="variable">OA</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#AboutTransformSyntax.FA"><span class="id" title="variable">FA</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#AboutTransformSyntax.SA"><span class="id" title="variable">SA</span></a>}.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<span class="id" title="var">C</span>: <a class="idref" href="DOT.Lib.TransformCollect.html#Collect"><span class="id" title="class">Collect</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#AboutTransformSyntax.ASB"><span class="id" title="variable">ASB</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#AboutTransformSyntax.ASA"><span class="id" title="variable">ASA</span></a>} {<span class="id" title="var">CC</span>: <a class="idref" href="DOT.Lib.TransformCollect.html#CollectCompose"><span class="id" title="class">CollectCompose</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#C"><span class="id" title="variable">C</span></a>} {<span class="id" title="var">CR</span>: <a class="idref" href="DOT.Lib.TransformCollect.html#CollectReflect"><span class="id" title="class">CollectReflect</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#C"><span class="id" title="variable">C</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">FC</span>: <a class="idref" href="DOT.Lib.TransformCollect.html#FvCollect"><span class="id" title="class">FvCollect</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#C"><span class="id" title="variable">C</span></a>}.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<span class="id" title="var">T</span>: <a class="idref" href="DOT.Lib.TransformCollect.html#Transform"><span class="id" title="class">Transform</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#AboutTransformSyntax.ASB"><span class="id" title="variable">ASB</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#AboutTransformSyntax.ASA"><span class="id" title="variable">ASA</span></a>} {<span class="id" title="var">TI</span>: <a class="idref" href="DOT.Lib.TransformCollect.html#TransformId"><span class="id" title="class">TransformId</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#T"><span class="id" title="variable">T</span></a>} {<span class="id" title="var">TC</span>: <a class="idref" href="DOT.Lib.TransformCollect.html#TransformCompose"><span class="id" title="class">TransformCompose</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#T"><span class="id" title="variable">T</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">OT</span>: <a class="idref" href="DOT.Lib.TransformCollect.html#OpenTransform"><span class="id" title="class">OpenTransform</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#T"><span class="id" title="variable">T</span></a>} {<span class="id" title="var">ST</span>: <a class="idref" href="DOT.Lib.TransformCollect.html#SubstTransform"><span class="id" title="class">SubstTransform</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#T"><span class="id" title="variable">T</span></a>}.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<span class="id" title="var">CT</span>: <a class="idref" href="DOT.Lib.TransformCollect.html#CollectTransform"><span class="id" title="class">CollectTransform</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#AboutTransformSyntax.C"><span class="id" title="variable">C</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#AboutTransformSyntax.T"><span class="id" title="variable">T</span></a>}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a name="AboutTransformSyntax.List"><span class="id" title="section">List</span></a>.<br/>
</div>

<div class="doc">
We can lift Collect and Transform to Lists 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="collect_list"><span class="id" title="definition">collect_list</span></a> : <a class="idref" href="DOT.Lib.TransformCollect.html#Collect"><span class="id" title="class">Collect</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#AboutTransformSyntax.ASB"><span class="id" title="variable">ASB</span></a> (<a class="idref" href="DOT.Lib.SyntaxClasses.html#ListAbstractSyntax"><span class="id" title="instance">ListAbstractSyntax</span></a> (<span class="id" title="var">A</span>:=<a class="idref" href="DOT.Lib.TransformCollect.html#AboutTransformSyntax.A"><span class="id" title="variable">A</span></a>)) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> (<span class="id" title="var">C</span> : <span class="id" title="keyword">Type</span>) (<span class="id" title="var">df</span> : <a class="idref" href="DOT.Lib.TransformCollect.html#C"><span class="id" title="variable">C</span></a>) <span class="id" title="var">f</span> <span class="id" title="var">comb</span> <span class="id" title="var">as'</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="definition">List.fold_right</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">a</span> <span class="id" title="var">acc</span> =&gt; <a class="idref" href="DOT.Lib.TransformCollect.html#comb"><span class="id" title="variable">comb</span></a> (<a class="idref" href="DOT.Lib.TransformCollect.html#collect"><span class="id" title="definition">collect</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#df"><span class="id" title="variable">df</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#comb"><span class="id" title="variable">comb</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#a"><span class="id" title="variable">a</span></a>) <a class="idref" href="DOT.Lib.TransformCollect.html#acc"><span class="id" title="variable">acc</span></a>) <a class="idref" href="DOT.Lib.TransformCollect.html#df"><span class="id" title="variable">df</span></a>) <a class="idref" href="DOT.Lib.TransformCollect.html#as'"><span class="id" title="variable">as'</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="transform_list"><span class="id" title="definition">transform_list</span></a> : <a class="idref" href="DOT.Lib.TransformCollect.html#Transform"><span class="id" title="class">Transform</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#AboutTransformSyntax.ASB"><span class="id" title="variable">ASB</span></a> (<a class="idref" href="DOT.Lib.SyntaxClasses.html#ListAbstractSyntax"><span class="id" title="instance">ListAbstractSyntax</span></a> (<span class="id" title="var">A</span>:=<a class="idref" href="DOT.Lib.TransformCollect.html#AboutTransformSyntax.A"><span class="id" title="variable">A</span></a>)) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">f</span> <span class="id" title="var">as'</span> <span class="id" title="var">n</span> =&gt; <span class="id" title="definition">List.map</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">a</span> =&gt; <a class="idref" href="DOT.Lib.TransformCollect.html#transform"><span class="id" title="definition">transform</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#n"><span class="id" title="variable">n</span></a>) <a class="idref" href="DOT.Lib.TransformCollect.html#as'"><span class="id" title="variable">as'</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Instance</span> <a name="ListCollect"><span class="id" title="instance">ListCollect</span></a> : <a class="idref" href="DOT.Lib.TransformCollect.html#Collect"><span class="id" title="class">Collect</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#AboutTransformSyntax.ASB"><span class="id" title="variable">ASB</span></a> (<a class="idref" href="DOT.Lib.SyntaxClasses.html#ListAbstractSyntax"><span class="id" title="instance">ListAbstractSyntax</span></a> (<span class="id" title="var">A</span>:=<a class="idref" href="DOT.Lib.TransformCollect.html#AboutTransformSyntax.A"><span class="id" title="variable">A</span></a>)) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Lib.TransformCollect.html#collect_list"><span class="id" title="definition">collect_list</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Instance</span> <a name="ListTransform"><span class="id" title="instance">ListTransform</span></a> : <a class="idref" href="DOT.Lib.TransformCollect.html#Transform"><span class="id" title="class">Transform</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#AboutTransformSyntax.ASB"><span class="id" title="variable">ASB</span></a> (<a class="idref" href="DOT.Lib.SyntaxClasses.html#ListAbstractSyntax"><span class="id" title="instance">ListAbstractSyntax</span></a> (<span class="id" title="var">A</span>:=<a class="idref" href="DOT.Lib.TransformCollect.html#AboutTransformSyntax.A"><span class="id" title="variable">A</span></a>)) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Lib.TransformCollect.html#transform_list"><span class="id" title="definition">transform_list</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Instance</span> <a name="ListCollectCompose"><span class="id" title="instance">ListCollectCompose</span></a> : <a class="idref" href="DOT.Lib.TransformCollect.html#CollectCompose"><span class="id" title="class">CollectCompose</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#ListCollect"><span class="id" title="instance">ListCollect</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="var">CC</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">hnf</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">unfold</span> "∘".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="axiom">fun_ext_dep</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">as'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">as'</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<a class="idref" href="DOT.Lib.TransformCollect.html#ListCollect"><span class="id" title="instance">ListCollect</span></a> (<span class="id" title="var">f</span> <span class="id" title="var">i</span>) (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> : <a class="idref" href="DOT.Lib.TransformCollect.html#AboutTransformSyntax.B"><span class="id" title="variable">B</span></a> =&gt; <span class="id" title="var">f</span> (<span class="id" title="var">g</span> <a class="idref" href="DOT.Lib.TransformCollect.html#x"><span class="id" title="variable">x</span></a>)) <span class="id" title="var">comb2</span> <span class="id" title="var">as'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span> (<a class="idref" href="DOT.Lib.TransformCollect.html#collect"><span class="id" title="definition">collect</span></a> (<span class="id" title="var">f</span> <span class="id" title="var">i</span>) (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> : <a class="idref" href="DOT.Lib.TransformCollect.html#AboutTransformSyntax.B"><span class="id" title="variable">B</span></a> =&gt; <span class="id" title="var">f</span> (<span class="id" title="var">g</span> <a class="idref" href="DOT.Lib.TransformCollect.html#x"><span class="id" title="variable">x</span></a>)) <span class="id" title="var">comb2</span> <span class="id" title="var">as'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<a class="idref" href="DOT.Lib.TransformCollect.html#ListCollect"><span class="id" title="instance">ListCollect</span></a> <span class="id" title="var">i</span> <span class="id" title="var">g</span> <span class="id" title="var">comb1</span> <span class="id" title="var">as'</span>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="DOT.Lib.TransformCollect.html#collect"><span class="id" title="definition">collect</span></a> <span class="id" title="var">i</span> <span class="id" title="var">g</span> <span class="id" title="var">comb1</span> <span class="id" title="var">as'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">IHas'</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">rewrite</span> ? (<a class="idref" href="DOT.Lib.LibExtraProgram.html#fold_compose"><span class="id" title="lemma">fold_compose</span></a> <span class="id" title="var">f</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="DOT.Lib.TransformCollect.html#collect_compose"><span class="id" title="definition">collect_compose</span></a> (<span class="id" title="var">C</span>:=<a class="idref" href="DOT.Lib.TransformCollect.html#AboutTransformSyntax.C"><span class="id" title="variable">C</span></a>) <span class="id" title="var">f</span> <span class="id" title="var">g</span> <span class="id" title="var">comb1</span> <span class="id" title="var">comb2</span>); <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Ltac</span> <span class="id" title="var">foldLC</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> <a class="idref" href="DOT.Lib.TransformCollect.html#ListCollect"><span class="id" title="instance">ListCollect</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(@<a class="idref" href="DOT.Lib.TransformCollect.html#collect"><span class="id" title="definition">collect</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#AboutTransformSyntax.B"><span class="id" title="variable">B</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#AboutTransformSyntax.OB"><span class="id" title="variable">OB</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#AboutTransformSyntax.FB"><span class="id" title="variable">FB</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#AboutTransformSyntax.SB"><span class="id" title="variable">SB</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#AboutTransformSyntax.ASB"><span class="id" title="variable">ASB</span></a> (<span class="id" title="inductive">list</span> <a class="idref" href="DOT.Lib.TransformCollect.html#AboutTransformSyntax.A"><span class="id" title="variable">A</span></a>) (@<a class="idref" href="DOT.Lib.SyntaxClasses.html#ListOpenable"><span class="id" title="instance">ListOpenable</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#AboutTransformSyntax.A"><span class="id" title="variable">A</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#AboutTransformSyntax.OA"><span class="id" title="variable">OA</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(@<a class="idref" href="DOT.Lib.SyntaxClasses.html#ListFreeVar"><span class="id" title="instance">ListFreeVar</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#AboutTransformSyntax.A"><span class="id" title="variable">A</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#AboutTransformSyntax.FA"><span class="id" title="variable">FA</span></a>) (@<a class="idref" href="DOT.Lib.SyntaxClasses.html#ListSubstVar"><span class="id" title="instance">ListSubstVar</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#AboutTransformSyntax.A"><span class="id" title="variable">A</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#AboutTransformSyntax.SA"><span class="id" title="variable">SA</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(@<a class="idref" href="DOT.Lib.SyntaxClasses.html#ListAbstractSyntax"><span class="id" title="instance">ListAbstractSyntax</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#AboutTransformSyntax.A"><span class="id" title="variable">A</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#AboutTransformSyntax.OA"><span class="id" title="variable">OA</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#AboutTransformSyntax.FA"><span class="id" title="variable">FA</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#AboutTransformSyntax.SA"><span class="id" title="variable">SA</span></a>) <a class="idref" href="DOT.Lib.TransformCollect.html#ListCollect"><span class="id" title="instance">ListCollect</span></a>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Instance</span> <a name="ListCollectReflect"><span class="id" title="instance">ListCollectReflect</span></a> : <a class="idref" href="DOT.Lib.TransformCollect.html#CollectReflect"><span class="id" title="class">CollectReflect</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#ListCollect"><span class="id" title="instance">ListCollect</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="var">CR</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">hnf</span>. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">a</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span> <span class="id" title="keyword">using</span> <a class="idref" href="DOT.Lib.LibExtraBool.html#Is_true_iff_eq_true"><span class="id" title="lemma">Is_true_iff_eq_true</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">foldLC</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="DOT.Lib.TransformCollect.html#collect_reflect"><span class="id" title="definition">collect_reflect</span></a>, <span class="id" title="var">IHa</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span>; <span class="id" title="tactic">auto</span> <span class="id" title="keyword">using</span> <span class="id" title="lemma">orb_true_iff</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Instance</span> <a name="ListFvCollect"><span class="id" title="instance">ListFvCollect</span></a> : <a class="idref" href="DOT.Lib.TransformCollect.html#FvCollect"><span class="id" title="class">FvCollect</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#ListCollect"><span class="id" title="instance">ListCollect</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="var">FC</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">hnf</span>. <span class="id" title="tactic">apply</span> <span class="id" title="axiom">fun_ext_dep</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">as'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">as'</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">foldLC</span>; <span class="id" title="tactic">f_equal</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="DOT.Lib.TransformCollect.html#fv_collect"><span class="id" title="definition">fv_collect</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Ltac</span> <span class="id" title="var">foldLT</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> <a class="idref" href="DOT.Lib.TransformCollect.html#ListTransform"><span class="id" title="instance">ListTransform</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span> (@<a class="idref" href="DOT.Lib.TransformCollect.html#transform"><span class="id" title="definition">transform</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#AboutTransformSyntax.B"><span class="id" title="variable">B</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#AboutTransformSyntax.OB"><span class="id" title="variable">OB</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#AboutTransformSyntax.FB"><span class="id" title="variable">FB</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#AboutTransformSyntax.SB"><span class="id" title="variable">SB</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#AboutTransformSyntax.ASB"><span class="id" title="variable">ASB</span></a> (<span class="id" title="inductive">list</span> <a class="idref" href="DOT.Lib.TransformCollect.html#AboutTransformSyntax.A"><span class="id" title="variable">A</span></a>) (@<a class="idref" href="DOT.Lib.SyntaxClasses.html#ListOpenable"><span class="id" title="instance">ListOpenable</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#AboutTransformSyntax.A"><span class="id" title="variable">A</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#AboutTransformSyntax.OA"><span class="id" title="variable">OA</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(@<a class="idref" href="DOT.Lib.SyntaxClasses.html#ListFreeVar"><span class="id" title="instance">ListFreeVar</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#AboutTransformSyntax.A"><span class="id" title="variable">A</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#AboutTransformSyntax.FA"><span class="id" title="variable">FA</span></a>) (@<a class="idref" href="DOT.Lib.SyntaxClasses.html#ListSubstVar"><span class="id" title="instance">ListSubstVar</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#AboutTransformSyntax.A"><span class="id" title="variable">A</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#AboutTransformSyntax.SA"><span class="id" title="variable">SA</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(@<a class="idref" href="DOT.Lib.SyntaxClasses.html#ListAbstractSyntax"><span class="id" title="instance">ListAbstractSyntax</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#AboutTransformSyntax.A"><span class="id" title="variable">A</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#AboutTransformSyntax.OA"><span class="id" title="variable">OA</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#AboutTransformSyntax.FA"><span class="id" title="variable">FA</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#AboutTransformSyntax.SA"><span class="id" title="variable">SA</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Lib.TransformCollect.html#ListTransform"><span class="id" title="instance">ListTransform</span></a>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Instance</span> <a name="ListTransformId"><span class="id" title="instance">ListTransformId</span></a> : <a class="idref" href="DOT.Lib.TransformCollect.html#TransformId"><span class="id" title="class">TransformId</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#ListTransform"><span class="id" title="instance">ListTransform</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="var">TI</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">hnf</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">as'</span>; <span class="id" title="tactic">induction</span> <span class="id" title="var">as'</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>; <span class="id" title="var">foldLT</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="DOT.Lib.TransformCollect.html#transform_id"><span class="id" title="definition">transform_id</span></a>, <span class="id" title="var">IHas'</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Instance</span> <a name="ListTransformCompose"><span class="id" title="instance">ListTransformCompose</span></a> : <a class="idref" href="DOT.Lib.TransformCollect.html#TransformCompose"><span class="id" title="class">TransformCompose</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#ListTransform"><span class="id" title="instance">ListTransform</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="var">TC</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">hnf</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">f</span> <span class="id" title="var">g</span>. <span class="id" title="tactic">unfold</span> "∘∘".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">intros_fun_ext</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">x</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">foldLT</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">IHx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="DOT.Lib.LibExtraProgram.html#fold_compose12"><span class="id" title="lemma">fold_compose12</span></a> (<a class="idref" href="DOT.Lib.TransformCollect.html#transform"><span class="id" title="definition">transform</span></a> <span class="id" title="var">f</span>)), <a class="idref" href="DOT.Lib.TransformCollect.html#transform_compose"><span class="id" title="definition">transform_compose</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> "∘∘". <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Instance</span> <a name="ListOpenTransform"><span class="id" title="instance">ListOpenTransform</span></a> : <a class="idref" href="DOT.Lib.TransformCollect.html#OpenTransform"><span class="id" title="class">OpenTransform</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#ListTransform"><span class="id" title="instance">ListTransform</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="var">OT</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">hnf</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">n</span> <span class="id" title="var">x</span>. <span class="id" title="tactic">apply</span> <span class="id" title="axiom">fun_ext_dep</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">as'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">as'</span>; <span class="id" title="tactic">apply</span> <span class="id" title="axiom">fun_ext_dep</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">simpl</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">foldLT</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">IHas'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="DOT.Lib.TransformCollect.html#open_transform"><span class="id" title="definition">open_transform</span></a>. <span class="id" title="tactic">unfold</span> <a class="idref" href="DOT.Lib.SyntaxClasses.html#open_depth_rec"><span class="id" title="definition">open_depth_rec</span></a>, <a class="idref" href="DOT.Lib.SyntaxClasses.html#open_rec"><span class="id" title="definition">open_rec</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Instance</span> <a name="ListSubstTransform"><span class="id" title="instance">ListSubstTransform</span></a> : <a class="idref" href="DOT.Lib.TransformCollect.html#SubstTransform"><span class="id" title="class">SubstTransform</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#ListTransform"><span class="id" title="instance">ListTransform</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="var">ST</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">hnf</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>. <span class="id" title="tactic">apply</span> <span class="id" title="axiom">fun_ext_dep</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">as'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">as'</span>; <span class="id" title="tactic">apply</span> <span class="id" title="axiom">fun_ext_dep</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">simpl</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">foldLT</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">IHas'</span>, &lt;- <a class="idref" href="DOT.Lib.TransformCollect.html#subst_transform"><span class="id" title="definition">subst_transform</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="DOT.Lib.LibExtraProgram.html#ignore_second"><span class="id" title="definition">ignore_second</span></a>; <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="DOT.Lib.SyntaxClasses.html#subst_var"><span class="id" title="definition">subst_var</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Instance</span> <a name="ListCollectTransform"><span class="id" title="instance">ListCollectTransform</span></a> : <a class="idref" href="DOT.Lib.TransformCollect.html#CollectTransform"><span class="id" title="class">CollectTransform</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#ListCollect"><span class="id" title="instance">ListCollect</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#ListTransform"><span class="id" title="instance">ListTransform</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="var">CT</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">hnf</span>. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">a</span>; <span class="id" title="tactic">apply</span> <span class="id" title="axiom">fun_ext_dep</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">n</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="var">foldLT</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<a class="idref" href="DOT.Lib.TransformCollect.html#collect"><span class="id" title="definition">collect</span></a> <span class="id" title="var">bl</span> <span class="id" title="var">p</span> <span class="id" title="definition">andb</span> (<span class="id" title="var">a</span> <span class="id" title="notation">::</span> <span class="id" title="var">a0</span>)%<span class="id" title="var">list</span> <span class="id" title="notation">=</span> <span class="id" title="constructor">true</span>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="DOT.Lib.TransformCollect.html#collect"><span class="id" title="definition">collect</span></a> <span class="id" title="var">bl</span> <span class="id" title="var">p</span> <span class="id" title="definition">andb</span> <span class="id" title="var">a</span> <span class="id" title="notation">&amp;&amp;</span> <a class="idref" href="DOT.Lib.TransformCollect.html#collect"><span class="id" title="definition">collect</span></a> <span class="id" title="var">bl</span> <span class="id" title="var">p</span> <span class="id" title="definition">andb</span> <span class="id" title="var">a0</span> <span class="id" title="notation">=</span> <span class="id" title="constructor">true</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">andb_prop</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">erewrite</span> <a class="idref" href="DOT.Lib.TransformCollect.html#collect_transform"><span class="id" title="definition">collect_transform</span></a>, <span class="id" title="var">IHa</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="DOT.Lib.TransformCollect.html#AboutTransformSyntax.List"><span class="id" title="section">List</span></a>.<br/>

<br/>
</div>

<div class="doc">
Every TransformSyntax leads to OpenCompose 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a name="AboutTransformSyntax.OpenCompose"><span class="id" title="section">OpenCompose</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<span class="id" title="var">OTA</span>: <a class="idref" href="DOT.Lib.SyntaxClasses.html#OpenTwice"><span class="id" title="class">OpenTwice</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#AboutTransformSyntax.OB"><span class="id" title="variable">OB</span></a>}.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Instance</span> <a name="TransformOpenTwice"><span class="id" title="instance">TransformOpenTwice</span></a> : <a class="idref" href="DOT.Lib.SyntaxClasses.html#OpenTwice"><span class="id" title="class">OpenTwice</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#AboutTransformSyntax.OA"><span class="id" title="variable">OA</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="var">OT</span> <span class="id" title="var">OTA</span> <span class="id" title="var">TC</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">hnf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="definition">compose</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="axiom">fun_ext_dep</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">a</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> ? <a class="idref" href="DOT.Lib.SyntaxClasses.html#open_eq_open_depth"><span class="id" title="lemma">open_eq_open_depth</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="DOT.Lib.TransformCollect.html#open_transform"><span class="id" title="definition">open_transform</span></a> <span class="id" title="var">n</span> <span class="id" title="var">x</span>). <span class="id" title="tactic">rewrite</span> (<a class="idref" href="DOT.Lib.TransformCollect.html#open_transform"><span class="id" title="definition">open_transform</span></a> <span class="id" title="var">n</span> <span class="id" title="var">y</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="DOT.Lib.LibExtraProgram.html#fold_compose12"><span class="id" title="lemma">fold_compose12</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="DOT.Lib.TransformCollect.html#transform_compose"><span class="id" title="definition">transform_compose</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="DOT.Lib.SyntaxClasses.html#open_depth_twice"><span class="id" title="lemma">open_depth_twice</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<span class="id" title="var">OTC</span>: <a class="idref" href="DOT.Lib.SyntaxClasses.html#OpenCommut"><span class="id" title="class">OpenCommut</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#AboutTransformSyntax.OB"><span class="id" title="variable">OB</span></a>}.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Instance</span> <a name="TransformOpenCommut"><span class="id" title="instance">TransformOpenCommut</span></a> : <a class="idref" href="DOT.Lib.SyntaxClasses.html#OpenCommut"><span class="id" title="class">OpenCommut</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#AboutTransformSyntax.OA"><span class="id" title="variable">OA</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="var">OT</span> <span class="id" title="var">OTC</span> <span class="id" title="var">TC</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">hnf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="axiom">fun_ext_dep</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">a</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="definition">compose</span>. <span class="id" title="tactic">rewrite</span> ? <a class="idref" href="DOT.Lib.SyntaxClasses.html#open_eq_open_depth"><span class="id" title="lemma">open_eq_open_depth</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> ? (<a class="idref" href="DOT.Lib.TransformCollect.html#open_transform"><span class="id" title="definition">open_transform</span></a> <span class="id" title="var">m</span> <span class="id" title="var">x</span>). <span class="id" title="tactic">rewrite</span> ? (<a class="idref" href="DOT.Lib.TransformCollect.html#open_transform"><span class="id" title="definition">open_transform</span></a> <span class="id" title="var">n</span> <span class="id" title="var">y</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> ? <a class="idref" href="DOT.Lib.LibExtraProgram.html#fold_compose12"><span class="id" title="lemma">fold_compose12</span></a>. <span class="id" title="tactic">rewrite</span> ? <a class="idref" href="DOT.Lib.TransformCollect.html#transform_compose"><span class="id" title="definition">transform_compose</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="DOT.Lib.SyntaxClasses.html#open_depth_commut"><span class="id" title="lemma">open_depth_commut</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="DOT.Lib.TransformCollect.html#AboutTransformSyntax.OpenCompose"><span class="id" title="section">OpenCompose</span></a>.<br/>

<br/>
</div>

<div class="doc">
Every TransformSyntax leads to SubstOpenCommut 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a name="AboutTransformSyntax.SubstOpenCommut"><span class="id" title="section">SubstOpenCommut</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<span class="id" title="var">SF</span>: <a class="idref" href="DOT.Lib.SyntaxClasses.html#SubstOpenCommut"><span class="id" title="class">SubstOpenCommut</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#AboutTransformSyntax.ASB"><span class="id" title="variable">ASB</span></a>}.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Instance</span> <a name="TransformSubstOpenCommut"><span class="id" title="instance">TransformSubstOpenCommut</span></a> : <a class="idref" href="DOT.Lib.SyntaxClasses.html#SubstOpenCommut"><span class="id" title="class">SubstOpenCommut</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#AboutTransformSyntax.ASA"><span class="id" title="variable">ASA</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="var">OT</span> <span class="id" title="var">SF</span> <span class="id" title="var">ST</span> <span class="id" title="var">TC</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">hnf</span>. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> ? <a class="idref" href="DOT.Lib.SyntaxClasses.html#open_eq_open_depth"><span class="id" title="lemma">open_eq_open_depth</span></a>, ? (<a class="idref" href="DOT.Lib.SyntaxClasses.html#subst_depth"><span class="id" title="lemma">subst_depth</span></a> 0).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> ? <a class="idref" href="DOT.Lib.TransformCollect.html#subst_transform"><span class="id" title="definition">subst_transform</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="DOT.Lib.TransformCollect.html#open_transform"><span class="id" title="definition">open_transform</span></a> <span class="id" title="var">n</span> <span class="id" title="var">z</span>), (<a class="idref" href="DOT.Lib.TransformCollect.html#open_transform"><span class="id" title="definition">open_transform</span></a> <span class="id" title="var">n</span> (<span class="id" title="var">z</span> <a class="idref" href="DOT.Lib.LibExtraSubstFvar.html#efac254cd709266553e0de145c715b1d"><span class="id" title="notation">\[</span></a> <span class="id" title="var">x</span> <a class="idref" href="DOT.Lib.LibExtraSubstFvar.html#efac254cd709266553e0de145c715b1d"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="var">y</span><a class="idref" href="DOT.Lib.LibExtraSubstFvar.html#efac254cd709266553e0de145c715b1d"><span class="id" title="notation">]</span></a>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> ? <a class="idref" href="DOT.Lib.LibExtraProgram.html#fold_compose12"><span class="id" title="lemma">fold_compose12</span></a>. <span class="id" title="tactic">rewrite</span> ? <a class="idref" href="DOT.Lib.TransformCollect.html#transform_compose"><span class="id" title="definition">transform_compose</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="DOT.Lib.SyntaxClasses.html#subst_open_commut_depth"><span class="id" title="lemma">subst_open_commut_depth</span></a>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="DOT.Lib.TransformCollect.html#AboutTransformSyntax.SubstOpenCommut"><span class="id" title="section">SubstOpenCommut</span></a>.<br/>

<br/>
</div>

<div class="doc">
ListLike transform leads to length preserving opening 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a name="AboutTransformSyntax.ListLike"><span class="id" title="section">ListLike</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<span class="id" title="var">SC</span>: <span class="id" title="keyword">Set</span>}.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<span class="id" title="var">ASSC</span>: <a class="idref" href="DOT.Lib.SyntaxClasses.html#AbstractSyntax"><span class="id" title="class">AbstractSyntax</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#AboutTransformSyntax.ListLike.SC"><span class="id" title="variable">SC</span></a>}.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<span class="id" title="var">CSC</span>: <a class="idref" href="DOT.Lib.TransformCollect.html#Collect"><span class="id" title="class">Collect</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#AboutTransformSyntax.ASB"><span class="id" title="variable">ASB</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#AboutTransformSyntax.ListLike.ASSC"><span class="id" title="variable">ASSC</span></a>}.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<span class="id" title="var">CCSC</span>: <a class="idref" href="DOT.Lib.TransformCollect.html#CollectCompose"><span class="id" title="class">CollectCompose</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#AboutTransformSyntax.ListLike.CSC"><span class="id" title="variable">CSC</span></a>} {<span class="id" title="var">CRSC</span>: <a class="idref" href="DOT.Lib.TransformCollect.html#CollectReflect"><span class="id" title="class">CollectReflect</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#AboutTransformSyntax.ListLike.CSC"><span class="id" title="variable">CSC</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">FCSC</span>: <a class="idref" href="DOT.Lib.TransformCollect.html#FvCollect"><span class="id" title="class">FvCollect</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#AboutTransformSyntax.ListLike.CSC"><span class="id" title="variable">CSC</span></a>}.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<span class="id" title="var">TSC</span>: <a class="idref" href="DOT.Lib.TransformCollect.html#Transform"><span class="id" title="class">Transform</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#AboutTransformSyntax.ASB"><span class="id" title="variable">ASB</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#AboutTransformSyntax.ListLike.ASSC"><span class="id" title="variable">ASSC</span></a>}.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<span class="id" title="var">TISC</span>: <a class="idref" href="DOT.Lib.TransformCollect.html#TransformId"><span class="id" title="class">TransformId</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#AboutTransformSyntax.ListLike.TSC"><span class="id" title="variable">TSC</span></a>} {<span class="id" title="var">TCSC</span>: <a class="idref" href="DOT.Lib.TransformCollect.html#TransformCompose"><span class="id" title="class">TransformCompose</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#AboutTransformSyntax.ListLike.TSC"><span class="id" title="variable">TSC</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">OTSC</span>: <a class="idref" href="DOT.Lib.TransformCollect.html#OpenTransform"><span class="id" title="class">OpenTransform</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#AboutTransformSyntax.ListLike.TSC"><span class="id" title="variable">TSC</span></a>} {<span class="id" title="var">STSC</span>: <a class="idref" href="DOT.Lib.TransformCollect.html#SubstTransform"><span class="id" title="class">SubstTransform</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#AboutTransformSyntax.ListLike.TSC"><span class="id" title="variable">TSC</span></a>}.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<span class="id" title="var">TCSSC</span>: <a class="idref" href="DOT.Lib.TransformCollect.html#CollectTransform"><span class="id" title="class">CollectTransform</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#AboutTransformSyntax.ListLike.CSC"><span class="id" title="variable">CSC</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#AboutTransformSyntax.ListLike.TSC"><span class="id" title="variable">TSC</span></a>}.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<span class="id" title="var">TL</span>: <a class="idref" href="DOT.Lib.SyntaxClasses.html#ToList"><span class="id" title="class">ToList</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#AboutTransformSyntax.ListLike.SC"><span class="id" title="variable">SC</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#AboutTransformSyntax.A"><span class="id" title="variable">A</span></a>} {<span class="id" title="var">FL</span>: <a class="idref" href="DOT.Lib.SyntaxClasses.html#OfList"><span class="id" title="class">OfList</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#AboutTransformSyntax.ListLike.SC"><span class="id" title="variable">SC</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#AboutTransformSyntax.A"><span class="id" title="variable">A</span></a>} {<span class="id" title="var">LL</span>: <a class="idref" href="DOT.Lib.SyntaxClasses.html#ListLike"><span class="id" title="class">ListLike</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#TL"><span class="id" title="variable">TL</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#FL"><span class="id" title="variable">FL</span></a>}.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a name="AboutTransformSyntax.ListLike.ListLikeCollect"><span class="id" title="section">ListLikeCollect</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<span class="id" title="var">LLC</span>: <a class="idref" href="DOT.Lib.TransformCollect.html#ListLikeCollect"><span class="id" title="class">ListLikeCollect</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#AboutTransformSyntax.ListLike.CSC"><span class="id" title="variable">CSC</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#AboutTransformSyntax.C"><span class="id" title="variable">C</span></a>}.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="fv_one"><span class="id" title="lemma">fv_one</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">c</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Lib.SyntaxClasses.html#fv"><span class="id" title="definition">fv</span></a> (<a class="idref" href="DOT.Lib.SyntaxClasses.html#of_list"><span class="id" title="definition">of_list</span></a> (<a class="idref" href="DOT.Lib.TransformCollect.html#c"><span class="id" title="variable">c</span></a> <span class="id" title="notation">::</span> <span class="id" title="constructor">nil</span>)) <span class="id" title="notation">=</span> <a class="idref" href="DOT.Lib.SyntaxClasses.html#fv"><span class="id" title="definition">fv</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#c"><span class="id" title="variable">c</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="var">FC</span> <span class="id" title="var">FCSC</span> <span class="id" title="var">LL</span> <span class="id" title="var">LLC</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="DOT.Lib.TransformCollect.html#fv_collect"><span class="id" title="definition">fv_collect</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="DOT.Lib.TransformCollect.html#collect_fold_right_map"><span class="id" title="definition">collect_fold_right_map</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="DOT.Lib.TransformCollect.html#fv_collect"><span class="id" title="definition">fv_collect</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="DOT.Lib.SyntaxClasses.html#of_list_to_list"><span class="id" title="method">of_list_to_list</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="fv_rev"><span class="id" title="lemma">fv_rev</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Lib.SyntaxClasses.html#fv"><span class="id" title="definition">fv</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#a"><span class="id" title="variable">a</span></a> <span class="id" title="notation">=</span> <a class="idref" href="DOT.Lib.SyntaxClasses.html#fv"><span class="id" title="definition">fv</span></a> (<a class="idref" href="DOT.Lib.SyntaxClasses.html#of_list"><span class="id" title="definition">of_list</span></a> (<span class="id" title="definition">List.rev</span> (<a class="idref" href="DOT.Lib.SyntaxClasses.html#to_list"><span class="id" title="definition">to_list</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#a"><span class="id" title="variable">a</span></a>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="var">FC</span> <span class="id" title="var">LL</span> <span class="id" title="var">LLC</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">H'</span>: <span class="id" title="var">a</span> <span class="id" title="notation">=</span> <span class="id" title="notation">(</span><a class="idref" href="DOT.Lib.SyntaxClasses.html#of_list"><span class="id" title="definition">of_list</span></a> (<a class="idref" href="DOT.Lib.SyntaxClasses.html#to_list"><span class="id" title="definition">to_list</span></a> <span class="id" title="var">a</span>)<span class="id" title="notation">)</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> (<span class="id" title="tactic">symmetry</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="DOT.Lib.SyntaxClasses.html#to_list_of_list"><span class="id" title="method">to_list_of_list</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H'</span> <span class="id" title="tactic">at</span> 1; <span class="id" title="tactic">clear</span> <span class="id" title="var">H'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="DOT.Lib.TransformCollect.html#fv_collect"><span class="id" title="definition">fv_collect</span></a>. <span class="id" title="tactic">rewrite</span> ? <a class="idref" href="DOT.Lib.TransformCollect.html#collect_fold_right_map"><span class="id" title="definition">collect_fold_right_map</span></a>, ? <a class="idref" href="DOT.Lib.SyntaxClasses.html#of_list_to_list"><span class="id" title="method">of_list_to_list</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">List.map_rev</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">List.fold_left_rev_right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">H'</span>: <span class="id" title="keyword">forall</span> <span class="id" title="var">A</span>, <span class="id" title="notation">(</span><span class="id" title="keyword">fun</span> (<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="axiom">fset</span> <a class="idref" href="DOT.Lib.TransformCollect.html#A"><span class="id" title="variable">A</span></a>) =&gt; <a class="idref" href="DOT.Lib.TransformCollect.html#y"><span class="id" title="variable">y</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> <a class="idref" href="DOT.Lib.TransformCollect.html#x"><span class="id" title="variable">x</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">=</span> <span class="id" title="notation">(</span><span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> =&gt; <a class="idref" href="DOT.Lib.TransformCollect.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> <a class="idref" href="DOT.Lib.TransformCollect.html#y"><span class="id" title="variable">y</span></a><span class="id" title="notation">)</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> (<span class="id" title="tactic">intros</span>; <span class="id" title="var">intros_fun_ext</span>; <span class="id" title="tactic">apply</span> <span class="id" title="lemma">union_comm</span>); <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H'</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">H'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">List.fold_symmetric</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="fv_app_union"><span class="id" title="lemma">fv_app_union</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">xs</span> <span class="id" title="var">ys</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Lib.SyntaxClasses.html#fv"><span class="id" title="definition">fv</span></a> (<a class="idref" href="DOT.Lib.SyntaxClasses.html#of_list"><span class="id" title="definition">of_list</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#xs"><span class="id" title="variable">xs</span></a> <a class="idref" href="DOT.Lib.SyntaxClasses.html#fb27b61dfadad676e1d19284e298bf70"><span class="id" title="notation">++</span></a> <a class="idref" href="DOT.Lib.SyntaxClasses.html#of_list"><span class="id" title="definition">of_list</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#ys"><span class="id" title="variable">ys</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">=</span> <a class="idref" href="DOT.Lib.SyntaxClasses.html#fv"><span class="id" title="definition">fv</span></a> (<a class="idref" href="DOT.Lib.SyntaxClasses.html#of_list"><span class="id" title="definition">of_list</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#xs"><span class="id" title="variable">xs</span></a>) <span class="id" title="notation">\</span><span class="id" title="notation">u</span> <a class="idref" href="DOT.Lib.SyntaxClasses.html#fv"><span class="id" title="definition">fv</span></a> (<a class="idref" href="DOT.Lib.SyntaxClasses.html#of_list"><span class="id" title="definition">of_list</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#ys"><span class="id" title="variable">ys</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="var">FC</span> <span class="id" title="var">FCSC</span> <span class="id" title="var">LL</span> <span class="id" title="var">LLC</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">xs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <a class="idref" href="DOT.Lib.TransformCollect.html#fv_collect"><span class="id" title="definition">fv_collect</span></a>, <a class="idref" href="DOT.Lib.TransformCollect.html#collect_fold_right_map"><span class="id" title="definition">collect_fold_right_map</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="DOT.Lib.SyntaxClasses.html#app_s"><span class="id" title="definition">app_s</span></a>. <span class="id" title="tactic">rewrite</span> ? <a class="idref" href="DOT.Lib.SyntaxClasses.html#of_list_to_list"><span class="id" title="method">of_list_to_list</span></a>. <span class="id" title="tactic">unfold</span> <span class="id" title="definition">List.app</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (<a class="idref" href="DOT.Lib.SyntaxClasses.html#of_list_to_list"><span class="id" title="method">of_list_to_list</span></a> <span class="id" title="var">ys</span>), &lt;- <a class="idref" href="DOT.Lib.TransformCollect.html#collect_fold_right_map"><span class="id" title="definition">collect_fold_right_map</span></a> <span class="id" title="tactic">at</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="lemma">union_empty_l</span> <span class="id" title="tactic">at</span> 1. <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="DOT.Lib.TransformCollect.html#collect_fold_right_map"><span class="id" title="definition">collect_fold_right_map</span></a>, <a class="idref" href="DOT.Lib.SyntaxClasses.html#of_list_to_list"><span class="id" title="method">of_list_to_list</span></a>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">unfold</span> <a class="idref" href="DOT.Lib.SyntaxClasses.html#app_s"><span class="id" title="definition">app_s</span></a>. <span class="id" title="tactic">rewrite</span> ? <a class="idref" href="DOT.Lib.SyntaxClasses.html#of_list_to_list"><span class="id" title="method">of_list_to_list</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="lemma">List.app_comm_cons</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> ? <a class="idref" href="DOT.Lib.TransformCollect.html#fv_collect"><span class="id" title="definition">fv_collect</span></a>, ? <a class="idref" href="DOT.Lib.TransformCollect.html#collect_fold_right_map"><span class="id" title="definition">collect_fold_right_map</span></a>, 2 <a class="idref" href="DOT.Lib.SyntaxClasses.html#of_list_to_list"><span class="id" title="method">of_list_to_list</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="lemma">union_assoc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (<a class="idref" href="DOT.Lib.SyntaxClasses.html#of_list_to_list"><span class="id" title="method">of_list_to_list</span></a> (<span class="id" title="var">xs</span> <span class="id" title="notation">++</span> <span class="id" title="var">ys</span>)), &lt;- (<a class="idref" href="DOT.Lib.SyntaxClasses.html#of_list_to_list"><span class="id" title="method">of_list_to_list</span></a> <span class="id" title="var">xs</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- ? <a class="idref" href="DOT.Lib.TransformCollect.html#collect_fold_right_map"><span class="id" title="definition">collect_fold_right_map</span></a>, &lt;- ? <a class="idref" href="DOT.Lib.TransformCollect.html#fv_collect"><span class="id" title="definition">fv_collect</span></a>, <a class="idref" href="DOT.Lib.SyntaxClasses.html#of_list_to_list"><span class="id" title="method">of_list_to_list</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="DOT.Lib.SyntaxClasses.html#of_list_app"><span class="id" title="lemma">of_list_app</span></a>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHxs</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="fv_env_singles_forward"><span class="id" title="lemma">fv_env_singles_forward</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">ys</span> <span class="id" title="var">a</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">length</span> <a class="idref" href="DOT.Lib.TransformCollect.html#ys"><span class="id" title="variable">ys</span></a> <span class="id" title="notation">=</span> <span class="id" title="definition">length</span> (<a class="idref" href="DOT.Lib.SyntaxClasses.html#to_list"><span class="id" title="definition">to_list</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#a"><span class="id" title="variable">a</span></a>) <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Lib.SyntaxClasses.html#fv_env"><span class="id" title="abbreviation">fv_env</span></a> (<a class="idref" href="DOT.Lib.TransformCollect.html#ys"><span class="id" title="variable">ys</span></a> <span class="id" title="notation">~*</span> <a class="idref" href="DOT.Lib.SyntaxClasses.html#to_list"><span class="id" title="definition">to_list</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#a"><span class="id" title="variable">a</span></a>) <span class="id" title="notation">=</span> <a class="idref" href="DOT.Lib.SyntaxClasses.html#fv"><span class="id" title="definition">fv</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#a"><span class="id" title="variable">a</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="var">FC</span> <span class="id" title="var">FCSC</span> <span class="id" title="var">LLC</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">R</span>: <a class="idref" href="DOT.Lib.SyntaxClasses.html#fv"><span class="id" title="definition">fv</span></a> <span class="id" title="var">a</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">=</span> <a class="idref" href="DOT.Lib.TransformCollect.html#collect"><span class="id" title="definition">collect</span></a> <span class="id" title="notation">\{}</span> <a class="idref" href="DOT.Lib.SyntaxClasses.html#fv"><span class="id" title="definition">fv</span></a> (@<span class="id" title="axiom">union</span> <span class="id" title="axiom">var</span>) <span class="id" title="var">a</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> (<span class="id" title="tactic">rewrite</span> <a class="idref" href="DOT.Lib.TransformCollect.html#fv_collect"><span class="id" title="definition">fv_collect</span></a>; <span class="id" title="tactic">auto</span>); <span class="id" title="tactic">rewrite</span> <span class="id" title="var">R</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">R</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="DOT.Lib.TransformCollect.html#fv_collect"><span class="id" title="definition">fv_collect</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="DOT.Lib.TransformCollect.html#collect_fold_right_map"><span class="id" title="definition">collect_fold_right_map</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="definition">fv_in_values</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="DOT.Lib.LibExtraList.html#liblist_fold_right"><span class="id" title="lemma">liblist_fold_right</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">values_singles</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> ? <a class="idref" href="DOT.Lib.LibExtraList.html#liblist_length"><span class="id" title="lemma">liblist_length</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">induction</span> (<a class="idref" href="DOT.Lib.SyntaxClasses.html#to_list"><span class="id" title="definition">to_list</span></a> <span class="id" title="var">a</span>); <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHl</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="fv_env_singles"><span class="id" title="lemma">fv_env_singles</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">ys</span> <span class="id" title="var">a</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">length</span> <a class="idref" href="DOT.Lib.TransformCollect.html#ys"><span class="id" title="variable">ys</span></a> <span class="id" title="notation">=</span> <a class="idref" href="DOT.Lib.SyntaxClasses.html#length_s"><span class="id" title="definition">length_s</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#a"><span class="id" title="variable">a</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Lib.SyntaxClasses.html#fv_env"><span class="id" title="abbreviation">fv_env</span></a> (<a class="idref" href="DOT.Lib.TransformCollect.html#ys"><span class="id" title="variable">ys</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#d49bbae905db9a1ef2bacb57bfb3b51d"><span class="id" title="notation">~**</span></a> <a class="idref" href="DOT.Lib.SyntaxClasses.html#to_list"><span class="id" title="definition">to_list</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#a"><span class="id" title="variable">a</span></a>) <span class="id" title="notation">=</span> <a class="idref" href="DOT.Lib.SyntaxClasses.html#fv"><span class="id" title="definition">fv</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#a"><span class="id" title="variable">a</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="var">FC</span> <span class="id" title="var">FCSC</span> <span class="id" title="var">LL</span> <span class="id" title="var">LLC</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="DOT.Lib.SyntaxClasses.html#length_s"><span class="id" title="definition">length_s</span></a>. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="DOT.Lib.TransformCollect.html#fv_rev"><span class="id" title="lemma">fv_rev</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">R</span>: <span class="id" title="notation">(</span><span class="id" title="definition">List.rev</span> (<a class="idref" href="DOT.Lib.SyntaxClasses.html#to_list"><span class="id" title="definition">to_list</span></a> <span class="id" title="var">a</span>)<span class="id" title="notation">)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">=</span> <span class="id" title="notation">(</span><a class="idref" href="DOT.Lib.SyntaxClasses.html#to_list"><span class="id" title="definition">to_list</span></a> (<a class="idref" href="DOT.Lib.SyntaxClasses.html#of_list"><span class="id" title="definition">of_list</span></a> (<span class="id" title="definition">List.rev</span> (<a class="idref" href="DOT.Lib.SyntaxClasses.html#to_list"><span class="id" title="definition">to_list</span></a> <span class="id" title="var">a</span>)))<span class="id" title="notation">)</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> (<span class="id" title="tactic">rewrite</span> <a class="idref" href="DOT.Lib.SyntaxClasses.html#of_list_to_list"><span class="id" title="method">of_list_to_list</span></a>; <span class="id" title="tactic">auto</span>); <span class="id" title="tactic">rewrite</span> <span class="id" title="var">R</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="DOT.Lib.TransformCollect.html#fv_env_singles_forward"><span class="id" title="lemma">fv_env_singles_forward</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> (<span class="id" title="tactic">rewrite</span> <a class="idref" href="DOT.Lib.SyntaxClasses.html#of_list_to_list"><span class="id" title="method">of_list_to_list</span></a>, ? <span class="id" title="lemma">List.rev_length</span>; <span class="id" title="tactic">auto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="DOT.Lib.SyntaxClasses.html#to_list_of_list"><span class="id" title="method">to_list_of_list</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="DOT.Lib.TransformCollect.html#AboutTransformSyntax.ListLike.ListLikeCollect"><span class="id" title="section">ListLikeCollect</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a name="AboutTransformSyntax.ListLike.ListLikeTransform"><span class="id" title="section">ListLikeTransform</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<span class="id" title="var">LLT</span>: <a class="idref" href="DOT.Lib.TransformCollect.html#ListLikeTransform"><span class="id" title="class">ListLikeTransform</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#AboutTransformSyntax.ListLike.TSC"><span class="id" title="variable">TSC</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#AboutTransformSyntax.T"><span class="id" title="variable">T</span></a>}.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="transform_length_s"><span class="id" title="lemma">transform_length_s</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">f</span> <span class="id" title="var">n</span> <span class="id" title="var">a</span>, <a class="idref" href="DOT.Lib.SyntaxClasses.html#length_s"><span class="id" title="definition">length_s</span></a> (<a class="idref" href="DOT.Lib.TransformCollect.html#transform"><span class="id" title="definition">transform</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#n"><span class="id" title="variable">n</span></a>) <span class="id" title="notation">=</span> <a class="idref" href="DOT.Lib.SyntaxClasses.html#length_s"><span class="id" title="definition">length_s</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#a"><span class="id" title="variable">a</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="var">LLT</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="DOT.Lib.TransformCollect.html#transform_map_f"><span class="id" title="definition">transform_map_f</span></a>. <span class="id" title="tactic">unfold</span> <a class="idref" href="DOT.Lib.SyntaxClasses.html#length_s"><span class="id" title="definition">length_s</span></a>, <a class="idref" href="DOT.Lib.SyntaxClasses.html#map_f"><span class="id" title="definition">map_f</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="DOT.Lib.SyntaxClasses.html#of_list_to_list"><span class="id" title="method">of_list_to_list</span></a>. <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">List.map_length</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="length_s_open"><span class="id" title="lemma">length_s_open</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">n</span> <span class="id" title="var">x</span> <span class="id" title="var">a</span>, <a class="idref" href="DOT.Lib.SyntaxClasses.html#length_s"><span class="id" title="definition">length_s</span></a> (<a class="idref" href="DOT.Lib.SyntaxClasses.html#open_rec"><span class="id" title="definition">open_rec</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#a"><span class="id" title="variable">a</span></a>) <span class="id" title="notation">=</span> <a class="idref" href="DOT.Lib.SyntaxClasses.html#length_s"><span class="id" title="definition">length_s</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#a"><span class="id" title="variable">a</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="var">LLT</span> <span class="id" title="var">OT</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="DOT.Lib.SyntaxClasses.html#open_eq_open_depth"><span class="id" title="lemma">open_eq_open_depth</span></a>, <a class="idref" href="DOT.Lib.TransformCollect.html#open_transform"><span class="id" title="definition">open_transform</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="DOT.Lib.TransformCollect.html#transform_length_s"><span class="id" title="lemma">transform_length_s</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="length_s_subst"><span class="id" title="lemma">length_s_subst</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">a</span>, <a class="idref" href="DOT.Lib.SyntaxClasses.html#length_s"><span class="id" title="definition">length_s</span></a> (<a class="idref" href="DOT.Lib.SyntaxClasses.html#subst_var"><span class="id" title="definition">subst_var</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#a"><span class="id" title="variable">a</span></a>) <span class="id" title="notation">=</span> <a class="idref" href="DOT.Lib.SyntaxClasses.html#length_s"><span class="id" title="definition">length_s</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#a"><span class="id" title="variable">a</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="var">LLT</span> <span class="id" title="var">ST</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">rewrite</span> (<a class="idref" href="DOT.Lib.SyntaxClasses.html#subst_depth"><span class="id" title="lemma">subst_depth</span></a> 0), <a class="idref" href="DOT.Lib.TransformCollect.html#subst_transform"><span class="id" title="definition">subst_transform</span></a>, <a class="idref" href="DOT.Lib.TransformCollect.html#transform_length_s"><span class="id" title="lemma">transform_length_s</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="subst_map_f"><span class="id" title="lemma">subst_map_f</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">a</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Lib.SyntaxClasses.html#subst_var"><span class="id" title="definition">subst_var</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#a"><span class="id" title="variable">a</span></a> <span class="id" title="notation">=</span> <a class="idref" href="DOT.Lib.SyntaxClasses.html#map_f"><span class="id" title="definition">map_f</span></a> (<a class="idref" href="DOT.Lib.SyntaxClasses.html#subst_var"><span class="id" title="definition">subst_var</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#y"><span class="id" title="variable">y</span></a>) <a class="idref" href="DOT.Lib.TransformCollect.html#a"><span class="id" title="variable">a</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="var">LLT</span> <span class="id" title="var">ST</span> <span class="id" title="var">STSC</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">rewrite</span> (<a class="idref" href="DOT.Lib.SyntaxClasses.html#subst_depth"><span class="id" title="lemma">subst_depth</span></a> 0), <a class="idref" href="DOT.Lib.TransformCollect.html#subst_transform"><span class="id" title="definition">subst_transform</span></a>, <a class="idref" href="DOT.Lib.TransformCollect.html#transform_map_f"><span class="id" title="definition">transform_map_f</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="DOT.Lib.TransformCollect.html#subst_transform"><span class="id" title="definition">subst_transform</span></a>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="subst_singles_to_list"><span class="id" title="lemma">subst_singles_to_list</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">ys</span> <span class="id" title="var">a</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">length</span> <a class="idref" href="DOT.Lib.TransformCollect.html#ys"><span class="id" title="variable">ys</span></a> <span class="id" title="notation">=</span> <a class="idref" href="DOT.Lib.SyntaxClasses.html#length_s"><span class="id" title="definition">length_s</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#a"><span class="id" title="variable">a</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><a class="idref" href="DOT.Lib.TransformCollect.html#ys"><span class="id" title="variable">ys</span></a> <span class="id" title="notation">~*</span> <a class="idref" href="DOT.Lib.SyntaxClasses.html#to_list"><span class="id" title="definition">to_list</span></a> (<a class="idref" href="DOT.Lib.SyntaxClasses.html#subst_var"><span class="id" title="definition">subst_var</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#a"><span class="id" title="variable">a</span></a>)<span class="id" title="notation">)</span> <span class="id" title="notation">=</span> <a class="idref" href="DOT.Lib.SyntaxClasses.html#subst_env"><span class="id" title="abbreviation">subst_env</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#y"><span class="id" title="variable">y</span></a> (<a class="idref" href="DOT.Lib.TransformCollect.html#ys"><span class="id" title="variable">ys</span></a> <span class="id" title="notation">~*</span> <a class="idref" href="DOT.Lib.SyntaxClasses.html#to_list"><span class="id" title="definition">to_list</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#a"><span class="id" title="variable">a</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="var">LLT</span> <span class="id" title="var">ST</span> <span class="id" title="var">STSC</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">map_singles</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="DOT.Lib.LibExtraList.html#liblist_map"><span class="id" title="lemma">liblist_map</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="DOT.Lib.TransformCollect.html#subst_map_f"><span class="id" title="lemma">subst_map_f</span></a>. <span class="id" title="tactic">unfold</span> <a class="idref" href="DOT.Lib.SyntaxClasses.html#map_f"><span class="id" title="definition">map_f</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="DOT.Lib.SyntaxClasses.html#of_list_to_list"><span class="id" title="method">of_list_to_list</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="DOT.Lib.LibExtraList.html#liblist_length"><span class="id" title="lemma">liblist_length</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="subst_singles_rev_to_list"><span class="id" title="lemma">subst_singles_rev_to_list</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">ys</span> <span class="id" title="var">a</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">length</span> <a class="idref" href="DOT.Lib.TransformCollect.html#ys"><span class="id" title="variable">ys</span></a> <span class="id" title="notation">=</span> <a class="idref" href="DOT.Lib.SyntaxClasses.html#length_s"><span class="id" title="definition">length_s</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#a"><span class="id" title="variable">a</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><a class="idref" href="DOT.Lib.TransformCollect.html#ys"><span class="id" title="variable">ys</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#d49bbae905db9a1ef2bacb57bfb3b51d"><span class="id" title="notation">~**</span></a> <a class="idref" href="DOT.Lib.SyntaxClasses.html#to_list"><span class="id" title="definition">to_list</span></a> (<a class="idref" href="DOT.Lib.SyntaxClasses.html#subst_var"><span class="id" title="definition">subst_var</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#a"><span class="id" title="variable">a</span></a>)<span class="id" title="notation">)</span> <span class="id" title="notation">=</span> <a class="idref" href="DOT.Lib.SyntaxClasses.html#subst_env"><span class="id" title="abbreviation">subst_env</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#y"><span class="id" title="variable">y</span></a> (<a class="idref" href="DOT.Lib.TransformCollect.html#ys"><span class="id" title="variable">ys</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#d49bbae905db9a1ef2bacb57bfb3b51d"><span class="id" title="notation">~**</span></a> <a class="idref" href="DOT.Lib.SyntaxClasses.html#to_list"><span class="id" title="definition">to_list</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#a"><span class="id" title="variable">a</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="var">LLT</span> <span class="id" title="var">ST</span> <span class="id" title="var">STSC</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="DOT.Lib.TransformCollect.html#subst_map_f"><span class="id" title="lemma">subst_map_f</span></a>. <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">map_singles</span>, <a class="idref" href="DOT.Lib.LibExtraList.html#liblist_map"><span class="id" title="lemma">liblist_map</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">List.map_rev</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="DOT.Lib.SyntaxClasses.html#map_f"><span class="id" title="definition">map_f</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="DOT.Lib.SyntaxClasses.html#of_list_to_list"><span class="id" title="method">of_list_to_list</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="DOT.Lib.LibExtraList.html#liblist_length"><span class="id" title="lemma">liblist_length</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="DOT.Lib.TransformCollect.html#AboutTransformSyntax.ListLike.ListLikeTransform"><span class="id" title="section">ListLikeTransform</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="DOT.Lib.TransformCollect.html#AboutTransformSyntax.ListLike"><span class="id" title="section">ListLike</span></a>.<br/>

<br/>
</div>

<div class="doc">
Every TransformSyntax leads to a DecideFv and Closing 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a name="AboutTransformSyntax.DecideFvClosing"><span class="id" title="section">DecideFvClosing</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<span class="id" title="var">DFv</span>: <a class="idref" href="DOT.Lib.SyntaxClasses.html#DecideFv"><span class="id" title="class">DecideFv</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#AboutTransformSyntax.ASB"><span class="id" title="variable">ASB</span></a>}.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<span class="id" title="var">DFvS</span>: <a class="idref" href="DOT.Lib.SyntaxClasses.html#ReflectFv"><span class="id" title="class">ReflectFv</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#AboutTransformSyntax.DecideFvClosing.DFv"><span class="id" title="variable">DFv</span></a>}.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Instance</span> <a name="CollectDecideFv"><span class="id" title="instance">CollectDecideFv</span></a> : <a class="idref" href="DOT.Lib.SyntaxClasses.html#DecideFv"><span class="id" title="class">DecideFv</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#AboutTransformSyntax.ASA"><span class="id" title="variable">ASA</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> =&gt; <a class="idref" href="DOT.Lib.TransformCollect.html#collect"><span class="id" title="definition">collect</span></a> <span class="id" title="constructor">false</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">a</span> =&gt; <a class="idref" href="DOT.Lib.SyntaxClasses.html#dec_fv"><span class="id" title="definition">dec_fv</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#a"><span class="id" title="variable">a</span></a>) <span class="id" title="definition">orb</span>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Instance</span> <a name="CollectReflectFv"><span class="id" title="instance">CollectReflectFv</span></a> : <a class="idref" href="DOT.Lib.SyntaxClasses.html#ReflectFv"><span class="id" title="class">ReflectFv</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#CollectDecideFv"><span class="id" title="instance">CollectDecideFv</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="var">CC</span> <span class="id" title="var">CR</span> <span class="id" title="var">DFvS</span> <span class="id" title="var">FC</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">hnf</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="DOT.Lib.SyntaxClasses.html#dec_notin_fv"><span class="id" title="definition">dec_notin_fv</span></a>, <a class="idref" href="DOT.Lib.SyntaxClasses.html#dec_fv"><span class="id" title="definition">dec_fv</span></a>, <a class="idref" href="DOT.Lib.TransformCollect.html#CollectDecideFv"><span class="id" title="instance">CollectDecideFv</span></a>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="DOT.Lib.TransformCollect.html#fv_collect"><span class="id" title="definition">fv_collect</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="DOT.Lib.TransformCollect.html#in_collect"><span class="id" title="lemma">in_collect</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">x</span> <span class="id" title="notation">\</span><span class="id" title="notation">in</span> <span class="id" title="notation">\{}</span> <span class="id" title="notation">=</span> <span class="id" title="notation">(</span><span class="id" title="definition">Bool.Is_true</span> <span class="id" title="constructor">false</span><span class="id" title="notation">)</span>) <span class="id" title="tactic">by</span> (<span class="id" title="tactic">auto</span> <span class="id" title="keyword">using</span> <span class="id" title="axiom">in_empty</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="DOT.Lib.TransformCollect.html#collect_reflect"><span class="id" title="definition">collect_reflect</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span> <span class="id" title="keyword">using</span> <a class="idref" href="DOT.Lib.SyntaxClasses.html#reflect_fv"><span class="id" title="definition">reflect_fv</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="notin_fv_collect"><span class="id" title="lemma">notin_fv_collect</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> <span class="id" title="var">a</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Lib.TransformCollect.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">notin</span> <a class="idref" href="DOT.Lib.SyntaxClasses.html#fv"><span class="id" title="definition">fv</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#a"><span class="id" title="variable">a</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Lib.TransformCollect.html#collect"><span class="id" title="definition">collect</span></a> (<span class="id" title="definition">negb</span> <span class="id" title="constructor">false</span>) (<a class="idref" href="DOT.Lib.SyntaxClasses.html#dec_notin_fv"><span class="id" title="definition">dec_notin_fv</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#x"><span class="id" title="variable">x</span></a>) <span class="id" title="definition">andb</span> <a class="idref" href="DOT.Lib.TransformCollect.html#a"><span class="id" title="variable">a</span></a> <span class="id" title="notation">=</span> <span class="id" title="constructor">true</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="var">CC</span> <span class="id" title="var">CR</span> <span class="id" title="var">DFvS</span> <span class="id" title="var">FC</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">a</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> ((<a class="idref" href="DOT.Lib.SyntaxClasses.html#reflect_fv"><span class="id" title="definition">reflect_fv</span></a> <span class="id" title="var">x</span> <span class="id" title="var">a</span>)) <span class="id" title="keyword">as</span> [<span class="id" title="var">H1</span> <span class="id" title="var">H2</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">H3</span>: <span class="id" title="definition">negb</span> (<a class="idref" href="DOT.Lib.SyntaxClasses.html#dec_fv"><span class="id" title="definition">dec_fv</span></a> <span class="id" title="var">x</span> <span class="id" title="var">a</span>) <span class="id" title="notation">=</span> <span class="id" title="constructor">true</span>) <span class="id" title="tactic">by</span> (<span class="id" title="tactic">destruct</span> (<a class="idref" href="DOT.Lib.SyntaxClasses.html#dec_fv"><span class="id" title="definition">dec_fv</span></a> <span class="id" title="var">x</span> <span class="id" title="var">a</span>); <span class="id" title="tactic">auto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="DOT.Lib.SyntaxClasses.html#dec_fv"><span class="id" title="definition">dec_fv</span></a>, <a class="idref" href="DOT.Lib.TransformCollect.html#CollectDecideFv"><span class="id" title="instance">CollectDecideFv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H3</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="DOT.Lib.LibExtraProgram.html#fold_compose"><span class="id" title="lemma">fold_compose</span></a> <span class="id" title="definition">negb</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="DOT.Lib.TransformCollect.html#collect_compose_negb_orb"><span class="id" title="lemma">collect_compose_negb_orb</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a name="AboutTransformSyntax.DecideFvClosing.SubstFresh"><span class="id" title="section">SubstFresh</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<span class="id" title="var">SI</span>: <a class="idref" href="DOT.Lib.SyntaxClasses.html#SubstitutionInner"><span class="id" title="class">SubstitutionInner</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#AboutTransformSyntax.DecideFvClosing.DFvS"><span class="id" title="variable">DFvS</span></a>}.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<span class="id" title="var">SF</span>: <a class="idref" href="DOT.Lib.SyntaxClasses.html#SubstFresh"><span class="id" title="class">SubstFresh</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#AboutTransformSyntax.ASB"><span class="id" title="variable">ASB</span></a>}.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Instance</span> <a name="TransformSubstFresh"><span class="id" title="instance">TransformSubstFresh</span></a> : <a class="idref" href="DOT.Lib.SyntaxClasses.html#SubstFresh"><span class="id" title="class">SubstFresh</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#AboutTransformSyntax.ASA"><span class="id" title="variable">ASA</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="var">CC</span> <span class="id" title="var">CR</span> <span class="id" title="var">CT</span> <span class="id" title="var">FC</span> <span class="id" title="var">SI</span> <span class="id" title="var">ST</span> <span class="id" title="var">TI</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">hnf</span>. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="DOT.Lib.TransformCollect.html#notin_fv_collect"><span class="id" title="lemma">notin_fv_collect</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="DOT.Lib.SyntaxClasses.html#subst_depth"><span class="id" title="lemma">subst_depth</span></a> 0), <a class="idref" href="DOT.Lib.TransformCollect.html#subst_transform"><span class="id" title="definition">subst_transform</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="DOT.Lib.SyntaxClasses.html#subst_inner"><span class="id" title="definition">subst_inner</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="DOT.Lib.TransformCollect.html#collect_transform"><span class="id" title="definition">collect_transform</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="DOT.Lib.TransformCollect.html#transform_id"><span class="id" title="definition">transform_id</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="DOT.Lib.TransformCollect.html#AboutTransformSyntax.DecideFvClosing.SubstFresh"><span class="id" title="section">SubstFresh</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a name="AboutTransformSyntax.DecideFvClosing.Closing"><span class="id" title="section">Closing</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<span class="id" title="var">Cl</span>: <a class="idref" href="DOT.Lib.SyntaxClasses.html#Closing"><span class="id" title="class">Closing</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#AboutTransformSyntax.ASB"><span class="id" title="variable">ASB</span></a>}.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<span class="id" title="var">OC</span>: <a class="idref" href="DOT.Lib.SyntaxClasses.html#OpenClose"><span class="id" title="class">OpenClose</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#AboutTransformSyntax.DecideFvClosing.Closing.Cl"><span class="id" title="variable">Cl</span></a>} {<span class="id" title="var">CO</span>: <a class="idref" href="DOT.Lib.SyntaxClasses.html#CloseOpen"><span class="id" title="class">CloseOpen</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#AboutTransformSyntax.DecideFvClosing.Closing.Cl"><span class="id" title="variable">Cl</span></a>} {<span class="id" title="var">SOC</span>: <a class="idref" href="DOT.Lib.SyntaxClasses.html#SubstOpenClose"><span class="id" title="class">SubstOpenClose</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#AboutTransformSyntax.DecideFvClosing.Closing.Cl"><span class="id" title="variable">Cl</span></a>}.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Instance</span> <a name="TransformClosing"><span class="id" title="instance">TransformClosing</span></a> : <a class="idref" href="DOT.Lib.SyntaxClasses.html#Closing"><span class="id" title="class">Closing</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#AboutTransformSyntax.ASA"><span class="id" title="variable">ASA</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">n</span> <span class="id" title="var">x</span> <span class="id" title="var">a</span> =&gt; <a class="idref" href="DOT.Lib.TransformCollect.html#transform"><span class="id" title="definition">transform</span></a> (<a class="idref" href="DOT.Lib.SyntaxClasses.html#close_depth_rec"><span class="id" title="definition">close_depth_rec</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#x"><span class="id" title="variable">x</span></a>) <a class="idref" href="DOT.Lib.TransformCollect.html#a"><span class="id" title="variable">a</span></a> 0).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Instance</span> <a name="TransformOpenClose"><span class="id" title="instance">TransformOpenClose</span></a> : <a class="idref" href="DOT.Lib.SyntaxClasses.html#OpenClose"><span class="id" title="class">OpenClose</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#TransformClosing"><span class="id" title="instance">TransformClosing</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="var">OC</span> <span class="id" title="var">OT</span> <span class="id" title="var">TC</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">hnf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="DOT.Lib.SyntaxClasses.html#close_rec"><span class="id" title="definition">close_rec</span></a>, <a class="idref" href="DOT.Lib.TransformCollect.html#TransformClosing"><span class="id" title="instance">TransformClosing</span></a>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="axiom">fun_ext_dep</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">a</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="definition">compose</span>. <span class="id" title="tactic">rewrite</span> ? <a class="idref" href="DOT.Lib.SyntaxClasses.html#open_eq_open_depth"><span class="id" title="lemma">open_eq_open_depth</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="DOT.Lib.TransformCollect.html#open_transform"><span class="id" title="definition">open_transform</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="DOT.Lib.LibExtraProgram.html#fold_compose12"><span class="id" title="lemma">fold_compose12</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="DOT.Lib.TransformCollect.html#transform_compose"><span class="id" title="definition">transform_compose</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="DOT.Lib.SyntaxClasses.html#open_depth_close_depth"><span class="id" title="lemma">open_depth_close_depth</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Instance</span> <a name="TransformCloseOpen"><span class="id" title="instance">TransformCloseOpen</span></a> : <a class="idref" href="DOT.Lib.SyntaxClasses.html#CloseOpen"><span class="id" title="class">CloseOpen</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#TransformClosing"><span class="id" title="instance">TransformClosing</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="var">CO</span> <span class="id" title="var">OT</span> <span class="id" title="var">TC</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">hnf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="DOT.Lib.SyntaxClasses.html#close_rec"><span class="id" title="definition">close_rec</span></a>, <a class="idref" href="DOT.Lib.TransformCollect.html#TransformClosing"><span class="id" title="instance">TransformClosing</span></a>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="axiom">fun_ext_dep</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">a</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="definition">compose</span>. <span class="id" title="tactic">rewrite</span> ? <a class="idref" href="DOT.Lib.SyntaxClasses.html#open_eq_open_depth"><span class="id" title="lemma">open_eq_open_depth</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="DOT.Lib.TransformCollect.html#open_transform"><span class="id" title="definition">open_transform</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="DOT.Lib.LibExtraProgram.html#fold_compose12"><span class="id" title="lemma">fold_compose12</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="DOT.Lib.TransformCollect.html#transform_compose"><span class="id" title="definition">transform_compose</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="DOT.Lib.SyntaxClasses.html#close_depth_open_depth"><span class="id" title="lemma">close_depth_open_depth</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Instance</span> <a name="TransformSubstOpenClose"><span class="id" title="instance">TransformSubstOpenClose</span></a> : <a class="idref" href="DOT.Lib.SyntaxClasses.html#SubstOpenClose"><span class="id" title="class">SubstOpenClose</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#TransformClosing"><span class="id" title="instance">TransformClosing</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="var">OT</span> <span class="id" title="var">SOC</span> <span class="id" title="var">ST</span> <span class="id" title="var">TC</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">hnf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="DOT.Lib.SyntaxClasses.html#close_rec"><span class="id" title="definition">close_rec</span></a>, <a class="idref" href="DOT.Lib.TransformCollect.html#TransformClosing"><span class="id" title="instance">TransformClosing</span></a>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="axiom">fun_ext_dep</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">a</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="definition">compose</span>. <span class="id" title="tactic">rewrite</span> ? (<a class="idref" href="DOT.Lib.SyntaxClasses.html#subst_depth"><span class="id" title="lemma">subst_depth</span></a> 0), ? <a class="idref" href="DOT.Lib.SyntaxClasses.html#open_eq_open_depth"><span class="id" title="lemma">open_eq_open_depth</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="DOT.Lib.TransformCollect.html#subst_transform"><span class="id" title="definition">subst_transform</span></a> <span class="id" title="var">x</span> <span class="id" title="var">y</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="DOT.Lib.TransformCollect.html#open_transform"><span class="id" title="definition">open_transform</span></a> <span class="id" title="var">n</span> <span class="id" title="var">x</span>), (<a class="idref" href="DOT.Lib.TransformCollect.html#open_transform"><span class="id" title="definition">open_transform</span></a> <span class="id" title="var">n</span> <span class="id" title="var">y</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> ? <a class="idref" href="DOT.Lib.LibExtraProgram.html#fold_compose12"><span class="id" title="lemma">fold_compose12</span></a>. <span class="id" title="tactic">rewrite</span> ? <a class="idref" href="DOT.Lib.TransformCollect.html#transform_compose"><span class="id" title="definition">transform_compose</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="DOT.Lib.SyntaxClasses.html#subst_open_close_depth"><span class="id" title="lemma">subst_open_close_depth</span></a>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a name="AboutTransformSyntax.DecideFvClosing.Closing.CloseUnbound"><span class="id" title="section">CloseUnbound</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<span class="id" title="var">CU</span>: <a class="idref" href="DOT.Lib.SyntaxClasses.html#CloseUnbound"><span class="id" title="class">CloseUnbound</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#AboutTransformSyntax.DecideFvClosing.Closing.Cl"><span class="id" title="variable">Cl</span></a>}.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<span class="id" title="var">CI</span>: <a class="idref" href="DOT.Lib.SyntaxClasses.html#ClosingInner"><span class="id" title="class">ClosingInner</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#AboutTransformSyntax.DecideFvClosing.DFvS"><span class="id" title="variable">DFvS</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#AboutTransformSyntax.DecideFvClosing.Closing.Cl"><span class="id" title="variable">Cl</span></a>}.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Instance</span> <a name="TransformCloseUnbound"><span class="id" title="instance">TransformCloseUnbound</span></a> : <a class="idref" href="DOT.Lib.SyntaxClasses.html#CloseUnbound"><span class="id" title="class">CloseUnbound</span></a> <a class="idref" href="DOT.Lib.TransformCollect.html#TransformClosing"><span class="id" title="instance">TransformClosing</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="var">CC</span> <span class="id" title="var">CI</span> <span class="id" title="var">CR</span> <span class="id" title="var">CT</span> <span class="id" title="var">FC</span> <span class="id" title="var">TI</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">hnf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="DOT.Lib.TransformCollect.html#notin_fv_collect"><span class="id" title="lemma">notin_fv_collect</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="DOT.Lib.SyntaxClasses.html#close_rec"><span class="id" title="definition">close_rec</span></a>, <a class="idref" href="DOT.Lib.TransformCollect.html#TransformClosing"><span class="id" title="instance">TransformClosing</span></a>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="DOT.Lib.SyntaxClasses.html#close_inner"><span class="id" title="definition">close_inner</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="DOT.Lib.TransformCollect.html#collect_transform"><span class="id" title="definition">collect_transform</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="DOT.Lib.TransformCollect.html#transform_id"><span class="id" title="definition">transform_id</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="DOT.Lib.TransformCollect.html#AboutTransformSyntax.DecideFvClosing.Closing.CloseUnbound"><span class="id" title="section">CloseUnbound</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="DOT.Lib.TransformCollect.html#AboutTransformSyntax.DecideFvClosing.Closing"><span class="id" title="section">Closing</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="DOT.Lib.TransformCollect.html#AboutTransformSyntax.DecideFvClosing"><span class="id" title="section">DecideFvClosing</span></a>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="DOT.Lib.TransformCollect.html#AboutTransformSyntax"><span class="id" title="section">AboutTransformSyntax</span></a>.<br/>

<br/>
<span class="id" title="var">Existing</span> <span class="id" title="var">Instances</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">ListCollect</span> <span class="id" title="var">ListTransform</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">ListCollectCompose</span> <span class="id" title="var">ListCollectReflect</span> <span class="id" title="var">ListFvCollect</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">ListTransformId</span> <span class="id" title="var">ListTransformCompose</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">ListOpenTransform</span> <span class="id" title="var">ListSubstTransform</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">ListCollectTransform</span> | 1.<br/>
<span class="id" title="var">Arguments</span> <a class="idref" href="DOT.Lib.TransformCollect.html#ListCollect"><span class="id" title="instance">ListCollect</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> /.<br/>
<span class="id" title="var">Arguments</span> <a class="idref" href="DOT.Lib.TransformCollect.html#ListTransform"><span class="id" title="instance">ListTransform</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> /.<br/>

<br/>
<span class="id" title="var">Existing</span> <span class="id" title="var">Instances</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">TransformOpenTwice</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">TransformOpenCommut</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">TransformSubstOpenCommut</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">CollectDecideFv</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">CollectReflectFv</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">TransformSubstFresh</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">TransformClosing</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">TransformOpenClose</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">TransformCloseOpen</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">TransformSubstOpenClose</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">TransformCloseUnbound</span> | 2.<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/tebbi/coqdocjs">CoqdocJS</a>
</div>
</div>
</body>

</html>
