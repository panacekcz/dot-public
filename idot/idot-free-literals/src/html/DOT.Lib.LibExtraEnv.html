<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="assets/resources/coqdoc.css" rel="stylesheet" type="text/css" />
<link href="assets/resources/coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="assets/resources/config.js"></script>
<script type="text/javascript" src="assets/resources/coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="../README.html">README</a>
      <a href="./indexpage.html"> Index </a>
      <a href="./toc.html"> Table of Contents </a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<h1 class="libtitle">DOT.Lib.LibExtraEnv</h1>

<div class="code">

<br/>
<span class="id" title="keyword">Set Implicit Arguments</span>.<br/>

<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">TLC</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">LibEnv</span> <span class="id" title="library">LibTactics</span> <span class="id" title="library">LibLN</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="DOT.Lib.LibExtraVar.html#"><span class="id" title="library">LibExtraVar</span></a> <a class="idref" href="DOT.Lib.LibExtraList.html#"><span class="id" title="library">LibExtraList</span></a> <a class="idref" href="DOT.Lib.LibExtraFset.html#"><span class="id" title="library">LibExtraFset</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="in_dom_decide"><span class="id" title="lemma">in_dom_decide</span></a> : <span class="id" title="keyword">forall</span> {<span class="id" title="var">A</span>} <span class="id" title="var">x</span> (<span class="id" title="var">E</span> : <span class="id" title="definition">env</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#A"><span class="id" title="variable">A</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><a class="idref" href="DOT.Lib.LibExtraEnv.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">in</span> <span class="id" title="axiom">dom</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E"><span class="id" title="variable">E</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">\/</span> <span class="id" title="notation">(</span><a class="idref" href="DOT.Lib.LibExtraEnv.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">#</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E"><span class="id" title="variable">E</span></a><span class="id" title="notation">)</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">E</span> <span class="id" title="keyword">using</span> <span class="id" title="lemma">env_ind</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">right</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">simpl_dom</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="axiom">in_union</span>, <span class="id" title="axiom">in_singleton</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="DOT.Lib.LibExtraVar.html#var_decide"><span class="id" title="lemma">var_decide</span></a> <span class="id" title="var">x</span> <span class="id" title="var">x0</span>); <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">IHE</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Converting between binding and in dom 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="dom_to_binds"><span class="id" title="lemma">dom_to_binds</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">A</span> (<span class="id" title="var">E</span> : <span class="id" title="definition">env</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#A"><span class="id" title="variable">A</span></a>) <span class="id" title="var">x</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Lib.LibExtraEnv.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">in</span> <span class="id" title="axiom">dom</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E"><span class="id" title="variable">E</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">exists</span> <span class="id" title="var">v</span><span class="id" title="notation">,</span> <span class="id" title="definition">binds</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E"><span class="id" title="variable">E</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">E</span> <span class="id" title="keyword">using</span> <span class="id" title="lemma">env_ind</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>; <span class="id" title="var">false</span>. <span class="id" title="var">simpl_dom</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="axiom">in_empty</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="DOT.Lib.LibExtraVar.html#var_decide"><span class="id" title="lemma">var_decide</span></a> <span class="id" title="var">x0</span> <span class="id" title="var">x</span>) <span class="id" title="keyword">as</span> [?<span class="id" title="var">H</span> | ?<span class="id" title="var">H</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">subst</span> <span class="id" title="var">x0</span>; <span class="id" title="tactic">exists</span> <span class="id" title="var">v</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">dom_concat</span>, <span class="id" title="axiom">in_union</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <span class="id" title="var">IHE</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [?<span class="id" title="var">v</span> ?<span class="id" title="var">H</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">v0</span>; <span class="id" title="tactic">apply</span> <span class="id" title="lemma">binds_concat_left</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">false</span>. <span class="id" title="var">simpl_dom</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="axiom">in_singleton</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="binds_to_dom"><span class="id" title="lemma">binds_to_dom</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">A</span> (<span class="id" title="var">E</span> : <span class="id" title="definition">env</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#A"><span class="id" title="variable">A</span></a>) <span class="id" title="var">x</span> <span class="id" title="var">v</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">binds</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E"><span class="id" title="variable">E</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Lib.LibExtraEnv.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">in</span> <span class="id" title="axiom">dom</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E"><span class="id" title="variable">E</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">E</span> <span class="id" title="keyword">using</span> <span class="id" title="lemma">env_ind</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">exfalso</span>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <span class="id" title="lemma">binds_empty_inv</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> (<span class="id" title="lemma">binds_push_inv</span> <span class="id" title="var">H</span>) <span class="id" title="keyword">as</span> [[? ?] | [? ?]]; <span class="id" title="tactic">subst</span>; <span class="id" title="var">simpl_dom</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="axiom">in_union</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">left</span>. <span class="id" title="tactic">auto</span> <span class="id" title="keyword">using</span> <span class="id" title="lemma">in_singleton_self</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">right</span>. <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="notin_dom_concat_r"><span class="id" title="lemma">notin_dom_concat_r</span></a> : <span class="id" title="keyword">forall</span> {<span class="id" title="var">A</span>} (<span class="id" title="var">E1</span> <span class="id" title="var">E2</span> : <span class="id" title="definition">env</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#A"><span class="id" title="variable">A</span></a>) <span class="id" title="var">x</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Lib.LibExtraEnv.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">#</span> <span class="id" title="notation">(</span><a class="idref" href="DOT.Lib.LibExtraEnv.html#E1"><span class="id" title="variable">E1</span></a> <span class="id" title="notation">&amp;</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E2"><span class="id" title="variable">E2</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Lib.LibExtraEnv.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">#</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E2"><span class="id" title="variable">E2</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="var">simpl_dom</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="binds_to_middle"><span class="id" title="lemma">binds_to_middle</span></a> : <span class="id" title="keyword">forall</span> {<span class="id" title="var">A</span>} (<span class="id" title="var">E</span> : <span class="id" title="definition">env</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#A"><span class="id" title="variable">A</span></a>) <span class="id" title="var">x</span> <span class="id" title="var">v</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">binds</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E"><span class="id" title="variable">E</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">exists</span> <span class="id" title="var">E1</span> <span class="id" title="var">E2</span><span class="id" title="notation">,</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E"><span class="id" title="variable">E</span></a> <span class="id" title="notation">=</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E1"><span class="id" title="variable">E1</span></a> <span class="id" title="notation">&amp;</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">~</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#v"><span class="id" title="variable">v</span></a> <span class="id" title="notation">&amp;</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E2"><span class="id" title="variable">E2</span></a> <span class="id" title="notation">/\</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">#</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E2"><span class="id" title="variable">E2</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">E</span> <span class="id" title="keyword">using</span> <span class="id" title="lemma">env_ind</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>. <span class="id" title="var">exfalso</span>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <span class="id" title="lemma">binds_empty_inv</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="lemma">binds_push_inv</span> <span class="id" title="var">H</span>) <span class="id" title="keyword">as</span> [[<span class="id" title="var">Heq1</span> <span class="id" title="var">Heq2</span>] | [<span class="id" title="var">Hneq</span> <span class="id" title="var">Hbi</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">E</span> (<span class="id" title="axiom">empty</span> (<span class="id" title="var">A</span>:=<span class="id" title="var">A</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">concat_empty_r</span>; <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHE</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hbi</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">E1</span> [<span class="id" title="var">E2</span> [<span class="id" title="var">Heq</span> <span class="id" title="var">Hfr</span>]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">E1</span> (<span class="id" title="var">E2</span> <span class="id" title="notation">&amp;</span> <span class="id" title="var">x</span> <span class="id" title="notation">~</span> <span class="id" title="var">v</span>); <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">concat_assoc</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="empty_dom_eq_empty"><span class="id" title="lemma">empty_dom_eq_empty</span></a> : <span class="id" title="keyword">forall</span> {<span class="id" title="var">A</span>} (<span class="id" title="var">E</span> : <span class="id" title="definition">env</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#A"><span class="id" title="variable">A</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="axiom">dom</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E"><span class="id" title="variable">E</span></a> <span class="id" title="notation">=</span> <span class="id" title="notation">\{}</span> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Lib.LibExtraEnv.html#E"><span class="id" title="variable">E</span></a> <span class="id" title="notation">=</span> <span class="id" title="axiom">empty</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">E</span> <span class="id" title="keyword">as</span> [| <span class="id" title="var">E</span> <span class="id" title="var">x</span> <span class="id" title="var">v</span> <span class="id" title="var">IHE</span>] <span class="id" title="keyword">using</span> <span class="id" title="lemma">env_ind</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>; <span class="id" title="var">exfalso</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hin</span> : <span class="id" title="var">x</span> <span class="id" title="notation">\</span><span class="id" title="notation">in</span> <span class="id" title="axiom">dom</span> (<span class="id" title="var">E</span> <span class="id" title="notation">&amp;</span> <span class="id" title="var">x</span> <span class="id" title="notation">~</span> <span class="id" title="var">v</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> (<span class="id" title="var">simpl_dom</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="axiom">in_union</span>, <span class="id" title="axiom">in_singleton</span>; <span class="id" title="tactic">auto</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hin</span>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <span class="id" title="lemma">in_empty_inv</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="binds_concat_cases"><span class="id" title="lemma">binds_concat_cases</span></a> : <span class="id" title="keyword">forall</span> {<span class="id" title="var">A</span>} (<span class="id" title="var">E1</span> <span class="id" title="var">E2</span> : <span class="id" title="definition">env</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#A"><span class="id" title="variable">A</span></a>) <span class="id" title="var">x</span> <span class="id" title="var">v</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">binds</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#v"><span class="id" title="variable">v</span></a> (<a class="idref" href="DOT.Lib.LibExtraEnv.html#E1"><span class="id" title="variable">E1</span></a> <span class="id" title="notation">&amp;</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E2"><span class="id" title="variable">E2</span></a>) <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">binds</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E2"><span class="id" title="variable">E2</span></a> <span class="id" title="notation">\/</span> <span class="id" title="definition">binds</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E1"><span class="id" title="variable">E1</span></a> <span class="id" title="notation">/\</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">#</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E2"><span class="id" title="variable">E2</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">E2</span> <span class="id" title="keyword">using</span> <span class="id" title="lemma">env_ind</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">concat_empty_r</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">concat_assoc</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">binds_push_inv</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">Heq</span> <span class="id" title="var">Heq'</span>] | [<span class="id" title="var">Hneq</span> <span class="id" title="var">Hbi</span>]]; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHE2</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hbi</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hbi</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">HbiE2</span> | [<span class="id" title="var">HbiE1</span> <span class="id" title="var">Hfr</span>]]; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="binds_middle_change"><span class="id" title="lemma">binds_middle_change</span></a> : <span class="id" title="keyword">forall</span> {<span class="id" title="var">A</span>} (<span class="id" title="var">E1</span> <span class="id" title="var">E2</span> : <span class="id" title="definition">env</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#A"><span class="id" title="variable">A</span></a>) <span class="id" title="var">x</span> <span class="id" title="var">v</span> <span class="id" title="var">y</span> <span class="id" title="var">v1</span> <span class="id" title="var">v2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">binds</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#v"><span class="id" title="variable">v</span></a> (<a class="idref" href="DOT.Lib.LibExtraEnv.html#E1"><span class="id" title="variable">E1</span></a> <span class="id" title="notation">&amp;</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#y"><span class="id" title="variable">y</span></a> <span class="id" title="notation">~</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#v1"><span class="id" title="variable">v1</span></a> <span class="id" title="notation">&amp;</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E2"><span class="id" title="variable">E2</span></a>) <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Lib.LibExtraEnv.html#v"><span class="id" title="variable">v</span></a> <span class="id" title="notation">&lt;&gt;</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#v1"><span class="id" title="variable">v1</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">binds</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#v"><span class="id" title="variable">v</span></a> (<a class="idref" href="DOT.Lib.LibExtraEnv.html#E1"><span class="id" title="variable">E1</span></a> <span class="id" title="notation">&amp;</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#y"><span class="id" title="variable">y</span></a> <span class="id" title="notation">~</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#v2"><span class="id" title="variable">v2</span></a> <span class="id" title="notation">&amp;</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E2"><span class="id" title="variable">E2</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">H</span> <span class="id" title="var">Hneq</span>. <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="lemma">binds_middle_inv</span> <span class="id" title="var">H</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> [<span class="id" title="var">Hbi2</span> | [[<span class="id" title="var">_</span> [<span class="id" title="var">_</span> <span class="id" title="var">contra</span>]] | [<span class="id" title="var">Hfr</span> [<span class="id" title="var">Hneq'</span> <span class="id" title="var">Hbi</span>]]]]; <span class="id" title="tactic">auto</span>; <span class="id" title="tactic">congruence</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="binds_middle_update"><span class="id" title="lemma">binds_middle_update</span></a> : <span class="id" title="keyword">forall</span> {<span class="id" title="var">A</span>} (<span class="id" title="var">E1</span> <span class="id" title="var">E2</span> : <span class="id" title="definition">env</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#A"><span class="id" title="variable">A</span></a>) <span class="id" title="var">x</span> <span class="id" title="var">v</span> <span class="id" title="var">y</span> <span class="id" title="var">v1</span> <span class="id" title="var">v2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">binds</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#v"><span class="id" title="variable">v</span></a> (<a class="idref" href="DOT.Lib.LibExtraEnv.html#E1"><span class="id" title="variable">E1</span></a> <span class="id" title="notation">&amp;</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#y"><span class="id" title="variable">y</span></a> <span class="id" title="notation">~</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#v1"><span class="id" title="variable">v1</span></a> <span class="id" title="notation">&amp;</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E2"><span class="id" title="variable">E2</span></a>) <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Lib.LibExtraEnv.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">&lt;&gt;</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#y"><span class="id" title="variable">y</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">binds</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#v"><span class="id" title="variable">v</span></a> (<a class="idref" href="DOT.Lib.LibExtraEnv.html#E1"><span class="id" title="variable">E1</span></a> <span class="id" title="notation">&amp;</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#y"><span class="id" title="variable">y</span></a> <span class="id" title="notation">~</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#v2"><span class="id" title="variable">v2</span></a> <span class="id" title="notation">&amp;</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E2"><span class="id" title="variable">E2</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">H</span> <span class="id" title="var">Hneq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="lemma">binds_middle_inv</span> <span class="id" title="var">H</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> [ <span class="id" title="var">Hbi2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [ [<span class="id" title="var">_</span> [<span class="id" title="var">contra</span> <span class="id" title="var">_</span>]]<br/>
         | [<span class="id" title="var">Hfr</span> [<span class="id" title="var">Hneq'</span> <span class="id" title="var">Hbi</span>]]]];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span>; <span class="id" title="tactic">congruence</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="binds_middle_neq_binds"><span class="id" title="lemma">binds_middle_neq_binds</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>) (<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="axiom">var</span>) (<span class="id" title="var">E1</span> <span class="id" title="var">E2</span> : <span class="id" title="definition">env</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#A"><span class="id" title="variable">A</span></a>) <span class="id" title="var">v1</span> <span class="id" title="var">v2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">binds</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#v1"><span class="id" title="variable">v1</span></a> (<a class="idref" href="DOT.Lib.LibExtraEnv.html#E1"><span class="id" title="variable">E1</span></a> <span class="id" title="notation">&amp;</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#y"><span class="id" title="variable">y</span></a> <span class="id" title="notation">~</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#v2"><span class="id" title="variable">v2</span></a> <span class="id" title="notation">&amp;</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E2"><span class="id" title="variable">E2</span></a>) <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Lib.LibExtraEnv.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">&lt;&gt;</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#y"><span class="id" title="variable">y</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">binds</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#v1"><span class="id" title="variable">v1</span></a> (<a class="idref" href="DOT.Lib.LibExtraEnv.html#E1"><span class="id" title="variable">E1</span></a> <span class="id" title="notation">&amp;</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E2"><span class="id" title="variable">E2</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">H</span> <span class="id" title="var">Hneq</span>. <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="lemma">binds_middle_inv</span> <span class="id" title="var">H</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> [<span class="id" title="var">Hbi2</span> | [[<span class="id" title="var">_</span> [<span class="id" title="var">contra</span> <span class="id" title="var">_</span>]] | [<span class="id" title="var">Hfr</span> [<span class="id" title="var">_</span> <span class="id" title="var">Hbi</span>]]]];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span> <span class="id" title="keyword">using</span> <span class="id" title="lemma">binds_concat_right</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="binds_middle_eq_fresh_inv"><span class="id" title="lemma">binds_middle_eq_fresh_inv</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>) (<span class="id" title="var">x</span> : <span class="id" title="axiom">var</span>) (<span class="id" title="var">E1</span> <span class="id" title="var">E2</span> : <span class="id" title="definition">env</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#A"><span class="id" title="variable">A</span></a>) (<span class="id" title="var">v1</span> <span class="id" title="var">v2</span> : <a class="idref" href="DOT.Lib.LibExtraEnv.html#A"><span class="id" title="variable">A</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">binds</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#v1"><span class="id" title="variable">v1</span></a> (<a class="idref" href="DOT.Lib.LibExtraEnv.html#E1"><span class="id" title="variable">E1</span></a> <span class="id" title="notation">&amp;</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">~</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#v2"><span class="id" title="variable">v2</span></a> <span class="id" title="notation">&amp;</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E2"><span class="id" title="variable">E2</span></a>) <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Lib.LibExtraEnv.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">#</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E2"><span class="id" title="variable">E2</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Lib.LibExtraEnv.html#v1"><span class="id" title="variable">v1</span></a> <span class="id" title="notation">=</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#v2"><span class="id" title="variable">v2</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">H</span> <span class="id" title="var">Hdm</span>. <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="lemma">binds_middle_inv</span> <span class="id" title="var">H</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> [<span class="id" title="var">Hbi2</span> | [[<span class="id" title="var">_</span> [<span class="id" title="var">_</span> <span class="id" title="var">Heq</span>]] | [<span class="id" title="var">_</span> [<span class="id" title="var">contra</span> <span class="id" title="var">_</span>]]]]; <span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">exfalso</span>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <span class="id" title="lemma">binds_fresh_inv</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="ok_env_of_env"><span class="id" title="lemma">ok_env_of_env</span></a> : <span class="id" title="keyword">forall</span> {<span class="id" title="var">A</span>} (<span class="id" title="var">E</span> : <span class="id" title="definition">env</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#A"><span class="id" title="variable">A</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">exists</span> <span class="id" title="var">E'</span><span class="id" title="notation">,</span> <span class="id" title="inductive">ok</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E'"><span class="id" title="variable">E'</span></a> <span class="id" title="notation">/\</span> <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> <span class="id" title="var">v</span>, <span class="id" title="definition">binds</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E'"><span class="id" title="variable">E'</span></a> <span class="id" title="notation">&lt;-&gt;</span> <span class="id" title="definition">binds</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E"><span class="id" title="variable">E</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">E</span> <span class="id" title="keyword">using</span> <span class="id" title="lemma">env_ind</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">exists</span> (<span class="id" title="axiom">empty</span> (<span class="id" title="var">A</span>:=<span class="id" title="var">A</span>)). <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">IHE</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">E'</span> [<span class="id" title="var">Hok</span> <span class="id" title="var">Hbieq</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="DOT.Lib.LibExtraEnv.html#in_dom_decide"><span class="id" title="lemma">in_dom_decide</span></a> <span class="id" title="var">x</span> <span class="id" title="var">E'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#dom_to_binds"><span class="id" title="lemma">dom_to_binds</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">v'</span> <span class="id" title="var">Hbi</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#binds_to_middle"><span class="id" title="lemma">binds_to_middle</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hbi</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">E1</span> [<span class="id" title="var">E2</span> [<span class="id" title="var">Heq</span> <span class="id" title="var">Hfr</span>]]]; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">E1</span> <span class="id" title="notation">&amp;</span> <span class="id" title="var">x</span> <span class="id" title="notation">~</span> <span class="id" title="var">v</span> <span class="id" title="notation">&amp;</span> <span class="id" title="var">E2</span>). <span class="id" title="tactic">split</span>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <span class="id" title="lemma">ok_middle_change</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">x'</span> <span class="id" title="var">v''</span>; <span class="id" title="tactic">destruct</span> (<a class="idref" href="DOT.Lib.LibExtraVar.html#var_decide"><span class="id" title="lemma">var_decide</span></a> <span class="id" title="var">x'</span> <span class="id" title="var">x</span>); <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">split</span>; <span class="id" title="var">introv</span> <span class="id" title="var">Hbi</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">apply</span> <span class="id" title="lemma">binds_middle_eq_inv</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hbi</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">auto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <span class="id" title="lemma">ok_middle_change</span>, <span class="id" title="lemma">binds_middle_eq_inv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">apply</span> <span class="id" title="lemma">binds_push_eq_inv</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hbi</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hbi</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <span class="id" title="lemma">binds_middle_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">split</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">apply</span> <span class="id" title="lemma">binds_push_neq</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hbieq</span>. <span class="id" title="tactic">apply</span> <span class="id" title="lemma">binds_not_middle_inv</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="lemma">concat_assoc</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hok</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">apply</span> <span class="id" title="lemma">binds_push_neq_inv</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hbieq</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">binds_not_middle_inv</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hbi</span> | [<span class="id" title="var">Hfr'</span> <span class="id" title="var">Hbi</span>]]; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exists</span> (<span class="id" title="var">E'</span> <span class="id" title="notation">&amp;</span> <span class="id" title="var">x</span> <span class="id" title="notation">~</span> <span class="id" title="var">v</span>); <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">destruct</span> (<a class="idref" href="DOT.Lib.LibExtraVar.html#var_decide"><span class="id" title="lemma">var_decide</span></a> <span class="id" title="var">x0</span> <span class="id" title="var">x</span>) <span class="id" title="keyword">as</span> [?<span class="id" title="var">H</span> | <span class="id" title="var">Hneq</span>]; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">split</span>; <span class="id" title="var">introv</span> <span class="id" title="var">Heq</span>; <span class="id" title="tactic">apply</span> <span class="id" title="lemma">binds_push_eq_inv</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hbieq</span> <span class="id" title="var">x0</span> <span class="id" title="var">v0</span>) <span class="id" title="keyword">as</span> [?<span class="id" title="var">H</span> ?<span class="id" title="var">H</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="var">introv</span> <span class="id" title="var">Hbi</span>; <span class="id" title="tactic">apply</span> <span class="id" title="lemma">binds_push_neq</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">binds_push_neq_inv</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hbi</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Hint Extern</span> 1 (<span class="id" title="var">_</span> <span class="id" title="notation">#</span> <span class="id" title="var">_</span>) =&gt;<br/>
<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
| [<span class="id" title="var">H</span> : <span class="id" title="axiom">dom</span> ?<span class="id" title="var">G1</span> <span class="id" title="notation">=</span> <span class="id" title="axiom">dom</span> ?<span class="id" title="var">G2</span>, <span class="id" title="var">_</span> : ?<span class="id" title="var">x</span> <span class="id" title="notation">#</span> ?<span class="id" title="var">G1</span> |- ?<span class="id" title="var">x</span> <span class="id" title="notation">#</span> ?<span class="id" title="var">G2</span> ] =&gt; <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H</span>; <span class="id" title="tactic">assumption</span><br/>
| [<span class="id" title="var">H</span> : <span class="id" title="axiom">dom</span> ?<span class="id" title="var">G2</span> <span class="id" title="notation">=</span> <span class="id" title="axiom">dom</span> ?<span class="id" title="var">G1</span>, <span class="id" title="var">_</span> : ?<span class="id" title="var">x</span> <span class="id" title="notation">#</span> ?<span class="id" title="var">G1</span> |- ?<span class="id" title="var">x</span> <span class="id" title="notation">#</span> ?<span class="id" title="var">G2</span> ] =&gt; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">assumption</span><br/>
<span class="id" title="keyword">end</span> : <span class="id" title="var">core</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="ok_val"><span class="id" title="lemma">ok_val</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">A</span> (<span class="id" title="var">E</span> : <span class="id" title="definition">env</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#A"><span class="id" title="variable">A</span></a>) <span class="id" title="var">x</span> <span class="id" title="var">v1</span> <span class="id" title="var">v2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="inductive">ok</span> (<a class="idref" href="DOT.Lib.LibExtraEnv.html#E"><span class="id" title="variable">E</span></a> <span class="id" title="notation">&amp;</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">~</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#v1"><span class="id" title="variable">v1</span></a>) <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="inductive">ok</span> (<a class="idref" href="DOT.Lib.LibExtraEnv.html#E"><span class="id" title="variable">E</span></a> <span class="id" title="notation">&amp;</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">~</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#v2"><span class="id" title="variable">v2</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">apply</span> <span class="id" title="lemma">ok_push_inv</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [? ?]; <span class="id" title="tactic">auto</span> 2.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Hint Extern</span> 1 (<span class="id" title="inductive">ok</span> <span class="id" title="var">_</span>) =&gt;<br/>
<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
| [<span class="id" title="var">H</span> : <span class="id" title="inductive">ok</span> (?<span class="id" title="var">E</span> <span class="id" title="notation">&amp;</span> ?<span class="id" title="var">x</span> <span class="id" title="notation">~</span> ?<span class="id" title="var">v1</span>) |- <span class="id" title="inductive">ok</span> (?<span class="id" title="var">E</span> <span class="id" title="notation">&amp;</span> ?<span class="id" title="var">x</span> <span class="id" title="notation">~</span> ?<span class="id" title="var">v2</span>)] =&gt;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="DOT.Lib.LibExtraEnv.html#ok_val"><span class="id" title="lemma">ok_val</span></a> (<span class="id" title="var">v1</span>:=<span class="id" title="var">v1</span>)); <span class="id" title="tactic">assumption</span><br/>
<span class="id" title="keyword">end</span> : <span class="id" title="var">core</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="binds_weaken"><span class="id" title="lemma">binds_weaken</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>) (<span class="id" title="var">x</span> : <span class="id" title="axiom">var</span>) (<span class="id" title="var">a</span> : <a class="idref" href="DOT.Lib.LibExtraEnv.html#A"><span class="id" title="variable">A</span></a>) (<span class="id" title="var">E</span> <span class="id" title="var">F</span> <span class="id" title="var">G</span> : <span class="id" title="definition">env</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#A"><span class="id" title="variable">A</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">binds</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#a"><span class="id" title="variable">a</span></a> (<a class="idref" href="DOT.Lib.LibExtraEnv.html#E"><span class="id" title="variable">E</span></a> <span class="id" title="notation">&amp;</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#G"><span class="id" title="variable">G</span></a>) <span class="id" title="notation">-&gt;</span> <span class="id" title="inductive">ok</span> (<a class="idref" href="DOT.Lib.LibExtraEnv.html#E"><span class="id" title="variable">E</span></a> <span class="id" title="notation">&amp;</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#F"><span class="id" title="variable">F</span></a>) <span class="id" title="notation">-&gt;</span> <span class="id" title="definition">binds</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#a"><span class="id" title="variable">a</span></a> (<a class="idref" href="DOT.Lib.LibExtraEnv.html#E"><span class="id" title="variable">E</span></a> <span class="id" title="notation">&amp;</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#F"><span class="id" title="variable">F</span></a> <span class="id" title="notation">&amp;</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#G"><span class="id" title="variable">G</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">A</span> <span class="id" title="var">x</span> <span class="id" title="var">a</span> <span class="id" title="var">E</span> <span class="id" title="var">F</span> <span class="id" title="var">G</span> <span class="id" title="var">Bi</span> <span class="id" title="var">Hok</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">binds_concat_inv</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Bi</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Bi</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Bi</span> | [<span class="id" title="var">Fr</span> <span class="id" title="var">Bi</span>]]; <span class="id" title="tactic">auto</span> 2.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">binds_concat_left</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">binds_concat_left_ok</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="binds_push_fresh"><span class="id" title="lemma">binds_push_fresh</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>) (<span class="id" title="var">x</span> <span class="id" title="var">x'</span> : <span class="id" title="axiom">var</span>) (<span class="id" title="var">a</span> <span class="id" title="var">a'</span> : <a class="idref" href="DOT.Lib.LibExtraEnv.html#A"><span class="id" title="variable">A</span></a>) (<span class="id" title="var">E</span> : <span class="id" title="definition">env</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#A"><span class="id" title="variable">A</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">binds</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E"><span class="id" title="variable">E</span></a> <span class="id" title="notation">-&gt;</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#x'"><span class="id" title="variable">x'</span></a> <span class="id" title="notation">#</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E"><span class="id" title="variable">E</span></a> <span class="id" title="notation">-&gt;</span> <span class="id" title="definition">binds</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#a"><span class="id" title="variable">a</span></a> (<a class="idref" href="DOT.Lib.LibExtraEnv.html#E"><span class="id" title="variable">E</span></a> <span class="id" title="notation">&amp;</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#x'"><span class="id" title="variable">x'</span></a> <span class="id" title="notation">~</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#a'"><span class="id" title="variable">a'</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">A</span> <span class="id" title="var">x</span> <span class="id" title="var">x'</span> <span class="id" title="var">a</span> <span class="id" title="var">a'</span> <span class="id" title="var">E</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hbi</span> <span class="id" title="var">Hfr</span>. <span class="id" title="tactic">apply</span> <span class="id" title="lemma">binds_push_neq</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Heq</span>; <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Hfr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#binds_to_dom"><span class="id" title="lemma">binds_to_dom</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="binds_push_fresh_middle"><span class="id" title="lemma">binds_push_fresh_middle</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>) (<span class="id" title="var">x</span> <span class="id" title="var">x'</span> : <span class="id" title="axiom">var</span>) (<span class="id" title="var">a</span> <span class="id" title="var">a'</span> : <a class="idref" href="DOT.Lib.LibExtraEnv.html#A"><span class="id" title="variable">A</span></a>) (<span class="id" title="var">E</span> <span class="id" title="var">F</span> : <span class="id" title="definition">env</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#A"><span class="id" title="variable">A</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">binds</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#a"><span class="id" title="variable">a</span></a> (<a class="idref" href="DOT.Lib.LibExtraEnv.html#E"><span class="id" title="variable">E</span></a> <span class="id" title="notation">&amp;</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#F"><span class="id" title="variable">F</span></a>) <span class="id" title="notation">-&gt;</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#x'"><span class="id" title="variable">x'</span></a> <span class="id" title="notation">#</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E"><span class="id" title="variable">E</span></a> <span class="id" title="notation">-&gt;</span> <span class="id" title="definition">binds</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#a"><span class="id" title="variable">a</span></a> (<a class="idref" href="DOT.Lib.LibExtraEnv.html#E"><span class="id" title="variable">E</span></a> <span class="id" title="notation">&amp;</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#x'"><span class="id" title="variable">x'</span></a> <span class="id" title="notation">~</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#a'"><span class="id" title="variable">a'</span></a> <span class="id" title="notation">&amp;</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#F"><span class="id" title="variable">F</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">A</span> <span class="id" title="var">x</span> <span class="id" title="var">x'</span> <span class="id" title="var">a</span> <span class="id" title="var">a'</span> <span class="id" title="var">E</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hbi</span> <span class="id" title="var">Hfr</span>. <span class="id" title="tactic">apply</span> <span class="id" title="lemma">binds_concat_inv</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hbi</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hbi</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hbi</span> | [<span class="id" title="var">Hfr'</span> <span class="id" title="var">Hbi</span>]]; <span class="id" title="tactic">auto</span> <span class="id" title="keyword">using</span> <span class="id" title="lemma">binds_concat_right</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">binds_concat_left</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">binds_concat_left</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#binds_to_dom"><span class="id" title="lemma">binds_to_dom</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hbi</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">simpl_dom</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">Heq</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="axiom">in_singleton</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="dom_update_binds_inv"><span class="id" title="lemma">dom_update_binds_inv</span></a> : <span class="id" title="keyword">forall</span> {<span class="id" title="var">A</span>} (<span class="id" title="var">E1</span> <span class="id" title="var">E2</span> : <span class="id" title="definition">env</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#A"><span class="id" title="variable">A</span></a>) <span class="id" title="var">x</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="axiom">dom</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E1"><span class="id" title="variable">E1</span></a> <span class="id" title="notation">=</span> <span class="id" title="axiom">dom</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E2"><span class="id" title="variable">E2</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="keyword">forall</span> <span class="id" title="var">z</span> <span class="id" title="var">v</span>, <a class="idref" href="DOT.Lib.LibExtraEnv.html#z"><span class="id" title="variable">z</span></a> <span class="id" title="notation">&lt;&gt;</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">-&gt;</span> <span class="id" title="definition">binds</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#z"><span class="id" title="variable">z</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E1"><span class="id" title="variable">E1</span></a> <span class="id" title="notation">-&gt;</span> <span class="id" title="definition">binds</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#z"><span class="id" title="variable">z</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E2"><span class="id" title="variable">E2</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="keyword">forall</span> <span class="id" title="var">z</span> <span class="id" title="var">v</span>, <a class="idref" href="DOT.Lib.LibExtraEnv.html#z"><span class="id" title="variable">z</span></a> <span class="id" title="notation">&lt;&gt;</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">-&gt;</span> <span class="id" title="definition">binds</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#z"><span class="id" title="variable">z</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E2"><span class="id" title="variable">E2</span></a> <span class="id" title="notation">-&gt;</span> <span class="id" title="definition">binds</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#z"><span class="id" title="variable">z</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E1"><span class="id" title="variable">E1</span></a><span class="id" title="notation">)</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Heq</span> <span class="id" title="var">HE2</span> <span class="id" title="var">Hneq</span> <span class="id" title="var">HbiE2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="DOT.Lib.LibExtraEnv.html#binds_to_dom"><span class="id" title="lemma">binds_to_dom</span></a> <span class="id" title="var">HbiE2</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hdom</span>; <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heq</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hdom</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#dom_to_binds"><span class="id" title="lemma">dom_to_binds</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hdom</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hdom</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">v'</span> <span class="id" title="var">HbiE1</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="var">HE2</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hneq</span> <span class="id" title="var">HbiE1</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">HbiE2'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="lemma">binds_functional</span> <span class="id" title="var">HbiE2</span> <span class="id" title="var">HbiE2'</span>); <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Inducting on Environments from the front. 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="env_ind_rev"><span class="id" title="lemma">env_ind_rev</span></a> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>) (<span class="id" title="var">P</span> : <span class="id" title="definition">env</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#A"><span class="id" title="variable">A</span></a> <span class="id" title="notation">-&gt;</span> <span class="id" title="keyword">Prop</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Lib.LibExtraEnv.html#P"><span class="id" title="variable">P</span></a> <span class="id" title="axiom">empty</span> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="keyword">forall</span> (<span class="id" title="var">E</span> : <span class="id" title="definition">env</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#A"><span class="id" title="variable">A</span></a>) (<span class="id" title="var">x</span> : <span class="id" title="axiom">var</span>) (<span class="id" title="var">v</span> : <a class="idref" href="DOT.Lib.LibExtraEnv.html#A"><span class="id" title="variable">A</span></a>), <a class="idref" href="DOT.Lib.LibExtraEnv.html#P"><span class="id" title="variable">P</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E"><span class="id" title="variable">E</span></a> <span class="id" title="notation">-&gt;</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#P"><span class="id" title="variable">P</span></a> (<a class="idref" href="DOT.Lib.LibExtraEnv.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">~</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#v"><span class="id" title="variable">v</span></a> <span class="id" title="notation">&amp;</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E"><span class="id" title="variable">E</span></a>)<span class="id" title="notation">)</span> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">E</span> : <span class="id" title="definition">env</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#A"><span class="id" title="variable">A</span></a>, <a class="idref" href="DOT.Lib.LibExtraEnv.html#P"><span class="id" title="variable">P</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E"><span class="id" title="variable">E</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="definition">env</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="axiom">empty_def</span>, <span class="id" title="axiom">concat_def</span>, <span class="id" title="axiom">single_def</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="DOT.Lib.LibExtraList.html#liblist_app"><span class="id" title="lemma">liblist_app</span></a>. <span class="id" title="tactic">intros</span> <span class="id" title="var">P</span> <span class="id" title="var">Hnil</span> <span class="id" title="var">Hcons</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">List.rev_ind</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">P</span>:=<span class="id" title="var">P</span>); <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">x</span> <span class="id" title="var">v</span>]; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Singles and Rev Singles 
</div>
<div class="code">
<span class="id" title="keyword">Notation</span> <a name="d49bbae905db9a1ef2bacb57bfb3b51d"><span class="id" title="notation">&quot;</span></a>xs ~** vs" := (<span class="id" title="axiom">singles</span> (<span class="id" title="definition">List.rev</span> <span class="id" title="var">xs</span>) (<span class="id" title="definition">List.rev</span> <span class="id" title="var">vs</span>))<br/>
&nbsp;&nbsp;(<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 27, <span class="id" title="tactic">left</span> <span class="id" title="keyword">associativity</span>) : <span class="id" title="var">env_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="singles_nil"><span class="id" title="lemma">singles_nil</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">A</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="constructor">nil</span> <span class="id" title="notation">~*</span> <span class="id" title="notation">(</span>@<span class="id" title="constructor">nil</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#A"><span class="id" title="variable">A</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">=</span> <span class="id" title="axiom">empty</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="axiom">singles_def</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="singles_push_r"><span class="id" title="lemma">singles_push_r</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">A</span> (<span class="id" title="var">v</span> : <a class="idref" href="DOT.Lib.LibExtraEnv.html#A"><span class="id" title="variable">A</span></a>) (<span class="id" title="var">vs</span> : <span class="id" title="inductive">list</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#A"><span class="id" title="variable">A</span></a>) <span class="id" title="var">y</span> <span class="id" title="var">ys</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="DOT.Lib.LibExtraEnv.html#y"><span class="id" title="variable">y</span></a> <span class="id" title="notation">::</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#ys"><span class="id" title="variable">ys</span></a>)%<span class="id" title="var">list</span> <span class="id" title="notation">~*</span> (<a class="idref" href="DOT.Lib.LibExtraEnv.html#v"><span class="id" title="variable">v</span></a> <span class="id" title="notation">::</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#vs"><span class="id" title="variable">vs</span></a>)%<span class="id" title="var">list</span> <span class="id" title="notation">=</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#ys"><span class="id" title="variable">ys</span></a> <span class="id" title="notation">~*</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#vs"><span class="id" title="variable">vs</span></a> <span class="id" title="notation">&amp;</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#y"><span class="id" title="variable">y</span></a> <span class="id" title="notation">~</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#v"><span class="id" title="variable">v</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="axiom">singles_def</span>. <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="singles_push_l"><span class="id" title="lemma">singles_push_l</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">A</span> (<span class="id" title="var">v</span> : <a class="idref" href="DOT.Lib.LibExtraEnv.html#A"><span class="id" title="variable">A</span></a>) (<span class="id" title="var">vs</span> : <span class="id" title="inductive">list</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#A"><span class="id" title="variable">A</span></a>) <span class="id" title="var">y</span> <span class="id" title="var">ys</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">length</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#ys"><span class="id" title="variable">ys</span></a> <span class="id" title="notation">=</span> <span class="id" title="definition">length</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#vs"><span class="id" title="variable">vs</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="DOT.Lib.LibExtraEnv.html#ys"><span class="id" title="variable">ys</span></a> <span class="id" title="notation">++</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#y"><span class="id" title="variable">y</span></a> <span class="id" title="notation">::</span> <span class="id" title="constructor">nil</span>)%<span class="id" title="var">list</span> <span class="id" title="notation">~*</span> (<a class="idref" href="DOT.Lib.LibExtraEnv.html#vs"><span class="id" title="variable">vs</span></a> <span class="id" title="notation">++</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#v"><span class="id" title="variable">v</span></a> <span class="id" title="notation">::</span> <span class="id" title="constructor">nil</span>)%<span class="id" title="var">list</span> <span class="id" title="notation">=</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#y"><span class="id" title="variable">y</span></a> <span class="id" title="notation">~</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#v"><span class="id" title="variable">v</span></a> <span class="id" title="notation">&amp;</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#ys"><span class="id" title="variable">ys</span></a> <span class="id" title="notation">~*</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#vs"><span class="id" title="variable">vs</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">A</span> <span class="id" title="var">v</span> <span class="id" title="var">vs</span> <span class="id" title="var">y</span> <span class="id" title="var">ys</span>. <span class="id" title="var">gen</span> <span class="id" title="var">vs</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">ys</span>; <span class="id" title="tactic">induction</span> <span class="id" title="var">vs</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="var">simpls</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#singles_push_r"><span class="id" title="lemma">singles_push_r</span></a>, ? <a class="idref" href="DOT.Lib.LibExtraEnv.html#singles_nil"><span class="id" title="lemma">singles_nil</span></a>, <span class="id" title="lemma">concat_empty_l</span>, <span class="id" title="lemma">concat_empty_r</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> ? <a class="idref" href="DOT.Lib.LibExtraEnv.html#singles_push_r"><span class="id" title="lemma">singles_push_r</span></a>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHys</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">concat_assoc</span>. <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="singles_rev_push"><span class="id" title="lemma">singles_rev_push</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">A</span> (<span class="id" title="var">v</span> : <a class="idref" href="DOT.Lib.LibExtraEnv.html#A"><span class="id" title="variable">A</span></a>) (<span class="id" title="var">vs</span> : <span class="id" title="inductive">list</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#A"><span class="id" title="variable">A</span></a>) <span class="id" title="var">y</span> <span class="id" title="var">ys</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">length</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#ys"><span class="id" title="variable">ys</span></a> <span class="id" title="notation">=</span> <span class="id" title="definition">length</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#vs"><span class="id" title="variable">vs</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="DOT.Lib.LibExtraEnv.html#y"><span class="id" title="variable">y</span></a> <span class="id" title="notation">::</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#ys"><span class="id" title="variable">ys</span></a>)%<span class="id" title="var">list</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#d49bbae905db9a1ef2bacb57bfb3b51d"><span class="id" title="notation">~**</span></a> (<a class="idref" href="DOT.Lib.LibExtraEnv.html#v"><span class="id" title="variable">v</span></a> <span class="id" title="notation">::</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#vs"><span class="id" title="variable">vs</span></a>)%<span class="id" title="var">list</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">=</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#y"><span class="id" title="variable">y</span></a> <span class="id" title="notation">~</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#v"><span class="id" title="variable">v</span></a> <span class="id" title="notation">&amp;</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#ys"><span class="id" title="variable">ys</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#d49bbae905db9a1ef2bacb57bfb3b51d"><span class="id" title="notation">~**</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#vs"><span class="id" title="variable">vs</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#singles_push_l"><span class="id" title="lemma">singles_push_l</span></a>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="singles_rev_cons"><span class="id" title="lemma">singles_rev_cons</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">A</span> (<span class="id" title="var">v</span> : <a class="idref" href="DOT.Lib.LibExtraEnv.html#A"><span class="id" title="variable">A</span></a>) (<span class="id" title="var">vs</span> : <span class="id" title="inductive">list</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#A"><span class="id" title="variable">A</span></a>) <span class="id" title="var">y</span> <span class="id" title="var">ys</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="DOT.Lib.LibExtraEnv.html#ys"><span class="id" title="variable">ys</span></a> <span class="id" title="notation">++</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#y"><span class="id" title="variable">y</span></a> <span class="id" title="notation">::</span> <span class="id" title="constructor">nil</span>)%<span class="id" title="var">list</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#d49bbae905db9a1ef2bacb57bfb3b51d"><span class="id" title="notation">~**</span></a> (<a class="idref" href="DOT.Lib.LibExtraEnv.html#vs"><span class="id" title="variable">vs</span></a> <span class="id" title="notation">++</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#v"><span class="id" title="variable">v</span></a> <span class="id" title="notation">::</span> <span class="id" title="constructor">nil</span>)%<span class="id" title="var">list</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">=</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#ys"><span class="id" title="variable">ys</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#d49bbae905db9a1ef2bacb57bfb3b51d"><span class="id" title="notation">~**</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#vs"><span class="id" title="variable">vs</span></a> <span class="id" title="notation">&amp;</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#y"><span class="id" title="variable">y</span></a> <span class="id" title="notation">~</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#v"><span class="id" title="variable">v</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> ? <span class="id" title="lemma">List.rev_unit</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#singles_push_r"><span class="id" title="lemma">singles_push_r</span></a>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Freshness of Lists 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="dom_singles_rev"><span class="id" title="lemma">dom_singles_rev</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">A</span> <span class="id" title="var">ys</span> (<span class="id" title="var">vs</span> : <span class="id" title="inductive">list</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#A"><span class="id" title="variable">A</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">length</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#ys"><span class="id" title="variable">ys</span></a> <span class="id" title="notation">=</span> <span class="id" title="definition">length</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#vs"><span class="id" title="variable">vs</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">from_list</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#ys"><span class="id" title="variable">ys</span></a> <span class="id" title="notation">=</span> <span class="id" title="axiom">dom</span> (<a class="idref" href="DOT.Lib.LibExtraEnv.html#ys"><span class="id" title="variable">ys</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#d49bbae905db9a1ef2bacb57bfb3b51d"><span class="id" title="notation">~**</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#vs"><span class="id" title="variable">vs</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> * <span class="id" title="var">Hlen</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">dom_singles</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">vs</span>:=<span class="id" title="definition">List.rev</span> <span class="id" title="var">vs</span>).<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span>  &lt;- <a class="idref" href="DOT.Lib.LibExtraFset.html#from_list_rev"><span class="id" title="lemma">from_list_rev</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <a class="idref" href="DOT.Lib.LibExtraList.html#liblist_length"><span class="id" title="lemma">liblist_length</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> ? <span class="id" title="lemma">List.rev_length</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="fresh_ok_ys"><span class="id" title="lemma">fresh_ok_ys</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">A</span> (<span class="id" title="var">E</span> : <span class="id" title="definition">env</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#A"><span class="id" title="variable">A</span></a>) <span class="id" title="var">vs</span> <span class="id" title="var">x</span> <span class="id" title="var">ys</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">fresh</span> (<span class="id" title="axiom">dom</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E"><span class="id" title="variable">E</span></a>) (<span class="id" title="constructor">S</span> (<span class="id" title="definition">length</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#ys"><span class="id" title="variable">ys</span></a>)) (<a class="idref" href="DOT.Lib.LibExtraEnv.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">::</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#ys"><span class="id" title="variable">ys</span></a>) <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">length</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#ys"><span class="id" title="variable">ys</span></a> <span class="id" title="notation">=</span> <span class="id" title="definition">length</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#vs"><span class="id" title="variable">vs</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="inductive">ok</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E"><span class="id" title="variable">E</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="inductive">ok</span> (<a class="idref" href="DOT.Lib.LibExtraEnv.html#E"><span class="id" title="variable">E</span></a> <span class="id" title="notation">&amp;</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#ys"><span class="id" title="variable">ys</span></a> <span class="id" title="notation">~*</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#vs"><span class="id" title="variable">vs</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="definition">fresh</span> (<span class="id" title="axiom">dom</span> <span class="id" title="var">E</span>) (<span class="id" title="definition">length</span> <span class="id" title="var">vs</span>) <span class="id" title="var">ys</span>) <span class="id" title="tactic">by</span> <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">ok_singles</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> ? <a class="idref" href="DOT.Lib.LibExtraList.html#liblist_length"><span class="id" title="lemma">liblist_length</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="fresh_ok_rev_ys"><span class="id" title="lemma">fresh_ok_rev_ys</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">A</span> (<span class="id" title="var">E</span> : <span class="id" title="definition">env</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#A"><span class="id" title="variable">A</span></a>) <span class="id" title="var">vs</span> <span class="id" title="var">x</span> <span class="id" title="var">ys</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">fresh</span> (<span class="id" title="axiom">dom</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E"><span class="id" title="variable">E</span></a>) (<span class="id" title="constructor">S</span> (<span class="id" title="definition">length</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#ys"><span class="id" title="variable">ys</span></a>)) (<a class="idref" href="DOT.Lib.LibExtraEnv.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">::</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#ys"><span class="id" title="variable">ys</span></a>) <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">length</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#ys"><span class="id" title="variable">ys</span></a> <span class="id" title="notation">=</span> <span class="id" title="definition">length</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#vs"><span class="id" title="variable">vs</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="inductive">ok</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E"><span class="id" title="variable">E</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="inductive">ok</span> (<a class="idref" href="DOT.Lib.LibExtraEnv.html#E"><span class="id" title="variable">E</span></a> <span class="id" title="notation">&amp;</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#ys"><span class="id" title="variable">ys</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#d49bbae905db9a1ef2bacb57bfb3b51d"><span class="id" title="notation">~**</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#vs"><span class="id" title="variable">vs</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#fresh_ok_ys"><span class="id" title="lemma">fresh_ok_ys</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="fresh_cons_notin"><span class="id" title="lemma">fresh_cons_notin</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">A</span> (<span class="id" title="var">E</span> : <span class="id" title="definition">env</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#A"><span class="id" title="variable">A</span></a>) <span class="id" title="var">vs</span> <span class="id" title="var">x</span> <span class="id" title="var">ys</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">fresh</span> (<span class="id" title="axiom">dom</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E"><span class="id" title="variable">E</span></a>) (<span class="id" title="constructor">S</span> (<span class="id" title="definition">length</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#ys"><span class="id" title="variable">ys</span></a>)) (<a class="idref" href="DOT.Lib.LibExtraEnv.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">::</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#ys"><span class="id" title="variable">ys</span></a>) <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">length</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#ys"><span class="id" title="variable">ys</span></a> <span class="id" title="notation">=</span> <span class="id" title="definition">length</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#vs"><span class="id" title="variable">vs</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Lib.LibExtraEnv.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">notin</span> <span class="id" title="axiom">dom</span> (<a class="idref" href="DOT.Lib.LibExtraEnv.html#E"><span class="id" title="variable">E</span></a> <span class="id" title="notation">&amp;</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#ys"><span class="id" title="variable">ys</span></a> <span class="id" title="notation">~*</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#vs"><span class="id" title="variable">vs</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">A</span> <span class="id" title="var">E</span> <span class="id" title="var">vs</span> <span class="id" title="var">x</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">vs</span>; <span class="id" title="tactic">induction</span> <span class="id" title="var">ys</span>; <span class="id" title="var">simpls</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#singles_nil"><span class="id" title="lemma">singles_nil</span></a>, <span class="id" title="lemma">concat_empty_r</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#singles_push_r"><span class="id" title="lemma">singles_push_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">dom_concat</span>, <span class="id" title="lemma">notin_union</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span> 1. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">dom_singles</span> <span class="id" title="tactic">by</span> (<span class="id" title="tactic">rewrite</span> ? <a class="idref" href="DOT.Lib.LibExtraList.html#liblist_length"><span class="id" title="lemma">liblist_length</span></a>; <span class="id" title="tactic">congruence</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="DOT.Lib.LibExtraVar.html#from_list_fresh"><span class="id" title="lemma">from_list_fresh</span></a>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="fresh_cons_notin_rev"><span class="id" title="lemma">fresh_cons_notin_rev</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">A</span> (<span class="id" title="var">E</span> : <span class="id" title="definition">env</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#A"><span class="id" title="variable">A</span></a>) <span class="id" title="var">vs</span> <span class="id" title="var">x</span> <span class="id" title="var">ys</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">fresh</span> (<span class="id" title="axiom">dom</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E"><span class="id" title="variable">E</span></a>) (<span class="id" title="constructor">S</span> (<span class="id" title="definition">length</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#ys"><span class="id" title="variable">ys</span></a>)) (<a class="idref" href="DOT.Lib.LibExtraEnv.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">::</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#ys"><span class="id" title="variable">ys</span></a>) <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">length</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#ys"><span class="id" title="variable">ys</span></a> <span class="id" title="notation">=</span> <span class="id" title="definition">length</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#vs"><span class="id" title="variable">vs</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Lib.LibExtraEnv.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">notin</span> <span class="id" title="axiom">dom</span> (<a class="idref" href="DOT.Lib.LibExtraEnv.html#E"><span class="id" title="variable">E</span></a> <span class="id" title="notation">&amp;</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#ys"><span class="id" title="variable">ys</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#d49bbae905db9a1ef2bacb57bfb3b51d"><span class="id" title="notation">~**</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#vs"><span class="id" title="variable">vs</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">auto</span> <span class="id" title="keyword">using</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#fresh_cons_notin"><span class="id" title="lemma">fresh_cons_notin</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="fresh_end_notin_dom"><span class="id" title="lemma">fresh_end_notin_dom</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">A</span> (<span class="id" title="var">E</span> : <span class="id" title="definition">env</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#A"><span class="id" title="variable">A</span></a>) <span class="id" title="var">vs</span> <span class="id" title="var">x</span> <span class="id" title="var">ys</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">fresh</span> (<span class="id" title="axiom">dom</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E"><span class="id" title="variable">E</span></a>) (<span class="id" title="constructor">S</span> (<span class="id" title="definition">length</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#ys"><span class="id" title="variable">ys</span></a>)) (<a class="idref" href="DOT.Lib.LibExtraEnv.html#ys"><span class="id" title="variable">ys</span></a> <span class="id" title="notation">++</span> <span class="id" title="notation">(</span><a class="idref" href="DOT.Lib.LibExtraEnv.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">::</span> <span class="id" title="constructor">nil</span><span class="id" title="notation">)</span>) <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">length</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#ys"><span class="id" title="variable">ys</span></a> <span class="id" title="notation">=</span> <span class="id" title="definition">length</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#vs"><span class="id" title="variable">vs</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Lib.LibExtraEnv.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">notin</span> <span class="id" title="axiom">dom</span> (<a class="idref" href="DOT.Lib.LibExtraEnv.html#E"><span class="id" title="variable">E</span></a> <span class="id" title="notation">&amp;</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#ys"><span class="id" title="variable">ys</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#d49bbae905db9a1ef2bacb57bfb3b51d"><span class="id" title="notation">~**</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#vs"><span class="id" title="variable">vs</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> * <span class="id" title="var">Hfr</span> <span class="id" title="var">Hlen</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<span class="id" title="constructor">S</span> (<span class="id" title="definition">length</span> <span class="id" title="var">ys</span>)) <span class="id" title="keyword">with</span> (<span class="id" title="definition">length</span> (<span class="id" title="var">x</span> <span class="id" title="notation">::</span> <span class="id" title="constructor">nil</span>) <span class="id" title="notation">+</span> <span class="id" title="definition">length</span> <span class="id" title="var">ys</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hfr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">PeanoNat.Nat.add_comm</span>, &lt;- <span class="id" title="lemma">List.app_length</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hfr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="DOT.Lib.LibExtraVar.html#fresh_app"><span class="id" title="lemma">fresh_app</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hfr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">auto</span> <span class="id" title="keyword">using</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#fresh_cons_notin"><span class="id" title="lemma">fresh_cons_notin</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="fresh_dom_last"><span class="id" title="lemma">fresh_dom_last</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">A</span> (<span class="id" title="var">E</span> : <span class="id" title="definition">env</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#A"><span class="id" title="variable">A</span></a>) <span class="id" title="var">vs</span> <span class="id" title="var">x</span> <span class="id" title="var">ys</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">length</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#ys"><span class="id" title="variable">ys</span></a> <span class="id" title="notation">=</span> <span class="id" title="definition">length</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#vs"><span class="id" title="variable">vs</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">fresh</span> (<span class="id" title="axiom">dom</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E"><span class="id" title="variable">E</span></a>) (<span class="id" title="constructor">S</span> (<span class="id" title="definition">length</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#ys"><span class="id" title="variable">ys</span></a>)) (<a class="idref" href="DOT.Lib.LibExtraEnv.html#ys"><span class="id" title="variable">ys</span></a> <span class="id" title="notation">++</span> <span class="id" title="notation">(</span><a class="idref" href="DOT.Lib.LibExtraEnv.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">::</span> <span class="id" title="constructor">nil</span><span class="id" title="notation">)</span>) <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">fresh</span> (<span class="id" title="axiom">dom</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E"><span class="id" title="variable">E</span></a>) (<span class="id" title="definition">length</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#ys"><span class="id" title="variable">ys</span></a>) <a class="idref" href="DOT.Lib.LibExtraEnv.html#ys"><span class="id" title="variable">ys</span></a> <span class="id" title="notation">/\</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Lib.LibExtraEnv.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">notin</span> <span class="id" title="axiom">dom</span> (<a class="idref" href="DOT.Lib.LibExtraEnv.html#E"><span class="id" title="variable">E</span></a> <span class="id" title="notation">&amp;</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#ys"><span class="id" title="variable">ys</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#d49bbae905db9a1ef2bacb57bfb3b51d"><span class="id" title="notation">~**</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#vs"><span class="id" title="variable">vs</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> * <span class="id" title="var">Hlen</span> <span class="id" title="var">Hfr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span> 2 <span class="id" title="keyword">using</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#fresh_end_notin_dom"><span class="id" title="lemma">fresh_end_notin_dom</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<span class="id" title="constructor">S</span> (<span class="id" title="definition">length</span> <span class="id" title="var">ys</span>)) <span class="id" title="keyword">with</span> (<span class="id" title="definition">length</span> (<span class="id" title="notation">(</span><span class="id" title="var">x</span> <span class="id" title="notation">::</span> <span class="id" title="constructor">nil</span><span class="id" title="notation">)</span> <span class="id" title="notation">++</span> <span class="id" title="var">ys</span>)) <span class="id" title="tactic">in</span> <span class="id" title="var">Hfr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">List.app_length</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hfr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">PeanoNat.Nat.add_comm</span>, &lt;- <span class="id" title="lemma">List.app_length</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hfr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="DOT.Lib.LibExtraVar.html#fresh_app_l"><span class="id" title="lemma">fresh_app_l</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="fresh_notin_dom"><span class="id" title="lemma">fresh_notin_dom</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">A</span> (<span class="id" title="var">vs</span> : <span class="id" title="inductive">list</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#A"><span class="id" title="variable">A</span></a>) <span class="id" title="var">x</span> <span class="id" title="var">ys</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">length</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#ys"><span class="id" title="variable">ys</span></a> <span class="id" title="notation">=</span> <span class="id" title="definition">length</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#vs"><span class="id" title="variable">vs</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">fresh</span> <span class="id" title="notation">\{</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#x"><span class="id" title="variable">x</span></a><span class="id" title="notation">}</span> (<span class="id" title="definition">length</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#ys"><span class="id" title="variable">ys</span></a>) <a class="idref" href="DOT.Lib.LibExtraEnv.html#ys"><span class="id" title="variable">ys</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Lib.LibExtraEnv.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">notin</span> <span class="id" title="axiom">dom</span> (<a class="idref" href="DOT.Lib.LibExtraEnv.html#ys"><span class="id" title="variable">ys</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#d49bbae905db9a1ef2bacb57bfb3b51d"><span class="id" title="notation">~**</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#vs"><span class="id" title="variable">vs</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> ? <span class="id" title="var">vs</span> <span class="id" title="var">x</span> <span class="id" title="var">ys</span> <span class="id" title="var">Hlen</span> <span class="id" title="var">Hfr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (<span class="id" title="lemma">concat_empty_l</span> (<span class="id" title="var">ys</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#d49bbae905db9a1ef2bacb57bfb3b51d"><span class="id" title="notation">~**</span></a> <span class="id" title="var">vs</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#fresh_cons_notin_rev"><span class="id" title="lemma">fresh_cons_notin_rev</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">simpl_dom</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">union_empty_l</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="fresh_list_notin"><span class="id" title="lemma">fresh_list_notin</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">A</span> <span class="id" title="var">L</span> <span class="id" title="var">ys</span> (<span class="id" title="var">vs</span> : <span class="id" title="inductive">list</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#A"><span class="id" title="variable">A</span></a>) <span class="id" title="var">y</span> <span class="id" title="var">n</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">length</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#ys"><span class="id" title="variable">ys</span></a> <span class="id" title="notation">=</span> <span class="id" title="definition">length</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#vs"><span class="id" title="variable">vs</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">fresh</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#L"><span class="id" title="variable">L</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#ys"><span class="id" title="variable">ys</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Lib.LibExtraEnv.html#y"><span class="id" title="variable">y</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">in</span> <span class="id" title="axiom">dom</span> (<a class="idref" href="DOT.Lib.LibExtraEnv.html#ys"><span class="id" title="variable">ys</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#d49bbae905db9a1ef2bacb57bfb3b51d"><span class="id" title="notation">~**</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#vs"><span class="id" title="variable">vs</span></a>) <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Lib.LibExtraEnv.html#y"><span class="id" title="variable">y</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">notin</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#L"><span class="id" title="variable">L</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">ys</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">induction</span> <span class="id" title="var">vs</span>; <span class="id" title="tactic">rewrite</span> ? <a class="idref" href="DOT.Lib.LibExtraEnv.html#singles_nil"><span class="id" title="lemma">singles_nil</span></a>, ? <span class="id" title="lemma">dom_empty</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> * ? ? <span class="id" title="var">Contra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">exfalso</span>. <span class="id" title="tactic">apply</span> (<span class="id" title="lemma">in_empty_inv</span> <span class="id" title="var">Contra</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">inversion</span> 1.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">induction</span> <span class="id" title="var">vs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">inversion</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">inversion</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#singles_rev_push"><span class="id" title="lemma">singles_rev_push</span></a>, <span class="id" title="lemma">dom_concat</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="lemma">dom_single</span>, <span class="id" title="axiom">in_union</span>, <span class="id" title="axiom">in_singleton</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">Hfr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="DOT.Lib.LibExtraVar.html#fresh_length"><span class="id" title="lemma">fresh_length</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hfr</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hlen</span>. <span class="id" title="tactic">subst</span> <span class="id" title="var">n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hfr</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hfr'</span> <span class="id" title="var">Hfr</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">fresh_union_r1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hfr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> 1; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">IHys</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="fresh_binds"><span class="id" title="lemma">fresh_binds</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">A</span> <span class="id" title="var">E</span> (<span class="id" title="var">vs</span> : <span class="id" title="inductive">list</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#A"><span class="id" title="variable">A</span></a>) <span class="id" title="var">x</span> <span class="id" title="var">ys</span> <span class="id" title="var">y</span> <span class="id" title="var">v1</span> <span class="id" title="var">v2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">length</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#ys"><span class="id" title="variable">ys</span></a> <span class="id" title="notation">=</span> <span class="id" title="definition">length</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#vs"><span class="id" title="variable">vs</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">binds</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#v1"><span class="id" title="variable">v1</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E"><span class="id" title="variable">E</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">fresh</span> (<span class="id" title="axiom">dom</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E"><span class="id" title="variable">E</span></a>) (<span class="id" title="constructor">S</span> (<span class="id" title="definition">length</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#ys"><span class="id" title="variable">ys</span></a>)) (<a class="idref" href="DOT.Lib.LibExtraEnv.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">::</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#ys"><span class="id" title="variable">ys</span></a>) <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">binds</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#v1"><span class="id" title="variable">v1</span></a> (<a class="idref" href="DOT.Lib.LibExtraEnv.html#E"><span class="id" title="variable">E</span></a> <span class="id" title="notation">&amp;</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#ys"><span class="id" title="variable">ys</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#d49bbae905db9a1ef2bacb57bfb3b51d"><span class="id" title="notation">~**</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#vs"><span class="id" title="variable">vs</span></a> <span class="id" title="notation">&amp;</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">~</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#v2"><span class="id" title="variable">v2</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> * <span class="id" title="var">Hlen</span> <span class="id" title="var">Hbi</span> <span class="id" title="var">Hfr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">binds_push_neq</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="lemma">binds_concat_left</span>; <span class="id" title="tactic">auto</span> 2.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#fresh_notin_dom"><span class="id" title="lemma">fresh_notin_dom</span></a>; <span class="id" title="tactic">auto</span> 2.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="DOT.Lib.LibExtraVar.html#fresh_single_in"><span class="id" title="lemma">fresh_single_in</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">F</span> := <span class="id" title="axiom">dom</span> <span class="id" title="var">E</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#binds_to_dom"><span class="id" title="lemma">binds_to_dom</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="DOT.Lib.LibExtraVar.html#fresh_cons"><span class="id" title="lemma">fresh_cons</span></a>  <span class="id" title="var">Hfr</span>); <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#binds_to_dom"><span class="id" title="lemma">binds_to_dom</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hbi</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="DOT.Lib.LibExtraVar.html#fresh_cons"><span class="id" title="lemma">fresh_cons</span></a>  <span class="id" title="var">Hfr</span>); <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="fresh_ok"><span class="id" title="lemma">fresh_ok</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">A</span> (<span class="id" title="var">E</span> : <span class="id" title="definition">env</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#A"><span class="id" title="variable">A</span></a>) <span class="id" title="var">v</span> <span class="id" title="var">vs</span> <span class="id" title="var">x</span> <span class="id" title="var">ys</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">fresh</span> (<span class="id" title="axiom">dom</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E"><span class="id" title="variable">E</span></a>) (<span class="id" title="constructor">S</span> (<span class="id" title="definition">length</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#ys"><span class="id" title="variable">ys</span></a>)) (<a class="idref" href="DOT.Lib.LibExtraEnv.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">::</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#ys"><span class="id" title="variable">ys</span></a>) <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">length</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#ys"><span class="id" title="variable">ys</span></a> <span class="id" title="notation">=</span> <span class="id" title="definition">length</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#vs"><span class="id" title="variable">vs</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="inductive">ok</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E"><span class="id" title="variable">E</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="inductive">ok</span> (<a class="idref" href="DOT.Lib.LibExtraEnv.html#E"><span class="id" title="variable">E</span></a> <span class="id" title="notation">&amp;</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#ys"><span class="id" title="variable">ys</span></a> <span class="id" title="notation">~*</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#vs"><span class="id" title="variable">vs</span></a> <span class="id" title="notation">&amp;</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">~</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#v"><span class="id" title="variable">v</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">apply</span> <span class="id" title="constructor">ok_push</span>; <span class="id" title="tactic">eauto</span> 2 <span class="id" title="keyword">using</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#fresh_ok_ys"><span class="id" title="lemma">fresh_ok_ys</span></a>, <a class="idref" href="DOT.Lib.LibExtraEnv.html#fresh_cons_notin"><span class="id" title="lemma">fresh_cons_notin</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="fresh_ok_rev"><span class="id" title="lemma">fresh_ok_rev</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">A</span> (<span class="id" title="var">E</span> : <span class="id" title="definition">env</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#A"><span class="id" title="variable">A</span></a>) <span class="id" title="var">v</span> <span class="id" title="var">vs</span> <span class="id" title="var">x</span> <span class="id" title="var">ys</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">fresh</span> (<span class="id" title="axiom">dom</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E"><span class="id" title="variable">E</span></a>) (<span class="id" title="constructor">S</span> (<span class="id" title="definition">length</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#ys"><span class="id" title="variable">ys</span></a>)) (<a class="idref" href="DOT.Lib.LibExtraEnv.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">::</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#ys"><span class="id" title="variable">ys</span></a>) <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">length</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#ys"><span class="id" title="variable">ys</span></a> <span class="id" title="notation">=</span> <span class="id" title="definition">length</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#vs"><span class="id" title="variable">vs</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="inductive">ok</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E"><span class="id" title="variable">E</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="inductive">ok</span> (<a class="idref" href="DOT.Lib.LibExtraEnv.html#E"><span class="id" title="variable">E</span></a> <span class="id" title="notation">&amp;</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#ys"><span class="id" title="variable">ys</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#d49bbae905db9a1ef2bacb57bfb3b51d"><span class="id" title="notation">~**</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#vs"><span class="id" title="variable">vs</span></a> <span class="id" title="notation">&amp;</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">~</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#v"><span class="id" title="variable">v</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">auto</span> <span class="id" title="keyword">using</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#fresh_ok"><span class="id" title="lemma">fresh_ok</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Hint Resolve</span> <span class="id" title="var">fresh_ok_rev</span> : <span class="id" title="var">core</span>.<br/>

<br/>
</div>

<div class="doc">
Lemmas and Hints to solve environment equality 
</div>
<div class="code">
<span class="id" title="keyword">Hint Extern</span> 1 (?<span class="id" title="var">F</span> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> ?<span class="id" title="var">G</span> <span class="id" title="notation">=</span> ?<span class="id" title="var">G</span> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> ?<span class="id" title="var">F</span>) =&gt; <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">union_comm</span>; <span class="id" title="tactic">reflexivity</span> : <span class="id" title="var">core</span>.<br/>
<span class="id" title="keyword">Hint Extern</span> 1 (?<span class="id" title="var">E</span> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> ?<span class="id" title="var">F</span> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> ?<span class="id" title="var">G</span> <span class="id" title="notation">=</span> <span class="id" title="notation">(</span>?<span class="id" title="var">E</span> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> ?<span class="id" title="var">F</span><span class="id" title="notation">)</span> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> ?<span class="id" title="var">G</span>) =&gt; <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">union_assoc</span>; <span class="id" title="tactic">reflexivity</span> : <span class="id" title="var">core</span>.<br/>
<span class="id" title="keyword">Hint Extern</span> 1 (?<span class="id" title="var">E</span> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> ?<span class="id" title="var">F</span> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> ?<span class="id" title="var">G</span> <span class="id" title="notation">=</span> ?<span class="id" title="var">E</span> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> ?<span class="id" title="var">G</span> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> ?<span class="id" title="var">F</span>) =&gt;<br/>
<span class="id" title="tactic">rewrite</span> (@<span class="id" title="lemma">union_comm</span> <span class="id" title="var">_</span> <span class="id" title="var">F</span> <span class="id" title="var">G</span>); <span class="id" title="tactic">reflexivity</span> : <span class="id" title="var">core</span>.<br/>
<span class="id" title="keyword">Hint Extern</span> 1 (?<span class="id" title="var">E</span> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> ?<span class="id" title="var">F</span> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> ?<span class="id" title="var">G</span> <span class="id" title="notation">=</span> ?<span class="id" title="var">F</span> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> ?<span class="id" title="var">E</span> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> ?<span class="id" title="var">G</span>) =&gt;<br/>
<span class="id" title="tactic">rewrite</span> (@<span class="id" title="lemma">union_comm_assoc</span> <span class="id" title="var">_</span> <span class="id" title="var">E</span> <span class="id" title="var">F</span> <span class="id" title="var">G</span>); <span class="id" title="tactic">reflexivity</span> : <span class="id" title="var">core</span>.<br/>
<span class="id" title="keyword">Hint Extern</span> 1 (?<span class="id" title="var">E</span> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> ?<span class="id" title="var">F</span> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> ?<span class="id" title="var">E</span> <span class="id" title="notation">=</span> ?<span class="id" title="var">F</span> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> ?<span class="id" title="var">E</span>) =&gt;<br/>
<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">union_comm_assoc</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">union_same</span>; <span class="id" title="tactic">reflexivity</span> : <span class="id" title="var">core</span>.<br/>
<span class="id" title="keyword">Hint Extern</span> 1 (?<span class="id" title="var">E</span> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> <span class="id" title="notation">\{}</span> <span class="id" title="notation">=</span> ?<span class="id" title="var">E</span>) =&gt; <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">union_empty_r</span>; <span class="id" title="tactic">reflexivity</span> : <span class="id" title="var">core</span>.<br/>
<span class="id" title="keyword">Hint Extern</span> 1 (?<span class="id" title="var">E</span> <span class="id" title="notation">=</span> ?<span class="id" title="var">E</span> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> <span class="id" title="notation">\{}</span>) =&gt; <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">union_empty_r</span>; <span class="id" title="tactic">reflexivity</span> : <span class="id" title="var">core</span>.<br/>
<span class="id" title="keyword">Hint Extern</span> 1 (<span class="id" title="notation">\{}</span> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> ?<span class="id" title="var">E</span> <span class="id" title="notation">=</span> ?<span class="id" title="var">E</span>) =&gt; <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">union_empty_l</span>; <span class="id" title="tactic">reflexivity</span> : <span class="id" title="var">core</span>.<br/>
<span class="id" title="keyword">Hint Extern</span> 1 (?<span class="id" title="var">E</span> <span class="id" title="notation">=</span> <span class="id" title="notation">\{}</span> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> ?<span class="id" title="var">E</span>) =&gt; <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">union_empty_l</span>; <span class="id" title="tactic">reflexivity</span> : <span class="id" title="var">core</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="union_same_push"><span class="id" title="lemma">union_same_push</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">A</span> (<span class="id" title="var">E</span> <span class="id" title="var">F</span> : <span class="id" title="axiom">fset</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#A"><span class="id" title="variable">A</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Lib.LibExtraEnv.html#E"><span class="id" title="variable">E</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> <span class="id" title="notation">(</span><a class="idref" href="DOT.Lib.LibExtraEnv.html#E"><span class="id" title="variable">E</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#F"><span class="id" title="variable">F</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">=</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E"><span class="id" title="variable">E</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#F"><span class="id" title="variable">F</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">union_assoc</span>, <span class="id" title="lemma">union_same</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="concat_assoc_eq4"><span class="id" title="lemma">concat_assoc_eq4</span></a> {<span class="id" title="var">A</span>} : <span class="id" title="keyword">forall</span> {<span class="id" title="var">E1</span> <span class="id" title="var">E2</span> <span class="id" title="var">E3</span> <span class="id" title="var">E4</span> : <span class="id" title="definition">env</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#A"><span class="id" title="variable">A</span></a>},<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Lib.LibExtraEnv.html#E1"><span class="id" title="variable">E1</span></a> <span class="id" title="notation">&amp;</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E2"><span class="id" title="variable">E2</span></a> <span class="id" title="notation">&amp;</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E3"><span class="id" title="variable">E3</span></a> <span class="id" title="notation">&amp;</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E4"><span class="id" title="variable">E4</span></a> <span class="id" title="notation">=</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E1"><span class="id" title="variable">E1</span></a> <span class="id" title="notation">&amp;</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E2"><span class="id" title="variable">E2</span></a> <span class="id" title="notation">&amp;</span> <span class="id" title="notation">(</span><a class="idref" href="DOT.Lib.LibExtraEnv.html#E3"><span class="id" title="variable">E3</span></a> <span class="id" title="notation">&amp;</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E4"><span class="id" title="variable">E4</span></a><span class="id" title="notation">)</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">concat_assoc</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Hint Resolve</span> <span class="id" title="var">concat_assoc_eq4</span> : <span class="id" title="var">core</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="concat_assoc_eq5"><span class="id" title="lemma">concat_assoc_eq5</span></a> {<span class="id" title="var">A</span>} : <span class="id" title="keyword">forall</span> {<span class="id" title="var">E1</span> <span class="id" title="var">E2</span> <span class="id" title="var">E3</span> <span class="id" title="var">E4</span> <span class="id" title="var">E5</span> : <span class="id" title="definition">env</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#A"><span class="id" title="variable">A</span></a>},<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Lib.LibExtraEnv.html#E1"><span class="id" title="variable">E1</span></a> <span class="id" title="notation">&amp;</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E2"><span class="id" title="variable">E2</span></a> <span class="id" title="notation">&amp;</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E3"><span class="id" title="variable">E3</span></a> <span class="id" title="notation">&amp;</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E4"><span class="id" title="variable">E4</span></a> <span class="id" title="notation">&amp;</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E5"><span class="id" title="variable">E5</span></a> <span class="id" title="notation">=</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E1"><span class="id" title="variable">E1</span></a> <span class="id" title="notation">&amp;</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E2"><span class="id" title="variable">E2</span></a> <span class="id" title="notation">&amp;</span> <span class="id" title="notation">(</span><a class="idref" href="DOT.Lib.LibExtraEnv.html#E3"><span class="id" title="variable">E3</span></a> <span class="id" title="notation">&amp;</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E4"><span class="id" title="variable">E4</span></a> <span class="id" title="notation">&amp;</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E5"><span class="id" title="variable">E5</span></a><span class="id" title="notation">)</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">rewrite</span> ? <span class="id" title="lemma">concat_assoc</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Hint Resolve</span> <span class="id" title="var">concat_assoc_eq5</span> : <span class="id" title="var">core</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="union_eq_cases"><span class="id" title="lemma">union_eq_cases</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">A</span> (<span class="id" title="var">E</span> <span class="id" title="var">F</span> <span class="id" title="var">G</span> <span class="id" title="var">H</span> <span class="id" title="var">I</span> : <span class="id" title="axiom">fset</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#A"><span class="id" title="variable">A</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Lib.LibExtraEnv.html#E"><span class="id" title="variable">E</span></a> <span class="id" title="notation">=</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#F"><span class="id" title="variable">F</span></a> <span class="id" title="notation">\/</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E"><span class="id" title="variable">E</span></a> <span class="id" title="notation">=</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#I"><span class="id" title="variable">I</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#F"><span class="id" title="variable">F</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Lib.LibExtraEnv.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">=</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#H"><span class="id" title="variable">H</span></a> <span class="id" title="notation">\/</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">=</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#I"><span class="id" title="variable">I</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#H"><span class="id" title="variable">H</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Lib.LibExtraEnv.html#E"><span class="id" title="variable">E</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">=</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#F"><span class="id" title="variable">F</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#H"><span class="id" title="variable">H</span></a> <span class="id" title="notation">\/</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E"><span class="id" title="variable">E</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">=</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#I"><span class="id" title="variable">I</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#F"><span class="id" title="variable">F</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#H"><span class="id" title="variable">H</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">solve</span> [<span class="id" title="tactic">left</span>; <span class="id" title="tactic">auto</span> 2 | <span class="id" title="tactic">right</span>; <span class="id" title="tactic">auto</span> 2].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">right</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="lemma">union_assoc</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">union_comm_assoc</span>, &lt;- <span class="id" title="lemma">union_assoc</span>, <a class="idref" href="DOT.Lib.LibExtraEnv.html#union_same_push"><span class="id" title="lemma">union_same_push</span></a>. <span class="id" title="tactic">auto</span> 2.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Hint Extern</span> 1 (?<span class="id" title="var">E</span> <span class="id" title="notation">&amp;</span> ?<span class="id" title="var">F</span> <span class="id" title="notation">&amp;</span> ?<span class="id" title="var">G</span> <span class="id" title="notation">=</span> ?<span class="id" title="var">E</span> <span class="id" title="notation">&amp;</span> <span class="id" title="notation">(</span>?<span class="id" title="var">F</span> <span class="id" title="notation">&amp;</span> ?<span class="id" title="var">G</span><span class="id" title="notation">)</span>) =&gt;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">concat_assoc</span>; <span class="id" title="tactic">reflexivity</span> : <span class="id" title="var">core</span>.<br/>
<span class="id" title="keyword">Hint Extern</span> 1 (?<span class="id" title="var">E</span> <span class="id" title="notation">&amp;</span> ?<span class="id" title="var">F</span> <span class="id" title="notation">&amp;</span> ?<span class="id" title="var">G</span> <span class="id" title="notation">&amp;</span> ?<span class="id" title="var">H</span> <span class="id" title="notation">=</span> ?<span class="id" title="var">E</span> <span class="id" title="notation">&amp;</span> <span class="id" title="notation">(</span>?<span class="id" title="var">F</span> <span class="id" title="notation">&amp;</span> <span class="id" title="notation">(</span>?<span class="id" title="var">G</span> <span class="id" title="notation">&amp;</span> ?<span class="id" title="var">H</span><span class="id" title="notation">))</span>) =&gt;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> 2 <span class="id" title="lemma">concat_assoc</span>; <span class="id" title="tactic">reflexivity</span> : <span class="id" title="var">core</span>.<br/>
<span class="id" title="keyword">Hint Extern</span> 1 (?<span class="id" title="var">E</span> <span class="id" title="notation">&amp;</span> ?<span class="id" title="var">F</span> <span class="id" title="notation">&amp;</span> ?<span class="id" title="var">G</span> <span class="id" title="notation">&amp;</span> ?<span class="id" title="var">H</span> <span class="id" title="notation">&amp;</span> ?<span class="id" title="var">I</span> <span class="id" title="notation">=</span> ?<span class="id" title="var">E</span> <span class="id" title="notation">&amp;</span> ?<span class="id" title="var">F</span> <span class="id" title="notation">&amp;</span> <span class="id" title="notation">(</span>?<span class="id" title="var">G</span> <span class="id" title="notation">&amp;</span> ?<span class="id" title="var">H</span> <span class="id" title="notation">&amp;</span> ?<span class="id" title="var">I</span><span class="id" title="notation">)</span>) =&gt;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> 2 <span class="id" title="lemma">concat_assoc</span>; <span class="id" title="tactic">reflexivity</span> : <span class="id" title="var">core</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="fv_in_values_empty"><span class="id" title="lemma">fv_in_values_empty</span></a> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>) <span class="id" title="var">f</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id" title="definition">fv_in_values</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#f"><span class="id" title="variable">f</span></a> <span class="id" title="axiom">empty</span> <span class="id" title="notation">=</span> <span class="id" title="notation">\{}</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">A</span> <span class="id" title="var">f</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="definition">fv_in_values</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="axiom">empty_def</span>, <span class="id" title="axiom">values_def</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="fv_in_values_cons"><span class="id" title="lemma">fv_in_values_cons</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">A</span> (<span class="id" title="var">E1</span>: <span class="id" title="definition">env</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#A"><span class="id" title="variable">A</span></a>) <span class="id" title="var">x</span> <span class="id" title="var">v</span> <span class="id" title="var">f</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">fv_in_values</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#f"><span class="id" title="variable">f</span></a> (<a class="idref" href="DOT.Lib.LibExtraEnv.html#E1"><span class="id" title="variable">E1</span></a> <span class="id" title="notation">&amp;</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">~</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#v"><span class="id" title="variable">v</span></a>) <span class="id" title="notation">=</span> <span class="id" title="definition">fv_in_values</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E1"><span class="id" title="variable">E1</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> <span class="id" title="notation">(</span><span class="id" title="definition">fv_in_values</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#f"><span class="id" title="variable">f</span></a> (<a class="idref" href="DOT.Lib.LibExtraEnv.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">~</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#v"><span class="id" title="variable">v</span></a>)<span class="id" title="notation">)</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">union_comm</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="definition">fv_in_values</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="axiom">single_def</span>, <span class="id" title="axiom">values_def</span>, <span class="id" title="axiom">concat_def</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">union_empty_r</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="fv_in_values_concat"><span class="id" title="lemma">fv_in_values_concat</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">A</span> (<span class="id" title="var">E1</span> <span class="id" title="var">E2</span>: <span class="id" title="definition">env</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#A"><span class="id" title="variable">A</span></a>) <span class="id" title="var">f</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">fv_in_values</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#f"><span class="id" title="variable">f</span></a> (<a class="idref" href="DOT.Lib.LibExtraEnv.html#E1"><span class="id" title="variable">E1</span></a> <span class="id" title="notation">&amp;</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E2"><span class="id" title="variable">E2</span></a>) <span class="id" title="notation">=</span> <span class="id" title="definition">fv_in_values</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E1"><span class="id" title="variable">E1</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> <span class="id" title="definition">fv_in_values</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E2"><span class="id" title="variable">E2</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">A</span> <span class="id" title="var">E1</span> <span class="id" title="var">E2</span>. <span class="id" title="var">gen</span> <span class="id" title="var">E1</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">E2</span> <span class="id" title="keyword">using</span> <span class="id" title="lemma">env_ind</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">concat_empty_r</span>. <span class="id" title="tactic">rewrite</span> &lt;- (<span class="id" title="lemma">union_empty_r</span> (<span class="id" title="definition">fv_in_values</span> <span class="id" title="var">f</span> <span class="id" title="var">E1</span>)) <span class="id" title="tactic">at</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="definition">fv_in_values</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="axiom">empty_def</span>, <span class="id" title="axiom">values_def</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">concat_assoc</span>. <span class="id" title="tactic">rewrite</span> ? <a class="idref" href="DOT.Lib.LibExtraEnv.html#fv_in_values_cons"><span class="id" title="lemma">fv_in_values_cons</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> ? <span class="id" title="var">IHE2</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="lemma">union_assoc</span>. <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="subst_pair_fset_vars"><span class="id" title="definition">subst_pair_fset_vars</span></a> {<span class="id" title="var">A</span>} (<span class="id" title="var">vs</span> : <span class="id" title="axiom">fset</span> <span class="id" title="axiom">var</span>) (<span class="id" title="var">y</span> : <a class="idref" href="DOT.Lib.LibExtraEnv.html#A"><span class="id" title="variable">A</span></a>) (<span class="id" title="var">e</span> : <span class="id" title="axiom">var</span> <span class="id" title="notation">*</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#A"><span class="id" title="variable">A</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#e"><span class="id" title="variable">e</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <span class="id" title="notation">(</span><span class="id" title="var">x</span><span class="id" title="notation">,</span> <span class="id" title="var">y'</span><span class="id" title="notation">)</span> =&gt; <span class="id" title="notation">If</span> <span class="id" title="var">x</span> <span class="id" title="notation">\</span><span class="id" title="notation">in</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#vs"><span class="id" title="variable">vs</span></a> <span class="id" title="notation">then</span> <span class="id" title="notation">(</span><span class="id" title="var">x</span><span class="id" title="notation">,</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#y"><span class="id" title="variable">y</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">else</span> <span class="id" title="notation">(</span><span class="id" title="var">x</span><span class="id" title="notation">,</span> <span class="id" title="var">y'</span><span class="id" title="notation">)</span><br/>
<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="subst_env_fset_vars"><span class="id" title="definition">subst_env_fset_vars</span></a> {<span class="id" title="var">A</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">E</span> : <span class="id" title="definition">env</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#A"><span class="id" title="variable">A</span></a>) (<span class="id" title="var">vs</span> : <span class="id" title="axiom">fset</span> <span class="id" title="axiom">var</span>) (<span class="id" title="var">y</span> : <a class="idref" href="DOT.Lib.LibExtraEnv.html#A"><span class="id" title="variable">A</span></a>) : (<span class="id" title="definition">env</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#A"><span class="id" title="variable">A</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="definition">List.map</span> (<a class="idref" href="DOT.Lib.LibExtraEnv.html#subst_pair_fset_vars"><span class="id" title="definition">subst_pair_fset_vars</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#vs"><span class="id" title="variable">vs</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#y"><span class="id" title="variable">y</span></a>) <a class="idref" href="DOT.Lib.LibExtraEnv.html#E"><span class="id" title="variable">E</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="subst_env_fset_vars_distrib_env"><span class="id" title="lemma">subst_env_fset_vars_distrib_env</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">A</span> (<span class="id" title="var">E1</span> : <span class="id" title="definition">env</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#A"><span class="id" title="variable">A</span></a>) (<span class="id" title="var">E2</span> : <span class="id" title="definition">env</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#A"><span class="id" title="variable">A</span></a>) <span class="id" title="var">vs</span> <span class="id" title="var">i</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Lib.LibExtraEnv.html#subst_env_fset_vars"><span class="id" title="definition">subst_env_fset_vars</span></a> (<a class="idref" href="DOT.Lib.LibExtraEnv.html#E1"><span class="id" title="variable">E1</span></a> <span class="id" title="notation">&amp;</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E2"><span class="id" title="variable">E2</span></a>) <a class="idref" href="DOT.Lib.LibExtraEnv.html#vs"><span class="id" title="variable">vs</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#i"><span class="id" title="variable">i</span></a> <span class="id" title="notation">=</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><a class="idref" href="DOT.Lib.LibExtraEnv.html#subst_env_fset_vars"><span class="id" title="definition">subst_env_fset_vars</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E1"><span class="id" title="variable">E1</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#vs"><span class="id" title="variable">vs</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#i"><span class="id" title="variable">i</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">&amp;</span> <span class="id" title="notation">(</span><a class="idref" href="DOT.Lib.LibExtraEnv.html#subst_env_fset_vars"><span class="id" title="definition">subst_env_fset_vars</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E2"><span class="id" title="variable">E2</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#vs"><span class="id" title="variable">vs</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#i"><span class="id" title="variable">i</span></a><span class="id" title="notation">)</span>.<br/>
<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">with</span> <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">E2</span>; <span class="id" title="tactic">intros</span>...<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="axiom">empty_def</span>. <span class="id" title="tactic">repeat</span>(<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">concat_empty_r</span>)...<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="axiom">concat_def</span> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHE2</span>...<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="subst_env_fset_vars_empty"><span class="id" title="lemma">subst_env_fset_vars_empty</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">A</span> (<span class="id" title="var">E</span> : <span class="id" title="definition">env</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#A"><span class="id" title="variable">A</span></a>) <span class="id" title="var">i</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Lib.LibExtraEnv.html#subst_env_fset_vars"><span class="id" title="definition">subst_env_fset_vars</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E"><span class="id" title="variable">E</span></a> <span class="id" title="notation">\{}</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#i"><span class="id" title="variable">i</span></a> <span class="id" title="notation">=</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E"><span class="id" title="variable">E</span></a>.<br/>
<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">with</span> <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">E</span>...<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">cons_to_push</span>. <span class="id" title="var">cases_if</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <span class="id" title="axiom">in_empty</span> <span class="id" title="tactic">in</span> <span class="id" title="var">C</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">C</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHE</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">cons_to_push</span>...<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="subst_env_fset_vars_single_notin"><span class="id" title="lemma">subst_env_fset_vars_single_notin</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">A</span> (<span class="id" title="var">E</span> : <span class="id" title="definition">env</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#A"><span class="id" title="variable">A</span></a>) (<span class="id" title="var">x</span> : <span class="id" title="axiom">var</span>) <span class="id" title="var">i</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Lib.LibExtraEnv.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">#</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E"><span class="id" title="variable">E</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Lib.LibExtraEnv.html#subst_env_fset_vars"><span class="id" title="definition">subst_env_fset_vars</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E"><span class="id" title="variable">E</span></a> <span class="id" title="notation">\{</span><a class="idref" href="DOT.Lib.LibExtraEnv.html#x"><span class="id" title="variable">x</span></a><span class="id" title="notation">}</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#i"><span class="id" title="variable">i</span></a> <span class="id" title="notation">=</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E"><span class="id" title="variable">E</span></a>.<br/>
<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">with</span> <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">E</span>...<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span>. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">cons_to_push</span> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">dom_concat</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">notin_union</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="lemma">cons_to_push</span>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">dom_single</span>, <span class="id" title="lemma">notin_singleton</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="var">cases_if</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">exfalso</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="axiom">in_singleton</span> <span class="id" title="tactic">in</span> <span class="id" title="var">C</span>...<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="lemma">f_equal</span>...<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="subst_pair_fset_vars_same"><span class="id" title="lemma">subst_pair_fset_vars_same</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">A</span> (<span class="id" title="var">xs</span> : <span class="id" title="definition">vars</span>) (<span class="id" title="var">i</span> : <a class="idref" href="DOT.Lib.LibExtraEnv.html#A"><span class="id" title="variable">A</span></a>) (<span class="id" title="var">x</span> : <span class="id" title="axiom">var</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Lib.LibExtraEnv.html#subst_pair_fset_vars"><span class="id" title="definition">subst_pair_fset_vars</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#xs"><span class="id" title="variable">xs</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#i"><span class="id" title="variable">i</span></a> <span class="id" title="notation">(</span><a class="idref" href="DOT.Lib.LibExtraEnv.html#x"><span class="id" title="variable">x</span></a><span class="id" title="notation">,</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#i"><span class="id" title="variable">i</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">=</span> <span class="id" title="notation">(</span><a class="idref" href="DOT.Lib.LibExtraEnv.html#x"><span class="id" title="variable">x</span></a><span class="id" title="notation">,</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#i"><span class="id" title="variable">i</span></a><span class="id" title="notation">)</span>.<br/>
<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">with</span> <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">intros</span>... <span class="id" title="tactic">simpl</span>. <span class="id" title="var">cases_if</span>... <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="subst_pair_fset_in_vars"><span class="id" title="lemma">subst_pair_fset_in_vars</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">A</span> (<span class="id" title="var">xs</span> : <span class="id" title="definition">vars</span>) (<span class="id" title="var">i</span> <span class="id" title="var">a</span> : <a class="idref" href="DOT.Lib.LibExtraEnv.html#A"><span class="id" title="variable">A</span></a>) (<span class="id" title="var">x</span> : <span class="id" title="axiom">var</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Lib.LibExtraEnv.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">in</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#xs"><span class="id" title="variable">xs</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Lib.LibExtraEnv.html#subst_pair_fset_vars"><span class="id" title="definition">subst_pair_fset_vars</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#xs"><span class="id" title="variable">xs</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#i"><span class="id" title="variable">i</span></a> <span class="id" title="notation">(</span><a class="idref" href="DOT.Lib.LibExtraEnv.html#x"><span class="id" title="variable">x</span></a><span class="id" title="notation">,</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#a"><span class="id" title="variable">a</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">=</span> <span class="id" title="notation">(</span><a class="idref" href="DOT.Lib.LibExtraEnv.html#x"><span class="id" title="variable">x</span></a><span class="id" title="notation">,</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#i"><span class="id" title="variable">i</span></a><span class="id" title="notation">)</span>.<br/>
<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">with</span> <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">intros</span>... <span class="id" title="tactic">simpl</span>. <span class="id" title="var">cases_if</span>... <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="subst_pair_fset_notin_vars"><span class="id" title="lemma">subst_pair_fset_notin_vars</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">A</span> (<span class="id" title="var">xs</span> : <span class="id" title="definition">vars</span>) (<span class="id" title="var">i</span> <span class="id" title="var">a</span> : <a class="idref" href="DOT.Lib.LibExtraEnv.html#A"><span class="id" title="variable">A</span></a>) (<span class="id" title="var">x</span> : <span class="id" title="axiom">var</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Lib.LibExtraEnv.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">notin</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#xs"><span class="id" title="variable">xs</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Lib.LibExtraEnv.html#subst_pair_fset_vars"><span class="id" title="definition">subst_pair_fset_vars</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#xs"><span class="id" title="variable">xs</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#i"><span class="id" title="variable">i</span></a> <span class="id" title="notation">(</span><a class="idref" href="DOT.Lib.LibExtraEnv.html#x"><span class="id" title="variable">x</span></a><span class="id" title="notation">,</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#a"><span class="id" title="variable">a</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">=</span> <span class="id" title="notation">(</span><a class="idref" href="DOT.Lib.LibExtraEnv.html#x"><span class="id" title="variable">x</span></a><span class="id" title="notation">,</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#a"><span class="id" title="variable">a</span></a><span class="id" title="notation">)</span>.<br/>
<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">with</span> <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">intros</span>... <span class="id" title="tactic">simpl</span>. <span class="id" title="var">cases_if</span>... <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="subst_env_fset_vars_distrib_vs"><span class="id" title="lemma">subst_env_fset_vars_distrib_vs</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">A</span> (<span class="id" title="var">E</span> : <span class="id" title="definition">env</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#A"><span class="id" title="variable">A</span></a>) <span class="id" title="var">vs</span> <span class="id" title="var">x</span> <span class="id" title="var">i</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Lib.LibExtraEnv.html#subst_env_fset_vars"><span class="id" title="definition">subst_env_fset_vars</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E"><span class="id" title="variable">E</span></a> (<a class="idref" href="DOT.Lib.LibExtraEnv.html#vs"><span class="id" title="variable">vs</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> <span class="id" title="notation">\{</span><a class="idref" href="DOT.Lib.LibExtraEnv.html#x"><span class="id" title="variable">x</span></a><span class="id" title="notation">}</span>) <a class="idref" href="DOT.Lib.LibExtraEnv.html#i"><span class="id" title="variable">i</span></a> <span class="id" title="notation">=</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Lib.LibExtraEnv.html#subst_env_fset_vars"><span class="id" title="definition">subst_env_fset_vars</span></a> (<a class="idref" href="DOT.Lib.LibExtraEnv.html#subst_env_fset_vars"><span class="id" title="definition">subst_env_fset_vars</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#vs"><span class="id" title="variable">vs</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#i"><span class="id" title="variable">i</span></a>) <span class="id" title="notation">\{</span><a class="idref" href="DOT.Lib.LibExtraEnv.html#x"><span class="id" title="variable">x</span></a><span class="id" title="notation">}</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#i"><span class="id" title="variable">i</span></a>.<br/>
<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">with</span> <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">E</span>...<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="var">cases_if</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">cases_if</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#subst_pair_fset_vars_same"><span class="id" title="lemma">subst_pair_fset_vars_same</span></a>. <span class="id" title="tactic">apply</span> <span class="id" title="lemma">f_equal</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <span class="id" title="axiom">in_union</span> <span class="id" title="tactic">in</span> <span class="id" title="var">C</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">C</span>; <span class="id" title="tactic">try</span>(<span class="id" title="tactic">solve</span>[<span class="id" title="var">exfalso</span>; <span class="id" title="tactic">eauto</span>]).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#subst_pair_fset_in_vars"><span class="id" title="lemma">subst_pair_fset_in_vars</span></a>... <span class="id" title="tactic">apply</span> <span class="id" title="lemma">f_equal</span>...<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="axiom">in_union</span> <span class="id" title="tactic">in</span> <span class="id" title="var">C</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">not_or_eq</span> <span class="id" title="tactic">in</span> <span class="id" title="var">C</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">C</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cases_if</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#subst_pair_fset_notin_vars"><span class="id" title="lemma">subst_pair_fset_notin_vars</span></a>... <span class="id" title="tactic">apply</span> <span class="id" title="lemma">f_equal</span>...<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="subst_env_fset_vars_dom"><span class="id" title="lemma">subst_env_fset_vars_dom</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">A</span> (<span class="id" title="var">E</span> : <span class="id" title="definition">env</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#A"><span class="id" title="variable">A</span></a>) <span class="id" title="var">vs</span> <span class="id" title="var">i</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="axiom">dom</span> (<a class="idref" href="DOT.Lib.LibExtraEnv.html#subst_env_fset_vars"><span class="id" title="definition">subst_env_fset_vars</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#vs"><span class="id" title="variable">vs</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#i"><span class="id" title="variable">i</span></a>) <span class="id" title="notation">=</span> <span class="id" title="axiom">dom</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E"><span class="id" title="variable">E</span></a>.<br/>
<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">with</span> <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">E</span>...<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="var">cases_if</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">repeat</span>(<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">cons_to_push</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">dom_concat</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">dom_single</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHE</span>...<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">repeat</span>(<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">cons_to_push</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">dom_concat</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">dom_single</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHE</span>...<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="subst_env_fset_vars_ignore_fresh"><span class="id" title="lemma">subst_env_fset_vars_ignore_fresh</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">A</span> (<span class="id" title="var">E</span> : <span class="id" title="definition">env</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#A"><span class="id" title="variable">A</span></a>) <span class="id" title="var">vs</span> <span class="id" title="var">x</span> <span class="id" title="var">i</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Lib.LibExtraEnv.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">#</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E"><span class="id" title="variable">E</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Lib.LibExtraEnv.html#subst_env_fset_vars"><span class="id" title="definition">subst_env_fset_vars</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E"><span class="id" title="variable">E</span></a> (<a class="idref" href="DOT.Lib.LibExtraEnv.html#vs"><span class="id" title="variable">vs</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> <span class="id" title="notation">\{</span><a class="idref" href="DOT.Lib.LibExtraEnv.html#x"><span class="id" title="variable">x</span></a><span class="id" title="notation">}</span>) <a class="idref" href="DOT.Lib.LibExtraEnv.html#i"><span class="id" title="variable">i</span></a> <span class="id" title="notation">=</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Lib.LibExtraEnv.html#subst_env_fset_vars"><span class="id" title="definition">subst_env_fset_vars</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#vs"><span class="id" title="variable">vs</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#i"><span class="id" title="variable">i</span></a>.<br/>
<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">with</span> <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hfrx</span>. <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="axiom">fset_finite</span> <span class="id" title="var">vs</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">L</span> <span class="id" title="var">Hleq</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">vs</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">L</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">from_list_nil</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">union_empty_l</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#subst_env_fset_vars_empty"><span class="id" title="lemma">subst_env_fset_vars_empty</span></a>, <a class="idref" href="DOT.Lib.LibExtraEnv.html#subst_env_fset_vars_single_notin"><span class="id" title="lemma">subst_env_fset_vars_single_notin</span></a>...<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">from_list_cons</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hleq</span>. <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#subst_env_fset_vars_distrib_vs"><span class="id" title="lemma">subst_env_fset_vars_distrib_vs</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#subst_env_fset_vars_single_notin"><span class="id" title="lemma">subst_env_fset_vars_single_notin</span></a>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#subst_env_fset_vars_dom"><span class="id" title="lemma">subst_env_fset_vars_dom</span></a>...<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="subst_env_fset_vars_single"><span class="id" title="lemma">subst_env_fset_vars_single</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">A</span> (<span class="id" title="var">x</span> : <span class="id" title="axiom">var</span>) (<span class="id" title="var">a</span> : <a class="idref" href="DOT.Lib.LibExtraEnv.html#A"><span class="id" title="variable">A</span></a>) <span class="id" title="var">vs</span> (<span class="id" title="var">i</span> : <a class="idref" href="DOT.Lib.LibExtraEnv.html#A"><span class="id" title="variable">A</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Lib.LibExtraEnv.html#subst_env_fset_vars"><span class="id" title="definition">subst_env_fset_vars</span></a> (<a class="idref" href="DOT.Lib.LibExtraEnv.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">~</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#a"><span class="id" title="variable">a</span></a>) <a class="idref" href="DOT.Lib.LibExtraEnv.html#vs"><span class="id" title="variable">vs</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#i"><span class="id" title="variable">i</span></a> <span class="id" title="notation">=</span> <span class="id" title="notation">(</span><a class="idref" href="DOT.Lib.LibExtraEnv.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">~</span> <span class="id" title="notation">If</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">in</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#vs"><span class="id" title="variable">vs</span></a> <span class="id" title="notation">then</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#i"><span class="id" title="variable">i</span></a> <span class="id" title="notation">else</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#a"><span class="id" title="variable">a</span></a><span class="id" title="notation">)</span>.<br/>
<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">with</span> <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="axiom">single_def</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="var">cases_if</span>... <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="subst_env_fset_vars_in_vs_single"><span class="id" title="lemma">subst_env_fset_vars_in_vs_single</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">A</span> (<span class="id" title="var">x</span> : <span class="id" title="axiom">var</span>) (<span class="id" title="var">a</span> : <a class="idref" href="DOT.Lib.LibExtraEnv.html#A"><span class="id" title="variable">A</span></a>) <span class="id" title="var">vs</span> (<span class="id" title="var">i</span> : <a class="idref" href="DOT.Lib.LibExtraEnv.html#A"><span class="id" title="variable">A</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Lib.LibExtraEnv.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">in</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#vs"><span class="id" title="variable">vs</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Lib.LibExtraEnv.html#subst_env_fset_vars"><span class="id" title="definition">subst_env_fset_vars</span></a> (<a class="idref" href="DOT.Lib.LibExtraEnv.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">~</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#a"><span class="id" title="variable">a</span></a>) <a class="idref" href="DOT.Lib.LibExtraEnv.html#vs"><span class="id" title="variable">vs</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#i"><span class="id" title="variable">i</span></a> <span class="id" title="notation">=</span> <span class="id" title="notation">(</span><a class="idref" href="DOT.Lib.LibExtraEnv.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">~</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#i"><span class="id" title="variable">i</span></a><span class="id" title="notation">)</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#subst_env_fset_vars_single"><span class="id" title="lemma">subst_env_fset_vars_single</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">cases_if</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="subst_env_fset_vars_ok"><span class="id" title="lemma">subst_env_fset_vars_ok</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">A</span> (<span class="id" title="var">E</span> : <span class="id" title="definition">env</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#A"><span class="id" title="variable">A</span></a>) <span class="id" title="var">vs</span> <span class="id" title="var">i</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="inductive">ok</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E"><span class="id" title="variable">E</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="inductive">ok</span> (<a class="idref" href="DOT.Lib.LibExtraEnv.html#subst_env_fset_vars"><span class="id" title="definition">subst_env_fset_vars</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#vs"><span class="id" title="variable">vs</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#i"><span class="id" title="variable">i</span></a>).<br/>
<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">with</span> <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">H</span>...<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="axiom">empty_def</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="axiom">empty_def</span>...<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#subst_env_fset_vars_distrib_env"><span class="id" title="lemma">subst_env_fset_vars_distrib_env</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#subst_env_fset_vars_single"><span class="id" title="lemma">subst_env_fset_vars_single</span></a>. <span class="id" title="tactic">econstructor</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#subst_env_fset_vars_dom"><span class="id" title="lemma">subst_env_fset_vars_dom</span></a>...<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="subst_env_fset_vars_binds_single"><span class="id" title="lemma">subst_env_fset_vars_binds_single</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">A</span> (<span class="id" title="var">E</span> : <span class="id" title="definition">env</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#A"><span class="id" title="variable">A</span></a>) <span class="id" title="var">vs</span> <span class="id" title="var">i</span> (<span class="id" title="var">a</span> : <a class="idref" href="DOT.Lib.LibExtraEnv.html#A"><span class="id" title="variable">A</span></a>) <span class="id" title="var">x</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">binds</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#i"><span class="id" title="variable">i</span></a> (<a class="idref" href="DOT.Lib.LibExtraEnv.html#subst_env_fset_vars"><span class="id" title="definition">subst_env_fset_vars</span></a> (<a class="idref" href="DOT.Lib.LibExtraEnv.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">~</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#a"><span class="id" title="variable">a</span></a>) <a class="idref" href="DOT.Lib.LibExtraEnv.html#vs"><span class="id" title="variable">vs</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#i"><span class="id" title="variable">i</span></a>) <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Lib.LibExtraEnv.html#a"><span class="id" title="variable">a</span></a> <span class="id" title="notation">=</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#i"><span class="id" title="variable">i</span></a> <span class="id" title="notation">\/</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">in</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#vs"><span class="id" title="variable">vs</span></a>.<br/>
<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">with</span> <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="axiom">single_def</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">cases_if</span>...<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">cons_to_push</span>, &lt;- <span class="id" title="axiom">empty_def</span>, <span class="id" title="lemma">concat_empty_l</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">binds_single_eq_inv</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>...<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="subst_env_fset_vars_binds"><span class="id" title="lemma">subst_env_fset_vars_binds</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">A</span> (<span class="id" title="var">E</span> : <span class="id" title="definition">env</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#A"><span class="id" title="variable">A</span></a>) <span class="id" title="var">vs</span> <span class="id" title="var">i</span> <span class="id" title="var">x</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">binds</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#i"><span class="id" title="variable">i</span></a> (<a class="idref" href="DOT.Lib.LibExtraEnv.html#subst_env_fset_vars"><span class="id" title="definition">subst_env_fset_vars</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#vs"><span class="id" title="variable">vs</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#i"><span class="id" title="variable">i</span></a>) <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">binds</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E"><span class="id" title="variable">E</span></a> <span class="id" title="notation">\/</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">in</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#vs"><span class="id" title="variable">vs</span></a>.<br/>
<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">with</span> <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">E</span>...<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">cons_to_push</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#subst_env_fset_vars_distrib_env"><span class="id" title="lemma">subst_env_fset_vars_distrib_env</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">binds_concat_inv</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#binds_to_dom"><span class="id" title="lemma">binds_to_dom</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#subst_env_fset_vars_dom"><span class="id" title="lemma">subst_env_fset_vars_dom</span></a>, <span class="id" title="lemma">dom_single</span>, <span class="id" title="axiom">in_singleton</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#subst_env_fset_vars_binds_single"><span class="id" title="lemma">subst_env_fset_vars_binds_single</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>... <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span>...<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#subst_env_fset_vars_dom"><span class="id" title="lemma">subst_env_fset_vars_dom</span></a>, <span class="id" title="lemma">dom_single</span>, <span class="id" title="lemma">notin_singleton</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHE</span> <span class="id" title="var">vs</span> <span class="id" title="var">i</span> <span class="id" title="var">x</span> <span class="id" title="var">H0</span>). <span class="id" title="tactic">destruct</span> <span class="id" title="var">IHE</span>...<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="subst_pair_fset_vars_binds"><span class="id" title="lemma">subst_pair_fset_vars_binds</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">A</span> <span class="id" title="var">E</span> (<span class="id" title="var">xs</span> : <span class="id" title="definition">vars</span>) (<span class="id" title="var">i</span> : <a class="idref" href="DOT.Lib.LibExtraEnv.html#A"><span class="id" title="variable">A</span></a>) (<span class="id" title="var">x</span> : <span class="id" title="axiom">var</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">binds</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E"><span class="id" title="variable">E</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">binds</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#i"><span class="id" title="variable">i</span></a> (<a class="idref" href="DOT.Lib.LibExtraEnv.html#subst_env_fset_vars"><span class="id" title="definition">subst_env_fset_vars</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#xs"><span class="id" title="variable">xs</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#i"><span class="id" title="variable">i</span></a>).<br/>
<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">with</span> <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">E</span>...<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">cons_to_push</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">binds_concat_inv</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="lemma">binds_single_inv</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#subst_env_fset_vars_distrib_env"><span class="id" title="lemma">subst_env_fset_vars_distrib_env</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">binds_concat_right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#subst_env_fset_vars_single"><span class="id" title="lemma">subst_env_fset_vars_single</span></a>. <span class="id" title="var">cases_if</span>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <span class="id" title="lemma">binds_single_eq</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#subst_env_fset_vars_distrib_env"><span class="id" title="lemma">subst_env_fset_vars_distrib_env</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">binds_concat_left</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#subst_env_fset_vars_single"><span class="id" title="lemma">subst_env_fset_vars_single</span></a>. <span class="id" title="var">cases_if</span>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <span class="id" title="lemma">binds_single_eq</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="subst_env_fset_vars_more"><span class="id" title="lemma">subst_env_fset_vars_more</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">A</span> (<span class="id" title="var">E</span> : <span class="id" title="definition">env</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#A"><span class="id" title="variable">A</span></a>) <span class="id" title="var">vs</span> <span class="id" title="var">vs'</span> <span class="id" title="var">i</span> <span class="id" title="var">x</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">binds</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#i"><span class="id" title="variable">i</span></a> (<a class="idref" href="DOT.Lib.LibExtraEnv.html#subst_env_fset_vars"><span class="id" title="definition">subst_env_fset_vars</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#vs"><span class="id" title="variable">vs</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#i"><span class="id" title="variable">i</span></a>) <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Lib.LibExtraEnv.html#vs"><span class="id" title="variable">vs</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">c</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#vs'"><span class="id" title="variable">vs'</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">binds</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#i"><span class="id" title="variable">i</span></a> (<a class="idref" href="DOT.Lib.LibExtraEnv.html#subst_env_fset_vars"><span class="id" title="definition">subst_env_fset_vars</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#vs'"><span class="id" title="variable">vs'</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#i"><span class="id" title="variable">i</span></a>).<br/>
<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">with</span> <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">E</span>...<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="var">cases_if</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">cons_to_push</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#subst_env_fset_vars_distrib_env"><span class="id" title="lemma">subst_env_fset_vars_distrib_env</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">binds_concat_inv</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#subst_env_fset_vars_single"><span class="id" title="lemma">subst_env_fset_vars_single</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">binds_single_inv</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHE</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#subst_env_fset_vars_dom"><span class="id" title="lemma">subst_env_fset_vars_dom</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>...<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">cons_to_push</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#subst_env_fset_vars_distrib_env"><span class="id" title="lemma">subst_env_fset_vars_distrib_env</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">binds_concat_inv</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#subst_env_fset_vars_single"><span class="id" title="lemma">subst_env_fset_vars_single</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">binds_single_inv</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span>. <span class="id" title="var">cases_if</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">exfalso</span>... * <span class="id" title="tactic">subst</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHE</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#subst_env_fset_vars_dom"><span class="id" title="lemma">subst_env_fset_vars_dom</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>...<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="subst_env_fset_vars_in_vs"><span class="id" title="lemma">subst_env_fset_vars_in_vs</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">A</span> (<span class="id" title="var">E</span> : <span class="id" title="definition">env</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#A"><span class="id" title="variable">A</span></a>) <span class="id" title="var">vs</span> <span class="id" title="var">i</span> <span class="id" title="var">i'</span> <span class="id" title="var">x</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><a class="idref" href="DOT.Lib.LibExtraEnv.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">in</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#vs"><span class="id" title="variable">vs</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">-&gt;</span> <span class="id" title="definition">binds</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#i'"><span class="id" title="variable">i'</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E"><span class="id" title="variable">E</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">binds</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#i"><span class="id" title="variable">i</span></a> (<a class="idref" href="DOT.Lib.LibExtraEnv.html#subst_env_fset_vars"><span class="id" title="definition">subst_env_fset_vars</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#vs"><span class="id" title="variable">vs</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#i"><span class="id" title="variable">i</span></a>).<br/>
<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">with</span> <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hinv</span> <span class="id" title="var">HbiX</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">E</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="axiom">empty_def</span> <span class="id" title="tactic">in</span> <span class="id" title="var">HbiX</span>. <span class="id" title="var">exfalso</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#binds_to_dom"><span class="id" title="lemma">binds_to_dom</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">HbiX</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">dom_empty</span>, <span class="id" title="axiom">in_empty</span> <span class="id" title="tactic">in</span> <span class="id" title="var">HbiX</span>...<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">cons_to_push</span> <span class="id" title="tactic">in</span> <span class="id" title="var">HbiX</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">binds_concat_inv</span> <span class="id" title="tactic">in</span> <span class="id" title="var">HbiX</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">HbiX</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="lemma">binds_single_inv</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="var">cases_if</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">cons_to_push</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">dom_single</span>, <span class="id" title="lemma">notin_singleton</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>. <span class="id" title="var">cases_if</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">cons_to_push</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">cons_to_push</span>...<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="subst_env_fset_vars_more_env"><span class="id" title="lemma">subst_env_fset_vars_more_env</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">A</span> (<span class="id" title="var">E</span> <span class="id" title="var">E'</span> : <span class="id" title="definition">env</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#A"><span class="id" title="variable">A</span></a>) <span class="id" title="var">vs</span> <span class="id" title="var">i</span> <span class="id" title="var">x</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="keyword">forall</span> <span class="id" title="var">y</span>, <span class="id" title="definition">binds</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E"><span class="id" title="variable">E</span></a> <span class="id" title="notation">-&gt;</span> <span class="id" title="definition">binds</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E'"><span class="id" title="variable">E'</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="keyword">forall</span> <span class="id" title="var">y</span> <span class="id" title="var">a</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Lib.LibExtraEnv.html#y"><span class="id" title="variable">y</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">in</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#vs"><span class="id" title="variable">vs</span></a> <span class="id" title="notation">-&gt;</span> <span class="id" title="definition">binds</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E"><span class="id" title="variable">E</span></a> <span class="id" title="notation">-&gt;</span> <span class="id" title="definition">binds</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E'"><span class="id" title="variable">E'</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">binds</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#i"><span class="id" title="variable">i</span></a> (<a class="idref" href="DOT.Lib.LibExtraEnv.html#subst_env_fset_vars"><span class="id" title="definition">subst_env_fset_vars</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#vs"><span class="id" title="variable">vs</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#i"><span class="id" title="variable">i</span></a>) <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">binds</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#i"><span class="id" title="variable">i</span></a> (<a class="idref" href="DOT.Lib.LibExtraEnv.html#subst_env_fset_vars"><span class="id" title="definition">subst_env_fset_vars</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E'"><span class="id" title="variable">E'</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#vs"><span class="id" title="variable">vs</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#i"><span class="id" title="variable">i</span></a>).<br/>
<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">with</span> <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hmi</span> <span class="id" title="var">Hsub</span> <span class="id" title="var">Hbix</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#subst_env_fset_vars_binds"><span class="id" title="lemma">subst_env_fset_vars_binds</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hbix</span> <span class="id" title="keyword">as</span> ?.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#subst_pair_fset_vars_binds"><span class="id" title="lemma">subst_pair_fset_vars_binds</span></a>...<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#binds_to_dom"><span class="id" title="lemma">binds_to_dom</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hbix</span> <span class="id" title="keyword">as</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#subst_env_fset_vars_dom"><span class="id" title="lemma">subst_env_fset_vars_dom</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#dom_to_binds"><span class="id" title="lemma">dom_to_binds</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#subst_env_fset_vars_in_vs"><span class="id" title="lemma">subst_env_fset_vars_in_vs</span></a>...<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="subst_env_fset_vars_notin_binds"><span class="id" title="lemma">subst_env_fset_vars_notin_binds</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">A</span> (<span class="id" title="var">E</span> : <span class="id" title="definition">env</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#A"><span class="id" title="variable">A</span></a>) <span class="id" title="var">x</span> <span class="id" title="var">vs</span> <span class="id" title="var">i</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Lib.LibExtraEnv.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">notin</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#vs"><span class="id" title="variable">vs</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">binds</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#i"><span class="id" title="variable">i</span></a> (<a class="idref" href="DOT.Lib.LibExtraEnv.html#subst_env_fset_vars"><span class="id" title="definition">subst_env_fset_vars</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#vs"><span class="id" title="variable">vs</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#i"><span class="id" title="variable">i</span></a>) <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">binds</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E"><span class="id" title="variable">E</span></a>.<br/>
<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">with</span> <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">E</span>; <span class="id" title="var">introv</span> <span class="id" title="var">Hnin</span> <span class="id" title="var">Hbin</span>...<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hbin</span>. <span class="id" title="var">cases_if</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">cons_to_push</span> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">apply</span> <span class="id" title="lemma">binds_concat_inv</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hbin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hbin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="lemma">binds_single_inv</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span>. <span class="id" title="var">exfalso</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">dom_single</span>, <span class="id" title="lemma">notin_singleton</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>...<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">cons_to_push</span> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">apply</span> <span class="id" title="lemma">binds_concat_inv</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hbin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hbin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="lemma">binds_single_inv</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">dom_single</span>, <span class="id" title="lemma">notin_singleton</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>...<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="subst_env_fset_vars_already_subst"><span class="id" title="lemma">subst_env_fset_vars_already_subst</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">A</span> (<span class="id" title="var">E</span> <span class="id" title="var">E'</span> : <span class="id" title="definition">env</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#A"><span class="id" title="variable">A</span></a>) <span class="id" title="var">x</span> <span class="id" title="var">vs</span> <span class="id" title="var">i</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="axiom">dom</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E"><span class="id" title="variable">E</span></a> <span class="id" title="notation">=</span> <span class="id" title="axiom">dom</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E'"><span class="id" title="variable">E'</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="keyword">forall</span> (<span class="id" title="var">y</span> : <span class="id" title="axiom">var</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Lib.LibExtraEnv.html#y"><span class="id" title="variable">y</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">in</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#vs"><span class="id" title="variable">vs</span></a> <span class="id" title="notation">-&gt;</span> <span class="id" title="definition">binds</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E'"><span class="id" title="variable">E'</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="keyword">forall</span> (<span class="id" title="var">y</span> : <span class="id" title="axiom">var</span>) (<span class="id" title="var">j</span> : <a class="idref" href="DOT.Lib.LibExtraEnv.html#A"><span class="id" title="variable">A</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Lib.LibExtraEnv.html#y"><span class="id" title="variable">y</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">notin</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#vs"><span class="id" title="variable">vs</span></a> <span class="id" title="notation">-&gt;</span> <span class="id" title="definition">binds</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#j"><span class="id" title="variable">j</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E"><span class="id" title="variable">E</span></a> <span class="id" title="notation">-&gt;</span> <span class="id" title="definition">binds</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#j"><span class="id" title="variable">j</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E'"><span class="id" title="variable">E'</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">binds</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#i"><span class="id" title="variable">i</span></a> (<a class="idref" href="DOT.Lib.LibExtraEnv.html#subst_env_fset_vars"><span class="id" title="definition">subst_env_fset_vars</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#vs"><span class="id" title="variable">vs</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#i"><span class="id" title="variable">i</span></a>) <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">binds</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E'"><span class="id" title="variable">E'</span></a>.<br/>
<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">with</span> <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">E</span>; <span class="id" title="var">introv</span> <span class="id" title="var">HdomEq</span> <span class="id" title="var">HinBin</span> <span class="id" title="var">HninBin</span> <span class="id" title="var">Hbinx</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hbinx</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="axiom">empty_def</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hbinx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">exfalso</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="lemma">binds_empty_inv</span>...<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">E'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="axiom">empty_def</span>, <span class="id" title="lemma">dom_empty</span>, <span class="id" title="lemma">cons_to_push</span>, <span class="id" title="lemma">dom_concat</span>, <span class="id" title="lemma">dom_single</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">in</span> <span class="id" title="var">HdomEq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">exfalso</span>. <span class="id" title="var">erewrite</span> &lt;- <span class="id" title="axiom">in_empty</span>, &lt;- <span class="id" title="var">HdomEq</span>, <span class="id" title="axiom">in_union</span>, <span class="id" title="axiom">in_singleton</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">right</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> (<a class="idref" href="DOT.Lib.LibExtraVar.html#fv_decide"><span class="id" title="lemma">fv_decide</span></a> <span class="id" title="var">x</span> <span class="id" title="var">vs</span>)...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span>, <span class="id" title="var">p</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hbinx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cases_if</span>; <span class="id" title="tactic">repeat</span>(<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">cons_to_push</span> <span class="id" title="tactic">in</span> *).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <span class="id" title="var">HninBin</span>... <span class="id" title="tactic">apply</span> <span class="id" title="lemma">binds_concat_inv</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hbinx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hbinx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">exfalso</span>. <span class="id" title="tactic">apply</span> <span class="id" title="lemma">binds_single_inv</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span>... }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">dom_single</span>, <span class="id" title="lemma">notin_singleton</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#binds_to_dom"><span class="id" title="lemma">binds_to_dom</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span> <span class="id" title="keyword">as</span> ?. <span class="id" title="tactic">rewrite</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#subst_env_fset_vars_dom"><span class="id" title="lemma">subst_env_fset_vars_dom</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#dom_to_binds"><span class="id" title="lemma">dom_to_binds</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="lemma">binds_push_neq</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#subst_env_fset_vars_notin_binds"><span class="id" title="lemma">subst_env_fset_vars_notin_binds</span></a>... }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <span class="id" title="var">HninBin</span>... <span class="id" title="tactic">apply</span> <span class="id" title="lemma">binds_concat_inv</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hbinx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hbinx</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">dom_single</span>, <span class="id" title="lemma">notin_singleton</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#binds_to_dom"><span class="id" title="lemma">binds_to_dom</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span> <span class="id" title="keyword">as</span> ?. <span class="id" title="tactic">rewrite</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#subst_env_fset_vars_dom"><span class="id" title="lemma">subst_env_fset_vars_dom</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#dom_to_binds"><span class="id" title="lemma">dom_to_binds</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="lemma">binds_push_neq</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#subst_env_fset_vars_notin_binds"><span class="id" title="lemma">subst_env_fset_vars_notin_binds</span></a>...<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="subst_env_fset_vars_in_vs_inv"><span class="id" title="lemma">subst_env_fset_vars_in_vs_inv</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">A</span> (<span class="id" title="var">E</span> : <span class="id" title="definition">env</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#A"><span class="id" title="variable">A</span></a>) <span class="id" title="var">x</span> <span class="id" title="var">vs</span> (<span class="id" title="var">i</span> <span class="id" title="var">i'</span> : <a class="idref" href="DOT.Lib.LibExtraEnv.html#A"><span class="id" title="variable">A</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><a class="idref" href="DOT.Lib.LibExtraEnv.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">in</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#vs"><span class="id" title="variable">vs</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">binds</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#i"><span class="id" title="variable">i</span></a> (<a class="idref" href="DOT.Lib.LibExtraEnv.html#subst_env_fset_vars"><span class="id" title="definition">subst_env_fset_vars</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#vs"><span class="id" title="variable">vs</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#i'"><span class="id" title="variable">i'</span></a>) <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Lib.LibExtraEnv.html#i"><span class="id" title="variable">i</span></a> <span class="id" title="notation">=</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#i'"><span class="id" title="variable">i'</span></a>.<br/>
<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">with</span> <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">E</span>; <span class="id" title="var">introv</span> <span class="id" title="var">Hin</span> <span class="id" title="var">Hbin</span>...<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hbin</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="axiom">empty_def</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hbin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">exfalso</span>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <span class="id" title="lemma">binds_empty_inv</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hbin</span>. <span class="id" title="var">cases_if</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">cons_to_push</span> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">apply</span> <span class="id" title="lemma">binds_concat_inv</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hbin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hbin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <span class="id" title="lemma">binds_single_inv</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">cons_to_push</span> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">apply</span> <span class="id" title="lemma">binds_concat_inv</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hbin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hbin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <span class="id" title="lemma">binds_single_inv</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span>. <span class="id" title="var">exfalso</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>...<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="subst_env_fset_vars_notin_vs_inv"><span class="id" title="lemma">subst_env_fset_vars_notin_vs_inv</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">A</span> (<span class="id" title="var">E</span> : <span class="id" title="definition">env</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#A"><span class="id" title="variable">A</span></a>) <span class="id" title="var">x</span> <span class="id" title="var">vs</span> (<span class="id" title="var">i</span> <span class="id" title="var">i'</span> : <a class="idref" href="DOT.Lib.LibExtraEnv.html#A"><span class="id" title="variable">A</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><a class="idref" href="DOT.Lib.LibExtraEnv.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">notin</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#vs"><span class="id" title="variable">vs</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">binds</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#i"><span class="id" title="variable">i</span></a> (<a class="idref" href="DOT.Lib.LibExtraEnv.html#subst_env_fset_vars"><span class="id" title="definition">subst_env_fset_vars</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#vs"><span class="id" title="variable">vs</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#i'"><span class="id" title="variable">i'</span></a>) <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">binds</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E"><span class="id" title="variable">E</span></a>.<br/>
<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">with</span> <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">E</span>; <span class="id" title="var">introv</span> <span class="id" title="var">Hin</span> <span class="id" title="var">Hbin</span>...<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hbin</span>. <span class="id" title="var">cases_if</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">cons_to_push</span> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">apply</span> <span class="id" title="lemma">binds_concat_inv</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hbin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hbin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="lemma">binds_single_inv</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="var">exfalso</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>...<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">cons_to_push</span> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">apply</span> <span class="id" title="lemma">binds_concat_inv</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hbin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hbin</span>... <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>...<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="subst_env_fset_vars_notin_ignore"><span class="id" title="lemma">subst_env_fset_vars_notin_ignore</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">A</span> (<span class="id" title="var">E</span> : <span class="id" title="definition">env</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#A"><span class="id" title="variable">A</span></a>) <span class="id" title="var">x</span> <span class="id" title="var">vs</span> (<span class="id" title="var">i</span> <span class="id" title="var">i'</span> : <a class="idref" href="DOT.Lib.LibExtraEnv.html#A"><span class="id" title="variable">A</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><a class="idref" href="DOT.Lib.LibExtraEnv.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">notin</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#vs"><span class="id" title="variable">vs</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">binds</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E"><span class="id" title="variable">E</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">binds</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#i"><span class="id" title="variable">i</span></a> (<a class="idref" href="DOT.Lib.LibExtraEnv.html#subst_env_fset_vars"><span class="id" title="definition">subst_env_fset_vars</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#vs"><span class="id" title="variable">vs</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#i'"><span class="id" title="variable">i'</span></a>).<br/>
<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">with</span> <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">E</span>; <span class="id" title="var">introv</span> <span class="id" title="var">Hin</span> <span class="id" title="var">Hbin</span>...<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hbin</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">cons_to_push</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hbin</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">binds_concat_inv</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hbin</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hbin</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="lemma">binds_single_inv</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="var">cases_if</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">cons_to_push</span>...<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">dom_single</span>, <span class="id" title="lemma">notin_singleton</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cases_if</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">cons_to_push</span>...<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="subst_env_fset_vars_more_E"><span class="id" title="lemma">subst_env_fset_vars_more_E</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">A</span> (<span class="id" title="var">E</span> <span class="id" title="var">E'</span> : <span class="id" title="definition">env</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#A"><span class="id" title="variable">A</span></a>) <span class="id" title="var">x</span> <span class="id" title="var">vs</span> (<span class="id" title="var">i</span> <span class="id" title="var">i0</span> : <a class="idref" href="DOT.Lib.LibExtraEnv.html#A"><span class="id" title="variable">A</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="keyword">forall</span> <span class="id" title="var">y</span> <span class="id" title="var">j</span>, <span class="id" title="definition">binds</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#j"><span class="id" title="variable">j</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E"><span class="id" title="variable">E</span></a> <span class="id" title="notation">-&gt;</span> <span class="id" title="definition">binds</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#j"><span class="id" title="variable">j</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E'"><span class="id" title="variable">E'</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">binds</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#i"><span class="id" title="variable">i</span></a> (<a class="idref" href="DOT.Lib.LibExtraEnv.html#subst_env_fset_vars"><span class="id" title="definition">subst_env_fset_vars</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E"><span class="id" title="variable">E</span></a>  <a class="idref" href="DOT.Lib.LibExtraEnv.html#vs"><span class="id" title="variable">vs</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#i0"><span class="id" title="variable">i0</span></a>) <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">binds</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#i"><span class="id" title="variable">i</span></a> (<a class="idref" href="DOT.Lib.LibExtraEnv.html#subst_env_fset_vars"><span class="id" title="definition">subst_env_fset_vars</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E'"><span class="id" title="variable">E'</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#vs"><span class="id" title="variable">vs</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#i0"><span class="id" title="variable">i0</span></a>).<br/>
<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">with</span> <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hmore</span> <span class="id" title="var">Hbin</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="DOT.Lib.LibExtraVar.html#fv_decide"><span class="id" title="lemma">fv_decide</span></a> <span class="id" title="var">x</span> <span class="id" title="var">vs</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="DOT.Lib.LibExtraEnv.html#subst_env_fset_vars_in_vs_inv"><span class="id" title="lemma">subst_env_fset_vars_in_vs_inv</span></a> <span class="id" title="var">_</span> <span class="id" title="var">i0</span> <span class="id" title="var">m</span> <span class="id" title="var">Hbin</span>); <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#binds_to_dom"><span class="id" title="lemma">binds_to_dom</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hbin</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#subst_env_fset_vars_dom"><span class="id" title="lemma">subst_env_fset_vars_dom</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hbin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#dom_to_binds"><span class="id" title="lemma">dom_to_binds</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hbin</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hbin</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">v</span> <span class="id" title="var">Hbin</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#subst_env_fset_vars_in_vs"><span class="id" title="lemma">subst_env_fset_vars_in_vs</span></a>...<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="DOT.Lib.LibExtraEnv.html#subst_env_fset_vars_notin_vs_inv"><span class="id" title="lemma">subst_env_fset_vars_notin_vs_inv</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">n</span> <span class="id" title="var">Hbin</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hmore</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#subst_env_fset_vars_notin_ignore"><span class="id" title="lemma">subst_env_fset_vars_notin_ignore</span></a>...<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="subst_env_fset_vars_notin_remove"><span class="id" title="lemma">subst_env_fset_vars_notin_remove</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">A</span> (<span class="id" title="var">E</span> : <span class="id" title="definition">env</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#A"><span class="id" title="variable">A</span></a>) <span class="id" title="var">x</span> <span class="id" title="var">vs</span> <span class="id" title="var">i</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Lib.LibExtraEnv.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">notin</span> <span class="id" title="axiom">dom</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E"><span class="id" title="variable">E</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Lib.LibExtraEnv.html#subst_env_fset_vars"><span class="id" title="definition">subst_env_fset_vars</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#vs"><span class="id" title="variable">vs</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#i"><span class="id" title="variable">i</span></a> <span class="id" title="notation">=</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#subst_env_fset_vars"><span class="id" title="definition">subst_env_fset_vars</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#E"><span class="id" title="variable">E</span></a> (<a class="idref" href="DOT.Lib.LibExtraEnv.html#vs"><span class="id" title="variable">vs</span></a> <span class="id" title="notation">\-</span> <span class="id" title="notation">\{</span><a class="idref" href="DOT.Lib.LibExtraEnv.html#x"><span class="id" title="variable">x</span></a><span class="id" title="notation">}</span>) <a class="idref" href="DOT.Lib.LibExtraEnv.html#i"><span class="id" title="variable">i</span></a>.<br/>
<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">with</span> <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">E</span>...<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hxnin</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">cons_to_push</span>, <span class="id" title="lemma">dom_concat</span>, <span class="id" title="lemma">notin_union</span>, <span class="id" title="lemma">dom_single</span>, <span class="id" title="lemma">notin_singleton</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">in</span> <span class="id" title="var">Hxnin</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hxnin</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hxnin</span> <span class="id" title="var">Hxneq</span>]. <span class="id" title="tactic">simpl</span>. <span class="id" title="var">cases_if</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHE</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">x</span> := <span class="id" title="var">x</span>)... <span class="id" title="var">cases_if</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">exfalso</span>. <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="DOT.Lib.LibExtraFset.html#remove_notin_inv"><span class="id" title="lemma">remove_notin_inv</span></a> <span class="id" title="var">C</span> <span class="id" title="var">C0</span>)...<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHE</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">x</span> := <span class="id" title="var">x</span>)... <span class="id" title="var">cases_if</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">exfalso</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="axiom">in_remove</span> <span class="id" title="tactic">in</span> <span class="id" title="var">C0</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">C0</span>...<br/>
<span class="id" title="keyword">Qed</span>.<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/tebbi/coqdocjs">CoqdocJS</a>
</div>
</div>
</body>

</html>
