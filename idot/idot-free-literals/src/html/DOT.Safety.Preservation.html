<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="assets/resources/coqdoc.css" rel="stylesheet" type="text/css" />
<link href="assets/resources/coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="assets/resources/config.js"></script>
<script type="text/javascript" src="assets/resources/coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="../README.html">README</a>
      <a href="./indexpage.html"> Index </a>
      <a href="./toc.html"> Table of Contents </a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<h1 class="libtitle">DOT.Safety.Preservation</h1>

<div class="code">
<span class="id" title="keyword">Set Implicit Arguments</span>.<br/>

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">Coq.Program.Equality</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">List</span> <a class="idref" href="DOT.Lib.LibExtra.html#"><span class="id" title="library">LibExtra</span></a> <a class="idref" href="DOT.Lib.DotTactics.html#"><span class="id" title="library">DotTactics</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Definitions.Syntax.AbstractSyntax.html#"><span class="id" title="library">AbstractSyntax</span></a> <a class="idref" href="DOT.Definitions.TypingClasses.PreTyping.html#"><span class="id" title="library">PreTyping</span></a> <a class="idref" href="DOT.Definitions.TypingClasses.Typing.html#"><span class="id" title="library">Typing</span></a> <a class="idref" href="DOT.Definitions.Typing.GeneralTyping.html#"><span class="id" title="library">GeneralTyping</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.CanonicalForms.InertTightSubtyping.html#"><span class="id" title="library">InertTightSubtyping</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.CanonicalForms.GeneralToTight.html#"><span class="id" title="library">GeneralToTight</span></a> <a class="idref" href="DOT.CanonicalForms.TightTyping.html#"><span class="id" title="library">TightTyping</span></a> <a class="idref" href="DOT.CanonicalForms.InvertibleTyping.html#"><span class="id" title="library">InvertibleTyping</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.CanonicalForms.RecordAndInertTypes.html#"><span class="id" title="library">RecordAndInertTypes</span></a> <a class="idref" href="DOT.CanonicalForms.PreciseTyping.html#"><span class="id" title="library">PreciseTyping</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Definitions.OperationalSemantics.OperationalSemantics.html#"><span class="id" title="library">OperationalSemantics</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Definitions.TypingClasses.SubstitutionClass.html#"><span class="id" title="library">SubstitutionClass</span></a> <a class="idref" href="DOT.GeneralTyping.Substitution.html#"><span class="id" title="library">Substitution</span></a> <a class="idref" href="DOT.GeneralTyping.RenameConstructors.html#"><span class="id" title="library">RenameConstructors</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Effects.EffectSubstitution.html#"><span class="id" title="library">EffectSubstitution</span></a> <a class="idref" href="DOT.Initialization.InitSubstitution.html#"><span class="id" title="library">InitSubstitution</span></a> <a class="idref" href="DOT.Initialization.InitRenaming.html#"><span class="id" title="library">InitRenaming</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.GeneralTyping.Weakening.html#"><span class="id" title="library">Weakening</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.CanonicalForms.HeapCorrespondence.html#"><span class="id" title="library">HeapCorrespondence</span></a> <a class="idref" href="DOT.CanonicalForms.CanonicalForms.html#"><span class="id" title="library">CanonicalForms</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Definitions.OperationalSemantics.HeapUpdate.html#"><span class="id" title="library">HeapUpdate</span></a> <a class="idref" href="DOT.CanonicalForms.HeapUpdateCorrespondence.html#"><span class="id" title="library">HeapUpdateCorrespondence</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.CanonicalForms.InertGeneralSubtyping.html#"><span class="id" title="library">InertGeneralSubtyping</span></a> <a class="idref" href="DOT.GeneralTyping.Subenvironments.html#"><span class="id" title="library">Subenvironments</span></a> <a class="idref" href="DOT.GeneralTyping.Narrowing.html#"><span class="id" title="library">Narrowing</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Safety.StackTyping.html#"><span class="id" title="library">StackTyping</span></a> <a class="idref" href="DOT.Safety.ConfigTyping.html#"><span class="id" title="library">ConfigTyping</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="DOT.Definitions.Effects.Effects.html#"><span class="id" title="library">Effects</span></a> <a class="idref" href="DOT.Initialization.InitVar.html#"><span class="id" title="library">InitVar</span></a> <a class="idref" href="DOT.Definitions.Initialization.InitTyping.html#"><span class="id" title="library">InitTyping</span></a> <a class="idref" href="DOT.Initialization.InitTypingLemmas.html#"><span class="id" title="library">InitTypingLemmas</span></a> <a class="idref" href="DOT.Initialization.InitWeakening.html#"><span class="id" title="library">InitWeakening</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.HeapEffInit.HeapCommit.html#"><span class="id" title="library">HeapCommit</span></a> <a class="idref" href="DOT.Definitions.PointsTo.WellPointed.html#"><span class="id" title="library">WellPointed</span></a> <a class="idref" href="DOT.HeapEffInit.HeapItemFree.html#"><span class="id" title="library">HeapItemFree</span></a> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#"><span class="id" title="library">SubHeapFree</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.HeapEffInit.InitCorrespondence.html#"><span class="id" title="library">InitCorrespondence</span></a>.<br/>

<br/>
<span class="id" title="keyword">Implicit</span> <span class="id" title="keyword">Types</span> (<span class="id" title="var">Gamma</span> : <a class="idref" href="DOT.Definitions.Syntax.AbstractSyntax.html#ctx"><span class="id" title="abbreviation">ctx</span></a>) (<span class="id" title="var">Delta</span> : <a class="idref" href="DOT.Definitions.Syntax.Types.html#init_ctx"><span class="id" title="abbreviation">init_ctx</span></a>) (<span class="id" title="var">Sigma</span> : <a class="idref" href="DOT.Definitions.Syntax.AbstractMachine.html#heap"><span class="id" title="abbreviation">heap</span></a>) (<span class="id" title="var">ℰ</span> : <a class="idref" href="DOT.Definitions.Effects.Effects.html#eff_ctx"><span class="id" title="abbreviation">eff_ctx</span></a>).<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">not_inert_init</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id" title="var">Hin</span>: <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> <span class="id" title="var">init</span>, <span class="id" title="definition">binds</span> <a class="idref" href="DOT.Safety.Preservation.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="DOT.Safety.Preservation.html#init"><span class="id" title="variable">init</span></a> ?<span class="id" title="var">Delta</span> <span class="id" title="notation">-&gt;</span> <span class="id" title="var">_</span>, <span class="id" title="var">H</span>: <span class="id" title="definition">binds</span> ?<span class="id" title="var">x</span> ?<span class="id" title="var">u</span> ?<span class="id" title="var">Delta</span> |- <span class="id" title="var">_</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hin</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>; <span class="id" title="var">destruct_ors</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="inert_init_well_pointed"><span class="id" title="lemma">inert_init_well_pointed</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">Gamma</span> <span class="id" title="var">Delta</span> <span class="id" title="var">ℰ</span> <span class="id" title="var">x</span> <span class="id" title="var">i</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.HeapEffInit.InitCorrespondence.html#inert_inits"><span class="id" title="definition">inert_inits</span></a> <a class="idref" href="DOT.Safety.Preservation.html#Delta"><span class="id" title="variable">Delta</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Safety.Preservation.html#Gamma"><span class="id" title="variable">Gamma</span></a> <a class="idref" href="DOT.Initialization.InitVar.html#4d1df834ab8d3b9cee8638f84cba55ba"><span class="id" title="notation">⸴</span></a> <a class="idref" href="DOT.Safety.Preservation.html#Delta"><span class="id" title="variable">Delta</span></a> <a class="idref" href="DOT.Initialization.InitVar.html#4d1df834ab8d3b9cee8638f84cba55ba"><span class="id" title="notation">⸴</span></a> <span class="id" title="axiom">dom</span> <a class="idref" href="DOT.Safety.Preservation.html#dc1b905d8ef0ab32d16a033ee43ce82f"><span class="id" title="variable">ℰ</span></a> <a class="idref" href="DOT.Initialization.InitVar.html#4d1df834ab8d3b9cee8638f84cba55ba"><span class="id" title="notation">⊢</span></a><a class="idref" href="DOT.Initialization.InitVar.html#4d1df834ab8d3b9cee8638f84cba55ba"><span class="id" title="notation">i</span></a> <a class="idref" href="DOT.Definitions.Syntax.Terms.html#trm_var"><span class="id" title="constructor">trm_var</span></a> (<a class="idref" href="DOT.Definitions.Syntax.Vars.html#avar_f"><span class="id" title="constructor">avar_f</span></a> <a class="idref" href="DOT.Safety.Preservation.html#x"><span class="id" title="variable">x</span></a>) <a class="idref" href="DOT.Initialization.InitVar.html#4d1df834ab8d3b9cee8638f84cba55ba"><span class="id" title="notation">∶</span></a> <a class="idref" href="DOT.Safety.Preservation.html#i"><span class="id" title="variable">i</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Definitions.PointsTo.WellPointed.html#well_pointed"><span class="id" title="abbreviation">well_pointed</span></a> <a class="idref" href="DOT.Safety.Preservation.html#Delta"><span class="id" title="variable">Delta</span></a> <a class="idref" href="DOT.Safety.Preservation.html#dc1b905d8ef0ab32d16a033ee43ce82f"><span class="id" title="variable">ℰ</span></a> <a class="idref" href="DOT.Safety.Preservation.html#x"><span class="id" title="variable">x</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="DOT.HeapEffInit.InitCorrespondence.html#inert_inits"><span class="id" title="definition">inert_inits</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> * <span class="id" title="var">Hin</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> 1; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">inversion</span> <span class="id" title="var">H4</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">auto</span>; <span class="id" title="var">not_inert_init</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">inversion</span> <span class="id" title="var">H0</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="inert_init_var_cases"><span class="id" title="lemma">inert_init_var_cases</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">Gamma</span> <span class="id" title="var">Delta</span> <span class="id" title="var">ℰ</span> <span class="id" title="var">x</span> <span class="id" title="var">i</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.HeapEffInit.InitCorrespondence.html#inert_inits"><span class="id" title="definition">inert_inits</span></a> <a class="idref" href="DOT.Safety.Preservation.html#Delta"><span class="id" title="variable">Delta</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Safety.Preservation.html#Gamma"><span class="id" title="variable">Gamma</span></a> <a class="idref" href="DOT.Initialization.InitVar.html#4d1df834ab8d3b9cee8638f84cba55ba"><span class="id" title="notation">⸴</span></a> <a class="idref" href="DOT.Safety.Preservation.html#Delta"><span class="id" title="variable">Delta</span></a> <a class="idref" href="DOT.Initialization.InitVar.html#4d1df834ab8d3b9cee8638f84cba55ba"><span class="id" title="notation">⸴</span></a> <span class="id" title="axiom">dom</span> <a class="idref" href="DOT.Safety.Preservation.html#dc1b905d8ef0ab32d16a033ee43ce82f"><span class="id" title="variable">ℰ</span></a> <a class="idref" href="DOT.Initialization.InitVar.html#4d1df834ab8d3b9cee8638f84cba55ba"><span class="id" title="notation">⊢</span></a><a class="idref" href="DOT.Initialization.InitVar.html#4d1df834ab8d3b9cee8638f84cba55ba"><span class="id" title="notation">i</span></a> <a class="idref" href="DOT.Definitions.Syntax.Terms.html#trm_var"><span class="id" title="constructor">trm_var</span></a> (<a class="idref" href="DOT.Definitions.Syntax.Vars.html#avar_f"><span class="id" title="constructor">avar_f</span></a> <a class="idref" href="DOT.Safety.Preservation.html#x"><span class="id" title="variable">x</span></a>) <a class="idref" href="DOT.Initialization.InitVar.html#4d1df834ab8d3b9cee8638f84cba55ba"><span class="id" title="notation">∶</span></a> <a class="idref" href="DOT.Safety.Preservation.html#i"><span class="id" title="variable">i</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="definition">binds</span> <a class="idref" href="DOT.Safety.Preservation.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="DOT.Definitions.Syntax.Types.html#committed"><span class="id" title="constructor">committed</span></a> <a class="idref" href="DOT.Safety.Preservation.html#Delta"><span class="id" title="variable">Delta</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">\/</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="definition">binds</span> <a class="idref" href="DOT.Safety.Preservation.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="DOT.Definitions.Syntax.Types.html#free"><span class="id" title="constructor">free</span></a> <a class="idref" href="DOT.Safety.Preservation.html#Delta"><span class="id" title="variable">Delta</span></a> <span class="id" title="notation">/\</span> <span class="id" title="notation">exists</span> <span class="id" title="var">effs</span><span class="id" title="notation">,</span> <span class="id" title="definition">binds</span> <a class="idref" href="DOT.Safety.Preservation.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="DOT.Safety.Preservation.html#effs"><span class="id" title="variable">effs</span></a> <a class="idref" href="DOT.Safety.Preservation.html#dc1b905d8ef0ab32d16a033ee43ce82f"><span class="id" title="variable">ℰ</span></a><span class="id" title="notation">)</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="DOT.HeapEffInit.InitCorrespondence.html#inert_inits"><span class="id" title="definition">inert_inits</span></a>. <span class="id" title="tactic">inversion</span> 2; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">inversion</span> <span class="id" title="var">H5</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#dom_to_binds"><span class="id" title="lemma">dom_to_binds</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">H2</span>; <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">left</span>. <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="DOT.Initialization.InitTypingLemmas.html#init_typing_committed_inv"><span class="id" title="lemma">init_typing_committed_inv</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a name="Read"><span class="id" title="section">Read</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="preservation_read"><span class="id" title="lemma">preservation_read</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">Gamma</span> <span class="id" title="var">Delta</span> <span class="id" title="var">ℰs</span> <span class="id" title="var">effs</span> <span class="id" title="var">effss</span> <span class="id" title="var">x</span> <span class="id" title="var">a</span> <span class="id" title="var">s</span> <span class="id" title="var">Sigma</span> <span class="id" title="var">c'</span> <span class="id" title="var">U</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Safety.ConfigTyping.html#ty_config"><span class="id" title="inductive">ty_config</span></a> <a class="idref" href="DOT.Safety.Preservation.html#Gamma"><span class="id" title="variable">Gamma</span></a> <a class="idref" href="DOT.Safety.Preservation.html#Delta"><span class="id" title="variable">Delta</span></a> <a class="idref" href="DOT.Safety.Preservation.html#95fdeea536fdcd18a2894301ecf05ec6"><span class="id" title="variable">ℰs</span></a> (<a class="idref" href="DOT.Safety.Preservation.html#effs"><span class="id" title="variable">effs</span></a> <span class="id" title="notation">::</span> <a class="idref" href="DOT.Safety.Preservation.html#effss"><span class="id" title="variable">effss</span></a>) (<a class="idref" href="DOT.Definitions.Syntax.Terms.html#trm_sel"><span class="id" title="constructor">trm_sel</span></a> (<a class="idref" href="DOT.Definitions.Syntax.Vars.html#avar_f"><span class="id" title="constructor">avar_f</span></a> <a class="idref" href="DOT.Safety.Preservation.html#x"><span class="id" title="variable">x</span></a>) <a class="idref" href="DOT.Safety.Preservation.html#a"><span class="id" title="variable">a</span></a><a class="idref" href="DOT.Definitions.Syntax.AbstractMachine.html#853ef4438aa18d93c7ce9a7ed5bb14bd"><span class="id" title="notation">;</span></a> <a class="idref" href="DOT.Safety.Preservation.html#s"><span class="id" title="variable">s</span></a><a class="idref" href="DOT.Definitions.Syntax.AbstractMachine.html#853ef4438aa18d93c7ce9a7ed5bb14bd"><span class="id" title="notation">;</span></a> <a class="idref" href="DOT.Safety.Preservation.html#Sigma"><span class="id" title="variable">Sigma</span></a>) <a class="idref" href="DOT.Safety.Preservation.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Definitions.OperationalSemantics.OperationalSemantics.html#5a6f9eabadac3f4f365369582d682367"><span class="id" title="notation">(</span></a><a class="idref" href="DOT.Definitions.Syntax.Terms.html#trm_sel"><span class="id" title="constructor">trm_sel</span></a> (<a class="idref" href="DOT.Definitions.Syntax.Vars.html#avar_f"><span class="id" title="constructor">avar_f</span></a> <a class="idref" href="DOT.Safety.Preservation.html#x"><span class="id" title="variable">x</span></a>) <a class="idref" href="DOT.Safety.Preservation.html#a"><span class="id" title="variable">a</span></a><a class="idref" href="DOT.Definitions.Syntax.AbstractMachine.html#853ef4438aa18d93c7ce9a7ed5bb14bd"><span class="id" title="notation">;</span></a> <a class="idref" href="DOT.Safety.Preservation.html#s"><span class="id" title="variable">s</span></a><a class="idref" href="DOT.Definitions.Syntax.AbstractMachine.html#853ef4438aa18d93c7ce9a7ed5bb14bd"><span class="id" title="notation">;</span></a> <a class="idref" href="DOT.Safety.Preservation.html#Sigma"><span class="id" title="variable">Sigma</span></a><a class="idref" href="DOT.Definitions.OperationalSemantics.OperationalSemantics.html#5a6f9eabadac3f4f365369582d682367"><span class="id" title="notation">)</span></a> <a class="idref" href="DOT.Definitions.OperationalSemantics.OperationalSemantics.html#5a6f9eabadac3f4f365369582d682367"><span class="id" title="notation">↦</span></a> <a class="idref" href="DOT.Safety.Preservation.html#c'"><span class="id" title="variable">c'</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Safety.ConfigTyping.html#ty_config"><span class="id" title="inductive">ty_config</span></a> <a class="idref" href="DOT.Safety.Preservation.html#Gamma"><span class="id" title="variable">Gamma</span></a> <a class="idref" href="DOT.Safety.Preservation.html#Delta"><span class="id" title="variable">Delta</span></a> <a class="idref" href="DOT.Safety.Preservation.html#95fdeea536fdcd18a2894301ecf05ec6"><span class="id" title="variable">ℰs</span></a> (<a class="idref" href="DOT.Safety.Preservation.html#effs"><span class="id" title="variable">effs</span></a> <span class="id" title="notation">::</span> <a class="idref" href="DOT.Safety.Preservation.html#effss"><span class="id" title="variable">effss</span></a>) <a class="idref" href="DOT.Safety.Preservation.html#c'"><span class="id" title="variable">c'</span></a> <a class="idref" href="DOT.Safety.Preservation.html#U"><span class="id" title="variable">U</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> 1<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> [?<span class="id" title="var">Gamma</span> ?<span class="id" title="var">Delta</span> ?<span class="id" title="var">Sigma</span> ?<span class="id" title="var">ℰ</span> ?<span class="id" title="var">ℰs</span> ?<span class="id" title="var">s</span> ?<span class="id" title="var">t</span> ?<span class="id" title="var">T</span> ?<span class="id" title="var">i</span> ?<span class="id" title="var">U</span> ?<span class="id" title="var">effs'</span> ?<span class="id" title="var">effs</span> ?<span class="id" title="var">effss</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;?<span class="id" title="var">Hin</span> ?<span class="id" title="var">HinD</span> ?<span class="id" title="var">Hhc</span> ?<span class="id" title="var">Hfshs</span> ?<span class="id" title="var">Hts</span> ?<span class="id" title="var">Hty</span> ?<span class="id" title="var">Hef</span> ?<span class="id" title="var">Hit</span> ?<span class="id" title="var">Hecc</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> 1; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">H6</span> <span class="id" title="var">into</span> <span class="id" title="var">HbiS</span>, <span class="id" title="var">H7</span> <span class="id" title="var">into</span> <span class="id" title="var">Hlhs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inversions</span> <span class="id" title="var">Hef</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hit</span>; <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">rename</span> <span class="id" title="var">H1</span> <span class="id" title="var">into</span> <span class="id" title="var">Hcommxa</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hcommxa</span>; <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">rename</span> <span class="id" title="var">H4</span> <span class="id" title="var">into</span> <span class="id" title="var">Hcommx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="DOT.Initialization.InitTypingLemmas.html#commit_typing_implies_bound"><span class="id" title="lemma">commit_typing_implies_bound</span></a> <span class="id" title="var">Hcommx</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hbixc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="DOT.HeapEffInit.InitCorrespondence.html#free_sub_heaps_well_committed"><span class="id" title="lemma">free_sub_heaps_well_committed</span></a> <span class="id" title="var">Hfshs</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hwc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="DOT.HeapEffInit.HeapCommit.html#committed_read_inv"><span class="id" title="lemma">committed_read_inv</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">Hwc</span> <span class="id" title="var">Hbixc</span> <span class="id" title="var">Hcommx</span> <span class="id" title="var">Hcommxa</span> <span class="id" title="var">H0</span> <span class="id" title="var">Hecc</span> <span class="id" title="var">Hit</span> <span class="id" title="var">Hts</span> <span class="id" title="var">Hfshs</span> <span class="id" title="var">HinD</span> <span class="id" title="var">H</span> <span class="id" title="var">effs0</span> <span class="id" title="var">ℰs0</span> <span class="id" title="var">ℰ</span> <span class="id" title="var">U</span> <span class="id" title="var">s</span> <span class="id" title="var">effss</span> <span class="id" title="var">Delta</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="DOT.Definitions.Syntax.Terms.html#trm_sel"><span class="id" title="constructor">trm_sel</span></a> (<a class="idref" href="DOT.Definitions.Syntax.Vars.html#avar_f"><span class="id" title="constructor">avar_f</span></a> <span class="id" title="var">x</span>) <span class="id" title="var">a</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">t</span> <span class="id" title="var">eqn</span>:<span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Hty</span>; <span class="id" title="var">inversions</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="DOT.CanonicalForms.CanonicalForms.html#canonical_forms_obj"><span class="id" title="lemma">canonical_forms_obj</span></a> <span class="id" title="var">Hin</span> <span class="id" title="var">Hhc</span> <span class="id" title="var">H</span>) <span class="id" title="keyword">as</span> [? [? [? ?]]];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">binds_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hlhs'</span> | [<span class="id" title="var">y'</span> [<span class="id" title="var">Hlhs'</span> <span class="id" title="var">Hty'</span>]]];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="DOT.CanonicalForms.RecordAndInertTypes.html#heap_defs_has_inv"><span class="id" title="lemma">heap_defs_has_inv</span></a> <span class="id" title="var">Hlhs</span> <span class="id" title="var">Hlhs'</span>); <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="DOT.Definitions.Typing.GeneralTyping.html#ty_sub"><span class="id" title="constructor">ty_sub</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="DOT.Safety.Preservation.html#Read"><span class="id" title="section">Read</span></a>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a name="Write"><span class="id" title="section">Write</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="preservation_write_to_committed"><span class="id" title="lemma">preservation_write_to_committed</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">Gamma</span> <span class="id" title="var">Delta</span> <span class="id" title="var">ℰs</span> <span class="id" title="var">effs</span> <span class="id" title="var">effss</span> <span class="id" title="var">x</span> <span class="id" title="var">a</span> <span class="id" title="var">y</span> <span class="id" title="var">s</span> <span class="id" title="var">Sigma</span> <span class="id" title="var">c'</span> <span class="id" title="var">U</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Safety.ConfigTyping.html#ty_config"><span class="id" title="inductive">ty_config</span></a> <a class="idref" href="DOT.Safety.Preservation.html#Gamma"><span class="id" title="variable">Gamma</span></a> <a class="idref" href="DOT.Safety.Preservation.html#Delta"><span class="id" title="variable">Delta</span></a> <a class="idref" href="DOT.Safety.Preservation.html#95fdeea536fdcd18a2894301ecf05ec6"><span class="id" title="variable">ℰs</span></a> (<a class="idref" href="DOT.Safety.Preservation.html#effs"><span class="id" title="variable">effs</span></a> <span class="id" title="notation">::</span> <a class="idref" href="DOT.Safety.Preservation.html#effss"><span class="id" title="variable">effss</span></a>) (<a class="idref" href="DOT.Definitions.Syntax.Terms.html#trm_asn"><span class="id" title="constructor">trm_asn</span></a> (<a class="idref" href="DOT.Definitions.Syntax.Vars.html#avar_f"><span class="id" title="constructor">avar_f</span></a> <a class="idref" href="DOT.Safety.Preservation.html#x"><span class="id" title="variable">x</span></a>) <a class="idref" href="DOT.Safety.Preservation.html#a"><span class="id" title="variable">a</span></a> (<a class="idref" href="DOT.Definitions.Syntax.Vars.html#avar_f"><span class="id" title="constructor">avar_f</span></a> <a class="idref" href="DOT.Safety.Preservation.html#y"><span class="id" title="variable">y</span></a>)<a class="idref" href="DOT.Definitions.Syntax.AbstractMachine.html#853ef4438aa18d93c7ce9a7ed5bb14bd"><span class="id" title="notation">;</span></a> <a class="idref" href="DOT.Safety.Preservation.html#s"><span class="id" title="variable">s</span></a><a class="idref" href="DOT.Definitions.Syntax.AbstractMachine.html#853ef4438aa18d93c7ce9a7ed5bb14bd"><span class="id" title="notation">;</span></a> <a class="idref" href="DOT.Safety.Preservation.html#Sigma"><span class="id" title="variable">Sigma</span></a>) <a class="idref" href="DOT.Safety.Preservation.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Definitions.OperationalSemantics.OperationalSemantics.html#5a6f9eabadac3f4f365369582d682367"><span class="id" title="notation">(</span></a><a class="idref" href="DOT.Definitions.Syntax.Terms.html#trm_asn"><span class="id" title="constructor">trm_asn</span></a> (<a class="idref" href="DOT.Definitions.Syntax.Vars.html#avar_f"><span class="id" title="constructor">avar_f</span></a> <a class="idref" href="DOT.Safety.Preservation.html#x"><span class="id" title="variable">x</span></a>) <a class="idref" href="DOT.Safety.Preservation.html#a"><span class="id" title="variable">a</span></a> (<a class="idref" href="DOT.Definitions.Syntax.Vars.html#avar_f"><span class="id" title="constructor">avar_f</span></a> <a class="idref" href="DOT.Safety.Preservation.html#y"><span class="id" title="variable">y</span></a>)<a class="idref" href="DOT.Definitions.Syntax.AbstractMachine.html#853ef4438aa18d93c7ce9a7ed5bb14bd"><span class="id" title="notation">;</span></a> <a class="idref" href="DOT.Safety.Preservation.html#s"><span class="id" title="variable">s</span></a><a class="idref" href="DOT.Definitions.Syntax.AbstractMachine.html#853ef4438aa18d93c7ce9a7ed5bb14bd"><span class="id" title="notation">;</span></a> <a class="idref" href="DOT.Safety.Preservation.html#Sigma"><span class="id" title="variable">Sigma</span></a><a class="idref" href="DOT.Definitions.OperationalSemantics.OperationalSemantics.html#5a6f9eabadac3f4f365369582d682367"><span class="id" title="notation">)</span></a> <a class="idref" href="DOT.Definitions.OperationalSemantics.OperationalSemantics.html#5a6f9eabadac3f4f365369582d682367"><span class="id" title="notation">↦</span></a> <a class="idref" href="DOT.Safety.Preservation.html#c'"><span class="id" title="variable">c'</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">binds</span> <a class="idref" href="DOT.Safety.Preservation.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="DOT.Definitions.Syntax.Types.html#committed"><span class="id" title="constructor">committed</span></a> <a class="idref" href="DOT.Safety.Preservation.html#Delta"><span class="id" title="variable">Delta</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">binds</span> <a class="idref" href="DOT.Safety.Preservation.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="DOT.Definitions.Syntax.Types.html#committed"><span class="id" title="constructor">committed</span></a> <a class="idref" href="DOT.Safety.Preservation.html#Delta"><span class="id" title="variable">Delta</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">exists</span> <span class="id" title="var">effs'</span><span class="id" title="notation">,</span> <a class="idref" href="DOT.Safety.ConfigTyping.html#ty_config"><span class="id" title="inductive">ty_config</span></a> <a class="idref" href="DOT.Safety.Preservation.html#Gamma"><span class="id" title="variable">Gamma</span></a> <a class="idref" href="DOT.Safety.Preservation.html#Delta"><span class="id" title="variable">Delta</span></a> <a class="idref" href="DOT.Safety.Preservation.html#95fdeea536fdcd18a2894301ecf05ec6"><span class="id" title="variable">ℰs</span></a> (<a class="idref" href="DOT.Safety.Preservation.html#effs'"><span class="id" title="variable">effs'</span></a> <span class="id" title="notation">::</span> <a class="idref" href="DOT.Safety.Preservation.html#effss"><span class="id" title="variable">effss</span></a>) <a class="idref" href="DOT.Safety.Preservation.html#c'"><span class="id" title="variable">c'</span></a> <a class="idref" href="DOT.Safety.Preservation.html#U"><span class="id" title="variable">U</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> 1; <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">inversion</span> 1; <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">Hbix</span> <span class="id" title="var">Hbiy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">H5</span> <span class="id" title="var">into</span> <span class="id" title="var">Hin</span>, <span class="id" title="var">H6</span> <span class="id" title="var">into</span> <span class="id" title="var">HinD</span>, <span class="id" title="var">H7</span> <span class="id" title="var">into</span> <span class="id" title="var">Hhc</span>, <span class="id" title="var">H8</span> <span class="id" title="var">into</span> <span class="id" title="var">Hfshs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">H12</span> <span class="id" title="var">into</span> <span class="id" title="var">Hts</span>, <span class="id" title="var">H13</span> <span class="id" title="var">into</span> <span class="id" title="var">Hty</span>, <span class="id" title="var">H16</span> <span class="id" title="var">into</span> <span class="id" title="var">Hef</span>, <span class="id" title="var">H17</span> <span class="id" title="var">into</span> <span class="id" title="var">Hec</span>, <span class="id" title="var">H11</span> <span class="id" title="var">into</span> <span class="id" title="var">Hhup</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="DOT.HeapEffInit.InitCorrespondence.html#free_sub_heaps_well_committed"><span class="id" title="lemma">free_sub_heaps_well_committed</span></a> <span class="id" title="var">Hfshs</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hwc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="DOT.HeapEffInit.InitCorrespondence.html#free_sub_heaps_write_committed_other"><span class="id" title="lemma">free_sub_heaps_write_committed_other</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Hhc</span> <span class="id" title="var">Hfshs</span> <span class="id" title="var">Hhup</span> <span class="id" title="var">Hbix</span> <span class="id" title="var">Hbiy</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hfshs'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="DOT.CanonicalForms.HeapUpdateCorrespondence.html#heap_update_inert"><span class="id" title="lemma">heap_update_inert</span></a> <span class="id" title="var">Hin</span> <span class="id" title="var">Hhc</span> <span class="id" title="var">Hty</span> <span class="id" title="var">Hhup</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="DOT.CanonicalForms.CanonicalForms.html#inert_assgn_typing"><span class="id" title="lemma">inert_assgn_typing</span></a> <span class="id" title="var">Hin</span> <span class="id" title="var">Hty</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">econstructor</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="DOT.HeapEffInit.InitCorrespondence.html#free_sub_heaps_eff_corr_update_committed"><span class="id" title="lemma">free_sub_heaps_eff_corr_update_committed</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inversions</span> <span class="id" title="var">Hef</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="preservation_write_well_pointed"><span class="id" title="lemma">preservation_write_well_pointed</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">Gamma</span> <span class="id" title="var">Delta</span> <span class="id" title="var">ℰ</span> <span class="id" title="var">ℰs</span> <span class="id" title="var">effs</span> <span class="id" title="var">effss</span> <span class="id" title="var">x</span> <span class="id" title="var">a</span> <span class="id" title="var">y</span> <span class="id" title="var">s</span> <span class="id" title="var">Sigma</span> <span class="id" title="var">c'</span> <span class="id" title="var">U</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Safety.ConfigTyping.html#ty_config"><span class="id" title="inductive">ty_config</span></a> <a class="idref" href="DOT.Safety.Preservation.html#Gamma"><span class="id" title="variable">Gamma</span></a> <a class="idref" href="DOT.Safety.Preservation.html#Delta"><span class="id" title="variable">Delta</span></a> (<a class="idref" href="DOT.Safety.Preservation.html#dc1b905d8ef0ab32d16a033ee43ce82f"><span class="id" title="variable">ℰ</span></a> <span class="id" title="notation">::</span> <a class="idref" href="DOT.Safety.Preservation.html#95fdeea536fdcd18a2894301ecf05ec6"><span class="id" title="variable">ℰs</span></a>) (<a class="idref" href="DOT.Safety.Preservation.html#effs"><span class="id" title="variable">effs</span></a> <span class="id" title="notation">::</span> <a class="idref" href="DOT.Safety.Preservation.html#effss"><span class="id" title="variable">effss</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="DOT.Definitions.Syntax.Terms.html#trm_asn"><span class="id" title="constructor">trm_asn</span></a> (<a class="idref" href="DOT.Definitions.Syntax.Vars.html#avar_f"><span class="id" title="constructor">avar_f</span></a> <a class="idref" href="DOT.Safety.Preservation.html#x"><span class="id" title="variable">x</span></a>) <a class="idref" href="DOT.Safety.Preservation.html#a"><span class="id" title="variable">a</span></a> (<a class="idref" href="DOT.Definitions.Syntax.Vars.html#avar_f"><span class="id" title="constructor">avar_f</span></a> <a class="idref" href="DOT.Safety.Preservation.html#y"><span class="id" title="variable">y</span></a>)<a class="idref" href="DOT.Definitions.Syntax.AbstractMachine.html#853ef4438aa18d93c7ce9a7ed5bb14bd"><span class="id" title="notation">;</span></a> <a class="idref" href="DOT.Safety.Preservation.html#s"><span class="id" title="variable">s</span></a><a class="idref" href="DOT.Definitions.Syntax.AbstractMachine.html#853ef4438aa18d93c7ce9a7ed5bb14bd"><span class="id" title="notation">;</span></a> <a class="idref" href="DOT.Safety.Preservation.html#Sigma"><span class="id" title="variable">Sigma</span></a>) <a class="idref" href="DOT.Safety.Preservation.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Definitions.OperationalSemantics.OperationalSemantics.html#5a6f9eabadac3f4f365369582d682367"><span class="id" title="notation">(</span></a><a class="idref" href="DOT.Definitions.Syntax.Terms.html#trm_asn"><span class="id" title="constructor">trm_asn</span></a> (<a class="idref" href="DOT.Definitions.Syntax.Vars.html#avar_f"><span class="id" title="constructor">avar_f</span></a> <a class="idref" href="DOT.Safety.Preservation.html#x"><span class="id" title="variable">x</span></a>) <a class="idref" href="DOT.Safety.Preservation.html#a"><span class="id" title="variable">a</span></a> (<a class="idref" href="DOT.Definitions.Syntax.Vars.html#avar_f"><span class="id" title="constructor">avar_f</span></a> <a class="idref" href="DOT.Safety.Preservation.html#y"><span class="id" title="variable">y</span></a>)<a class="idref" href="DOT.Definitions.Syntax.AbstractMachine.html#853ef4438aa18d93c7ce9a7ed5bb14bd"><span class="id" title="notation">;</span></a> <a class="idref" href="DOT.Safety.Preservation.html#s"><span class="id" title="variable">s</span></a><a class="idref" href="DOT.Definitions.Syntax.AbstractMachine.html#853ef4438aa18d93c7ce9a7ed5bb14bd"><span class="id" title="notation">;</span></a> <a class="idref" href="DOT.Safety.Preservation.html#Sigma"><span class="id" title="variable">Sigma</span></a><a class="idref" href="DOT.Definitions.OperationalSemantics.OperationalSemantics.html#5a6f9eabadac3f4f365369582d682367"><span class="id" title="notation">)</span></a> <a class="idref" href="DOT.Definitions.OperationalSemantics.OperationalSemantics.html#5a6f9eabadac3f4f365369582d682367"><span class="id" title="notation">↦</span></a> <a class="idref" href="DOT.Safety.Preservation.html#c'"><span class="id" title="variable">c'</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><a class="idref" href="DOT.Safety.Preservation.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">in</span> <span class="id" title="axiom">dom</span> <a class="idref" href="DOT.Safety.Preservation.html#dc1b905d8ef0ab32d16a033ee43ce82f"><span class="id" title="variable">ℰ</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Definitions.PointsTo.WellPointed.html#well_pointed"><span class="id" title="abbreviation">well_pointed</span></a> <a class="idref" href="DOT.Safety.Preservation.html#Delta"><span class="id" title="variable">Delta</span></a> <a class="idref" href="DOT.Safety.Preservation.html#dc1b905d8ef0ab32d16a033ee43ce82f"><span class="id" title="variable">ℰ</span></a> <a class="idref" href="DOT.Safety.Preservation.html#y"><span class="id" title="variable">y</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">exists</span> <span class="id" title="var">ℰ'</span> <span class="id" title="var">effs'</span><span class="id" title="notation">,</span> <a class="idref" href="DOT.Safety.ConfigTyping.html#ty_config"><span class="id" title="inductive">ty_config</span></a> <a class="idref" href="DOT.Safety.Preservation.html#Gamma"><span class="id" title="variable">Gamma</span></a> <a class="idref" href="DOT.Safety.Preservation.html#Delta"><span class="id" title="variable">Delta</span></a> (<a class="idref" href="DOT.Safety.Preservation.html#302f2f6e222c2d6676cbe448f64a4a41"><span class="id" title="variable">ℰ'</span></a> <span class="id" title="notation">::</span> <a class="idref" href="DOT.Safety.Preservation.html#95fdeea536fdcd18a2894301ecf05ec6"><span class="id" title="variable">ℰs</span></a>) (<a class="idref" href="DOT.Safety.Preservation.html#effs'"><span class="id" title="variable">effs'</span></a> <span class="id" title="notation">::</span> <a class="idref" href="DOT.Safety.Preservation.html#effss"><span class="id" title="variable">effss</span></a>) <a class="idref" href="DOT.Safety.Preservation.html#c'"><span class="id" title="variable">c'</span></a> <a class="idref" href="DOT.Safety.Preservation.html#U"><span class="id" title="variable">U</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> 1<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> [?<span class="id" title="var">Gamma</span> ?<span class="id" title="var">Delta</span> ?<span class="id" title="var">Sigma</span> ?<span class="id" title="var">ℰ</span> ?<span class="id" title="var">ℰs</span> ?<span class="id" title="var">s</span> ?<span class="id" title="var">t</span> ?<span class="id" title="var">T</span> ?<span class="id" title="var">i</span> ?<span class="id" title="var">U</span> ?<span class="id" title="var">effs'</span> ?<span class="id" title="var">effs</span> ?<span class="id" title="var">effss</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;?<span class="id" title="var">Hin</span> ?<span class="id" title="var">HinD</span> ?<span class="id" title="var">Hhc</span> ?<span class="id" title="var">Hfshs</span> ?<span class="id" title="var">Hts</span> ?<span class="id" title="var">Hty</span> ?<span class="id" title="var">Hef</span> ?<span class="id" title="var">Hit</span> ?<span class="id" title="var">Hecc</span>]; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> 1; <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">rename</span> <span class="id" title="var">H0</span> <span class="id" title="var">into</span> <span class="id" title="var">Hred</span>. <span class="id" title="tactic">rename</span> <span class="id" title="var">H7</span> <span class="id" title="var">into</span> <span class="id" title="var">Hhup</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">HinE</span> <span class="id" title="var">Hwp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="DOT.HeapEffInit.InitCorrespondence.html#free_sub_heaps_well_committed"><span class="id" title="lemma">free_sub_heaps_well_committed</span></a> <span class="id" title="var">Hfshs</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hwc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hfshs</span>; <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">rename</span> <span class="id" title="var">H6</span> <span class="id" title="var">into</span> <span class="id" title="var">Hfsh</span>, <span class="id" title="var">H7</span> <span class="id" title="var">into</span> <span class="id" title="var">Hfshs'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">H2</span> <span class="id" title="var">into</span> <span class="id" title="var">Hani</span>. <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="DOT.Lib.LibExtraEnv.html#dom_to_binds"><span class="id" title="lemma">dom_to_binds</span></a> <span class="id" title="var">HinE</span>) <span class="id" title="keyword">as</span> [?<span class="id" title="var">eff</span> <span class="id" title="var">HbiE</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#free_sub_heap_correspondence"><span class="id" title="lemma">free_sub_heap_correspondence</span></a> <span class="id" title="var">Hhc</span> <span class="id" title="var">Hfsh</span> <span class="id" title="var">Hhup</span> <span class="id" title="var">HbiE</span> <span class="id" title="var">Hwp</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> [<span class="id" title="var">ℰ'</span> [<span class="id" title="var">effs1</span> [<span class="id" title="var">Heup</span> [<span class="id" title="var">Her</span> ?<span class="id" title="var">H</span>]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="DOT.HeapEffInit.InitCorrespondence.html#free_sub_heaps_eff_corr_update"><span class="id" title="lemma">free_sub_heaps_eff_corr_update</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">effs0</span> <span class="id" title="var">Hfshs</span> <span class="id" title="var">Hef</span> <span class="id" title="var">HbiE</span> <span class="id" title="var">Heup</span> <span class="id" title="var">Her</span> <span class="id" title="var">Hecc</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">ℰ'</span>. <span class="id" title="tactic">exists</span> (<span class="id" title="constructor">nil</span> <span class="id" title="notation">++</span> <span class="id" title="var">effs0</span>)%<span class="id" title="var">list</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="DOT.CanonicalForms.CanonicalForms.html#inert_assgn_typing"><span class="id" title="lemma">inert_assgn_typing</span></a> <span class="id" title="var">Hin</span> <span class="id" title="var">Hty</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="DOT.CanonicalForms.HeapUpdateCorrespondence.html#heap_update_inert"><span class="id" title="lemma">heap_update_inert</span></a> <span class="id" title="var">Hin</span> <span class="id" title="var">Hhc</span> <span class="id" title="var">Hty</span> <span class="id" title="var">Hhup</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> <span class="id" title="var">Heup</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">HdeqE</span> <span class="id" title="var">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="DOT.HeapEffInit.InitCorrespondence.html#all_notin"><span class="id" title="definition">all_notin</span></a> (<span class="id" title="axiom">dom</span> <span class="id" title="var">ℰ'</span>) (<a class="idref" href="DOT.HeapEffInit.InitCorrespondence.html#list_dom_union"><span class="id" title="definition">list_dom_union</span></a> <span class="id" title="var">ℰs</span>)) <span class="id" title="tactic">by</span> (<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">HdeqE</span>; <span class="id" title="tactic">auto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="DOT.HeapEffInit.InitCorrespondence.html#all_notin_fresh"><span class="id" title="lemma">all_notin_fresh</span></a> <span class="id" title="var">_</span> <span class="id" title="var">HbiE</span> <span class="id" title="var">Hani</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hnil</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="var">Hfsh</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">HbiE</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">_</span> [?<span class="id" title="var">itm</span> [<span class="id" title="var">HbiS</span> <span class="id" title="var">Hfhi</span>]]].<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;x&nbsp;is&nbsp;an&nbsp;object&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="DOT.Definitions.Syntax.Terms.html#trm_asn"><span class="id" title="constructor">trm_asn</span></a> (<a class="idref" href="DOT.Definitions.Syntax.Vars.html#avar_f"><span class="id" title="constructor">avar_f</span></a> <span class="id" title="var">x</span>) <span class="id" title="var">a</span> (<a class="idref" href="DOT.Definitions.Syntax.Vars.html#avar_f"><span class="id" title="constructor">avar_f</span></a> <span class="id" title="var">y</span>)) <span class="id" title="keyword">as</span> <span class="id" title="var">trm</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Hty</span>; <span class="id" title="var">inversions</span> <span class="id" title="var">Heqtrm</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span>(<span class="id" title="tactic">solve</span>[<span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="DOT.Safety.StackTyping.html#ty_stack_sub"><span class="id" title="lemma">ty_stack_sub</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.CanonicalForms.CanonicalForms.html#inert_assgn_typing"><span class="id" title="lemma">inert_assgn_typing</span></a>]);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">IHHty</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">IHHty0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">G</span> <span class="id" title="var">into</span> <span class="id" title="var">Gamma</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">H5</span> <span class="id" title="var">into</span> <span class="id" title="var">Htyx</span>. <span class="id" title="tactic">rename</span> <span class="id" title="var">H6</span> <span class="id" title="var">into</span> <span class="id" title="var">Htyy</span>. <span class="id" title="tactic">rename</span> <span class="id" title="var">H2</span> <span class="id" title="var">into</span> <span class="id" title="var">Htyy'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">H0</span> <span class="id" title="var">into</span> <span class="id" title="var">Hfsh'</span>. <span class="id" title="tactic">rename</span> <span class="id" title="var">H1</span> <span class="id" title="var">into</span> <span class="id" title="var">Hecc'</span>. <span class="id" title="tactic">rename</span> <span class="id" title="var">H3</span> <span class="id" title="var">into</span> <span class="id" title="var">Hhc'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">H4</span> <span class="id" title="var">into</span> <span class="id" title="var">Hani'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="DOT.CanonicalForms.CanonicalForms.html#var_typ_rcd_to_binds"><span class="id" title="lemma">var_typ_rcd_to_binds</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htyx</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hbix</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hbix</span> <span class="id" title="keyword">as</span> [?<span class="id" title="var">S</span> [<span class="id" title="var">_</span> [<span class="id" title="var">Hbix</span> <span class="id" title="var">_</span>]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hhc</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">HGS</span> <span class="id" title="var">Hstr</span>].<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hfhi</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;Writing&nbsp;to&nbsp;field&nbsp;of&nbsp;object&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hbif</span> <span class="id" title="var">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="DOT.HeapEffInit.HeapCommit.html#well_committed_heap_update_free"><span class="id" title="lemma">well_committed_heap_update_free</span></a> <span class="id" title="var">Hwc</span> <span class="id" title="var">Hbif</span> <span class="id" title="var">Hhup</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hwc'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="DOT.HeapEffInit.InitCorrespondence.html#free_sub_heaps_write_other"><span class="id" title="lemma">free_sub_heaps_write_other</span></a> <span class="id" title="var">Hfshs'</span> <span class="id" title="var">Hhup</span> <span class="id" title="var">Hnil</span> <span class="id" title="var">Hwc'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="DOT.HeapEffInit.InitCorrespondence.html#free_sub_heaps"><span class="id" title="inductive">free_sub_heaps</span></a> <span class="id" title="var">Gamma</span> <span class="id" title="var">Delta</span> <span class="id" title="var">Sigma'</span> (<span class="id" title="var">ℰ'</span> <span class="id" title="notation">::</span> <span class="id" title="var">ℰs</span>)) <span class="id" title="tactic">by</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Gamma</span> <a class="idref" href="DOT.Initialization.InitVar.html#4d1df834ab8d3b9cee8638f84cba55ba"><span class="id" title="notation">⸴</span></a> <span class="id" title="var">Delta</span> <a class="idref" href="DOT.Initialization.InitVar.html#4d1df834ab8d3b9cee8638f84cba55ba"><span class="id" title="notation">⸴</span></a> <span class="id" title="axiom">dom</span> <span class="id" title="var">ℰ'</span> <a class="idref" href="DOT.Initialization.InitVar.html#4d1df834ab8d3b9cee8638f84cba55ba"><span class="id" title="notation">⊢</span></a><a class="idref" href="DOT.Initialization.InitVar.html#4d1df834ab8d3b9cee8638f84cba55ba"><span class="id" title="notation">i</span></a> <a class="idref" href="DOT.Definitions.Syntax.Terms.html#trm_var"><span class="id" title="constructor">trm_var</span></a> (<a class="idref" href="DOT.Definitions.Syntax.Vars.html#avar_f"><span class="id" title="constructor">avar_f</span></a> <span class="id" title="var">y</span>) <a class="idref" href="DOT.Initialization.InitVar.html#4d1df834ab8d3b9cee8638f84cba55ba"><span class="id" title="notation">∶</span></a> <span class="id" title="var">i</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">HdeqE</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hwp</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hwp</span> | <span class="id" title="var">Hwp</span>]; <span class="id" title="var">inversions</span> <span class="id" title="var">Hit</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inversions</span> <span class="id" title="var">H2</span>; <span class="id" title="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="DOT.Safety.StackTyping.html#ty_stack_eff_ctx_change"><span class="id" title="lemma">ty_stack_eff_ctx_change</span></a> <span class="id" title="var">Hts</span> <span class="id" title="var">HdeqE</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;Writing&nbsp;to&nbsp;field&nbsp;of&nbsp;a&nbsp;lambda&nbsp;is&nbsp;absurd&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">exfalso</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hstr</span> <span class="id" title="var">x</span> (<a class="idref" href="DOT.Lib.LibExtraEnv.html#binds_to_dom"><span class="id" title="lemma">binds_to_dom</span></a> <span class="id" title="var">Hbix</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hstr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">binds_eq</span>. <span class="id" title="var">binds_eq</span>. <span class="id" title="var">inversions</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">binds_eq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="preservation_writes"><span class="id" title="lemma">preservation_writes</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">Gamma</span> <span class="id" title="var">Delta</span> <span class="id" title="var">ℰs</span> <span class="id" title="var">effss</span> <span class="id" title="var">x</span> <span class="id" title="var">a</span> <span class="id" title="var">y</span> <span class="id" title="var">s</span> <span class="id" title="var">Sigma</span> <span class="id" title="var">c'</span> <span class="id" title="var">U</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Safety.ConfigTyping.html#ty_config"><span class="id" title="inductive">ty_config</span></a> <a class="idref" href="DOT.Safety.Preservation.html#Gamma"><span class="id" title="variable">Gamma</span></a> <a class="idref" href="DOT.Safety.Preservation.html#Delta"><span class="id" title="variable">Delta</span></a> <a class="idref" href="DOT.Safety.Preservation.html#95fdeea536fdcd18a2894301ecf05ec6"><span class="id" title="variable">ℰs</span></a> <a class="idref" href="DOT.Safety.Preservation.html#effss"><span class="id" title="variable">effss</span></a> (<a class="idref" href="DOT.Definitions.Syntax.Terms.html#trm_asn"><span class="id" title="constructor">trm_asn</span></a> (<a class="idref" href="DOT.Definitions.Syntax.Vars.html#avar_f"><span class="id" title="constructor">avar_f</span></a> <a class="idref" href="DOT.Safety.Preservation.html#x"><span class="id" title="variable">x</span></a>) <a class="idref" href="DOT.Safety.Preservation.html#a"><span class="id" title="variable">a</span></a> (<a class="idref" href="DOT.Definitions.Syntax.Vars.html#avar_f"><span class="id" title="constructor">avar_f</span></a> <a class="idref" href="DOT.Safety.Preservation.html#y"><span class="id" title="variable">y</span></a>)<a class="idref" href="DOT.Definitions.Syntax.AbstractMachine.html#853ef4438aa18d93c7ce9a7ed5bb14bd"><span class="id" title="notation">;</span></a> <a class="idref" href="DOT.Safety.Preservation.html#s"><span class="id" title="variable">s</span></a><a class="idref" href="DOT.Definitions.Syntax.AbstractMachine.html#853ef4438aa18d93c7ce9a7ed5bb14bd"><span class="id" title="notation">;</span></a> <a class="idref" href="DOT.Safety.Preservation.html#Sigma"><span class="id" title="variable">Sigma</span></a>) <a class="idref" href="DOT.Safety.Preservation.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Definitions.OperationalSemantics.OperationalSemantics.html#5a6f9eabadac3f4f365369582d682367"><span class="id" title="notation">(</span></a><a class="idref" href="DOT.Definitions.Syntax.Terms.html#trm_asn"><span class="id" title="constructor">trm_asn</span></a> (<a class="idref" href="DOT.Definitions.Syntax.Vars.html#avar_f"><span class="id" title="constructor">avar_f</span></a> <a class="idref" href="DOT.Safety.Preservation.html#x"><span class="id" title="variable">x</span></a>) <a class="idref" href="DOT.Safety.Preservation.html#a"><span class="id" title="variable">a</span></a> (<a class="idref" href="DOT.Definitions.Syntax.Vars.html#avar_f"><span class="id" title="constructor">avar_f</span></a> <a class="idref" href="DOT.Safety.Preservation.html#y"><span class="id" title="variable">y</span></a>)<a class="idref" href="DOT.Definitions.Syntax.AbstractMachine.html#853ef4438aa18d93c7ce9a7ed5bb14bd"><span class="id" title="notation">;</span></a> <a class="idref" href="DOT.Safety.Preservation.html#s"><span class="id" title="variable">s</span></a><a class="idref" href="DOT.Definitions.Syntax.AbstractMachine.html#853ef4438aa18d93c7ce9a7ed5bb14bd"><span class="id" title="notation">;</span></a> <a class="idref" href="DOT.Safety.Preservation.html#Sigma"><span class="id" title="variable">Sigma</span></a><a class="idref" href="DOT.Definitions.OperationalSemantics.OperationalSemantics.html#5a6f9eabadac3f4f365369582d682367"><span class="id" title="notation">)</span></a> <a class="idref" href="DOT.Definitions.OperationalSemantics.OperationalSemantics.html#5a6f9eabadac3f4f365369582d682367"><span class="id" title="notation">↦</span></a> <a class="idref" href="DOT.Safety.Preservation.html#c'"><span class="id" title="variable">c'</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">exists</span> <span class="id" title="var">ℰs</span> <span class="id" title="var">effss'</span><span class="id" title="notation">,</span> <a class="idref" href="DOT.Safety.ConfigTyping.html#ty_config"><span class="id" title="inductive">ty_config</span></a> <a class="idref" href="DOT.Safety.Preservation.html#Gamma"><span class="id" title="variable">Gamma</span></a> <a class="idref" href="DOT.Safety.Preservation.html#Delta"><span class="id" title="variable">Delta</span></a> <a class="idref" href="DOT.Safety.Preservation.html#95fdeea536fdcd18a2894301ecf05ec6"><span class="id" title="variable">ℰs</span></a> <a class="idref" href="DOT.Safety.Preservation.html#effss'"><span class="id" title="variable">effss'</span></a> <a class="idref" href="DOT.Safety.Preservation.html#c'"><span class="id" title="variable">c'</span></a> <a class="idref" href="DOT.Safety.Preservation.html#U"><span class="id" title="variable">U</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> 1; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">intro</span> <span class="id" title="var">Hred</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">H</span> <span class="id" title="var">into</span> <span class="id" title="var">Htc</span>, <span class="id" title="var">H3</span> <span class="id" title="var">into</span> <span class="id" title="var">Hin</span>, <span class="id" title="var">H4</span> <span class="id" title="var">into</span> <span class="id" title="var">HinD</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inversions</span> <span class="id" title="var">H15</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;Writing&nbsp;inside&nbsp;committed&nbsp;context&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inversions</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">H4</span> <span class="id" title="var">into</span> <span class="id" title="var">Hinx</span>, <span class="id" title="var">H10</span> <span class="id" title="var">into</span> <span class="id" title="var">Hiny</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inversions</span> <span class="id" title="var">Hiny</span>. <span class="id" title="tactic">rename</span> <span class="id" title="var">H2</span> <span class="id" title="var">into</span> <span class="id" title="var">Hcommy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inversions</span> <span class="id" title="var">Hinx</span>. <span class="id" title="tactic">rename</span> <span class="id" title="var">H2</span> <span class="id" title="var">into</span> <span class="id" title="var">Hcommx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="DOT.Safety.Preservation.html#preservation_write_to_committed"><span class="id" title="lemma">preservation_write_to_committed</span></a> <span class="id" title="var">Htc</span> <span class="id" title="var">Hred</span> <span class="id" title="var">Hcommx</span> <span class="id" title="var">Hcommy</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> [<span class="id" title="var">eff'</span> <span class="id" title="var">Htc'</span>]; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;Writing&nbsp;a&nbsp;Committed&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">H10</span> <span class="id" title="var">into</span> <span class="id" title="var">Hinx</span>, <span class="id" title="var">H11</span> <span class="id" title="var">into</span> <span class="id" title="var">Hiny</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="DOT.Initialization.InitTypingLemmas.html#init_typing_committed_inv"><span class="id" title="lemma">init_typing_committed_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hiny</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">Hiny</span> <span class="id" title="var">into</span> <span class="id" title="var">Hcommy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="DOT.Safety.Preservation.html#inert_init_var_cases"><span class="id" title="lemma">inert_init_var_cases</span></a> <span class="id" title="var">HinD</span> <span class="id" title="var">Hinx</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> [<span class="id" title="var">Hcommx</span> | [<span class="id" title="var">Hfree</span> [?<span class="id" title="var">effs</span> <span class="id" title="var">Heffs</span>]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="DOT.Safety.Preservation.html#preservation_write_to_committed"><span class="id" title="lemma">preservation_write_to_committed</span></a> <span class="id" title="var">Htc</span> <span class="id" title="var">Hred</span> <span class="id" title="var">Hcommx</span> <span class="id" title="var">Hcommy</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> [<span class="id" title="var">eff'</span> <span class="id" title="var">Htc'</span>]; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">assert</span> (<span class="id" title="var">Hwp</span>: <a class="idref" href="DOT.Definitions.PointsTo.WellPointed.html#well_pointed"><span class="id" title="abbreviation">well_pointed</span></a> <span class="id" title="var">Delta</span> <span class="id" title="var">ℰ</span> <span class="id" title="var">y</span>) <span class="id" title="tactic">by</span> <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="DOT.Lib.LibExtraEnv.html#binds_to_dom"><span class="id" title="lemma">binds_to_dom</span></a> <span class="id" title="var">Heffs</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">HdomEx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="DOT.Safety.Preservation.html#preservation_write_well_pointed"><span class="id" title="lemma">preservation_write_well_pointed</span></a> <span class="id" title="var">Htc</span> <span class="id" title="var">Hred</span> <span class="id" title="var">HdomEx</span> <span class="id" title="var">Hwp</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> [? [? ?]]; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;Writing&nbsp;a&nbsp;free&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">H10</span> <span class="id" title="var">into</span> <span class="id" title="var">Hinx</span>, <span class="id" title="var">H11</span> <span class="id" title="var">into</span> <span class="id" title="var">Hiny</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hwp</span>: <a class="idref" href="DOT.Definitions.PointsTo.WellPointed.html#well_pointed"><span class="id" title="abbreviation">well_pointed</span></a> <span class="id" title="var">Delta</span> <span class="id" title="var">ℰ</span> <span class="id" title="var">y</span>) <span class="id" title="tactic">by</span> <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="DOT.Safety.Preservation.html#inert_init_well_pointed"><span class="id" title="lemma">inert_init_well_pointed</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inversions</span> <span class="id" title="var">Hinx</span>. <span class="id" title="var">inversions</span> <span class="id" title="var">H3</span>. <span class="id" title="tactic">rename</span> <span class="id" title="var">H</span> <span class="id" title="var">into</span> <span class="id" title="var">HdomEx</span>. <span class="id" title="tactic">rename</span> <span class="id" title="var">H0</span> <span class="id" title="var">into</span> <span class="id" title="var">HbixD</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="DOT.Safety.Preservation.html#preservation_write_well_pointed"><span class="id" title="lemma">preservation_write_well_pointed</span></a> <span class="id" title="var">Htc</span> <span class="id" title="var">Hred</span> <span class="id" title="var">HdomEx</span> <span class="id" title="var">Hwp</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> [? [? ?]]; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="DOT.Safety.Preservation.html#Write"><span class="id" title="section">Write</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="preservation_return"><span class="id" title="lemma">preservation_return</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">Gamma</span> <span class="id" title="var">Delta</span> <span class="id" title="var">ℰs</span> <span class="id" title="var">effss</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">s</span> <span class="id" title="var">Sigma</span> <span class="id" title="var">c'</span> <span class="id" title="var">U</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Safety.ConfigTyping.html#ty_config"><span class="id" title="inductive">ty_config</span></a> <a class="idref" href="DOT.Safety.Preservation.html#Gamma"><span class="id" title="variable">Gamma</span></a> <a class="idref" href="DOT.Safety.Preservation.html#Delta"><span class="id" title="variable">Delta</span></a> <a class="idref" href="DOT.Safety.Preservation.html#95fdeea536fdcd18a2894301ecf05ec6"><span class="id" title="variable">ℰs</span></a> <a class="idref" href="DOT.Safety.Preservation.html#effss"><span class="id" title="variable">effss</span></a> (<a class="idref" href="DOT.Definitions.Syntax.Terms.html#trm_var"><span class="id" title="constructor">trm_var</span></a> (<a class="idref" href="DOT.Definitions.Syntax.Vars.html#avar_f"><span class="id" title="constructor">avar_f</span></a> <a class="idref" href="DOT.Safety.Preservation.html#x"><span class="id" title="variable">x</span></a>)<a class="idref" href="DOT.Definitions.Syntax.AbstractMachine.html#853ef4438aa18d93c7ce9a7ed5bb14bd"><span class="id" title="notation">;</span></a> (<a class="idref" href="DOT.Definitions.Syntax.AbstractMachine.html#frame_ret"><span class="id" title="constructor">frame_ret</span></a> <a class="idref" href="DOT.Safety.Preservation.html#y"><span class="id" title="variable">y</span></a> <span class="id" title="notation">::</span> <a class="idref" href="DOT.Safety.Preservation.html#s"><span class="id" title="variable">s</span></a>)%<span class="id" title="var">list</span><a class="idref" href="DOT.Definitions.Syntax.AbstractMachine.html#853ef4438aa18d93c7ce9a7ed5bb14bd"><span class="id" title="notation">;</span></a> <a class="idref" href="DOT.Safety.Preservation.html#Sigma"><span class="id" title="variable">Sigma</span></a>) <a class="idref" href="DOT.Safety.Preservation.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Definitions.OperationalSemantics.OperationalSemantics.html#5a6f9eabadac3f4f365369582d682367"><span class="id" title="notation">(</span></a><a class="idref" href="DOT.Definitions.Syntax.Terms.html#trm_var"><span class="id" title="constructor">trm_var</span></a> (<a class="idref" href="DOT.Definitions.Syntax.Vars.html#avar_f"><span class="id" title="constructor">avar_f</span></a> <a class="idref" href="DOT.Safety.Preservation.html#x"><span class="id" title="variable">x</span></a>)<a class="idref" href="DOT.Definitions.Syntax.AbstractMachine.html#853ef4438aa18d93c7ce9a7ed5bb14bd"><span class="id" title="notation">;</span></a> (<a class="idref" href="DOT.Definitions.Syntax.AbstractMachine.html#frame_ret"><span class="id" title="constructor">frame_ret</span></a> <a class="idref" href="DOT.Safety.Preservation.html#y"><span class="id" title="variable">y</span></a> <span class="id" title="notation">::</span> <a class="idref" href="DOT.Safety.Preservation.html#s"><span class="id" title="variable">s</span></a>)%<span class="id" title="var">list</span><a class="idref" href="DOT.Definitions.Syntax.AbstractMachine.html#853ef4438aa18d93c7ce9a7ed5bb14bd"><span class="id" title="notation">;</span></a> <a class="idref" href="DOT.Safety.Preservation.html#Sigma"><span class="id" title="variable">Sigma</span></a><a class="idref" href="DOT.Definitions.OperationalSemantics.OperationalSemantics.html#5a6f9eabadac3f4f365369582d682367"><span class="id" title="notation">)</span></a> <a class="idref" href="DOT.Definitions.OperationalSemantics.OperationalSemantics.html#5a6f9eabadac3f4f365369582d682367"><span class="id" title="notation">↦</span></a> <a class="idref" href="DOT.Safety.Preservation.html#c'"><span class="id" title="variable">c'</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">exists</span> <span class="id" title="var">Delta'</span> <span class="id" title="var">ℰs</span> <span class="id" title="var">effss'</span><span class="id" title="notation">,</span> <a class="idref" href="DOT.Safety.ConfigTyping.html#ty_config"><span class="id" title="inductive">ty_config</span></a> <a class="idref" href="DOT.Safety.Preservation.html#Gamma"><span class="id" title="variable">Gamma</span></a> <a class="idref" href="DOT.Safety.Preservation.html#Delta'"><span class="id" title="variable">Delta'</span></a> <a class="idref" href="DOT.Safety.Preservation.html#95fdeea536fdcd18a2894301ecf05ec6"><span class="id" title="variable">ℰs</span></a> <a class="idref" href="DOT.Safety.Preservation.html#effss'"><span class="id" title="variable">effss'</span></a> <a class="idref" href="DOT.Safety.Preservation.html#c'"><span class="id" title="variable">c'</span></a> <a class="idref" href="DOT.Safety.Preservation.html#U"><span class="id" title="variable">U</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> 1; <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">rename</span> <span class="id" title="var">H3</span> <span class="id" title="var">into</span> <span class="id" title="var">Hin</span>, <span class="id" title="var">H4</span> <span class="id" title="var">into</span> <span class="id" title="var">HinD</span>, <span class="id" title="var">H5</span> <span class="id" title="var">into</span> <span class="id" title="var">Hhc</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">H6</span> <span class="id" title="var">into</span> <span class="id" title="var">Hfshs</span>, <span class="id" title="var">H7</span> <span class="id" title="var">into</span> <span class="id" title="var">Hts</span>, <span class="id" title="var">H8</span> <span class="id" title="var">into</span> <span class="id" title="var">Hty</span>, <span class="id" title="var">H13</span> <span class="id" title="var">into</span> <span class="id" title="var">Hef</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">H15</span> <span class="id" title="var">into</span> <span class="id" title="var">Hit</span>, <span class="id" title="var">H16</span> <span class="id" title="var">into</span> <span class="id" title="var">Hecc</span>. <span class="id" title="tactic">inversion</span> 1; <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">rename</span> <span class="id" title="var">H0</span> <span class="id" title="var">into</span> <span class="id" title="var">Hred</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hef</span>; <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hts</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">H11</span> <span class="id" title="var">into</span> <span class="id" title="var">Hts'</span>, <span class="id" title="var">H12</span> <span class="id" title="var">into</span> <span class="id" title="var">Htyy</span>, <span class="id" title="var">H13</span> <span class="id" title="var">into</span> <span class="id" title="var">Hiy</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hecc</span>; <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">rename</span> <span class="id" title="var">H3</span> <span class="id" title="var">into</span> <span class="id" title="var">Hecc'</span>, <span class="id" title="var">H5</span> <span class="id" title="var">into</span> <span class="id" title="var">Hecco</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hfshs</span>; <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">rename</span> <span class="id" title="var">H2</span> <span class="id" title="var">into</span> <span class="id" title="var">Hani</span>, <span class="id" title="var">H6</span> <span class="id" title="var">into</span> <span class="id" title="var">Hfsh</span>, <span class="id" title="var">H7</span> <span class="id" title="var">into</span> <span class="id" title="var">Hfshs'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="DOT.HeapEffInit.InitCorrespondence.html#committed_delta_exists"><span class="id" title="lemma">committed_delta_exists</span></a> (<a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#free_sub_heap_effs_dom_inits'"><span class="id" title="lemma">free_sub_heap_effs_dom_inits'</span></a> <span class="id" title="var">Hfsh</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> [<span class="id" title="var">Delta'</span> [<span class="id" title="var">Hdeq</span> [<span class="id" title="var">Hcomm</span> <span class="id" title="var">Hkits</span>]]].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hef'</span>: <a class="idref" href="DOT.Definitions.Effects.Effects.html#f9b9983d535c0ccc3df7a3ef7253a269"><span class="id" title="notation">⊢</span></a><a class="idref" href="DOT.Definitions.Effects.Effects.html#f9b9983d535c0ccc3df7a3ef7253a269"><span class="id" title="notation">e</span></a> <a class="idref" href="DOT.Definitions.Syntax.Terms.html#trm_var"><span class="id" title="constructor">trm_var</span></a> (<a class="idref" href="DOT.Definitions.Syntax.Vars.html#avar_f"><span class="id" title="constructor">avar_f</span></a> <span class="id" title="var">y</span>) <a class="idref" href="DOT.Definitions.Effects.Effects.html#f9b9983d535c0ccc3df7a3ef7253a269"><span class="id" title="notation">∶</span></a> <span class="id" title="constructor">nil</span>) <span class="id" title="tactic">by</span> <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">Delta'</span> <span class="id" title="var">ℰs0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="DOT.HeapEffInit.InitCorrespondence.html#committed_delta_is_more_committed"><span class="id" title="lemma">committed_delta_is_more_committed</span></a> <span class="id" title="var">Hcomm</span> <span class="id" title="var">Hkits</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hmc</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="DOT.HeapEffInit.InitCorrespondence.html#special_dom_keep"><span class="id" title="lemma">special_dom_keep</span></a> <span class="id" title="var">_</span> <span class="id" title="var">Hani</span> <span class="id" title="var">Hkits</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hkits'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="DOT.Safety.StackTyping.html#ty_stack_init_ctx_change"><span class="id" title="lemma">ty_stack_init_ctx_change</span></a> <span class="id" title="var">Hts'</span> <span class="id" title="var">Hmc</span> <span class="id" title="var">Hkits'</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="DOT.HeapEffInit.InitCorrespondence.html#committed_delta_is_inert"><span class="id" title="lemma">committed_delta_is_inert</span></a> <span class="id" title="var">HinD</span> <span class="id" title="var">Hdeq</span> <span class="id" title="var">Hcomm</span> <span class="id" title="var">Hkits</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">HinD'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="DOT.Safety.StackTyping.html#ty_stack_effs_inv"><span class="id" title="lemma">ty_stack_effs_inv</span></a> <span class="id" title="var">Hts'</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">effs'</span> [<span class="id" title="var">effss'</span> <span class="id" title="var">Heqefs</span>]]; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="DOT.Safety.StackTyping.html#ty_stack_eff_ctxs_inv"><span class="id" title="lemma">ty_stack_eff_ctxs_inv</span></a> <span class="id" title="var">Hts'</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">ℰ'</span> [<span class="id" title="var">ℰs'</span> <span class="id" title="var">Heqℰs</span>]]; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="DOT.HeapEffInit.InitCorrespondence.html#free_sub_heaps_well_committed"><span class="id" title="lemma">free_sub_heaps_well_committed</span></a> <span class="id" title="var">Hfshs</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hwc</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="DOT.HeapEffInit.InitCorrespondence.html#empty_eff_corr_delta_well_commited"><span class="id" title="lemma">empty_eff_corr_delta_well_commited</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Hwc</span> <span class="id" title="var">Hfsh</span> <span class="id" title="var">Hecco</span> <span class="id" title="var">Hdeq</span> <span class="id" title="var">Hcomm</span> <span class="id" title="var">Hkits</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hwc'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="DOT.HeapEffInit.InitCorrespondence.html#free_sub_heaps_commit_other"><span class="id" title="lemma">free_sub_heaps_commit_other</span></a> <span class="id" title="var">Hfshs'</span> <span class="id" title="var">Hkits'</span> <span class="id" title="var">Hmc</span> <span class="id" title="var">Hwc'</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="notation">(</span><span class="id" title="constructor">nil</span> <span class="id" title="notation">++</span> <span class="id" title="var">effs'</span><span class="id" title="notation">)</span> <span class="id" title="notation">::</span> <span class="id" title="var">effss'</span>)%<span class="id" title="var">list</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span> 2.<br/>
&nbsp;&nbsp;<span class="id" title="var">inversions</span> <span class="id" title="var">Hiy</span>. <span class="id" title="var">inversions</span> <span class="id" title="var">H6</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Hcomm</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a name="PreservationApp"><span class="id" title="section">PreservationApp</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="preservation_app"><span class="id" title="lemma">preservation_app</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">Gamma</span> <span class="id" title="var">Delta</span> <span class="id" title="var">ℰs</span> <span class="id" title="var">effss</span> <span class="id" title="var">f</span> <span class="id" title="var">x</span> <span class="id" title="var">s</span> <span class="id" title="var">Sigma</span> <span class="id" title="var">c'</span> <span class="id" title="var">U</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Safety.ConfigTyping.html#ty_config"><span class="id" title="inductive">ty_config</span></a> <a class="idref" href="DOT.Safety.Preservation.html#Gamma"><span class="id" title="variable">Gamma</span></a> <a class="idref" href="DOT.Safety.Preservation.html#Delta"><span class="id" title="variable">Delta</span></a> <a class="idref" href="DOT.Safety.Preservation.html#95fdeea536fdcd18a2894301ecf05ec6"><span class="id" title="variable">ℰs</span></a> <a class="idref" href="DOT.Safety.Preservation.html#effss"><span class="id" title="variable">effss</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="DOT.Definitions.Syntax.Terms.html#trm_app"><span class="id" title="constructor">trm_app</span></a> (<a class="idref" href="DOT.Definitions.Syntax.Vars.html#avar_f"><span class="id" title="constructor">avar_f</span></a> <a class="idref" href="DOT.Safety.Preservation.html#f"><span class="id" title="variable">f</span></a>) (<a class="idref" href="DOT.Definitions.Syntax.Vars.html#avar_f"><span class="id" title="constructor">avar_f</span></a> <a class="idref" href="DOT.Safety.Preservation.html#x"><span class="id" title="variable">x</span></a>)<a class="idref" href="DOT.Definitions.Syntax.AbstractMachine.html#853ef4438aa18d93c7ce9a7ed5bb14bd"><span class="id" title="notation">;</span></a> <a class="idref" href="DOT.Safety.Preservation.html#s"><span class="id" title="variable">s</span></a><a class="idref" href="DOT.Definitions.Syntax.AbstractMachine.html#853ef4438aa18d93c7ce9a7ed5bb14bd"><span class="id" title="notation">;</span></a> <a class="idref" href="DOT.Safety.Preservation.html#Sigma"><span class="id" title="variable">Sigma</span></a>) <a class="idref" href="DOT.Safety.Preservation.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Definitions.OperationalSemantics.OperationalSemantics.html#5a6f9eabadac3f4f365369582d682367"><span class="id" title="notation">(</span></a><a class="idref" href="DOT.Definitions.Syntax.Terms.html#trm_app"><span class="id" title="constructor">trm_app</span></a> (<a class="idref" href="DOT.Definitions.Syntax.Vars.html#avar_f"><span class="id" title="constructor">avar_f</span></a> <a class="idref" href="DOT.Safety.Preservation.html#f"><span class="id" title="variable">f</span></a>) (<a class="idref" href="DOT.Definitions.Syntax.Vars.html#avar_f"><span class="id" title="constructor">avar_f</span></a> <a class="idref" href="DOT.Safety.Preservation.html#x"><span class="id" title="variable">x</span></a>)<a class="idref" href="DOT.Definitions.Syntax.AbstractMachine.html#853ef4438aa18d93c7ce9a7ed5bb14bd"><span class="id" title="notation">;</span></a> <a class="idref" href="DOT.Safety.Preservation.html#s"><span class="id" title="variable">s</span></a><a class="idref" href="DOT.Definitions.Syntax.AbstractMachine.html#853ef4438aa18d93c7ce9a7ed5bb14bd"><span class="id" title="notation">;</span></a> <a class="idref" href="DOT.Safety.Preservation.html#Sigma"><span class="id" title="variable">Sigma</span></a><a class="idref" href="DOT.Definitions.OperationalSemantics.OperationalSemantics.html#5a6f9eabadac3f4f365369582d682367"><span class="id" title="notation">)</span></a> <a class="idref" href="DOT.Definitions.OperationalSemantics.OperationalSemantics.html#5a6f9eabadac3f4f365369582d682367"><span class="id" title="notation">↦</span></a> <a class="idref" href="DOT.Safety.Preservation.html#c'"><span class="id" title="variable">c'</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Safety.ConfigTyping.html#ty_config"><span class="id" title="inductive">ty_config</span></a> <a class="idref" href="DOT.Safety.Preservation.html#Gamma"><span class="id" title="variable">Gamma</span></a> <a class="idref" href="DOT.Safety.Preservation.html#Delta"><span class="id" title="variable">Delta</span></a> <a class="idref" href="DOT.Safety.Preservation.html#95fdeea536fdcd18a2894301ecf05ec6"><span class="id" title="variable">ℰs</span></a> <a class="idref" href="DOT.Safety.Preservation.html#effss"><span class="id" title="variable">effss</span></a> <a class="idref" href="DOT.Safety.Preservation.html#c'"><span class="id" title="variable">c'</span></a> <a class="idref" href="DOT.Safety.Preservation.html#U"><span class="id" title="variable">U</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">with</span> <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> 1<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> [?<span class="id" title="var">Gamma</span> ?<span class="id" title="var">Delta</span> ?<span class="id" title="var">Sigma</span> ?<span class="id" title="var">ℰ</span> ?<span class="id" title="var">ℰs</span> ?<span class="id" title="var">s</span> ?<span class="id" title="var">t</span> ?<span class="id" title="var">T</span> ?<span class="id" title="var">i</span> ?<span class="id" title="var">U</span> ?<span class="id" title="var">effs'</span> ?<span class="id" title="var">effs</span> ?<span class="id" title="var">effss</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;?<span class="id" title="var">Hin</span> ?<span class="id" title="var">HinD</span> ?<span class="id" title="var">Hhc</span> ?<span class="id" title="var">Hfshs</span> ?<span class="id" title="var">Hts</span> ?<span class="id" title="var">Hty</span> ?<span class="id" title="var">Hef</span> ?<span class="id" title="var">Hit</span> ?<span class="id" title="var">Hecc</span>]; <span class="id" title="tactic">subst</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Invert&nbsp;reduction&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> 1; <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">rename</span> <span class="id" title="var">H0</span> <span class="id" title="var">into</span> <span class="id" title="var">Hred</span>. <span class="id" title="tactic">rename</span> <span class="id" title="var">H6</span> <span class="id" title="var">into</span> <span class="id" title="var">Hbinf</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="DOT.Definitions.Syntax.Terms.html#trm_app"><span class="id" title="constructor">trm_app</span></a> (<a class="idref" href="DOT.Definitions.Syntax.Vars.html#avar_f"><span class="id" title="constructor">avar_f</span></a> <span class="id" title="var">f</span>) (<a class="idref" href="DOT.Definitions.Syntax.Vars.html#avar_f"><span class="id" title="constructor">avar_f</span></a> <span class="id" title="var">x</span>)) <span class="id" title="keyword">as</span> <span class="id" title="var">trm</span> <span class="id" title="var">eqn</span>:<span class="id" title="var">Heqtrm</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Hty</span>; <span class="id" title="var">inversions</span> <span class="id" title="var">Heqtrm</span>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="DOT.Safety.StackTyping.html#ty_stack_sub"><span class="id" title="lemma">ty_stack_sub</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">IHHty</span> <span class="id" title="var">IHHty0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">H0</span> <span class="id" title="var">into</span> <span class="id" title="var">Hftyp</span>. <span class="id" title="tactic">rename</span> <span class="id" title="var">H1</span> <span class="id" title="var">into</span> <span class="id" title="var">Hxtyp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="DOT.CanonicalForms.CanonicalForms.html#canonical_forms_fun"><span class="id" title="lemma">canonical_forms_fun</span></a> <span class="id" title="var">Hin</span> <span class="id" title="var">Hhc</span> <span class="id" title="var">Hftyp</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> [<span class="id" title="var">L</span> [<span class="id" title="var">T'</span> [<span class="id" title="var">t'</span> [<span class="id" title="var">Hbinf'</span> [<span class="id" title="var">Hsub</span> <span class="id" title="var">Htyop</span>]]]]]; <span class="id" title="var">binds_eq</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">econstructor</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;Function&nbsp;body&nbsp;well-typed&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="DOT.Definitions.TypingClasses.SubstitutionClass.html#renaming_fun_app"><span class="id" title="lemma">renaming_fun_app</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;Function&nbsp;body&nbsp;effects&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hef</span>; <span class="id" title="tactic">subst</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;Function&nbsp;body&nbsp;init&nbsp;type&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="DOT.HeapEffInit.InitCorrespondence.html#free_sub_heaps_well_committed"><span class="id" title="lemma">free_sub_heaps_well_committed</span></a> <span class="id" title="var">Hfshs</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hwc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hwc</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">HGD</span> [<span class="id" title="var">HDS</span> <span class="id" title="var">Hwc</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inversions</span> <span class="id" title="var">Hit</span>. <span class="id" title="tactic">econstructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">hnf</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hhc</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H0</span>; <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">rename</span> <span class="id" title="var">H0</span> <span class="id" title="var">into</span> <span class="id" title="var">Happ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">H5</span> <span class="id" title="var">into</span> <span class="id" title="var">Hcomf</span>. <span class="id" title="tactic">rename</span> <span class="id" title="var">H6</span> <span class="id" title="var">into</span> <span class="id" title="var">Hcomx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hcomf</span>; <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">rename</span> <span class="id" title="var">H3</span> <span class="id" title="var">into</span> <span class="id" title="var">HbinfG</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hwc</span> <span class="id" title="var">f</span> (<a class="idref" href="DOT.Definitions.Syntax.Items.html#item_lit"><span class="id" title="constructor">item_lit</span></a> (<a class="idref" href="DOT.Definitions.Syntax.Terms.html#lit_fun"><span class="id" title="constructor">lit_fun</span></a> <span class="id" title="var">T'</span> <span class="id" title="var">t'</span>)) <span class="id" title="var">HbinfG</span> <span class="id" title="var">Hbinf</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inversions</span> <span class="id" title="var">Hwc</span>. <span class="id" title="tactic">rename</span> <span class="id" title="var">H3</span> <span class="id" title="var">into</span> <span class="id" title="var">Hwc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inversions</span> <span class="id" title="var">Hwc</span>. <span class="id" title="tactic">rename</span> <span class="id" title="var">H3</span> <span class="id" title="var">into</span> <span class="id" title="var">Hop</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="DOT.Initialization.InitRenaming.html#renaming_init_fun_app_commit"><span class="id" title="lemma">renaming_init_fun_app_commit</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">L</span>:=<span class="id" title="var">L0</span>) (<span class="id" title="var">T</span>:=<span class="id" title="var">T'</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="DOT.Safety.Preservation.html#PreservationApp"><span class="id" title="section">PreservationApp</span></a>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a name="PreservationLet"><span class="id" title="section">PreservationLet</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Allocating&nbsp;free&nbsp;literals.&nbsp;Corresponds&nbsp;to&nbsp;Lemma&nbsp;6.3&nbsp;in&nbsp;the&nbsp;free&nbsp;lambdas<br/>
&nbsp;&nbsp;&nbsp;extension&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="free_sub_heaps_lit_push"><span class="id" title="lemma">free_sub_heaps_lit_push</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">Gamma</span> <span class="id" title="var">Delta</span> <span class="id" title="var">Sigma</span> <span class="id" title="var">ℰ</span> <span class="id" title="var">ℰs</span> <span class="id" title="var">x</span> <span class="id" title="var">T</span> <span class="id" title="var">l</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.HeapEffInit.InitCorrespondence.html#free_sub_heaps"><span class="id" title="inductive">free_sub_heaps</span></a> <a class="idref" href="DOT.Safety.Preservation.html#Gamma"><span class="id" title="variable">Gamma</span></a> <a class="idref" href="DOT.Safety.Preservation.html#Delta"><span class="id" title="variable">Delta</span></a> <a class="idref" href="DOT.Safety.Preservation.html#Sigma"><span class="id" title="variable">Sigma</span></a> (<a class="idref" href="DOT.Safety.Preservation.html#dc1b905d8ef0ab32d16a033ee43ce82f"><span class="id" title="variable">ℰ</span></a> <span class="id" title="notation">::</span> <a class="idref" href="DOT.Safety.Preservation.html#95fdeea536fdcd18a2894301ecf05ec6"><span class="id" title="variable">ℰs</span></a>) <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Safety.Preservation.html#Gamma"><span class="id" title="variable">Gamma</span></a> <a class="idref" href="DOT.Initialization.InitVar.html#d417686deb0be68240eed0edb433ed87"><span class="id" title="notation">⸴</span></a> <a class="idref" href="DOT.Lib.LibExtraEnv.html#subst_env_fset_vars"><span class="id" title="definition">subst_env_fset_vars</span></a> <a class="idref" href="DOT.Safety.Preservation.html#Delta"><span class="id" title="variable">Delta</span></a> (<span class="id" title="axiom">dom</span> <a class="idref" href="DOT.Safety.Preservation.html#dc1b905d8ef0ab32d16a033ee43ce82f"><span class="id" title="variable">ℰ</span></a>) <a class="idref" href="DOT.Definitions.Syntax.Types.html#committed"><span class="id" title="constructor">committed</span></a> <a class="idref" href="DOT.Initialization.InitVar.html#d417686deb0be68240eed0edb433ed87"><span class="id" title="notation">⊢</span></a><a class="idref" href="DOT.Initialization.InitVar.html#d417686deb0be68240eed0edb433ed87"><span class="id" title="notation">c</span></a> <a class="idref" href="DOT.Safety.Preservation.html#l"><span class="id" title="variable">l</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Safety.Preservation.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">#</span> <a class="idref" href="DOT.Safety.Preservation.html#Gamma"><span class="id" title="variable">Gamma</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Safety.Preservation.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">#</span> <a class="idref" href="DOT.Safety.Preservation.html#Delta"><span class="id" title="variable">Delta</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Safety.Preservation.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">#</span> <a class="idref" href="DOT.Safety.Preservation.html#Sigma"><span class="id" title="variable">Sigma</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.HeapEffInit.InitCorrespondence.html#free_sub_heaps"><span class="id" title="inductive">free_sub_heaps</span></a> (<a class="idref" href="DOT.Safety.Preservation.html#Gamma"><span class="id" title="variable">Gamma</span></a> <span class="id" title="notation">&amp;</span> <a class="idref" href="DOT.Safety.Preservation.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">~</span> <a class="idref" href="DOT.Safety.Preservation.html#T"><span class="id" title="variable">T</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="DOT.Safety.Preservation.html#Delta"><span class="id" title="variable">Delta</span></a> <span class="id" title="notation">&amp;</span> <a class="idref" href="DOT.Safety.Preservation.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">~</span> <a class="idref" href="DOT.Definitions.Syntax.Types.html#free"><span class="id" title="constructor">free</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="DOT.Safety.Preservation.html#Sigma"><span class="id" title="variable">Sigma</span></a> <span class="id" title="notation">&amp;</span> <a class="idref" href="DOT.Safety.Preservation.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">~</span> <span class="id" title="notation">(</span><a class="idref" href="DOT.Definitions.Syntax.Items.html#item_lit"><span class="id" title="constructor">item_lit</span></a> <a class="idref" href="DOT.Safety.Preservation.html#l"><span class="id" title="variable">l</span></a><span class="id" title="notation">)</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="DOT.Safety.Preservation.html#dc1b905d8ef0ab32d16a033ee43ce82f"><span class="id" title="variable">ℰ</span></a> <span class="id" title="notation">&amp;</span> <a class="idref" href="DOT.Safety.Preservation.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">~</span> <span class="id" title="axiom">empty</span> <span class="id" title="notation">::</span> <a class="idref" href="DOT.Safety.Preservation.html#95fdeea536fdcd18a2894301ecf05ec6"><span class="id" title="variable">ℰs</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">with</span> <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hfshs</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">Hfshs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">H1</span> <span class="id" title="var">into</span> <span class="id" title="var">Hwc</span>; <span class="id" title="tactic">rename</span> <span class="id" title="var">H2</span> <span class="id" title="var">into</span> <span class="id" title="var">HxG</span>; <span class="id" title="tactic">rename</span> <span class="id" title="var">H3</span> <span class="id" title="var">into</span> <span class="id" title="var">HxD</span>; <span class="id" title="tactic">rename</span> <span class="id" title="var">H4</span> <span class="id" title="var">into</span> <span class="id" title="var">HxS</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="DOT.HeapEffInit.InitCorrespondence.html#free_sub_heaps_free_push"><span class="id" title="lemma">free_sub_heaps_free_push</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">H</span> <span class="id" title="var">into</span> <span class="id" title="var">Hani</span>. <span class="id" title="tactic">rename</span> <span class="id" title="var">H0</span> <span class="id" title="var">into</span> <span class="id" title="var">Hfsh</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">hnf</span>. <span class="id" title="var">introv</span> <span class="id" title="var">Hbix0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#binds_concat_cases"><span class="id" title="lemma">binds_concat_cases</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hbix0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="DOT.HeapEffInit.InitCorrespondence.html#free_sub_heaps_cons"><span class="id" title="constructor">free_sub_heaps_cons</span></a> <span class="id" title="var">Hani</span> <span class="id" title="var">Hfsh</span> <span class="id" title="var">Hfshs</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hfshs0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="DOT.HeapEffInit.InitCorrespondence.html#free_sub_heaps_fresh_var"><span class="id" title="lemma">free_sub_heaps_fresh_var</span></a> <span class="id" title="var">Hfshs0</span> <span class="id" title="var">HxD</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">HxE</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">HxE</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">notin_union</span> <span class="id" title="tactic">in</span> <span class="id" title="var">HxE</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">HxE</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">HxE</span> <span class="id" title="var">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hbix0</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hx0eq</span> | [<span class="id" title="var">Hbix0</span> <span class="id" title="var">Hx0neq</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="lemma">binds_single_inv</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hx0eq</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hx0eq</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="axiom">empty_def</span>, <span class="id" title="lemma">from_list_nil</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">introv</span> <span class="id" title="var">Hcontra</span>. <span class="id" title="var">exfalso</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="axiom">in_empty</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hcontra</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exists</span> (<a class="idref" href="DOT.Definitions.Syntax.Items.html#item_lit"><span class="id" title="constructor">item_lit</span></a> <span class="id" title="var">l</span>). <span class="id" title="tactic">split</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">IHHfshs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">econstructor</span>... <span class="id" title="tactic">split</span>... <span class="id" title="tactic">rewrite</span> <span class="id" title="axiom">empty_def</span>. <span class="id" title="tactic">split</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">dom_concat</span>, <span class="id" title="lemma">dom_single</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Lib.LibExtraEnv.html#subst_env_fset_vars_distrib_env"><span class="id" title="lemma">subst_env_fset_vars_distrib_env</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Lib.LibExtraEnv.html#subst_env_fset_vars_ignore_fresh"><span class="id" title="lemma">subst_env_fset_vars_ignore_fresh</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Lib.LibExtraEnv.html#subst_env_fset_vars_single"><span class="id" title="lemma">subst_env_fset_vars_single</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="DOT.Lib.LibExtraFset.html#is_in_union_singleton_l"><span class="id" title="lemma">is_in_union_singleton_l</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="DOT.Initialization.InitWeakening.html#commit_weaken_D"><span class="id" title="lemma">commit_weaken_D</span></a>; <span class="id" title="tactic">eauto</span> 3.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">eapply</span> <a class="idref" href="DOT.Initialization.InitWeakening.html#commit_weaken_G"><span class="id" title="lemma">commit_weaken_G</span></a>; <span class="id" title="tactic">eauto</span> 3.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">rewrite</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#subst_env_fset_vars_dom"><span class="id" title="lemma">subst_env_fset_vars_dom</span></a>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">hnf</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hfsh</span>. <span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hfsh</span> <span class="id" title="var">x0</span> <span class="id" title="var">effs</span> <span class="id" title="var">Hbix0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hfsh</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hinef</span> [<span class="id" title="var">itm</span> [<span class="id" title="var">Hbix0S</span> <span class="id" title="var">Hfhi</span>]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>... <span class="id" title="tactic">exists</span> <span class="id" title="var">itm</span>. <span class="id" title="tactic">split</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">dom_single</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hx0neq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">notin_singleton</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hx0neq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="DOT.HeapEffInit.HeapItemFree.html#free_heap_item_weaken_effs"><span class="id" title="lemma">free_heap_item_weaken_effs</span></a>, <a class="idref" href="DOT.HeapEffInit.HeapItemFree.html#free_heap_item_weaken_inits"><span class="id" title="lemma">free_heap_item_weaken_inits</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.HeapEffInit.HeapItemFree.html#free_heap_item_weaken_ctx"><span class="id" title="lemma">free_heap_item_weaken_ctx</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Preservation&nbsp;for&nbsp;let&nbsp;statements&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="preservation_let_var"><span class="id" title="lemma">preservation_let_var</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">Gamma</span> <span class="id" title="var">Delta</span> <span class="id" title="var">ℰs</span> <span class="id" title="var">effss</span> <span class="id" title="var">x</span> <span class="id" title="var">t</span> <span class="id" title="var">s</span> <span class="id" title="var">Sigma</span> <span class="id" title="var">c'</span> <span class="id" title="var">U</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Safety.ConfigTyping.html#ty_config"><span class="id" title="inductive">ty_config</span></a> <a class="idref" href="DOT.Safety.Preservation.html#Gamma"><span class="id" title="variable">Gamma</span></a> <a class="idref" href="DOT.Safety.Preservation.html#Delta"><span class="id" title="variable">Delta</span></a> <a class="idref" href="DOT.Safety.Preservation.html#95fdeea536fdcd18a2894301ecf05ec6"><span class="id" title="variable">ℰs</span></a> <a class="idref" href="DOT.Safety.Preservation.html#effss"><span class="id" title="variable">effss</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="DOT.Definitions.Syntax.Terms.html#trm_var"><span class="id" title="constructor">trm_var</span></a> (<a class="idref" href="DOT.Definitions.Syntax.Vars.html#avar_f"><span class="id" title="constructor">avar_f</span></a> <a class="idref" href="DOT.Safety.Preservation.html#x"><span class="id" title="variable">x</span></a>)<a class="idref" href="DOT.Definitions.Syntax.AbstractMachine.html#853ef4438aa18d93c7ce9a7ed5bb14bd"><span class="id" title="notation">;</span></a> (<a class="idref" href="DOT.Definitions.Syntax.AbstractMachine.html#frame_let"><span class="id" title="constructor">frame_let</span></a> <a class="idref" href="DOT.Safety.Preservation.html#t"><span class="id" title="variable">t</span></a> <span class="id" title="notation">::</span> <a class="idref" href="DOT.Safety.Preservation.html#s"><span class="id" title="variable">s</span></a>)%<span class="id" title="var">list</span><a class="idref" href="DOT.Definitions.Syntax.AbstractMachine.html#853ef4438aa18d93c7ce9a7ed5bb14bd"><span class="id" title="notation">;</span></a> <a class="idref" href="DOT.Safety.Preservation.html#Sigma"><span class="id" title="variable">Sigma</span></a>) <a class="idref" href="DOT.Safety.Preservation.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Definitions.OperationalSemantics.OperationalSemantics.html#5a6f9eabadac3f4f365369582d682367"><span class="id" title="notation">(</span></a><a class="idref" href="DOT.Definitions.Syntax.Terms.html#trm_var"><span class="id" title="constructor">trm_var</span></a> (<a class="idref" href="DOT.Definitions.Syntax.Vars.html#avar_f"><span class="id" title="constructor">avar_f</span></a> <a class="idref" href="DOT.Safety.Preservation.html#x"><span class="id" title="variable">x</span></a>)<a class="idref" href="DOT.Definitions.Syntax.AbstractMachine.html#853ef4438aa18d93c7ce9a7ed5bb14bd"><span class="id" title="notation">;</span></a> (<a class="idref" href="DOT.Definitions.Syntax.AbstractMachine.html#frame_let"><span class="id" title="constructor">frame_let</span></a> <a class="idref" href="DOT.Safety.Preservation.html#t"><span class="id" title="variable">t</span></a> <span class="id" title="notation">::</span> <a class="idref" href="DOT.Safety.Preservation.html#s"><span class="id" title="variable">s</span></a>)%<span class="id" title="var">list</span><a class="idref" href="DOT.Definitions.Syntax.AbstractMachine.html#853ef4438aa18d93c7ce9a7ed5bb14bd"><span class="id" title="notation">;</span></a> <a class="idref" href="DOT.Safety.Preservation.html#Sigma"><span class="id" title="variable">Sigma</span></a><a class="idref" href="DOT.Definitions.OperationalSemantics.OperationalSemantics.html#5a6f9eabadac3f4f365369582d682367"><span class="id" title="notation">)</span></a> <a class="idref" href="DOT.Definitions.OperationalSemantics.OperationalSemantics.html#5a6f9eabadac3f4f365369582d682367"><span class="id" title="notation">↦</span></a> <a class="idref" href="DOT.Safety.Preservation.html#c'"><span class="id" title="variable">c'</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">exists</span> <span class="id" title="var">effss'</span><span class="id" title="notation">,</span> <a class="idref" href="DOT.Safety.ConfigTyping.html#ty_config"><span class="id" title="inductive">ty_config</span></a> <a class="idref" href="DOT.Safety.Preservation.html#Gamma"><span class="id" title="variable">Gamma</span></a> <a class="idref" href="DOT.Safety.Preservation.html#Delta"><span class="id" title="variable">Delta</span></a> <a class="idref" href="DOT.Safety.Preservation.html#95fdeea536fdcd18a2894301ecf05ec6"><span class="id" title="variable">ℰs</span></a> <a class="idref" href="DOT.Safety.Preservation.html#effss'"><span class="id" title="variable">effss'</span></a> <a class="idref" href="DOT.Safety.Preservation.html#c'"><span class="id" title="variable">c'</span></a> <a class="idref" href="DOT.Safety.Preservation.html#U"><span class="id" title="variable">U</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">with</span> <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> 1; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">H3</span> <span class="id" title="var">into</span> <span class="id" title="var">G_inert</span>, <span class="id" title="var">H4</span> <span class="id" title="var">into</span> <span class="id" title="var">D_inert</span>, <span class="id" title="var">H5</span> <span class="id" title="var">into</span> <span class="id" title="var">G_corresp_S</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">H6</span> <span class="id" title="var">into</span> <span class="id" title="var">ℰ_subheaps</span>, <span class="id" title="var">H7</span> <span class="id" title="var">into</span> <span class="id" title="var">let_cont_typ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">H8</span> <span class="id" title="var">into</span> <span class="id" title="var">hole_typ</span>, <span class="id" title="var">H13</span> <span class="id" title="var">into</span> <span class="id" title="var">hole_eff</span>, <span class="id" title="var">H15</span> <span class="id" title="var">into</span> <span class="id" title="var">hole_init</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">H16</span> <span class="id" title="var">into</span> <span class="id" title="var">ℰ_corresp_effs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> 1; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">H0</span> <span class="id" title="var">into</span> <span class="id" title="var">let_loc_red</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;A&nbsp;single&nbsp;variable&nbsp;x&nbsp;has&nbsp;no&nbsp;effects,&nbsp;so&nbsp;effs'&nbsp;=&nbsp;{}&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inversions</span> <span class="id" title="var">hole_eff</span>. <span class="id" title="var">inversions</span> <span class="id" title="var">let_cont_typ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">H10</span> <span class="id" title="var">into</span> <span class="id" title="var">cont_typ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">H12</span> <span class="id" title="var">into</span> <span class="id" title="var">hole_open_typ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">H13</span> <span class="id" title="var">into</span> <span class="id" title="var">hole_open_init</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">H14</span> <span class="id" title="var">into</span> <span class="id" title="var">hole_open_eff</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="notation">(</span><span class="id" title="var">effs'</span> <span class="id" title="notation">++</span> <span class="id" title="var">effs0</span><span class="id" title="notation">)</span> <span class="id" title="notation">::</span> <span class="id" title="var">effss0</span>)%<span class="id" title="var">list</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">econstructor</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <a class="idref" href="DOT.Definitions.TypingClasses.SubstitutionClass.html#renaming_fresh"><span class="id" title="lemma">renaming_fresh</span></a>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;Use&nbsp;a&nbsp;renaming&nbsp;lemma&nbsp;for&nbsp;effects&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="DOT.Effects.EffectSubstitution.html#renaming_fresh_effs"><span class="id" title="lemma">renaming_fresh_effs</span></a>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;Use&nbsp;a&nbsp;renaming&nbsp;lemma&nbsp;for&nbsp;init&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="DOT.Initialization.InitRenaming.html#renaming_fresh_init"><span class="id" title="lemma">renaming_fresh_init</span></a>...<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="preservation_let_lit"><span class="id" title="lemma">preservation_let_lit</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">Gamma</span> <span class="id" title="var">Delta</span> <span class="id" title="var">ℰs</span> <span class="id" title="var">effss</span> <span class="id" title="var">T</span> <span class="id" title="var">l</span> <span class="id" title="var">t</span> <span class="id" title="var">s</span> <span class="id" title="var">Sigma</span> <span class="id" title="var">c'</span> <span class="id" title="var">U</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Safety.ConfigTyping.html#ty_config"><span class="id" title="inductive">ty_config</span></a> <a class="idref" href="DOT.Safety.Preservation.html#Gamma"><span class="id" title="variable">Gamma</span></a> <a class="idref" href="DOT.Safety.Preservation.html#Delta"><span class="id" title="variable">Delta</span></a> <a class="idref" href="DOT.Safety.Preservation.html#95fdeea536fdcd18a2894301ecf05ec6"><span class="id" title="variable">ℰs</span></a> <a class="idref" href="DOT.Safety.Preservation.html#effss"><span class="id" title="variable">effss</span></a> (<a class="idref" href="DOT.Definitions.Syntax.Terms.html#trm_lit"><span class="id" title="constructor">trm_lit</span></a> <a class="idref" href="DOT.Safety.Preservation.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="DOT.Safety.Preservation.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="DOT.Safety.Preservation.html#t"><span class="id" title="variable">t</span></a><a class="idref" href="DOT.Definitions.Syntax.AbstractMachine.html#853ef4438aa18d93c7ce9a7ed5bb14bd"><span class="id" title="notation">;</span></a> <a class="idref" href="DOT.Safety.Preservation.html#s"><span class="id" title="variable">s</span></a><a class="idref" href="DOT.Definitions.Syntax.AbstractMachine.html#853ef4438aa18d93c7ce9a7ed5bb14bd"><span class="id" title="notation">;</span></a> <a class="idref" href="DOT.Safety.Preservation.html#Sigma"><span class="id" title="variable">Sigma</span></a>) <a class="idref" href="DOT.Safety.Preservation.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Definitions.OperationalSemantics.OperationalSemantics.html#5a6f9eabadac3f4f365369582d682367"><span class="id" title="notation">(</span></a><a class="idref" href="DOT.Definitions.Syntax.Terms.html#trm_lit"><span class="id" title="constructor">trm_lit</span></a> <a class="idref" href="DOT.Safety.Preservation.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="DOT.Safety.Preservation.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="DOT.Safety.Preservation.html#t"><span class="id" title="variable">t</span></a><a class="idref" href="DOT.Definitions.Syntax.AbstractMachine.html#853ef4438aa18d93c7ce9a7ed5bb14bd"><span class="id" title="notation">;</span></a> <a class="idref" href="DOT.Safety.Preservation.html#s"><span class="id" title="variable">s</span></a><a class="idref" href="DOT.Definitions.Syntax.AbstractMachine.html#853ef4438aa18d93c7ce9a7ed5bb14bd"><span class="id" title="notation">;</span></a> <a class="idref" href="DOT.Safety.Preservation.html#Sigma"><span class="id" title="variable">Sigma</span></a><a class="idref" href="DOT.Definitions.OperationalSemantics.OperationalSemantics.html#5a6f9eabadac3f4f365369582d682367"><span class="id" title="notation">)</span></a> <a class="idref" href="DOT.Definitions.OperationalSemantics.OperationalSemantics.html#5a6f9eabadac3f4f365369582d682367"><span class="id" title="notation">↦</span></a> <a class="idref" href="DOT.Safety.Preservation.html#c'"><span class="id" title="variable">c'</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">exists</span> <span class="id" title="var">Gamma'</span> <span class="id" title="var">Delta'</span> <span class="id" title="var">ℰs</span><span class="id" title="notation">,</span> <a class="idref" href="DOT.Safety.ConfigTyping.html#ty_config"><span class="id" title="inductive">ty_config</span></a> (<a class="idref" href="DOT.Safety.Preservation.html#Gamma"><span class="id" title="variable">Gamma</span></a> <span class="id" title="notation">&amp;</span> <a class="idref" href="DOT.Safety.Preservation.html#Gamma'"><span class="id" title="variable">Gamma'</span></a>) (<a class="idref" href="DOT.Safety.Preservation.html#Delta"><span class="id" title="variable">Delta</span></a> <span class="id" title="notation">&amp;</span> <a class="idref" href="DOT.Safety.Preservation.html#Delta'"><span class="id" title="variable">Delta'</span></a>) <a class="idref" href="DOT.Safety.Preservation.html#95fdeea536fdcd18a2894301ecf05ec6"><span class="id" title="variable">ℰs</span></a> <a class="idref" href="DOT.Safety.Preservation.html#effss"><span class="id" title="variable">effss</span></a> <a class="idref" href="DOT.Safety.Preservation.html#c'"><span class="id" title="variable">c'</span></a> <a class="idref" href="DOT.Safety.Preservation.html#U"><span class="id" title="variable">U</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">with</span> <span class="id" title="tactic">eauto</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> 1<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> [?<span class="id" title="var">Gamma</span> ?<span class="id" title="var">Delta</span> ?<span class="id" title="var">Sigma</span> ?<span class="id" title="var">ℰ</span> ?<span class="id" title="var">ℰs</span> ?<span class="id" title="var">s</span> ?<span class="id" title="var">t</span> ?<span class="id" title="var">T</span> ?<span class="id" title="var">i</span> ?<span class="id" title="var">U</span> ?<span class="id" title="var">effs'</span> ?<span class="id" title="var">effs</span> ?<span class="id" title="var">effss</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;?<span class="id" title="var">Hin</span> ?<span class="id" title="var">HinD</span> ?<span class="id" title="var">Hhc</span> ?<span class="id" title="var">Hfshs</span> ?<span class="id" title="var">Hts</span> ?<span class="id" title="var">Hty</span> ?<span class="id" title="var">Hef</span> ?<span class="id" title="var">Hit</span> ?<span class="id" title="var">Hecc</span>]; <span class="id" title="tactic">subst</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Invert&nbsp;reduction&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> 1; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">H0</span> <span class="id" title="var">into</span> <span class="id" title="var">Hred</span>, <span class="id" title="var">H7</span> <span class="id" title="var">into</span> <span class="id" title="var">HfrxS</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="DOT.HeapEffInit.InitCorrespondence.html#free_sub_heaps_well_committed"><span class="id" title="lemma">free_sub_heaps_well_committed</span></a> <span class="id" title="var">Hfshs</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hwc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> <span class="id" title="var">Hwc</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">HGD</span> [<span class="id" title="var">HDS</span> <span class="id" title="var">Hci</span>]].<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="DOT.Definitions.Syntax.Terms.html#trm_lit"><span class="id" title="constructor">trm_lit</span></a> <span class="id" title="var">T</span> <span class="id" title="var">l</span> <span class="id" title="var">t</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">trm</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Hty</span>; <span class="id" title="var">inversions</span> <span class="id" title="var">Heqtrm</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span>(<span class="id" title="tactic">solve</span>[<span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="DOT.Safety.StackTyping.html#ty_stack_sub"><span class="id" title="lemma">ty_stack_sub</span></a>]); <span class="id" title="tactic">clear</span> <span class="id" title="var">H2</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">H1</span> <span class="id" title="var">into</span> <span class="id" title="var">Hop</span>. <span class="id" title="tactic">rename</span> <span class="id" title="var">H0</span> <span class="id" title="var">into</span> <span class="id" title="var">Htyl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">x</span> <span class="id" title="notation">~</span> <span class="id" title="var">T</span>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">x</span> <span class="id" title="notation">#</span> <span class="id" title="var">G</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">HfrxG</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">hnf</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hhc</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hhc</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">HGS</span> <span class="id" title="var">Hstr</span>]. <span class="id" title="tactic">eauto</span>. }<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hit</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;Committed&nbsp;Term&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inversions</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">rename</span> <span class="id" title="var">H5</span> <span class="id" title="var">into</span> <span class="id" title="var">Hlitcom</span>. <span class="id" title="tactic">rename</span> <span class="id" title="var">H7</span> <span class="id" title="var">into</span> <span class="id" title="var">HcomOpen</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">x</span> <span class="id" title="notation">~</span> <a class="idref" href="DOT.Definitions.Syntax.Types.html#committed"><span class="id" title="constructor">committed</span></a>) (<span class="id" title="var">ℰ</span> <span class="id" title="notation">::</span> <span class="id" title="var">ℰs0</span>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span> 3 <span class="id" title="keyword">using</span> <a class="idref" href="DOT.CanonicalForms.RecordAndInertTypes.html#ty_lit_inert_type"><span class="id" title="lemma">ty_lit_inert_type</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">eapply</span> <a class="idref" href="DOT.CanonicalForms.HeapCorrespondence.html#heap_correspond_push"><span class="id" title="lemma">heap_correspond_push</span></a>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="DOT.CanonicalForms.HeapCorrespondence.html#ty_item_lit_s"><span class="id" title="constructor">ty_item_lit_s</span></a>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> <a class="idref" href="DOT.GeneralTyping.Weakening.html#weaken_rules"><span class="id" title="lemma">weaken_rules</span></a> <span class="id" title="keyword">as</span> [<span class="id" title="var">_</span> [<span class="id" title="var">Hwk</span> <span class="id" title="var">_</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hwk</span> <span class="id" title="var">G</span> <span class="id" title="var">l</span> <span class="id" title="var">T</span> <span class="id" title="var">Htyl</span> <span class="id" title="var">G</span> <span class="id" title="var">x</span> <span class="id" title="var">T</span> <span class="id" title="axiom">empty</span> (<span class="id" title="lemma">eq_sym</span> (<span class="id" title="lemma">concat_empty_r</span> <span class="id" title="var">G</span>)) <span class="id" title="var">HfrxG</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">concat_empty_r</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hwk</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;Free&nbsp;subheaps&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hit</span>; <span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="DOT.HeapEffInit.InitCorrespondence.html#free_sub_heaps_committed_push"><span class="id" title="lemma">free_sub_heaps_committed_push</span></a>; <span class="id" title="tactic">eauto</span> 2.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;Body&nbsp;well-typed&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="DOT.Definitions.TypingClasses.SubstitutionClass.html#renaming_fresh"><span class="id" title="lemma">renaming_fresh</span></a>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="DOT.GeneralTyping.Weakening.html#TrmTypingWeakenMiddle"><span class="id" title="instance">TrmTypingWeakenMiddle</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;Effects&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hef</span>; <span class="id" title="tactic">subst</span>... <span class="id" title="tactic">rename</span> <span class="id" title="var">H4</span> <span class="id" title="var">into</span> <span class="id" title="var">Hopef</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="DOT.Effects.EffectSubstitution.html#renaming_fresh_effs"><span class="id" title="lemma">renaming_fresh_effs</span></a>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="DOT.Initialization.InitRenaming.html#renaming_init_lit_init_comm"><span class="id" title="lemma">renaming_init_lit_init_comm</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;Free&nbsp;Literal&nbsp;case&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">H7</span> <span class="id" title="var">into</span> <span class="id" title="var">Hfrlcom</span>. <span class="id" title="tactic">rename</span> <span class="id" title="var">H8</span> <span class="id" title="var">into</span> <span class="id" title="var">HcomOpen</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">x</span> <span class="id" title="notation">~</span> <a class="idref" href="DOT.Definitions.Syntax.Types.html#free"><span class="id" title="constructor">free</span></a>) (<span class="id" title="notation">(</span><span class="id" title="var">ℰ</span> <span class="id" title="notation">&amp;</span> <span class="id" title="var">x</span> <span class="id" title="notation">~</span> <span class="id" title="constructor">nil</span><span class="id" title="notation">)</span> <span class="id" title="notation">::</span> <span class="id" title="var">ℰs0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span> 3 <span class="id" title="keyword">using</span> <a class="idref" href="DOT.CanonicalForms.RecordAndInertTypes.html#ty_lit_inert_type"><span class="id" title="lemma">ty_lit_inert_type</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">eapply</span> <a class="idref" href="DOT.CanonicalForms.HeapCorrespondence.html#heap_correspond_push"><span class="id" title="lemma">heap_correspond_push</span></a>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="DOT.CanonicalForms.HeapCorrespondence.html#ty_item_lit_s"><span class="id" title="constructor">ty_item_lit_s</span></a>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> <a class="idref" href="DOT.GeneralTyping.Weakening.html#weaken_rules"><span class="id" title="lemma">weaken_rules</span></a> <span class="id" title="keyword">as</span> [<span class="id" title="var">_</span> [<span class="id" title="var">Hwk</span> <span class="id" title="var">_</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hwk</span> <span class="id" title="var">G</span> <span class="id" title="var">l</span> <span class="id" title="var">T</span> <span class="id" title="var">Htyl</span> <span class="id" title="var">G</span> <span class="id" title="var">x</span> <span class="id" title="var">T</span> <span class="id" title="axiom">empty</span> (<span class="id" title="lemma">eq_sym</span> (<span class="id" title="lemma">concat_empty_r</span> <span class="id" title="var">G</span>)) <span class="id" title="var">HfrxG</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">concat_empty_r</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hwk</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;Free&nbsp;subheaps&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hit</span>; <span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="DOT.HeapEffInit.InitCorrespondence.html#free_sub_heaps_free_lit_push"><span class="id" title="lemma">free_sub_heaps_free_lit_push</span></a>; <span class="id" title="tactic">eauto</span> 2.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;Body&nbsp;well-typed&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="DOT.Definitions.TypingClasses.SubstitutionClass.html#renaming_fresh"><span class="id" title="lemma">renaming_fresh</span></a>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="DOT.GeneralTyping.Weakening.html#TrmTypingWeakenMiddle"><span class="id" title="instance">TrmTypingWeakenMiddle</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;Effects&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hef</span>; <span class="id" title="tactic">subst</span>... <span class="id" title="tactic">rename</span> <span class="id" title="var">H4</span> <span class="id" title="var">into</span> <span class="id" title="var">Hopef</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="DOT.Effects.EffectSubstitution.html#renaming_fresh_effs"><span class="id" title="lemma">renaming_fresh_effs</span></a>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;Body&nbsp;well-init&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">dom_concat</span>, <span class="id" title="lemma">dom_single</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="DOT.Initialization.InitRenaming.html#renaming_init_let"><span class="id" title="lemma">renaming_init_let</span></a>; <span class="id" title="tactic">eauto</span> 2.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inversions</span> <span class="id" title="var">Hfshs</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#free_sub_heap_fresh_heap"><span class="id" title="lemma">free_sub_heap_fresh_heap</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">inversions</span> <span class="id" title="var">Hecc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="DOT.HeapEffInit.InitCorrespondence.html#eff_ctx_corr_cons"><span class="id" title="constructor">eff_ctx_corr_cons</span></a>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="DOT.HeapEffInit.SubHeapFree.html#eff_ctx_corr_one_push_nil"><span class="id" title="lemma">eff_ctx_corr_one_push_nil</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;Committed&nbsp;Literal&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">H7</span> <span class="id" title="var">into</span> <span class="id" title="var">Hlitcom</span>. <span class="id" title="tactic">rename</span> <span class="id" title="var">H8</span> <span class="id" title="var">into</span> <span class="id" title="var">HcomOpen</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">x</span> <span class="id" title="notation">~</span> <a class="idref" href="DOT.Definitions.Syntax.Types.html#committed"><span class="id" title="constructor">committed</span></a>) (<span class="id" title="var">ℰ</span> <span class="id" title="notation">::</span> <span class="id" title="var">ℰs0</span>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span> 3 <span class="id" title="keyword">using</span> <a class="idref" href="DOT.CanonicalForms.RecordAndInertTypes.html#ty_lit_inert_type"><span class="id" title="lemma">ty_lit_inert_type</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">eapply</span> <a class="idref" href="DOT.CanonicalForms.HeapCorrespondence.html#heap_correspond_push"><span class="id" title="lemma">heap_correspond_push</span></a>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="DOT.CanonicalForms.HeapCorrespondence.html#ty_item_lit_s"><span class="id" title="constructor">ty_item_lit_s</span></a>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> <a class="idref" href="DOT.GeneralTyping.Weakening.html#weaken_rules"><span class="id" title="lemma">weaken_rules</span></a> <span class="id" title="keyword">as</span> [<span class="id" title="var">_</span> [<span class="id" title="var">Hwk</span> <span class="id" title="var">_</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hwk</span> <span class="id" title="var">G</span> <span class="id" title="var">l</span> <span class="id" title="var">T</span> <span class="id" title="var">Htyl</span> <span class="id" title="var">G</span> <span class="id" title="var">x</span> <span class="id" title="var">T</span> <span class="id" title="axiom">empty</span> (<span class="id" title="lemma">eq_sym</span> (<span class="id" title="lemma">concat_empty_r</span> <span class="id" title="var">G</span>)) <span class="id" title="var">HfrxG</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">concat_empty_r</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hwk</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;Free&nbsp;subheaps&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hit</span>; <span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="DOT.HeapEffInit.InitCorrespondence.html#free_sub_heaps_committed_push"><span class="id" title="lemma">free_sub_heaps_committed_push</span></a>; <span class="id" title="tactic">eauto</span> 2.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;Body&nbsp;well-typed&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="DOT.Definitions.TypingClasses.SubstitutionClass.html#renaming_fresh"><span class="id" title="lemma">renaming_fresh</span></a>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="DOT.GeneralTyping.Weakening.html#TrmTypingWeakenMiddle"><span class="id" title="instance">TrmTypingWeakenMiddle</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;Effects&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hef</span>; <span class="id" title="tactic">subst</span>... <span class="id" title="tactic">rename</span> <span class="id" title="var">H4</span> <span class="id" title="var">into</span> <span class="id" title="var">Hopef</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="DOT.Effects.EffectSubstitution.html#renaming_fresh_effs"><span class="id" title="lemma">renaming_fresh_effs</span></a>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;Init&nbsp;Typing&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="DOT.Initialization.InitRenaming.html#renaming_init_lit_init"><span class="id" title="lemma">renaming_init_lit_init</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="preservation_let_trm"><span class="id" title="lemma">preservation_let_trm</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">Gamma</span> <span class="id" title="var">Delta</span> <span class="id" title="var">ℰs</span> <span class="id" title="var">effss</span> <span class="id" title="var">T</span> <span class="id" title="var">t</span> <span class="id" title="var">t'</span> <span class="id" title="var">s</span> <span class="id" title="var">Sigma</span> <span class="id" title="var">c'</span> <span class="id" title="var">U</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Safety.ConfigTyping.html#ty_config"><span class="id" title="inductive">ty_config</span></a> <a class="idref" href="DOT.Safety.Preservation.html#Gamma"><span class="id" title="variable">Gamma</span></a> <a class="idref" href="DOT.Safety.Preservation.html#Delta"><span class="id" title="variable">Delta</span></a> <a class="idref" href="DOT.Safety.Preservation.html#95fdeea536fdcd18a2894301ecf05ec6"><span class="id" title="variable">ℰs</span></a> <a class="idref" href="DOT.Safety.Preservation.html#effss"><span class="id" title="variable">effss</span></a> (<a class="idref" href="DOT.Definitions.Syntax.Terms.html#trm_let"><span class="id" title="constructor">trm_let</span></a> <a class="idref" href="DOT.Safety.Preservation.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="DOT.Safety.Preservation.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="DOT.Safety.Preservation.html#t'"><span class="id" title="variable">t'</span></a><a class="idref" href="DOT.Definitions.Syntax.AbstractMachine.html#853ef4438aa18d93c7ce9a7ed5bb14bd"><span class="id" title="notation">;</span></a> <a class="idref" href="DOT.Safety.Preservation.html#s"><span class="id" title="variable">s</span></a><a class="idref" href="DOT.Definitions.Syntax.AbstractMachine.html#853ef4438aa18d93c7ce9a7ed5bb14bd"><span class="id" title="notation">;</span></a> <a class="idref" href="DOT.Safety.Preservation.html#Sigma"><span class="id" title="variable">Sigma</span></a>) <a class="idref" href="DOT.Safety.Preservation.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Definitions.OperationalSemantics.OperationalSemantics.html#5a6f9eabadac3f4f365369582d682367"><span class="id" title="notation">(</span></a><a class="idref" href="DOT.Definitions.Syntax.Terms.html#trm_let"><span class="id" title="constructor">trm_let</span></a> <a class="idref" href="DOT.Safety.Preservation.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="DOT.Safety.Preservation.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="DOT.Safety.Preservation.html#t'"><span class="id" title="variable">t'</span></a><a class="idref" href="DOT.Definitions.Syntax.AbstractMachine.html#853ef4438aa18d93c7ce9a7ed5bb14bd"><span class="id" title="notation">;</span></a> <a class="idref" href="DOT.Safety.Preservation.html#s"><span class="id" title="variable">s</span></a><a class="idref" href="DOT.Definitions.Syntax.AbstractMachine.html#853ef4438aa18d93c7ce9a7ed5bb14bd"><span class="id" title="notation">;</span></a> <a class="idref" href="DOT.Safety.Preservation.html#Sigma"><span class="id" title="variable">Sigma</span></a><a class="idref" href="DOT.Definitions.OperationalSemantics.OperationalSemantics.html#5a6f9eabadac3f4f365369582d682367"><span class="id" title="notation">)</span></a> <a class="idref" href="DOT.Definitions.OperationalSemantics.OperationalSemantics.html#5a6f9eabadac3f4f365369582d682367"><span class="id" title="notation">↦</span></a> <a class="idref" href="DOT.Safety.Preservation.html#c'"><span class="id" title="variable">c'</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Safety.ConfigTyping.html#ty_config"><span class="id" title="inductive">ty_config</span></a> <a class="idref" href="DOT.Safety.Preservation.html#Gamma"><span class="id" title="variable">Gamma</span></a> <a class="idref" href="DOT.Safety.Preservation.html#Delta"><span class="id" title="variable">Delta</span></a> <a class="idref" href="DOT.Safety.Preservation.html#95fdeea536fdcd18a2894301ecf05ec6"><span class="id" title="variable">ℰs</span></a> <a class="idref" href="DOT.Safety.Preservation.html#effss"><span class="id" title="variable">effss</span></a> <a class="idref" href="DOT.Safety.Preservation.html#c'"><span class="id" title="variable">c'</span></a> <a class="idref" href="DOT.Safety.Preservation.html#U"><span class="id" title="variable">U</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> 1<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> [?<span class="id" title="var">Gamma</span> ?<span class="id" title="var">Delta</span> ?<span class="id" title="var">Sigma</span> ?<span class="id" title="var">ℰ</span> ?<span class="id" title="var">ℰs</span> ?<span class="id" title="var">s</span> ?<span class="id" title="var">t</span> ?<span class="id" title="var">T</span> ?<span class="id" title="var">i</span> ?<span class="id" title="var">U</span> ?<span class="id" title="var">effs'</span> ?<span class="id" title="var">effs</span> ?<span class="id" title="var">effss</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;?<span class="id" title="var">Hin</span> ?<span class="id" title="var">HinD</span> ?<span class="id" title="var">Hhc</span> ?<span class="id" title="var">Hfshs</span> ?<span class="id" title="var">Hts</span> ?<span class="id" title="var">Hty</span> ?<span class="id" title="var">Hef</span> ?<span class="id" title="var">Hit</span> ?<span class="id" title="var">Hecc</span>]; <span class="id" title="tactic">subst</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> 1; <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">rename</span> <span class="id" title="var">H0</span> <span class="id" title="var">into</span> <span class="id" title="var">Hred</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="DOT.Definitions.Syntax.Terms.html#trm_let"><span class="id" title="constructor">trm_let</span></a> <span class="id" title="var">T</span> <span class="id" title="var">t</span> <span class="id" title="var">t'</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">t''</span> <span class="id" title="var">eqn</span>:<span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Hty</span>; <span class="id" title="var">inversions</span> <span class="id" title="var">Heq</span>; <span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span> 4 <span class="id" title="keyword">using</span> <a class="idref" href="DOT.Safety.StackTyping.html#ty_stack_sub"><span class="id" title="lemma">ty_stack_sub</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">H2</span> <span class="id" title="var">IHHty</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">H0</span> <span class="id" title="var">into</span> <span class="id" title="var">Htyt</span>. <span class="id" title="tactic">rename</span> <span class="id" title="var">H1</span> <span class="id" title="var">into</span> <span class="id" title="var">HtyOpen</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">U0</span> <span class="id" title="var">into</span> <span class="id" title="var">T'</span>. <span class="id" title="tactic">rename</span> <span class="id" title="var">G</span> <span class="id" title="var">into</span> <span class="id" title="var">Gamma</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> <span class="id" title="var">Hhc</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">HdomEq</span> <span class="id" title="var">Hty_item</span>].<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hit</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rename</span> <span class="id" title="var">H0</span> <span class="id" title="var">into</span> <span class="id" title="var">HletComm</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">HletComm</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">L0</span> <span class="id" title="var">into</span> <span class="id" title="var">L'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">H4</span> <span class="id" title="var">into</span> <span class="id" title="var">HtComm</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">H6</span> <span class="id" title="var">into</span> <span class="id" title="var">HOpenComm</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hef</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span> 3.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (<span class="id" title="lemma">List.app_nil_l</span> <span class="id" title="var">effs</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="DOT.Safety.StackTyping.html#ty_stack_let"><span class="id" title="constructor">ty_stack_let</span></a>) <span class="id" title="keyword">with</span> (<span class="id" title="var">L</span>:=(<span class="id" title="var">L</span> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> <span class="id" title="var">L'</span>)); <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rename</span> <span class="id" title="var">L0</span> <span class="id" title="var">into</span> <span class="id" title="var">L''</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">H4</span> <span class="id" title="var">into</span> <span class="id" title="var">Heft</span>. <span class="id" title="tactic">rename</span> <span class="id" title="var">H5</span> <span class="id" title="var">into</span> <span class="id" title="var">Heft'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="lemma">List.app_assoc</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="DOT.Safety.StackTyping.html#ty_stack_let"><span class="id" title="constructor">ty_stack_let</span></a>) <span class="id" title="keyword">with</span> (<span class="id" title="var">L</span>:=(<span class="id" title="var">L</span> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> <span class="id" title="var">L'</span> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> <span class="id" title="var">L''</span>)); <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rename</span> <span class="id" title="var">L0</span> <span class="id" title="var">into</span> <span class="id" title="var">L'</span>. <span class="id" title="tactic">rename</span> <span class="id" title="var">i0</span> <span class="id" title="var">into</span> <span class="id" title="var">i'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">H7</span> <span class="id" title="var">into</span> <span class="id" title="var">HtInit</span>. <span class="id" title="tactic">rename</span> <span class="id" title="var">H8</span> <span class="id" title="var">into</span> <span class="id" title="var">HOpenInit</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hef</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span> 3.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (<span class="id" title="lemma">List.app_nil_l</span> <span class="id" title="var">effs</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="DOT.Safety.StackTyping.html#ty_stack_let"><span class="id" title="constructor">ty_stack_let</span></a>) <span class="id" title="keyword">with</span> (<span class="id" title="var">L</span>:=(<span class="id" title="var">L</span> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> <span class="id" title="var">L'</span>)); <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rename</span> <span class="id" title="var">L0</span> <span class="id" title="var">into</span> <span class="id" title="var">L''</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">H4</span> <span class="id" title="var">into</span> <span class="id" title="var">Heft</span>. <span class="id" title="tactic">rename</span> <span class="id" title="var">H5</span> <span class="id" title="var">into</span> <span class="id" title="var">Heft'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="lemma">List.app_assoc</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="DOT.Safety.StackTyping.html#ty_stack_let"><span class="id" title="constructor">ty_stack_let</span></a>) <span class="id" title="keyword">with</span> (<span class="id" title="var">L</span>:=(<span class="id" title="var">L</span> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> <span class="id" title="var">L'</span> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> <span class="id" title="var">L''</span>)); <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="DOT.Safety.Preservation.html#PreservationLet"><span class="id" title="section">PreservationLet</span></a>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a name="PreservationKon"><span class="id" title="section">PreservationKon</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Local Ltac</span> <span class="id" title="var">item_inv</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id" title="var">H</span> : <a class="idref" href="DOT.Safety.StackTyping.html#ty_stack"><span class="id" title="inductive">ty_stack</span></a> ?<span class="id" title="var">G</span> ?<span class="id" title="var">D</span> ?<span class="id" title="var">Es</span> <span class="id" title="var">_</span> ?<span class="id" title="var">T</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>, <span class="id" title="var">_</span> : ?<span class="id" title="var">x</span> <span class="id" title="notation">#</span> ?<span class="id" title="var">S</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|- (<span class="id" title="notation">exists</span> <span class="id" title="var">G'</span> <span class="id" title="var">D'</span> <span class="id" title="var">ℰs'</span> <span class="id" title="var">effss'</span><span class="id" title="notation">,</span> <a class="idref" href="DOT.Safety.ConfigTyping.html#ty_config"><span class="id" title="inductive">ty_config</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">_</span> <a class="idref" href="DOT.Definitions.Syntax.AbstractMachine.html#853ef4438aa18d93c7ce9a7ed5bb14bd"><span class="id" title="notation">;</span></a> <span class="id" title="var">_</span> <a class="idref" href="DOT.Definitions.Syntax.AbstractMachine.html#853ef4438aa18d93c7ce9a7ed5bb14bd"><span class="id" title="notation">;</span></a> ?<span class="id" title="var">S</span> <span class="id" title="notation">&amp;</span> ?<span class="id" title="var">x</span> <span class="id" title="notation">~</span> ?<span class="id" title="var">v</span>) <span class="id" title="var">_</span>)] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">x</span> <span class="id" title="notation">~</span> <span class="id" title="var">T</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="tactic">assert</span> (<span class="id" title="var">x</span> <span class="id" title="notation">#</span> <span class="id" title="var">G</span>) <span class="id" title="tactic">by</span> (<span class="id" title="tactic">eauto</span> 3 <span class="id" title="keyword">using</span> <a class="idref" href="DOT.CanonicalForms.HeapCorrespondence.html#heap_correspond_notin_dom"><span class="id" title="lemma">heap_correspond_notin_dom</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="lemma">binds_push_eq</span> <span class="id" title="var">x</span> <span class="id" title="var">T</span> <span class="id" title="var">G</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="lemma">binds_push_eq</span> <span class="id" title="var">x</span> <span class="id" title="var">v</span> <span class="id" title="var">S</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="tactic">assert</span> (<a class="idref" href="DOT.CanonicalForms.HeapCorrespondence.html#ty_item_s"><span class="id" title="inductive">ty_item_s</span></a> (<span class="id" title="var">G</span> <span class="id" title="notation">&amp;</span> <span class="id" title="var">x</span> <span class="id" title="notation">~</span> <span class="id" title="var">T</span>) (<span class="id" title="var">S</span> <span class="id" title="notation">&amp;</span> <span class="id" title="var">x</span> <span class="id" title="notation">~</span> <span class="id" title="var">v</span>) <span class="id" title="var">x</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> (<span class="id" title="tactic">try</span> <span class="id" title="var">solve_ty_item_push</span>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="DOT.CanonicalForms.HeapCorrespondence.html#ty_item_s_push"><span class="id" title="lemma">ty_item_s_push</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="tactic">assert</span> (<a class="idref" href="DOT.CanonicalForms.HeapCorrespondence.html#heap_correspond"><span class="id" title="definition">heap_correspond</span></a> (<span class="id" title="var">G</span> <span class="id" title="notation">&amp;</span> <span class="id" title="var">x</span> <span class="id" title="notation">~</span> <span class="id" title="var">T</span>) (<span class="id" title="var">S</span> <span class="id" title="notation">&amp;</span> <span class="id" title="var">x</span> <span class="id" title="notation">~</span> <span class="id" title="var">v</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> (<span class="id" title="tactic">eauto</span> 3 <span class="id" title="keyword">using</span> <a class="idref" href="DOT.CanonicalForms.HeapCorrespondence.html#heap_correspond_push"><span class="id" title="lemma">heap_correspond_push</span></a>, <a class="idref" href="DOT.CanonicalForms.HeapCorrespondence.html#heap_correspond_push_obj"><span class="id" title="lemma">heap_correspond_push_obj</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
Well-typedness of constructor applications 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="preservation_kon_ty_ds"><span class="id" title="lemma">preservation_kon_ty_ds</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">Gamma</span> <span class="id" title="var">Sigma</span> <span class="id" title="var">k</span> <span class="id" title="var">Ts</span> <span class="id" title="var">is'</span> <span class="id" title="var">T</span> <span class="id" title="var">xs</span> <span class="id" title="var">avs</span> <span class="id" title="var">x</span> <span class="id" title="var">ds</span> <span class="id" title="var">t</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.CanonicalForms.RecordAndInertTypes.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="DOT.Safety.Preservation.html#Gamma"><span class="id" title="variable">Gamma</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.CanonicalForms.HeapCorrespondence.html#heap_correspond"><span class="id" title="definition">heap_correspond</span></a> <a class="idref" href="DOT.Safety.Preservation.html#Gamma"><span class="id" title="variable">Gamma</span></a> <a class="idref" href="DOT.Safety.Preservation.html#Sigma"><span class="id" title="variable">Sigma</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Safety.Preservation.html#Gamma"><span class="id" title="variable">Gamma</span></a> <a class="idref" href="DOT.Definitions.TypingClasses.Typing.html#3db3136034a83ac4081977ececfc4888"><span class="id" title="notation">⊢</span></a> <a class="idref" href="DOT.Definitions.Syntax.Terms.html#trm_var"><span class="id" title="constructor">trm_var</span></a> (<a class="idref" href="DOT.Definitions.Syntax.Vars.html#avar_f"><span class="id" title="constructor">avar_f</span></a> <a class="idref" href="DOT.Safety.Preservation.html#k"><span class="id" title="variable">k</span></a>) <a class="idref" href="DOT.Definitions.TypingClasses.Typing.html#3db3136034a83ac4081977ececfc4888"><span class="id" title="notation">∶</span></a> <a class="idref" href="DOT.Definitions.Syntax.Types.html#typ_con"><span class="id" title="constructor">typ_con</span></a> <a class="idref" href="DOT.Safety.Preservation.html#Ts"><span class="id" title="variable">Ts</span></a> <a class="idref" href="DOT.Safety.Preservation.html#is'"><span class="id" title="variable">is'</span></a> <a class="idref" href="DOT.Safety.Preservation.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">length</span> <a class="idref" href="DOT.Safety.Preservation.html#xs"><span class="id" title="variable">xs</span></a> <span class="id" title="notation">=</span> <a class="idref" href="DOT.Lib.SyntaxClasses.html#length_s"><span class="id" title="definition">length_s</span></a> <a class="idref" href="DOT.Safety.Preservation.html#Ts"><span class="id" title="variable">Ts</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Definitions.Syntax.Vars.html#vars_of_avars"><span class="id" title="inductive">vars_of_avars</span></a> <a class="idref" href="DOT.Safety.Preservation.html#xs"><span class="id" title="variable">xs</span></a> <a class="idref" href="DOT.Safety.Preservation.html#avs"><span class="id" title="variable">avs</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Safety.Preservation.html#Gamma"><span class="id" title="variable">Gamma</span></a> <a class="idref" href="DOT.Definitions.TypingClasses.Typing.html#18e6d19815cc1c2f71d9cd6c6234b36b"><span class="id" title="notation">⊢</span></a> <a class="idref" href="DOT.Safety.Preservation.html#avs"><span class="id" title="variable">avs</span></a> <a class="idref" href="DOT.Definitions.TypingClasses.Typing.html#18e6d19815cc1c2f71d9cd6c6234b36b"><span class="id" title="notation">::</span></a> <a class="idref" href="DOT.Safety.Preservation.html#Ts"><span class="id" title="variable">Ts</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Safety.Preservation.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">#</span> <a class="idref" href="DOT.Safety.Preservation.html#Gamma"><span class="id" title="variable">Gamma</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">binds</span> <a class="idref" href="DOT.Safety.Preservation.html#k"><span class="id" title="variable">k</span></a> (<a class="idref" href="DOT.Definitions.Syntax.Items.html#item_lit"><span class="id" title="constructor">item_lit</span></a> (<a class="idref" href="DOT.Definitions.Syntax.Terms.html#lit_con"><span class="id" title="constructor">lit_con</span></a> <a class="idref" href="DOT.Safety.Preservation.html#Ts"><span class="id" title="variable">Ts</span></a> <a class="idref" href="DOT.Safety.Preservation.html#is'"><span class="id" title="variable">is'</span></a> <a class="idref" href="DOT.Safety.Preservation.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="DOT.Safety.Preservation.html#ds"><span class="id" title="variable">ds</span></a> <a class="idref" href="DOT.Safety.Preservation.html#t"><span class="id" title="variable">t</span></a>)) <a class="idref" href="DOT.Safety.Preservation.html#Sigma"><span class="id" title="variable">Sigma</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Safety.Preservation.html#Gamma"><span class="id" title="variable">Gamma</span></a> <span class="id" title="notation">&amp;</span> <a class="idref" href="DOT.Safety.Preservation.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">~</span> <a class="idref" href="DOT.Lib.SyntaxClasses.html#open_vars"><span class="id" title="abbreviation">open_vars</span></a> (<a class="idref" href="DOT.Safety.Preservation.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">::</span> <a class="idref" href="DOT.Safety.Preservation.html#xs"><span class="id" title="variable">xs</span></a>) <a class="idref" href="DOT.Safety.Preservation.html#T"><span class="id" title="variable">T</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Definitions.TypingClasses.Typing.html#3db3136034a83ac4081977ececfc4888"><span class="id" title="notation">⊢</span></a> <a class="idref" href="DOT.Lib.SyntaxClasses.html#open_vars"><span class="id" title="abbreviation">open_vars</span></a> (<a class="idref" href="DOT.Safety.Preservation.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">::</span> <a class="idref" href="DOT.Safety.Preservation.html#xs"><span class="id" title="variable">xs</span></a>) <a class="idref" href="DOT.Safety.Preservation.html#ds"><span class="id" title="variable">ds</span></a> <a class="idref" href="DOT.Definitions.TypingClasses.Typing.html#3db3136034a83ac4081977ececfc4888"><span class="id" title="notation">∶</span></a> <a class="idref" href="DOT.Lib.SyntaxClasses.html#open_vars"><span class="id" title="abbreviation">open_vars</span></a> (<a class="idref" href="DOT.Safety.Preservation.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">::</span> <a class="idref" href="DOT.Safety.Preservation.html#xs"><span class="id" title="variable">xs</span></a>) <a class="idref" href="DOT.Safety.Preservation.html#T"><span class="id" title="variable">T</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> * <span class="id" title="var">Hin</span> <span class="id" title="var">Hhc</span> <span class="id" title="var">Htyk</span> <span class="id" title="var">Hlen</span> <span class="id" title="var">Hxsavs</span> <span class="id" title="var">HavsTs</span> <span class="id" title="var">HxfrS</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="DOT.CanonicalForms.CanonicalForms.html#canonical_forms_con"><span class="id" title="lemma">canonical_forms_con</span></a> <span class="id" title="var">Hin</span> <span class="id" title="var">Hhc</span> <span class="id" title="var">Htyk</span>) <span class="id" title="keyword">as</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="var">L</span> [?<span class="id" title="var">ds</span> [?<span class="id" title="var">t</span> [<span class="id" title="var">_</span> [?<span class="id" title="var">HbikS</span> [?<span class="id" title="var">HbikG</span> [?<span class="id" title="var">Hds</span> <span class="id" title="var">_</span>]]]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> ?<span class="id" title="var">HbikS</span>; <span class="id" title="var">binds_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="DOT.GeneralTyping.RenameConstructors.html#rename_con_vars_open_push"><span class="id" title="lemma">rename_con_vars_open_push</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="preservation_kon_heap_corr"><span class="id" title="lemma">preservation_kon_heap_corr</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">Gamma</span> <span class="id" title="var">Sigma</span> <span class="id" title="var">k</span> <span class="id" title="var">Ts</span> <span class="id" title="var">is'</span> <span class="id" title="var">T</span> <span class="id" title="var">xs</span> <span class="id" title="var">avs</span> <span class="id" title="var">x</span> <span class="id" title="var">ds</span> <span class="id" title="var">t</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.CanonicalForms.RecordAndInertTypes.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="DOT.Safety.Preservation.html#Gamma"><span class="id" title="variable">Gamma</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.CanonicalForms.HeapCorrespondence.html#heap_correspond"><span class="id" title="definition">heap_correspond</span></a> <a class="idref" href="DOT.Safety.Preservation.html#Gamma"><span class="id" title="variable">Gamma</span></a> <a class="idref" href="DOT.Safety.Preservation.html#Sigma"><span class="id" title="variable">Sigma</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Safety.Preservation.html#Gamma"><span class="id" title="variable">Gamma</span></a> <a class="idref" href="DOT.Definitions.TypingClasses.Typing.html#3db3136034a83ac4081977ececfc4888"><span class="id" title="notation">⊢</span></a> <a class="idref" href="DOT.Definitions.Syntax.Terms.html#trm_var"><span class="id" title="constructor">trm_var</span></a> (<a class="idref" href="DOT.Definitions.Syntax.Vars.html#avar_f"><span class="id" title="constructor">avar_f</span></a> <a class="idref" href="DOT.Safety.Preservation.html#k"><span class="id" title="variable">k</span></a>) <a class="idref" href="DOT.Definitions.TypingClasses.Typing.html#3db3136034a83ac4081977ececfc4888"><span class="id" title="notation">∶</span></a> <a class="idref" href="DOT.Definitions.Syntax.Types.html#typ_con"><span class="id" title="constructor">typ_con</span></a> <a class="idref" href="DOT.Safety.Preservation.html#Ts"><span class="id" title="variable">Ts</span></a> <a class="idref" href="DOT.Safety.Preservation.html#is'"><span class="id" title="variable">is'</span></a> <a class="idref" href="DOT.Safety.Preservation.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">length</span> <a class="idref" href="DOT.Safety.Preservation.html#xs"><span class="id" title="variable">xs</span></a> <span class="id" title="notation">=</span> <a class="idref" href="DOT.Lib.SyntaxClasses.html#length_s"><span class="id" title="definition">length_s</span></a> <a class="idref" href="DOT.Safety.Preservation.html#Ts"><span class="id" title="variable">Ts</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Definitions.Syntax.Vars.html#vars_of_avars"><span class="id" title="inductive">vars_of_avars</span></a> <a class="idref" href="DOT.Safety.Preservation.html#xs"><span class="id" title="variable">xs</span></a> <a class="idref" href="DOT.Safety.Preservation.html#avs"><span class="id" title="variable">avs</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Safety.Preservation.html#Gamma"><span class="id" title="variable">Gamma</span></a> <a class="idref" href="DOT.Definitions.TypingClasses.Typing.html#18e6d19815cc1c2f71d9cd6c6234b36b"><span class="id" title="notation">⊢</span></a> <a class="idref" href="DOT.Safety.Preservation.html#avs"><span class="id" title="variable">avs</span></a> <a class="idref" href="DOT.Definitions.TypingClasses.Typing.html#18e6d19815cc1c2f71d9cd6c6234b36b"><span class="id" title="notation">::</span></a> <a class="idref" href="DOT.Safety.Preservation.html#Ts"><span class="id" title="variable">Ts</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Safety.Preservation.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">#</span> <a class="idref" href="DOT.Safety.Preservation.html#Gamma"><span class="id" title="variable">Gamma</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">binds</span> <a class="idref" href="DOT.Safety.Preservation.html#k"><span class="id" title="variable">k</span></a> (<a class="idref" href="DOT.Definitions.Syntax.Items.html#item_lit"><span class="id" title="constructor">item_lit</span></a> (<a class="idref" href="DOT.Definitions.Syntax.Terms.html#lit_con"><span class="id" title="constructor">lit_con</span></a> <a class="idref" href="DOT.Safety.Preservation.html#Ts"><span class="id" title="variable">Ts</span></a> <a class="idref" href="DOT.Safety.Preservation.html#is'"><span class="id" title="variable">is'</span></a> <a class="idref" href="DOT.Safety.Preservation.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="DOT.Safety.Preservation.html#ds"><span class="id" title="variable">ds</span></a> <a class="idref" href="DOT.Safety.Preservation.html#t"><span class="id" title="variable">t</span></a>)) <a class="idref" href="DOT.Safety.Preservation.html#Sigma"><span class="id" title="variable">Sigma</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.CanonicalForms.HeapCorrespondence.html#heap_correspond"><span class="id" title="definition">heap_correspond</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="DOT.Safety.Preservation.html#Gamma"><span class="id" title="variable">Gamma</span></a> <span class="id" title="notation">&amp;</span> <a class="idref" href="DOT.Safety.Preservation.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">~</span> <a class="idref" href="DOT.Definitions.Syntax.Types.html#typ_bnd"><span class="id" title="constructor">typ_bnd</span></a> (<a class="idref" href="DOT.Lib.SyntaxClasses.html#open_rec_vars"><span class="id" title="definition">open_rec_vars</span></a> 1 <a class="idref" href="DOT.Safety.Preservation.html#xs"><span class="id" title="variable">xs</span></a> <a class="idref" href="DOT.Safety.Preservation.html#T"><span class="id" title="variable">T</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="DOT.Safety.Preservation.html#Sigma"><span class="id" title="variable">Sigma</span></a> <span class="id" title="notation">&amp;</span> <a class="idref" href="DOT.Safety.Preservation.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">~</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Definitions.Syntax.Items.html#item_obj"><span class="id" title="constructor">item_obj</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="DOT.Lib.SyntaxClasses.html#open_rec_vars"><span class="id" title="definition">open_rec_vars</span></a> 1 <a class="idref" href="DOT.Safety.Preservation.html#xs"><span class="id" title="variable">xs</span></a> <a class="idref" href="DOT.Safety.Preservation.html#T"><span class="id" title="variable">T</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="DOT.Lib.SyntaxClasses.html#open_vars"><span class="id" title="abbreviation">open_vars</span></a> (<a class="idref" href="DOT.Safety.Preservation.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">::</span> <a class="idref" href="DOT.Safety.Preservation.html#xs"><span class="id" title="variable">xs</span></a>) (<a class="idref" href="DOT.Definitions.Syntax.Items.html#heap_defs_of_defs"><span class="id" title="definition">heap_defs_of_defs</span></a> <a class="idref" href="DOT.Safety.Preservation.html#ds"><span class="id" title="variable">ds</span></a>))).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> * <span class="id" title="var">Hin</span> <span class="id" title="var">Hhc</span> <span class="id" title="var">Htyk</span> <span class="id" title="var">Hlen</span> <span class="id" title="var">Hxsavs</span> <span class="id" title="var">HavsTs</span> <span class="id" title="var">HxfrS</span> <span class="id" title="var">HbikS</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="DOT.CanonicalForms.HeapCorrespondence.html#heap_correspond_push"><span class="id" title="lemma">heap_correspond_push</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="DOT.CanonicalForms.HeapCorrespondence.html#ty_item_obj_s"><span class="id" title="constructor">ty_item_obj_s</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="DOT.Definitions.TypingClasses.PreTyping.html#bnd_intro"><span class="id" title="lemma">bnd_intro</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="DOT.Lib.SyntaxClasses.html#open_vars_S_commut"><span class="id" title="lemma">open_vars_S_commut</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="DOT.Definitions.Syntax.Items.html#heap_defs_of_defs_open_vars_commut"><span class="id" title="lemma">heap_defs_of_defs_open_vars_commut</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="DOT.CanonicalForms.HeapCorrespondence.html#heap_defs_same_typ"><span class="id" title="lemma">heap_defs_same_typ</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="DOT.Safety.Preservation.html#preservation_kon_ty_ds"><span class="id" title="lemma">preservation_kon_ty_ds</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="preservation_kon_ty_body"><span class="id" title="lemma">preservation_kon_ty_body</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">Gamma</span> <span class="id" title="var">Sigma</span> <span class="id" title="var">k</span> <span class="id" title="var">Ts</span> <span class="id" title="var">is'</span> <span class="id" title="var">T</span> <span class="id" title="var">xs</span> <span class="id" title="var">avs</span> <span class="id" title="var">x</span> <span class="id" title="var">ds</span> <span class="id" title="var">t</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.CanonicalForms.RecordAndInertTypes.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="DOT.Safety.Preservation.html#Gamma"><span class="id" title="variable">Gamma</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.CanonicalForms.HeapCorrespondence.html#heap_correspond"><span class="id" title="definition">heap_correspond</span></a> <a class="idref" href="DOT.Safety.Preservation.html#Gamma"><span class="id" title="variable">Gamma</span></a> <a class="idref" href="DOT.Safety.Preservation.html#Sigma"><span class="id" title="variable">Sigma</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Safety.Preservation.html#Gamma"><span class="id" title="variable">Gamma</span></a> <a class="idref" href="DOT.Definitions.TypingClasses.Typing.html#3db3136034a83ac4081977ececfc4888"><span class="id" title="notation">⊢</span></a> <a class="idref" href="DOT.Definitions.Syntax.Terms.html#trm_var"><span class="id" title="constructor">trm_var</span></a> (<a class="idref" href="DOT.Definitions.Syntax.Vars.html#avar_f"><span class="id" title="constructor">avar_f</span></a> <a class="idref" href="DOT.Safety.Preservation.html#k"><span class="id" title="variable">k</span></a>) <a class="idref" href="DOT.Definitions.TypingClasses.Typing.html#3db3136034a83ac4081977ececfc4888"><span class="id" title="notation">∶</span></a> <a class="idref" href="DOT.Definitions.Syntax.Types.html#typ_con"><span class="id" title="constructor">typ_con</span></a> <a class="idref" href="DOT.Safety.Preservation.html#Ts"><span class="id" title="variable">Ts</span></a> <a class="idref" href="DOT.Safety.Preservation.html#is'"><span class="id" title="variable">is'</span></a> <a class="idref" href="DOT.Safety.Preservation.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">length</span> <a class="idref" href="DOT.Safety.Preservation.html#xs"><span class="id" title="variable">xs</span></a> <span class="id" title="notation">=</span> <a class="idref" href="DOT.Lib.SyntaxClasses.html#length_s"><span class="id" title="definition">length_s</span></a> <a class="idref" href="DOT.Safety.Preservation.html#Ts"><span class="id" title="variable">Ts</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Definitions.Syntax.Vars.html#vars_of_avars"><span class="id" title="inductive">vars_of_avars</span></a> <a class="idref" href="DOT.Safety.Preservation.html#xs"><span class="id" title="variable">xs</span></a> <a class="idref" href="DOT.Safety.Preservation.html#avs"><span class="id" title="variable">avs</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Safety.Preservation.html#Gamma"><span class="id" title="variable">Gamma</span></a> <a class="idref" href="DOT.Definitions.TypingClasses.Typing.html#18e6d19815cc1c2f71d9cd6c6234b36b"><span class="id" title="notation">⊢</span></a> <a class="idref" href="DOT.Safety.Preservation.html#avs"><span class="id" title="variable">avs</span></a> <a class="idref" href="DOT.Definitions.TypingClasses.Typing.html#18e6d19815cc1c2f71d9cd6c6234b36b"><span class="id" title="notation">::</span></a> <a class="idref" href="DOT.Safety.Preservation.html#Ts"><span class="id" title="variable">Ts</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Safety.Preservation.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">#</span> <a class="idref" href="DOT.Safety.Preservation.html#Gamma"><span class="id" title="variable">Gamma</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">binds</span> <a class="idref" href="DOT.Safety.Preservation.html#k"><span class="id" title="variable">k</span></a> (<a class="idref" href="DOT.Definitions.Syntax.Items.html#item_lit"><span class="id" title="constructor">item_lit</span></a> (<a class="idref" href="DOT.Definitions.Syntax.Terms.html#lit_con"><span class="id" title="constructor">lit_con</span></a> <a class="idref" href="DOT.Safety.Preservation.html#Ts"><span class="id" title="variable">Ts</span></a> <a class="idref" href="DOT.Safety.Preservation.html#is'"><span class="id" title="variable">is'</span></a> <a class="idref" href="DOT.Safety.Preservation.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="DOT.Safety.Preservation.html#ds"><span class="id" title="variable">ds</span></a> <a class="idref" href="DOT.Safety.Preservation.html#t"><span class="id" title="variable">t</span></a>)) <a class="idref" href="DOT.Safety.Preservation.html#Sigma"><span class="id" title="variable">Sigma</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">exists</span> <span class="id" title="var">T'</span><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Safety.Preservation.html#Gamma"><span class="id" title="variable">Gamma</span></a> <span class="id" title="notation">&amp;</span> <a class="idref" href="DOT.Safety.Preservation.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">~</span> <a class="idref" href="DOT.Definitions.Syntax.Types.html#typ_bnd"><span class="id" title="constructor">typ_bnd</span></a> (<a class="idref" href="DOT.Lib.SyntaxClasses.html#open_rec_vars"><span class="id" title="definition">open_rec_vars</span></a> 1 <a class="idref" href="DOT.Safety.Preservation.html#xs"><span class="id" title="variable">xs</span></a> <a class="idref" href="DOT.Safety.Preservation.html#T"><span class="id" title="variable">T</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Definitions.TypingClasses.Typing.html#3db3136034a83ac4081977ececfc4888"><span class="id" title="notation">⊢</span></a> <a class="idref" href="DOT.Lib.SyntaxClasses.html#open_vars"><span class="id" title="abbreviation">open_vars</span></a> (<a class="idref" href="DOT.Safety.Preservation.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">::</span> <a class="idref" href="DOT.Safety.Preservation.html#xs"><span class="id" title="variable">xs</span></a>) <a class="idref" href="DOT.Safety.Preservation.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="DOT.Definitions.TypingClasses.Typing.html#3db3136034a83ac4081977ececfc4888"><span class="id" title="notation">∶</span></a> <a class="idref" href="DOT.Lib.SyntaxClasses.html#open_vars"><span class="id" title="abbreviation">open_vars</span></a> (<a class="idref" href="DOT.Safety.Preservation.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">::</span> <a class="idref" href="DOT.Safety.Preservation.html#xs"><span class="id" title="variable">xs</span></a>) <a class="idref" href="DOT.Safety.Preservation.html#T'"><span class="id" title="variable">T'</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> * <span class="id" title="var">Hin</span> <span class="id" title="var">Hhc</span> <span class="id" title="var">Htyk</span> <span class="id" title="var">Hlen</span> <span class="id" title="var">Hxsavs</span> <span class="id" title="var">HavsTs</span> <span class="id" title="var">HxfrS</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="DOT.CanonicalForms.CanonicalForms.html#canonical_forms_con"><span class="id" title="lemma">canonical_forms_con</span></a> <span class="id" title="var">Hin</span> <span class="id" title="var">Hhc</span> <span class="id" title="var">Htyk</span>) <span class="id" title="keyword">as</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="var">L</span> [?<span class="id" title="var">ds</span> [?<span class="id" title="var">t</span> [<span class="id" title="var">T'</span> [?<span class="id" title="var">HbikS</span> [?<span class="id" title="var">HbikG</span> [<span class="id" title="var">_</span> ?<span class="id" title="var">Htyt</span>]]]]]]];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> ?<span class="id" title="var">HbikS</span>; <span class="id" title="var">binds_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">T'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="DOT.Definitions.TypingClasses.PreTyping.html#bnd_intro"><span class="id" title="lemma">bnd_intro</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="DOT.Lib.SyntaxClasses.html#open_vars_S_commut"><span class="id" title="lemma">open_vars_S_commut</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="DOT.GeneralTyping.RenameConstructors.html#rename_con_vars_open_push"><span class="id" title="lemma">rename_con_vars_open_push</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Preservation for constructor applications 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="preservation_kon_elim"><span class="id" title="lemma">preservation_kon_elim</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">Gamma</span> <span class="id" title="var">Delta</span> <span class="id" title="var">ℰs</span> <span class="id" title="var">effss</span> <span class="id" title="var">k</span> <span class="id" title="var">avs</span> <span class="id" title="var">s</span> <span class="id" title="var">Sigma</span> <span class="id" title="var">c'</span> <span class="id" title="var">U</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Safety.ConfigTyping.html#ty_config"><span class="id" title="inductive">ty_config</span></a> <a class="idref" href="DOT.Safety.Preservation.html#Gamma"><span class="id" title="variable">Gamma</span></a> <a class="idref" href="DOT.Safety.Preservation.html#Delta"><span class="id" title="variable">Delta</span></a> <a class="idref" href="DOT.Safety.Preservation.html#95fdeea536fdcd18a2894301ecf05ec6"><span class="id" title="variable">ℰs</span></a> <a class="idref" href="DOT.Safety.Preservation.html#effss"><span class="id" title="variable">effss</span></a> (<a class="idref" href="DOT.Definitions.Syntax.Terms.html#trm_new"><span class="id" title="constructor">trm_new</span></a> (<a class="idref" href="DOT.Definitions.Syntax.Vars.html#avar_f"><span class="id" title="constructor">avar_f</span></a> <a class="idref" href="DOT.Safety.Preservation.html#k"><span class="id" title="variable">k</span></a>) <a class="idref" href="DOT.Safety.Preservation.html#avs"><span class="id" title="variable">avs</span></a><a class="idref" href="DOT.Definitions.Syntax.AbstractMachine.html#853ef4438aa18d93c7ce9a7ed5bb14bd"><span class="id" title="notation">;</span></a> <a class="idref" href="DOT.Safety.Preservation.html#s"><span class="id" title="variable">s</span></a><a class="idref" href="DOT.Definitions.Syntax.AbstractMachine.html#853ef4438aa18d93c7ce9a7ed5bb14bd"><span class="id" title="notation">;</span></a> <a class="idref" href="DOT.Safety.Preservation.html#Sigma"><span class="id" title="variable">Sigma</span></a>) <a class="idref" href="DOT.Safety.Preservation.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Definitions.OperationalSemantics.OperationalSemantics.html#5a6f9eabadac3f4f365369582d682367"><span class="id" title="notation">(</span></a><a class="idref" href="DOT.Definitions.Syntax.Terms.html#trm_new"><span class="id" title="constructor">trm_new</span></a> (<a class="idref" href="DOT.Definitions.Syntax.Vars.html#avar_f"><span class="id" title="constructor">avar_f</span></a> <a class="idref" href="DOT.Safety.Preservation.html#k"><span class="id" title="variable">k</span></a>) <a class="idref" href="DOT.Safety.Preservation.html#avs"><span class="id" title="variable">avs</span></a><a class="idref" href="DOT.Definitions.Syntax.AbstractMachine.html#853ef4438aa18d93c7ce9a7ed5bb14bd"><span class="id" title="notation">;</span></a> <a class="idref" href="DOT.Safety.Preservation.html#s"><span class="id" title="variable">s</span></a><a class="idref" href="DOT.Definitions.Syntax.AbstractMachine.html#853ef4438aa18d93c7ce9a7ed5bb14bd"><span class="id" title="notation">;</span></a> <a class="idref" href="DOT.Safety.Preservation.html#Sigma"><span class="id" title="variable">Sigma</span></a><a class="idref" href="DOT.Definitions.OperationalSemantics.OperationalSemantics.html#5a6f9eabadac3f4f365369582d682367"><span class="id" title="notation">)</span></a> <a class="idref" href="DOT.Definitions.OperationalSemantics.OperationalSemantics.html#5a6f9eabadac3f4f365369582d682367"><span class="id" title="notation">↦</span></a> <a class="idref" href="DOT.Safety.Preservation.html#c'"><span class="id" title="variable">c'</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">exists</span> <span class="id" title="var">Gamma'</span> <span class="id" title="var">Delta'</span> <span class="id" title="var">ℰs</span> <span class="id" title="var">effss'</span><span class="id" title="notation">,</span> <a class="idref" href="DOT.Safety.ConfigTyping.html#ty_config"><span class="id" title="inductive">ty_config</span></a> (<a class="idref" href="DOT.Safety.Preservation.html#Gamma"><span class="id" title="variable">Gamma</span></a> <span class="id" title="notation">&amp;</span> <a class="idref" href="DOT.Safety.Preservation.html#Gamma'"><span class="id" title="variable">Gamma'</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Safety.Preservation.html#Delta'"><span class="id" title="variable">Delta'</span></a> <a class="idref" href="DOT.Safety.Preservation.html#95fdeea536fdcd18a2894301ecf05ec6"><span class="id" title="variable">ℰs</span></a> <a class="idref" href="DOT.Safety.Preservation.html#effss'"><span class="id" title="variable">effss'</span></a> <a class="idref" href="DOT.Safety.Preservation.html#c'"><span class="id" title="variable">c'</span></a> <a class="idref" href="DOT.Safety.Preservation.html#U"><span class="id" title="variable">U</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> 1<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> [?<span class="id" title="var">Gamma</span> ?<span class="id" title="var">Delta</span> ?<span class="id" title="var">Sigma</span> ?<span class="id" title="var">ℰ</span> ?<span class="id" title="var">ℰs</span> ?<span class="id" title="var">s</span> ?<span class="id" title="var">t</span> ?<span class="id" title="var">T</span> ?<span class="id" title="var">i</span> ?<span class="id" title="var">U</span> ?<span class="id" title="var">effs'</span> ?<span class="id" title="var">effs</span> ?<span class="id" title="var">effss</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;?<span class="id" title="var">Hin</span> ?<span class="id" title="var">HinD</span> ?<span class="id" title="var">Hhc</span> ?<span class="id" title="var">Hfshs</span> ?<span class="id" title="var">Hts</span> ?<span class="id" title="var">Hty</span> ?<span class="id" title="var">Hef</span> ?<span class="id" title="var">Hit</span> ?<span class="id" title="var">Hecc</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Invert&nbsp;reduction&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> 1; <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">rename</span> <span class="id" title="var">H0</span> <span class="id" title="var">into</span> <span class="id" title="var">Hred</span>, <span class="id" title="var">H5</span> <span class="id" title="var">into</span> <span class="id" title="var">Hfr</span>, <span class="id" title="var">H6</span> <span class="id" title="var">into</span> <span class="id" title="var">Hninds</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">H8</span> <span class="id" title="var">into</span> <span class="id" title="var">Hbik</span>, <span class="id" title="var">H9</span> <span class="id" title="var">into</span> <span class="id" title="var">Hlen</span>, <span class="id" title="var">H10</span> <span class="id" title="var">into</span> <span class="id" title="var">Hvavs</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Invert&nbsp;free&nbsp;sub_heaps&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="DOT.HeapEffInit.InitCorrespondence.html#free_sub_heaps_well_committed"><span class="id" title="lemma">free_sub_heaps_well_committed</span></a> <span class="id" title="var">Hfshs</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hwc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> <span class="id" title="var">Hwc</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">HGD</span> [<span class="id" title="var">HDS</span> <span class="id" title="var">_</span>]].<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Induct/Invert&nbsp;on&nbsp;typing&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="DOT.Definitions.Syntax.Terms.html#trm_new"><span class="id" title="constructor">trm_new</span></a> (<a class="idref" href="DOT.Definitions.Syntax.Vars.html#avar_f"><span class="id" title="constructor">avar_f</span></a> <span class="id" title="var">k</span>) <span class="id" title="var">avs</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">z</span> <span class="id" title="var">eqn</span>:<span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Hty</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Heq</span>; <span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span> 4 <span class="id" title="keyword">using</span> <a class="idref" href="DOT.Safety.StackTyping.html#ty_stack_sub"><span class="id" title="lemma">ty_stack_sub</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">Heq</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">IHHty</span>. <span class="id" title="var">item_inv</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">H0</span> <span class="id" title="var">into</span> <span class="id" title="var">Ht</span>. <span class="id" title="tactic">rename</span> <span class="id" title="var">H3</span> <span class="id" title="var">into</span> <span class="id" title="var">HfrxG</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">Hfr</span> <span class="id" title="var">into</span> <span class="id" title="var">HfrxS</span>. <span class="id" title="tactic">rename</span> <span class="id" title="var">H5</span> <span class="id" title="var">into</span> <span class="id" title="var">Hbix</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">G</span> <span class="id" title="var">into</span> <span class="id" title="var">Gamma</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="DOT.CanonicalForms.CanonicalForms.html#var_typ_con_to_binds"><span class="id" title="lemma">var_typ_con_to_binds</span></a> <span class="id" title="var">Hin</span> <span class="id" title="var">Ht</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hk</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="DOT.Lib.LibExtraEnv.html#binds_to_dom"><span class="id" title="lemma">binds_to_dom</span></a> <span class="id" title="var">Hk</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">HtyItm</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">Hhc</span> <span class="id" title="tactic">in</span> <span class="id" title="var">HtyItm</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">xs</span> <span class="id" title="notation">=</span> <span class="id" title="var">ys</span>) <span class="id" title="tactic">by</span> <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="DOT.Definitions.Syntax.Vars.html#vars_of_avars_eq"><span class="id" title="lemma">vars_of_avars_eq</span></a>; <span class="id" title="tactic">subst</span> <span class="id" title="var">xs</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Canonical&nbsp;forms&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="DOT.CanonicalForms.CanonicalForms.html#canonical_forms_con"><span class="id" title="lemma">canonical_forms_con</span></a> <span class="id" title="var">Hin</span> <span class="id" title="var">Hhc</span> <span class="id" title="var">Ht</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> [<span class="id" title="var">_</span> [?<span class="id" title="var">ds</span> [?<span class="id" title="var">t</span> [<span class="id" title="var">_</span> [?<span class="id" title="var">H</span> [?<span class="id" title="var">H</span> <span class="id" title="var">_</span>]]]]]]; <span class="id" title="tactic">repeat</span> <span class="id" title="var">binds_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">ds0</span> <span class="id" title="var">into</span> <span class="id" title="var">ds</span>. <span class="id" title="tactic">rename</span> <span class="id" title="var">t0</span> <span class="id" title="var">into</span> <span class="id" title="var">t</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">Ts0</span> <span class="id" title="var">into</span> <span class="id" title="var">Ts</span>. <span class="id" title="tactic">rename</span> <span class="id" title="var">is'0</span> <span class="id" title="var">into</span> <span class="id" title="var">is'</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">Delta</span> <span class="id" title="notation">&amp;</span> <span class="id" title="var">x</span> <span class="id" title="notation">~</span> <a class="idref" href="DOT.Definitions.Syntax.Types.html#free"><span class="id" title="constructor">free</span></a>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Gamma</span> <a class="idref" href="DOT.Initialization.InitVar.html#d417686deb0be68240eed0edb433ed87"><span class="id" title="notation">⸴</span></a> <span class="id" title="var">Delta</span> <a class="idref" href="DOT.Initialization.InitVar.html#d417686deb0be68240eed0edb433ed87"><span class="id" title="notation">⊢</span></a><a class="idref" href="DOT.Initialization.InitVar.html#d417686deb0be68240eed0edb433ed87"><span class="id" title="notation">c</span></a> <a class="idref" href="DOT.Definitions.Syntax.Terms.html#trm_var"><span class="id" title="constructor">trm_var</span></a> (<a class="idref" href="DOT.Definitions.Syntax.Vars.html#avar_f"><span class="id" title="constructor">avar_f</span></a> <span class="id" title="var">k</span>)) <span class="id" title="keyword">as</span> <span class="id" title="var">Hcommk</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hit</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">H0</span> <span class="id" title="var">into</span> <span class="id" title="var">Hnew</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hnew</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">auto</span>. }<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="DOT.HeapEffInit.HeapCommit.html#committed_heap_item"><span class="id" title="inductive">committed_heap_item</span></a> <span class="id" title="var">Gamma</span> <span class="id" title="var">Delta</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="DOT.Definitions.Syntax.Items.html#item_lit"><span class="id" title="constructor">item_lit</span></a> (<a class="idref" href="DOT.Definitions.Syntax.Terms.html#lit_con"><span class="id" title="constructor">lit_con</span></a> <span class="id" title="var">Ts</span> <span class="id" title="var">is'</span> <span class="id" title="var">T</span> <span class="id" title="var">ds</span> <span class="id" title="var">t</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> <span class="id" title="var">HcomItm</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hcommk</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">hnf</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hwc</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hwc</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">_</span> [<span class="id" title="var">_</span> <span class="id" title="var">HcomItm</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="DOT.Definitions.Effects.Effects.html#has_effs"><span class="id" title="definition">has_effs</span></a> (<a class="idref" href="DOT.Lib.SyntaxClasses.html#open_vars"><span class="id" title="abbreviation">open_vars</span></a> (<span class="id" title="var">x</span> <span class="id" title="notation">::</span> <span class="id" title="var">ys</span>) <span class="id" title="var">t</span>) (<a class="idref" href="DOT.Definitions.Effects.Effects.html#def_eff"><span class="id" title="definition">def_eff</span></a> <span class="id" title="var">x</span> <span class="id" title="var">ds</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> <span class="id" title="var">Hheffs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">inversion</span> <span class="id" title="var">HcomItm</span>; <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H5</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Hlen</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H11</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="DOT.Effects.EffectSubstitution.html#renaming_has_eff_con"><span class="id" title="lemma">renaming_has_eff_con</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hheffs</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">beff</span> [<span class="id" title="var">Hbeff</span> <span class="id" title="var">Hbfl</span>]].<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hit</span>; <span class="id" title="tactic">subst</span>. <span class="comment">(*&nbsp;Case&nbsp;split&nbsp;i&nbsp;*)</span><br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;Committed&nbsp;case&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">x</span> <span class="id" title="notation">~</span> <span class="id" title="notation">(</span><a class="idref" href="DOT.Definitions.Effects.Effects.html#def_eff"><span class="id" title="definition">def_eff</span></a> <span class="id" title="var">x</span> <span class="id" title="var">ds</span><span class="id" title="notation">)</span> <span class="id" title="notation">::</span> <span class="id" title="var">ℰ</span> <span class="id" title="notation">::</span> <span class="id" title="var">ℰs0</span>)%<span class="id" title="var">list</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="notation">(</span><span class="id" title="var">beff</span> <span class="id" title="notation">++</span> <span class="id" title="constructor">nil</span><span class="id" title="notation">)</span> <span class="id" title="notation">::</span> <span class="id" title="notation">(</span><span class="id" title="var">effs'</span> <span class="id" title="notation">++</span> <span class="id" title="var">effs</span><span class="id" title="notation">)</span> <span class="id" title="notation">::</span> <span class="id" title="var">effss0</span>)%<span class="id" title="var">list</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">H0</span> <span class="id" title="var">into</span> <span class="id" title="var">Htypk</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">HcomItm</span>; <span class="id" title="tactic">subst</span>. <span class="id" title="var">inversions</span> <span class="id" title="var">H5</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">H8</span> <span class="id" title="var">into</span> <span class="id" title="var">HisTs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">H11</span> <span class="id" title="var">into</span> <span class="id" title="var">Hteff</span>. <span class="id" title="tactic">rename</span> <span class="id" title="var">H12</span> <span class="id" title="var">into</span> <span class="id" title="var">Htinit</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">Hbix</span>. <span class="id" title="tactic">econstructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;Inert&nbsp;typing&nbsp;context&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">Hteff</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">Htinit</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="DOT.CanonicalForms.RecordAndInertTypes.html#inert_all"><span class="id" title="constructor">inert_all</span></a>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="DOT.CanonicalForms.HeapCorrespondence.html#heap_correspond_notin_dom"><span class="id" title="lemma">heap_correspond_notin_dom</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="DOT.CanonicalForms.RecordAndInertTypes.html#open_vars_record_type"><span class="id" title="lemma">open_vars_record_type</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">HtyItm</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">repeat</span> <span class="id" title="var">binds_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="DOT.CanonicalForms.InertGeneralSubtyping.html#inert_trm_con_record_type"><span class="id" title="lemma">inert_trm_con_record_type</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;Inert&nbsp;init&nbsp;context&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="DOT.HeapEffInit.InitCorrespondence.html#inert_inits_push"><span class="id" title="lemma">inert_inits_push</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;Heap&nbsp;correspondence&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="DOT.Safety.Preservation.html#preservation_kon_heap_corr"><span class="id" title="lemma">preservation_kon_heap_corr</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;Free&nbsp;sub&nbsp;heaps&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">Hteff</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">Htinit</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="DOT.HeapEffInit.HeapItemFree.html#def_eff_eq_hds"><span class="id" title="lemma">def_eff_eq_hds</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="DOT.Definitions.Syntax.Items.html#heap_defs_of_defs_open_vars_commut"><span class="id" title="lemma">heap_defs_of_defs_open_vars_commut</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="DOT.HeapEffInit.HeapItemFree.html#hds_effs_open_vars_eq"><span class="id" title="lemma">hds_effs_open_vars_eq</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">n</span>:=0) (<span class="id" title="var">ys</span>:=(<span class="id" title="var">x</span><span class="id" title="notation">::</span><span class="id" title="var">ys</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="DOT.HeapEffInit.InitCorrespondence.html#free_sub_heaps_new_obj_push"><span class="id" title="lemma">free_sub_heaps_new_obj_push</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">Gamma</span>:=<span class="id" title="var">Gamma</span>); <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;Stack&nbsp;typing&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">Hteff</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">Htinit</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="DOT.Safety.StackTyping.html#ty_stack_ret_committed"><span class="id" title="constructor">ty_stack_ret_committed</span></a>; <span class="id" title="tactic">eauto</span> 2.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">inversions</span> <span class="id" title="var">Hef</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">dom_single</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="DOT.Definitions.Initialization.InitTyping.html#init_var_binds"><span class="id" title="constructor">init_var_binds</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="DOT.Initialization.InitVar.html#init_var_free"><span class="id" title="constructor">init_var_free</span></a>; <span class="id" title="tactic">eauto</span> 2 <span class="id" title="keyword">using</span> <span class="id" title="lemma">in_singleton_self</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;Constructor&nbsp;body&nbsp;well-typed&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="DOT.Safety.Preservation.html#preservation_kon_ty_body"><span class="id" title="lemma">preservation_kon_ty_body</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Hin</span> <span class="id" title="var">Hhc</span> <span class="id" title="var">Ht</span> <span class="id" title="var">Hlen</span> <span class="id" title="var">Hvavs</span> <span class="id" title="var">H1</span> <span class="id" title="var">HfrxG</span> <span class="id" title="var">Hbik</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> [? ?]; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;open_vars&nbsp;version&nbsp;of&nbsp;renaming_fresh_effs&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;Renaming&nbsp;init.&nbsp;for&nbsp;constructors&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">Hteff</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Htypk</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="keyword">forall</span> <span class="id" title="var">y</span>, <a class="idref" href="DOT.Safety.Preservation.html#y"><span class="id" title="variable">y</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">in</span> <span class="id" title="definition">from_list</span> <span class="id" title="var">ys</span> <span class="id" title="notation">-&gt;</span> <span class="id" title="definition">binds</span> <a class="idref" href="DOT.Safety.Preservation.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="DOT.Definitions.Syntax.Types.html#committed"><span class="id" title="constructor">committed</span></a> <span class="id" title="var">Delta</span>) <span class="id" title="keyword">as</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Hyscom</span> <span class="id" title="tactic">by</span> (<span class="id" title="tactic">eapply</span> <a class="idref" href="DOT.Initialization.InitTypingLemmas.html#well_committed_vars_of_avars"><span class="id" title="lemma">well_committed_vars_of_avars</span></a>; <span class="id" title="tactic">eauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">H9</span> <span class="id" title="var">into</span> <span class="id" title="var">Hwcavs</span>. <span class="id" title="tactic">rename</span> <span class="id" title="var">H8</span> <span class="id" title="var">into</span> <span class="id" title="var">Hac</span>. <span class="id" title="tactic">rename</span> <span class="id" title="var">H4</span> <span class="id" title="var">into</span> <span class="id" title="var">Hwck</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">H5</span> <span class="id" title="var">into</span> <span class="id" title="var">Hktyp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> <span class="id" title="var">is'0</span> <span class="id" title="keyword">with</span> <span class="id" title="var">is'</span> <span class="id" title="tactic">in</span> * <span class="id" title="tactic">by</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="tactic">apply</span> <a class="idref" href="DOT.CanonicalForms.CanonicalForms.html#var_typ_con_to_binds"><span class="id" title="lemma">var_typ_con_to_binds</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hktyp</span>; <span class="id" title="tactic">repeat</span> <span class="id" title="var">binds_eq</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">dom_single</span>. <span class="id" title="tactic">rewrite</span> &lt;- (<span class="id" title="lemma">union_empty_l</span> <span class="id" title="notation">\{</span><span class="id" title="var">x</span><span class="id" title="notation">}</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="DOT.Initialization.InitSubstitution.html#ty_open_implies_ty_bnd_init"><span class="id" title="lemma">ty_open_implies_ty_bnd_init</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="DOT.Lib.SyntaxClasses.html#open_vars_S_commut"><span class="id" title="lemma">open_vars_S_commut</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="DOT.Initialization.InitRenaming.html#renaming_con"><span class="id" title="lemma">renaming_con</span></a>; <span class="id" title="tactic">eauto</span> 3.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="DOT.Initialization.InitTypingLemmas.html#all_comm_unspec_inits"><span class="id" title="lemma">all_comm_unspec_inits</span></a>; <span class="id" title="tactic">eauto</span> 3.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="DOT.Definitions.Syntax.Vars.html#length_vars_of_avars"><span class="id" title="lemma">length_vars_of_avars</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hvavs</span>. <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;Effects&nbsp;correspondence&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span> 3. <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">app_nil_r</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">hnf</span>. <span class="id" title="var">introv</span> <span class="id" title="var">Hx0bin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="DOT.Lib.LibExtraEnv.html#binds_to_dom"><span class="id" title="lemma">binds_to_dom</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hx0bin</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hx0eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">dom_single</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hx0eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="axiom">in_singleton</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hx0eq</span>. <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">binds_single_eq_inv</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hx0bin</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Heffs'0eq</span>. <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">Hx0bin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hbfl</span>; <span class="id" title="tactic">auto</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;Free&nbsp;case&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">ℰ</span> <span class="id" title="notation">&amp;</span> <span class="id" title="var">x</span> <span class="id" title="notation">~</span> <span class="id" title="notation">(</span><a class="idref" href="DOT.Definitions.Effects.Effects.html#def_eff"><span class="id" title="definition">def_eff</span></a> <span class="id" title="var">x</span> <span class="id" title="var">ds</span><span class="id" title="notation">)</span> <span class="id" title="notation">::</span> <span class="id" title="var">ℰs0</span>)%<span class="id" title="var">list</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="notation">(</span><span class="id" title="var">beff</span> <span class="id" title="notation">++</span> <span class="id" title="notation">(</span><span class="id" title="var">effs'</span> <span class="id" title="notation">++</span> <span class="id" title="var">effs</span><span class="id" title="notation">)</span> <span class="id" title="notation">++</span> <span class="id" title="constructor">nil</span><span class="id" title="notation">)</span> <span class="id" title="notation">::</span> <span class="id" title="var">effss0</span>)%<span class="id" title="var">list</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">H8</span> <span class="id" title="var">into</span> <span class="id" title="var">Htypk</span>. <span class="id" title="tactic">rename</span> <span class="id" title="var">H10</span> <span class="id" title="var">into</span> <span class="id" title="var">Havin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">H4</span> <span class="id" title="var">into</span> <span class="id" title="var">Hkcom</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">HcomItm</span>; <span class="id" title="tactic">subst</span>. <span class="id" title="var">inversions</span> <span class="id" title="var">H5</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">H11</span> <span class="id" title="var">into</span> <span class="id" title="var">Hteff</span>. <span class="id" title="tactic">rename</span> <span class="id" title="var">H12</span> <span class="id" title="var">into</span> <span class="id" title="var">Htinit</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">H8</span> <span class="id" title="var">into</span> <span class="id" title="var">Hlenis'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">Hbix</span>. <span class="id" title="tactic">econstructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;Inert&nbsp;typing&nbsp;context&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="DOT.CanonicalForms.RecordAndInertTypes.html#inert_all"><span class="id" title="constructor">inert_all</span></a>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="DOT.CanonicalForms.HeapCorrespondence.html#heap_correspond_notin_dom"><span class="id" title="lemma">heap_correspond_notin_dom</span></a>. <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="DOT.CanonicalForms.RecordAndInertTypes.html#open_vars_record_type"><span class="id" title="lemma">open_vars_record_type</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">HtyItm</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">repeat</span> <span class="id" title="var">binds_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="DOT.CanonicalForms.InertGeneralSubtyping.html#inert_trm_con_record_type"><span class="id" title="lemma">inert_trm_con_record_type</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;Inert&nbsp;init&nbsp;context&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="DOT.HeapEffInit.InitCorrespondence.html#inert_inits_push"><span class="id" title="lemma">inert_inits_push</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;Heap&nbsp;correspondence&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="DOT.Safety.Preservation.html#preservation_kon_heap_corr"><span class="id" title="lemma">preservation_kon_heap_corr</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;Free&nbsp;sub&nbsp;heaps&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">Hteff</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">Htinit</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="DOT.HeapEffInit.HeapItemFree.html#def_eff_eq_hds"><span class="id" title="lemma">def_eff_eq_hds</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="DOT.Definitions.Syntax.Items.html#heap_defs_of_defs_open_vars_commut"><span class="id" title="lemma">heap_defs_of_defs_open_vars_commut</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="DOT.HeapEffInit.HeapItemFree.html#hds_effs_open_vars_eq"><span class="id" title="lemma">hds_effs_open_vars_eq</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">n</span>:=0) (<span class="id" title="var">ys</span>:=(<span class="id" title="var">x</span><span class="id" title="notation">::</span><span class="id" title="var">ys</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="DOT.HeapEffInit.InitCorrespondence.html#free_sub_heaps_obj_push"><span class="id" title="lemma">free_sub_heaps_obj_push</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;Stack&nbsp;typing&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">Hteff</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">Htinit</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="DOT.Safety.StackTyping.html#ty_stack_ret_free"><span class="id" title="constructor">ty_stack_ret_free</span></a>; <span class="id" title="tactic">eauto</span> 2.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">inversions</span> <span class="id" title="var">Hef</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">app_nil_r</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="DOT.Safety.StackTyping.html#ty_stack_push"><span class="id" title="lemma">ty_stack_push</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hts</span>; <span class="id" title="tactic">eauto</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="DOT.Safety.StackTyping.html#234a9c53de1fc57e580264986135d9a1"><span class="id" title="lemma">ty_stack_push_ℰ</span></a>; <span class="id" title="tactic">eauto</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <a class="idref" href="DOT.Definitions.Initialization.InitTyping.html#init_var_binds"><span class="id" title="constructor">init_var_binds</span></a>. <span class="id" title="tactic">apply</span> <a class="idref" href="DOT.Initialization.InitVar.html#init_var_free"><span class="id" title="constructor">init_var_free</span></a>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <span class="id" title="lemma">binds_push_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">dom_concat</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="axiom">in_union</span>. <span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">dom_single</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="axiom">in_singleton</span>. <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;Constructor&nbsp;body&nbsp;well-typed&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="DOT.Safety.Preservation.html#preservation_kon_ty_body"><span class="id" title="lemma">preservation_kon_ty_body</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Hin</span> <span class="id" title="var">Hhc</span> <span class="id" title="var">Ht</span> <span class="id" title="var">Hlen</span> <span class="id" title="var">Hvavs</span> <span class="id" title="var">H1</span> <span class="id" title="var">HfrxG</span> <span class="id" title="var">Hbik</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> [? ?]; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;open_vars&nbsp;version&nbsp;of&nbsp;renaming_fresh_effs&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;open_vars&nbsp;version&nbsp;of&nbsp;renaming_fresh_init&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">Hteff</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="DOT.Initialization.InitSubstitution.html#ty_open_implies_ty_bnd_init"><span class="id" title="lemma">ty_open_implies_ty_bnd_init</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<a class="idref" href="DOT.Lib.SyntaxClasses.html#open"><span class="id" title="abbreviation">open</span></a> <span class="id" title="var">x</span> (<a class="idref" href="DOT.Lib.SyntaxClasses.html#open_rec_vars"><span class="id" title="definition">open_rec_vars</span></a> 1 <span class="id" title="var">ys</span> <span class="id" title="var">T</span>)) <span class="id" title="keyword">with</span> (<a class="idref" href="DOT.Lib.SyntaxClasses.html#open_vars"><span class="id" title="abbreviation">open_vars</span></a> (<span class="id" title="var">x</span> <span class="id" title="notation">::</span> <span class="id" title="var">ys</span>) <span class="id" title="var">T</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> (<span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="DOT.Lib.SyntaxClasses.html#open_vars_S_commut"><span class="id" title="lemma">open_vars_S_commut</span></a>; <span class="id" title="tactic">congruence</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">dom_concat</span>, <span class="id" title="lemma">dom_single</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="DOT.Initialization.InitRenaming.html#renaming_con"><span class="id" title="lemma">renaming_con</span></a>; <span class="id" title="tactic">eauto</span> 3.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="DOT.Definitions.Syntax.Types.html#typ_con"><span class="id" title="constructor">typ_con</span></a> <span class="id" title="var">Ts0</span> <span class="id" title="var">is'0</span> <span class="id" title="var">T0</span> <span class="id" title="notation">=</span> <a class="idref" href="DOT.Definitions.Syntax.Types.html#typ_con"><span class="id" title="constructor">typ_con</span></a> <span class="id" title="var">Ts</span> <span class="id" title="var">is'</span> <span class="id" title="var">T</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> <span class="id" title="var">Heq</span> <span class="id" title="tactic">by</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="tactic">apply</span> <a class="idref" href="DOT.CanonicalForms.CanonicalForms.html#var_typ_con_to_binds"><span class="id" title="lemma">var_typ_con_to_binds</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htypk</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="var">binds_eq</span>; <span class="id" title="tactic">auto</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Heq</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">Heq</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;Effects&nbsp;correspondence&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inversions</span> <span class="id" title="var">Hef</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">app_nil_r</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hecc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span> 3.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">inversions</span> <span class="id" title="var">Hecc</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">hnf</span>. <span class="id" title="var">introv</span> <span class="id" title="var">Hx0bin</span>. <span class="id" title="var">introv</span> <span class="id" title="var">Heffin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="DOT.Lib.LibExtraFset.html#from_list_concat"><span class="id" title="lemma">from_list_concat</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">binds_concat_inv</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hx0bin</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hx0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hx0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <span class="id" title="lemma">binds_single_inv</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="axiom">in_union</span>. <span class="id" title="tactic">left</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Hbfl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span>. <span class="id" title="var">inversions</span> <span class="id" title="var">Hecc</span>. <span class="id" title="tactic">rename</span> <span class="id" title="var">H9</span> <span class="id" title="var">into</span> <span class="id" title="var">Heffscor</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">H7</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">hnf</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heffscor</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="axiom">in_union</span>. <span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">Heffscor</span>; <span class="id" title="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="DOT.Safety.Preservation.html#PreservationKon"><span class="id" title="section">PreservationKon</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="preservation_var"><span class="id" title="lemma">preservation_var</span></a> :  <span class="id" title="keyword">forall</span> <span class="id" title="var">Gamma</span> <span class="id" title="var">Delta</span> <span class="id" title="var">ℰs</span> <span class="id" title="var">effss</span> <span class="id" title="var">x</span> <span class="id" title="var">s</span> <span class="id" title="var">Sigma</span> <span class="id" title="var">c</span> <span class="id" title="var">U</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Safety.ConfigTyping.html#ty_config"><span class="id" title="inductive">ty_config</span></a> <a class="idref" href="DOT.Safety.Preservation.html#Gamma"><span class="id" title="variable">Gamma</span></a> <a class="idref" href="DOT.Safety.Preservation.html#Delta"><span class="id" title="variable">Delta</span></a> <a class="idref" href="DOT.Safety.Preservation.html#95fdeea536fdcd18a2894301ecf05ec6"><span class="id" title="variable">ℰs</span></a> <a class="idref" href="DOT.Safety.Preservation.html#effss"><span class="id" title="variable">effss</span></a> (<a class="idref" href="DOT.Definitions.Syntax.Terms.html#trm_var"><span class="id" title="constructor">trm_var</span></a> (<a class="idref" href="DOT.Definitions.Syntax.Vars.html#avar_f"><span class="id" title="constructor">avar_f</span></a> <a class="idref" href="DOT.Safety.Preservation.html#x"><span class="id" title="variable">x</span></a>)<a class="idref" href="DOT.Definitions.Syntax.AbstractMachine.html#853ef4438aa18d93c7ce9a7ed5bb14bd"><span class="id" title="notation">;</span></a> <a class="idref" href="DOT.Safety.Preservation.html#s"><span class="id" title="variable">s</span></a><a class="idref" href="DOT.Definitions.Syntax.AbstractMachine.html#853ef4438aa18d93c7ce9a7ed5bb14bd"><span class="id" title="notation">;</span></a> <a class="idref" href="DOT.Safety.Preservation.html#Sigma"><span class="id" title="variable">Sigma</span></a>) <a class="idref" href="DOT.Safety.Preservation.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Definitions.OperationalSemantics.OperationalSemantics.html#5a6f9eabadac3f4f365369582d682367"><span class="id" title="notation">(</span></a><a class="idref" href="DOT.Definitions.Syntax.Terms.html#trm_var"><span class="id" title="constructor">trm_var</span></a> (<a class="idref" href="DOT.Definitions.Syntax.Vars.html#avar_f"><span class="id" title="constructor">avar_f</span></a> <a class="idref" href="DOT.Safety.Preservation.html#x"><span class="id" title="variable">x</span></a>)<a class="idref" href="DOT.Definitions.Syntax.AbstractMachine.html#853ef4438aa18d93c7ce9a7ed5bb14bd"><span class="id" title="notation">;</span></a> <a class="idref" href="DOT.Safety.Preservation.html#s"><span class="id" title="variable">s</span></a><a class="idref" href="DOT.Definitions.Syntax.AbstractMachine.html#853ef4438aa18d93c7ce9a7ed5bb14bd"><span class="id" title="notation">;</span></a> <a class="idref" href="DOT.Safety.Preservation.html#Sigma"><span class="id" title="variable">Sigma</span></a><a class="idref" href="DOT.Definitions.OperationalSemantics.OperationalSemantics.html#5a6f9eabadac3f4f365369582d682367"><span class="id" title="notation">)</span></a> <a class="idref" href="DOT.Definitions.OperationalSemantics.OperationalSemantics.html#5a6f9eabadac3f4f365369582d682367"><span class="id" title="notation">↦</span></a> <a class="idref" href="DOT.Safety.Preservation.html#c"><span class="id" title="variable">c</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">exists</span> <span class="id" title="var">Gamma'</span> <span class="id" title="var">Delta'</span> <span class="id" title="var">ℰs'</span> <span class="id" title="var">effss'</span><span class="id" title="notation">,</span> <a class="idref" href="DOT.Safety.ConfigTyping.html#ty_config"><span class="id" title="inductive">ty_config</span></a> (<a class="idref" href="DOT.Safety.Preservation.html#Gamma"><span class="id" title="variable">Gamma</span></a> <span class="id" title="notation">&amp;</span> <a class="idref" href="DOT.Safety.Preservation.html#Gamma'"><span class="id" title="variable">Gamma'</span></a>) <a class="idref" href="DOT.Safety.Preservation.html#Delta'"><span class="id" title="variable">Delta'</span></a> <a class="idref" href="DOT.Safety.Preservation.html#b6ca7b91d3649dc3e616ed45aceeb8ac"><span class="id" title="variable">ℰs'</span></a> <a class="idref" href="DOT.Safety.Preservation.html#effss'"><span class="id" title="variable">effss'</span></a> <a class="idref" href="DOT.Safety.Preservation.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="DOT.Safety.Preservation.html#U"><span class="id" title="variable">U</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> 1<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> [?<span class="id" title="var">Gamma</span> ?<span class="id" title="var">Delta</span> ?<span class="id" title="var">Sigma</span> ?<span class="id" title="var">ℰ</span> ?<span class="id" title="var">ℰs</span> ?<span class="id" title="var">s</span> ?<span class="id" title="var">t</span> ?<span class="id" title="var">T</span> ?<span class="id" title="var">i</span> ?<span class="id" title="var">U</span> ?<span class="id" title="var">effs'</span> ?<span class="id" title="var">effs</span> ?<span class="id" title="var">effss</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;?<span class="id" title="var">Hin</span> ?<span class="id" title="var">HinD</span> ?<span class="id" title="var">Hhc</span> ?<span class="id" title="var">Hfshs</span> ?<span class="id" title="var">Hts</span> ?<span class="id" title="var">Hty</span> ?<span class="id" title="var">Hef</span> ?<span class="id" title="var">Hit</span> ?<span class="id" title="var">Hecc</span>]; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> 1; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;Return&nbsp;from&nbsp;constructor&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eexists</span> <span class="id" title="axiom">empty</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">concat_empty_r</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="DOT.Safety.Preservation.html#preservation_return"><span class="id" title="lemma">preservation_return</span></a>.<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;Let&nbsp;continuation&nbsp;awaiting&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eexists</span> <span class="id" title="axiom">empty</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">concat_empty_r</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="DOT.Safety.Preservation.html#preservation_let_var"><span class="id" title="lemma">preservation_let_var</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Local Ltac</span> <span class="id" title="var">empty_exists</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eexists</span> <span class="id" title="axiom">empty</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">concat_empty_r</span>;<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [ <span class="id" title="var">D</span> : <a class="idref" href="DOT.Definitions.Syntax.Types.html#init_ctx"><span class="id" title="abbreviation">init_ctx</span></a> |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">exists</span> <span class="id" title="var">D</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Local Ltac</span> <span class="id" title="var">same_effs</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span> : <a class="idref" href="DOT.HeapEffInit.InitCorrespondence.html#eff_ctx_corr"><span class="id" title="inductive">eff_ctx_corr</span></a> ?<span class="id" title="var">ℰ</span> ?<span class="id" title="var">effss</span> |- <span class="id" title="var">_</span> ] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">ℰ</span> <span class="id" title="var">effss</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <a name="preservation"><span class="id" title="lemma">preservation</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">Gamma</span> <span class="id" title="var">Delta</span> <span class="id" title="var">ℰs</span> <span class="id" title="var">effss</span> <span class="id" title="var">c</span> <span class="id" title="var">c'</span> <span class="id" title="var">U</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Safety.ConfigTyping.html#ty_config"><span class="id" title="inductive">ty_config</span></a> <a class="idref" href="DOT.Safety.Preservation.html#Gamma"><span class="id" title="variable">Gamma</span></a> <a class="idref" href="DOT.Safety.Preservation.html#Delta"><span class="id" title="variable">Delta</span></a> <a class="idref" href="DOT.Safety.Preservation.html#95fdeea536fdcd18a2894301ecf05ec6"><span class="id" title="variable">ℰs</span></a> <a class="idref" href="DOT.Safety.Preservation.html#effss"><span class="id" title="variable">effss</span></a> <a class="idref" href="DOT.Safety.Preservation.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="DOT.Safety.Preservation.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DOT.Safety.Preservation.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="DOT.Definitions.OperationalSemantics.OperationalSemantics.html#5a6f9eabadac3f4f365369582d682367"><span class="id" title="notation">↦</span></a> <a class="idref" href="DOT.Safety.Preservation.html#c'"><span class="id" title="variable">c'</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">exists</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Gamma'</span> <span class="id" title="var">Delta'</span> <span class="id" title="var">ℰs'</span> <span class="id" title="var">effss'</span><span class="id" title="notation">,</span> <a class="idref" href="DOT.Safety.ConfigTyping.html#ty_config"><span class="id" title="inductive">ty_config</span></a> (<a class="idref" href="DOT.Safety.Preservation.html#Gamma"><span class="id" title="variable">Gamma</span></a> <span class="id" title="notation">&amp;</span> <a class="idref" href="DOT.Safety.Preservation.html#Gamma'"><span class="id" title="variable">Gamma'</span></a>) <a class="idref" href="DOT.Safety.Preservation.html#Delta'"><span class="id" title="variable">Delta'</span></a> <a class="idref" href="DOT.Safety.Preservation.html#b6ca7b91d3649dc3e616ed45aceeb8ac"><span class="id" title="variable">ℰs'</span></a> <a class="idref" href="DOT.Safety.Preservation.html#effss'"><span class="id" title="variable">effss'</span></a> <a class="idref" href="DOT.Safety.Preservation.html#c'"><span class="id" title="variable">c'</span></a> <a class="idref" href="DOT.Safety.Preservation.html#U"><span class="id" title="variable">U</span></a>.<br/>
<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">with</span> <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> 1<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> [?<span class="id" title="var">Gamma</span> ?<span class="id" title="var">Delta</span> ?<span class="id" title="var">Sigma</span> ?<span class="id" title="var">ℰ</span> ?<span class="id" title="var">ℰs</span> ?<span class="id" title="var">s</span> ?<span class="id" title="var">t</span> ?<span class="id" title="var">T</span> ?<span class="id" title="var">i</span> ?<span class="id" title="var">U</span> ?<span class="id" title="var">effs'</span> ?<span class="id" title="var">effs</span> ?<span class="id" title="var">effss</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;?<span class="id" title="var">Hin</span> ?<span class="id" title="var">HinD</span> ?<span class="id" title="var">Hhc</span> ?<span class="id" title="var">Hfshs</span> ?<span class="id" title="var">Hts</span> ?<span class="id" title="var">Hty</span> ?<span class="id" title="var">Hef</span> ?<span class="id" title="var">Hit</span> ?<span class="id" title="var">Hecc</span>]; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hred</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Hty</span>; <span class="id" title="tactic">eauto</span> 2 <span class="id" title="keyword">using</span> <a class="idref" href="DOT.Safety.Preservation.html#preservation_var"><span class="id" title="lemma">preservation_var</span></a>.<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;Application&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">empty_exists</span>; <span class="id" title="var">same_effs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="DOT.Safety.Preservation.html#preservation_app"><span class="id" title="lemma">preservation_app</span></a>.<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;Constructor&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="DOT.Safety.Preservation.html#preservation_kon_elim"><span class="id" title="lemma">preservation_kon_elim</span></a>.<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;Read&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">empty_exists</span>; <span class="id" title="var">same_effs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="DOT.Safety.Preservation.html#preservation_read"><span class="id" title="lemma">preservation_read</span></a>.<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;Write&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">empty_exists</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="DOT.Safety.Preservation.html#preservation_writes"><span class="id" title="lemma">preservation_writes</span></a>.<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;Term&nbsp;let&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">empty_exists</span>; <span class="id" title="var">same_effs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="DOT.Safety.Preservation.html#preservation_let_trm"><span class="id" title="lemma">preservation_let_trm</span></a>.<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;Let&nbsp;literals&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (@<a class="idref" href="DOT.Safety.Preservation.html#preservation_let_lit"><span class="id" title="lemma">preservation_let_lit</span></a> <span class="id" title="var">G</span> <span class="id" title="var">Delta</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">ℰ</span> <span class="id" title="notation">::</span> <span class="id" title="var">ℰs0</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((<span class="id" title="var">effs'</span> <span class="id" title="notation">++</span> <span class="id" title="var">effs</span>)%<span class="id" title="var">list</span> <span class="id" title="notation">::</span> <span class="id" title="var">effss0</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">T</span> <span class="id" title="var">l</span> <span class="id" title="var">u</span> <span class="id" title="var">s</span> <span class="id" title="var">Sigma</span> <span class="id" title="var">c'</span> <span class="id" title="var">U</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H</span> <span class="id" title="var">Hred</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hpl</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Gamma'</span> [<span class="id" title="var">Delta'</span> [<span class="id" title="var">ℰs'</span> <span class="id" title="var">Hpl</span>]]]...<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;Subtyping&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="DOT.Safety.StackTyping.html#ty_stack_sub"><span class="id" title="lemma">ty_stack_sub</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/tebbi/coqdocjs">CoqdocJS</a>
</div>
</div>
</body>

</html>
